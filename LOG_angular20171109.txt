/ See ANGULAR VS ANGULARJS
/ See WATCH PROCESSES IN WINDOWS
/ See LOMBOK
/ See GRADLE
/ See JAVA LAMBDAS
	FINAL LAMBDAS
/ See JAVA STREAMS
/ See SOAP SPRING BOOT SPRING-WS
/ See SOAP AXIS
/ See TOMCAT
	/ See START TOMCAT
/ See JENKINS
/ See PYTHON
/ See PIP
/ See VAADIN
/ See VIRTUALENV
/ See ANACONDA
/ See JAVA INSTALL
/ See SAMENVATTING FORGE COMMAND LINE
/ See WILDFLY-SWARM EXAMPLES
/ See REST JAVA-SWARM GELUKT
/ See ARQUILLIAN FIRST
/ See ARQUILLIAN SECOND
/ See WILDFLY-SWARM TODOS
/ See H2
/ See JDBC H2
/ See JAVA INSTALL
/ See DEBUG ARQUILLIAN TESTS IN WILDFLY REMOTE
/ See DEBUG ARQUILLIAN TESTS IN WILDFLY MANAGED
/ See SAMENVATTING FORGE ARQUILLIAN CREATE JPA PROJECT
/ See WILDFLY DATASOURCES 
/ See ARQUILLIAN FOURTH (JPA)

/ See TOMCAT 7 WINDOWS DEBUG
/ See JAVA PROJECT TEST
/ See JAXB
/ See TOMCAT LOGGING
/ See JSP 
/ See OPLOSSING ANT XJC
/ See WILDFLY SOURCE

/ See CXF ASM GENERATED TYPES SAYHI SAYHIRESPONSE




/ 7. 

/ copy from command line:

/ right click, mark,
/ select tekst, 
/ right click ergens in het scherm, of click enter (doe NIET link click), 
/ geeft ctrl-v


/ 7 .

/ we kunnen ook een Administrator command prompt open, voor npm	, 

/ Administrator command prompt:

C:\Users\ervelden>path
PATH=C:\Program Files (x86)\Intel\iCLS Client\;C:\Program Files\Intel\iCLS Clien
t\;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\WINDOWS\System32\W
indowsPowerShell\v1.0\;C:\WINDOWS\System32\WindowsPowerShell\v1.0\;C:\Program Fi
les\Intel\Intel(R) Management Engine Components\DAL;C:\Program Files (x86)\Intel
\Intel(R) Management Engine Components\DAL;C:\Program Files\Intel\Intel(R) Manag
ement Engine Components\IPT;C:\Program Files (x86)\Intel\Intel(R) Management Eng
ine Components\IPT;C:\Program Files\nodejs\;C:\WINDOWS\System32\WindowsPowerShel
l\v1.0\;C:\Users\ervelden\AppData\Roaming\npm

C:\Users\ervelden>where node
C:\Program Files\nodejs\node.exe

C:\Users\ervelden>where npm
C:\Program Files\nodejs\npm
C:\Program Files\nodejs\npm.cmd


/ Node.js command prompt:

C:\Users\ervelden>path
PATH=C:\Users\ervelden\AppData\Roaming\npm;C:\Program Files\nodejs\;C:\Program F
iles (x86)\Intel\iCLS Client\;C:\Program Files\Intel\iCLS Client\;C:\WINDOWS\sys
tem32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\WINDOWS\System32\WindowsPowerShell\
v1.0\;C:\WINDOWS\System32\WindowsPowerShell\v1.0\;C:\Program Files\Intel\Intel(R
) Management Engine Components\DAL;C:\Program Files (x86)\Intel\Intel(R) Managem
ent Engine Components\DAL;C:\Program Files\Intel\Intel(R) Management Engine Comp
onents\IPT;C:\Program Files (x86)\Intel\Intel(R) Management Engine Components\IP
T;C:\Program Files\nodejs\;C:\WINDOWS\System32\WindowsPowerShell\v1.0\;C:\Users\
ervelden\AppData\Roaming\npm

/ Wat de Node.js promt doet is vooraan het path set, maar ze staan er allebei al in: 
PATH=C:\Users\ervelden\AppData\Roaming\npm;C:\Program Files\nodejs\

C:\Users\ervelden>where node
C:\Program Files\nodejs\node.exe

C:\Users\ervelden>where npm
C:\Program Files\nodejs\npm
C:\Program Files\nodejs\npm.cmd


/ 7	.

/ Lees	,
https://angular.io/guide/quickstart

npm install -g @angular/cli

/ Waar hebben we installed?

C:\Users\ervelden>dir AppData\Roaming\npm
...
03-08-2017  15:19    <DIR>          etc
03-08-2017  15:56               329 ng
03-08-2017  15:56               206 ng.cmd
03-08-2017  15:56    <DIR>          node_modules

C:\Users\ervelden>dir AppData\Roaming\npm\node_modules
...
03-08-2017  15:56    <DIR>          @angular

C:\Users\ervelden>dir AppData\Roaming\npm\node_modules\@angular
...
03-08-2017  15:56    <DIR>          cli



C:\Users\ervelden>dir AppData\Roaming\npm\node_modules\@angular\cli
 Volume in drive C is System
 Volume Serial Number is 90D0-8A5A

 Directory of C:\Users\ervelden\AppData\Roaming\npm\node_modules\@angular\cli

03-08-2017  15:56    <DIR>          .
03-08-2017  15:56    <DIR>          ..
03-08-2017  15:55    <DIR>          bin
03-08-2017  15:55    <DIR>          blueprints
03-08-2017  15:55    <DIR>          commands
03-08-2017  15:55            11.747 CONTRIBUTING.md
03-08-2017  15:55    <DIR>          ember-cli
03-08-2017  15:55    <DIR>          lib
03-08-2017  15:55             1.073 LICENSE
03-08-2017  15:55    <DIR>          models
03-08-2017  15:56    <DIR>          node_modules
03-08-2017  15:56             4.160 package.json
03-08-2017  15:56    <DIR>          plugins
03-08-2017  15:55             7.980 README.md
03-08-2017  15:56    <DIR>          tasks
03-08-2017  15:56    <DIR>          upgrade
03-08-2017  15:56    <DIR>          utilities

/ 13	. 

/ Hoe kwamen we hierachter?

C:\Users\ervelden> dir *angular*/s

 Directory of C:\Users\ervelden\AppData\Roaming\npm\node_modules

03-08-2017  15:56    <DIR>          @angular
               0 File(s)              0 bytes

 Directory of C:\Users\ervelden\AppData\Roaming\npm\node_modules\@angular\cli\blueprints\ng\files

03-08-2017  15:55             1.735 angular-cli.json
               1 File(s)          1.735 bytes

 Directory of C:\Users\ervelden\AppData\Roaming\npm\node_modules\@angular\cli\node_modules\sprintf-js\demo

03-08-2017  15:55               690 angular.html
               1 File(s)            690 bytes

 Directory of C:\Users\ervelden\AppData\Roaming\npm\node_modules\@angular\cli\node_modules\sprintf-js\dist

03-08-2017  15:55               449 angular-sprintf.min.js
03-08-2017  15:55               429 angular-sprintf.min.js.map
03-08-2017  15:55               429 angular-sprintf.min.map
               3 File(s)          1.307 bytes

 Directory of C:\Users\ervelden\AppData\Roaming\npm\node_modules\@angular\cli\node_modules\sprintf-js\src

03-08-2017  15:55               490 angular-sprintf.js
               1 File(s)            490 bytes

 Directory of C:\Users\ervelden\AppData\Roaming\npm-cache

03-08-2017  15:55    <DIR>          @angular
               0 File(s)              0 bytes

 Directory of C:\Users\ervelden\AppData\Roaming\npm-cache\registry.npmjs.org

03-08-2017  15:55    <DIR>          _40angular_252fcli
               0 File(s)              0 bytes

/ 13


C:\Users\ervelden\my-ng-apps>ng new my-app
installing ng
  create .editorconfig
  create README.md
  create src\app\app.component.css
  create src\app\app.component.html
  create src\app\app.component.spec.ts
  create src\app\app.component.ts
  create src\app\app.module.ts
  create src\assets\.gitkeep
  create src\environments\environment.prod.ts
  create src\environments\environment.ts
  create src\favicon.ico
  create src\index.html
  create src\main.ts
  create src\polyfills.ts
  create src\styles.css
  create src\test.ts
  create src\tsconfig.app.json
  create src\tsconfig.spec.json
  create src\typings.d.ts
  create .angular-cli.json
  create e2e\app.e2e-spec.ts
  create e2e\app.po.ts
  create e2e\tsconfig.e2e.json
  create .gitignore
  create karma.conf.js
  create package.json
  create protractor.conf.js
  create tsconfig.json
  create tslint.json
Installing packages for tooling via npm.
Installed packages for tooling via npm.
Project 'my-app' successfully created.

/ 13	 .

/ Lees
https://angular.io/guide/quickstart

/ 13	. 

C:\Users\ervelden\my-ng-apps\my-app>ng serve
** NG Live Development Server is listening on localhost:4200, open your browser on http://localhost:4200 **
Hash: 8027d633a01ef6fcffb3
Time: 9912ms
chunk    {0} polyfills.bundle.js, polyfills.bundle.js.map (polyfills) 177 kB {4} [initial] [rendered]
chunk    {1} main.bundle.js, main.bundle.js.map (main) 5.36 kB {3} [initial] [rendered]
chunk    {2} styles.bundle.js, styles.bundle.js.map (styles) 10.5 kB {4} [initial] [rendered]
chunk    {3} vendor.bundle.js, vendor.bundle.js.map (vendor) 2.19 MB [initial] [rendered]
chunk    {4} inline.bundle.js, inline.bundle.js.map (inline) 0 bytes [entry] [rendered]
webpack: Compiled successfully.

/ start Visual Studio Code

/ Om command in de editor, 
View, integrated Terminal

/ click het File icon, we krijgen Open Folder, kies de folder waarvan we de files willen zien,
\Users\ervelden\my-ng-apps\my-app

/ 13	. 

/ je kunt 
File
	Open Folder
	Close Folder

/ 13	. 

http://www.hoejetypt.nl/letter/Kleine%20letter%20i%20met%20umlaut

/ we kunnen ï geven door 
/ 1. Num lock aan te set, en links Alt ingedrukt te houden en 139 te geven
/ 2. "i achter elkaar in te typen,          dit heet dodeletter type, dodetoetsmethode	,

/ soms kan ook dit:
/ 3. rechts Alt ingedrukt te houden, en i in te typen: í

/ 13	. 

http://www.hoejetypt.nl/uitleg.php

Hoe typ je een `ò` met de dodetoetsenmethode? 
1. Typ ^ 
2. Typ o. De ô verschijnt. 

1. Typ ' 
2. Typ o. De ó verschijnt. 

1. Typ ` 
2. Typ o. De ò verschijnt. 

1. Typ " 
2. Typ o. De ö verschijnt. 

1. Typ ~ 
2. Typ o. De õ verschijnt.


/ 13	.

C:\Users\ervelden\my-ng-apps\my-app>ng build
Hash: 741e708f8f2c5b141d1a
Time: 7046ms
chunk    {0} polyfills.bundle.js, polyfills.bundle.js.map (polyfills) 177 kB {4} [initial] [rendered]
chunk    {1} main.bundle.js, main.bundle.js.map (main) 5.45 kB {3} [initial] [rendered]
chunk    {2} styles.bundle.js, styles.bundle.js.map (styles) 10.5 kB {4} [initial] [rendered]
chunk    {3} vendor.bundle.js, vendor.bundle.js.map (vendor) 1.89 MB [initial] [rendered]
chunk    {4} inline.bundle.js, inline.bundle.js.map (inline) 0 bytes [entry] [rendered]

/ de app is in app.component.ts
/ de test is in app.component.spec.ts

/ als we ng test, verschijnt er een chrome window, en daarin zien we de tests,
/ als we app.component.ts edit, en save, worden de tests opnieuw run in hetzelfde browser window, 
/ de app zelf wordt ook update,

/ als de tests OK,

AppComponent
should create the app
should have as title 'app'
should render title in a h1 tag


/ als de tests fout,

C:\Users\ervelden\my-ng-apps\my-app>ng test
 10% building modules 1/1 modules 0 active08 08 2017 14:44:59.730:WARN [karma]: No captured browser, open http://localhost:9876/
08 08 2017 14:44:59.746:INFO [karma]: Karma v1.7.0 server started at http://0.0.0.0:9876/
08 08 2017 14:44:59.746:INFO [launcher]: Launching browser Chrome with unlimited concurrency
08 08 2017 14:44:59.746:INFO [launcher]: Starting browser Chrome
08 08 2017 14:45:05.801:WARN [karma]: No captured browser, open http://localhost:9876/
08 08 2017 14:45:06.407:INFO [Chrome 59.0.3071 (Windows 7 0.0.0)]: Connected on socket YR80MF1v6LisgfHdAAAA with id 17068396
Chrome 59.0.3071 (Windows 7 0.0.0) AppComponent should have as title 'app' FAILED
        Expected 'My Third Angular App' to equal 'app'.
            at Object.<anonymous> C:/Users/ervelden/my-ng-apps/my-app/src/app/app.component.spec.ts:23:23)
            at ZoneDelegate.webpackJsonp.../../../../zone.js/dist/zone.js.ZoneDelegate.invoke C:/Users/ervelden/my-ng-apps/my-app/~/zone.js/dist/zone.js:391:1)
            at AsyncTestZoneSpec.webpackJsonp.../../../../zone.js/dist/async-test.js.AsyncTestZoneSpec.onInvoke C:/Users/ervelden/my-ng-apps/my-app/~/zone.js/dist/async-test.js:49:1)
            at ProxyZoneSpec.webpackJsonp.../../../../zone.js/dist/proxy.js.ProxyZoneSpec.onInvoke C:/Users/ervelden/my-ng-apps/my-app/~/zone.js/dist/proxy.js:76:1)
Chrome 59.0.3071 (Windows 7 0.0.0): Executed 2 of 3 (1 FAILED) (0 secs / 0.319 secs)
Chrome 59.0.3071 (Windows 7 0.0.0) AppComponent should have as title 'app' FAILED
        Expected 'My Third Angular App' to equal 'app'.
            at Object.<anonymous> C:/Users/ervelden/my-ng-apps/my-app/src/app/app.component.spec.ts:23:23)
            at ZoneDelegate.webpackJsonp.../../../../zone.js/dist/zone.js.ZoneDelegate.invoke C:/Users/ervelden/my-ng-apps/my-app/~/zone.js/dist/zone.js:391:1)
            at AsyncTestZoneSpec.webpackJsonp.../../../../zone.js/dist/async-test.js.AsyncTestZoneSpec.onInvoke C:/Users/ervelden/my-ng-apps/my-app/~/zone.js/dist/async-test.js:49:1)
Chrome 59.0.3071 (Windows 7 0.0.0) AppComponent should render title in a h1 tag FAILED
        Expected '
            Welcome to My Third Angular App!
          ' to contain 'Welcome to app!'.
            at Object.<anonymous> C:/Users/ervelden/my-ng-apps/my-app/src/app/app.component.spec.ts:30:54)
            at ZoneDelegate.webpackJsonp.../../../../zone.js/dist/zone.js.ZoneDelegate.invoke C:/Users/ervelden/my-ng-apps/my-app/~/zone.js/dist/zone.js:391:1)
            at AsyncTestZoneSpec.webpackJsonp.../../../../zone.js/dist/async-test.js.AsyncTestZoneSpec.onInvoke C:/Users/ervelden/my-ng-apps/my-app/~/zone.js/dist/async-test.js:49:1)
            at ProxyZoneSpec.webpackJsonp.../../../../zone.js/dist/proxy.js.ProxyZoneSpec.onInvoke C:/Users/ervelden/my-ng-apps/my-app/~/zone.js/dist/proxy.js:76:1)
Chrome 59.0.3071 (Windows 7 0.0.0): Executed 3 of 3 (2 FAILED) (0 secs / 0.355 secs)
Chrome 59.0.3071 (Windows 7 0.0.0) AppComponent should render title in a h1 tag FAILED
        Expected '
            Welcome to My Third Angular App!
          ' to contain 'Welcome to app!'.
            at Object.<anonymous> C:/Users/ervelden/my-ng-apps/my-app/src/app/app.component.spec.ts:30:54)
            at ZoneDelegate.webpackJsonp.../../../../zone.js/dist/zone.js.ZoneDelegate.invoke C:/Users/ervelden/my-ng-apps/my-app/~/zone.js/dist/zone.js:391:1)
            at AsyncTestZoneSpec.webpackJsonp.../../../../zone.js/dist/async-test.js.AsyncTestZoneSpec.onInvoke C:/Users/ervelden/my-ng-apps/my-app/~/zone.js/dist/async-test.js:49:1)
Chrome 59.0.3071 (Windows 7 0.0.0): Executed 3 of 3 (2 FAILED) (0.379 secs / 0.355 secs)

/ 13	. 

/ er zien in visual studio code, in output onderin, naast terminal

Alternatively you can disable ESLint for this workspace by executing the 'Disable ESLint for this workspace' command.

[Info  - 14:51:09] 

Failed to load the ESLint library for the document c:\Users\ervelden\my-ng-apps\my-app\protractor.conf.js


To use ESLint in this workspace please install eslint using 'npm install eslint' or globally using 'npm install -g eslint'.
You need to reopen the workspace after installing eslint.


C:\Users\ervelden\my-ng-apps\my-app>npm install -g eslint

C:\Users\ervelden\my-ng-apps\my-app>dir C:\Users\ervelden\AppData\Roaming\npm\node_modules
 Volume in drive C is System
 Volume Serial Number is 90D0-8A5A

 Directory of C:\Users\ervelden\AppData\Roaming\npm\node_modules

08-08-2017  15:07    <DIR>          .
08-08-2017  15:07    <DIR>          ..
03-08-2017  15:56    <DIR>          @angular
08-08-2017  15:07    <DIR>          eslint

/ 13	. 

/ Lees over karma , en jasmine,
http://accraze.info/testing-an-angularjs-app-using-jasmine-and-karma/
http://yeoman.io/codelab/run-unit-tests.html
https://angular.io/guide/testing                    / onder Fundamentals , (naast Getting started, Tutorial)
https://mochajs.org/#getting-started

/ 13.

/ JAVA INSTALL

/ 7	.


/ we install java,
http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html
/ in,
C:\Users\ervelden>dir "\Program Files\Java\jdk1.8.0_144"

/ Lees,
http://docs.oracle.com/javase/8/docs/

/ we zien verwarrend in System variables:
C:\ProgramData\Oracle\Java\javapath
/ Dit is WH een jre, 
/ we hebben de jdk installed , 
\Program Files\Java\jdk1.8.0_144\
/ Hierin zit lib\tools.jar

C:\Users\ervelden\eclipse\workspace-java-oxygen\lombok>"\Program Files"\Java\jdk1.8.0_144\bin\java -version
/ OK
C:\Users\ervelden\eclipse\workspace-java-oxygen\lombok>"\Program Files"\Java\jdk1.8.0_144\bin\java.exe -version

/ we zien in

Environment variables
JAVA_HOME C:\Program Files\Java\jdk1.8.0_144
Path %JAVA_HOME%\bin;...

System variables
Path: C:\ProgramData\Oracle\Java\javapath;...

/ Dit is WH de jre1.8.0_144, 
/ TODO

/ we willen dat eclipse onder de jdk runs, 
/ want als we in jbosstools-jee-oxygen een Addon from GIT willen install, met ctrl+4,
https://github.com/forge/wildfly-swarm-addon.git
/ dan moet hij compile,

/ we kunnen dit ook doen onder System variables, 
JAVA_HOME C:\Program Files\Java\jdk1.8.0_144
Path %JAVA_HOME%\bin;...
/ maar dan runs eclipse nog steeds onder jre1.8.0_144, want we moeten eclipse.ini aanpassen,
/ maar we doen het toch, dan hebben we javac op de command line,

$ vi eclipse.ini
WAS,
-vm
C:/Program Files/Java/jre1.8.0_144/bin
IS NU,
C:/Program Files/Java/jdk1.8.0_144/bin

/ 7	 . 

/ we install jdk 9	,

/ 7	. 

/ we install jdk 7	, 
/ TODO 

/ we hebben al een oracle account,
ericjvandervelden@gmail
vlWalnoot27


C:\Users\ervelden\eclipse\jbosstools-jee-oxygen\eclipse>"\Program Files\Java\jdk-9\bin\java.exe" -version
java version "9"
Java(TM) SE Runtime Environment (build 9+181)
Java HotSpot(TM) 64-Bit Server VM (build 9+181, mixed mode)

C:\Users\ervelden\eclipse\jbosstools-jee-oxygen\eclipse>"\Program Files\Java\jdk-9\bin\javac.exe" -version
javac 9

/ lees,
http://docs.oracle.com/javase/9/install/installation-jdk-and-jre-microsoft-windows-platforms.htm




/ Einde JAVA INSTALL




/ 13	. 

/ we use de installer,
/ geef Sogeti username, password
/ trek je niets aan van dat hij versie 7 verwacht,

/ we hebben workspace-java,

C:\Users\ervelden\eclipse>dir

08-08-2017  16:30    <DIR>          java-oxygen
09-08-2017  10:47    <DIR>          jee-oxygen
09-08-2017  10:44    <DIR>          workspace-java
               0 File(s)              0 bytes
               5 Dir(s)  54.255.771.648 bytes free

/ we kunnen ook op de commandline,

C:\Users\ervelden\eclipse\jee-oxygen>eclipse\eclipse.exe

/ 13	.

/ we maken een Maven project, 
/ we add junit:junit:4.12 dependency,
/ run mvn test
[ERROR] No compiler is provided in this environment. Perhaps you are running on a JRE rather than a JDK?

/ ga naar build path, libraries
/ we zien JRE System Library [J2SE-1.5]
/ het enigste wat we moeten doen is hem vervangen door JavaSE-1.8(jre1.8.0_144), via Edit,

/ 13	.

/ de downloaded files komen op D:	, dus D:\Users\ervelden\Downloads

C:\Users\ervelden\eclipse\jee-oxygen>dir d:\Users\ervelden\Downloads
 Volume in drive D is Data
 Volume Serial Number is 6ED1-C17D

 Directory of d:\Users\ervelden\Downloads


08-08-2017  16:25        48.691.144 eclipse-inst-win64.exe
08-08-2017  16:26       186.651.590 eclipse-java-oxygen-R-win32-x86_64.zip
08-08-2017  16:18       207.382.584 jdk-8u144-windows-x64.exe
03-08-2017  13:38        12.603.392 node-v6.11.2-x64.msi
04-08-2017  10:25         3.053.480 npp.7.4.2.Installer.x64 (1).exe
04-08-2017  10:24         3.053.480 npp.7.4.2.Installer.x64.exe
04-08-2017  10:38        36.408.224 VSCodeSetup-ia32-1.14.2.exe
              12 File(s)    547.065.470 bytes
               2 Dir(s)  144.057.913.344 bytes free

/ Ook Desktop\ zit hier, D:\Users\ervelden\Desktop\

/ 13	.

/ we used de installer, eclipse-inst-win64.exe, maar nu willen we de zip extract, 
/ right click de zip in Computer, en kies 7-Zip, open archive,
/ en daar kies je Extract, en kies Copy to : C:\Users\ervelden\eclipse\tmp\
/ dan is tmp\ precies als java-oxygen of jee-oxygen
/ en we kunnen ,
C:\Users\ervelden\eclipse>tmp\eclipse\eclipse.exe
/ en we rm tmp weer,
C:\Users\ervelden\eclipse>rmdir tmp/s

/ 13	.

/ jboss tools,

/ lees,
http://tools.jboss.org/blog/4.5.0.am2-for-oxygen.0.html

/ install jbosstools, 
/ use eclipse installer, anders error met proxy,

HTTP Proxy Authentication Required: http://download.jboss.org/jbosstools/oxygen/development/updates/compositeContent.xml
Proxy Authentication Required

/ we hebben ,

C:\Users\ervelden\eclipse>dir
 Volume in drive C is System
 Volume Serial Number is 90D0-8A5A

 Directory of C:\Users\ervelden\eclipse

09-08-2017  12:19    <DIR>          .
09-08-2017  12:19    <DIR>          ..
09-08-2017  12:19    <DIR>          java-oxygen
09-08-2017  12:19    <DIR>          jbosstools-java-oxygen
09-08-2017  11:27    <DIR>          jbosstools-jee-oxygen
09-08-2017  12:04    <DIR>          jee-oxygen
09-08-2017  10:44    <DIR>          workspace-java-oxygen
09-08-2017  12:21    <DIR>          workspace-jbosstools-java-oxygen
09-08-2017  11:43    <DIR>          workspace-jbosstools-jee-oxygen
09-08-2017  11:34    <DIR>          workspace-jee-oxygen
               0 File(s)              0 bytes
              11 Dir(s)  53.134.151.680 bytes free

/ we gaan activemq samples in java-oxygen,
/ extract de zip in C:\Users\ervelden\eclipse\workspace-java-oxygen
/ import Maven project C:\Users\ervelden\eclipse\workspace-java-oxygen\amq-in-action-example-src in eclipse,
/ je moet wachten tot alle deps zijn loaded, dan verschijnt de maven structuur in eclipse,
/ de maven repo is C:\Users\ervelden\.m2\repository	, see windows,properties, maven, user settings

/ 13	. 

/ path edit: Computer, System properties, Advanced system settings, User variables for ervelden, click PATH, Edit
/ voeg aan het eind toe: ;C:\Users\ervelden\bin

/ start een nieuwe cmd	, die heeft het nieuwe path dan,

/ 13	. 

/ start activemq

/ Lees ActiveMQ Getting started
http://activemq.apache.org/getting-started.html



C:\Users\ervelden\bin\apache-activemq-5.15.0>bin\activemq start

Warning: JAVA_HOME environment variable is not set.

Java Runtime: Oracle Corporation 1.8.0_144 C:\Program Files\Java\jre1.8.0_144
  Heap sizes: current=1005056k  free=989327k  max=1005056k
    JVM args: -Dcom.sun.management.jmxremote -Xms1G -Xmx1G -Djava.util.logging.config.file=logging.properties -Djava.security.auth.login.config=C:\Users\ervelden\bin\apache-activ
Extensions classpath:
  [C:\Users\ervelden\bin\apache-activemq-5.15.0\bin\..\lib,C:\Users\ervelden\bin\apache-activemq-5.15.0\bin\..\lib\camel,C:\Users\ervelden\bin\apache-activemq-5.15.0\bin\..\lib\o
ACTIVEMQ_HOME: C:\Users\ervelden\bin\apache-activemq-5.15.0\bin\..
ACTIVEMQ_BASE: C:\Users\ervelden\bin\apache-activemq-5.15.0\bin\..
ACTIVEMQ_CONF: C:\Users\ervelden\bin\apache-activemq-5.15.0\bin\..\conf
ACTIVEMQ_DATA: C:\Users\ervelden\bin\apache-activemq-5.15.0\bin\..\data
Loading message broker from: xbean:activemq.xml
 INFO | Refreshing org.apache.activemq.xbean.XBeanBrokerFactory$1@5bcab519: startup date [Wed Aug 09 13:00:49 GMT+01:00 2017]; root of context hierarchy
 INFO | Using Persistence Adapter: KahaDBPersistenceAdapter[C:\Users\ervelden\bin\apache-activemq-5.15.0\bin\..\data\kahadb]
 INFO | PListStore:[C:\Users\ervelden\bin\apache-activemq-5.15.0\bin\..\data\localhost\tmp_storage] started
 INFO | Apache ActiveMQ 5.15.0 (localhost, ID:LBNL031514-65158-1502280050726-0:1) is starting
 INFO | Listening for connections at: tcp://LBNL031514:61616?maximumConnections=1000&wireFormat.maxFrameSize=104857600
 INFO | Connector openwire started
 INFO | Listening for connections at: amqp://LBNL031514:5672?maximumConnections=1000&wireFormat.maxFrameSize=104857600
 INFO | Connector amqp started
 INFO | Listening for connections at: stomp://LBNL031514:61613?maximumConnections=1000&wireFormat.maxFrameSize=104857600
 INFO | Connector stomp started
 INFO | Listening for connections at: mqtt://LBNL031514:1883?maximumConnections=1000&wireFormat.maxFrameSize=104857600
 INFO | Connector mqtt started
 WARN | ServletContext@o.e.j.s.ServletContextHandler@6057aebb{/,null,STARTING} has uncovered http methods for path: /
 INFO | Listening for connections at ws://LBNL031514:61614?maximumConnections=1000&wireFormat.maxFrameSize=104857600
 INFO | Connector ws started
 INFO | Apache ActiveMQ 5.15.0 (localhost, ID:LBNL031514-65158-1502280050726-0:1) started
 INFO | For help or more information please see: http://activemq.apache.org
 WARN | Store limit is 102400 mb (current store usage is 0 mb). The data directory: C:\Users\ervelden\bin\apache-activemq-5.15.0\bin\..\data\kahadb only has 50501 mb of usable sp
 WARN | Temporary Store limit is 51200 mb (current store usage is 0 mb). The data directory: C:\Users\ervelden\bin\apache-activemq-5.15.0\bin\..\data only has 50501 mb of usable
 INFO | No Spring WebApplicationInitializer types detected on classpath
 INFO | ActiveMQ WebConsole available at http://0.0.0.0:8161/
 INFO | ActiveMQ Jolokia REST API available at http://0.0.0.0:8161/api/jolokia/
 INFO | Initializing Spring FrameworkServlet 'dispatcher'
 INFO | No Spring WebApplicationInitializer types detected on classpath
 INFO | jolokia-agent: Using policy access restrictor classpath:/jolokia-access.xml

/ 13	. 

/ verander in eclipse weer in Java build path, libraries: JRE System Library [JavaSE-1.8]
/ we kunnen in org.apache.activemq.book.ch2.jobs op Consumer.java en Producer.java right click, run as Java application
/ maar we kunnen ook mvn exec:java run config maken in eclipse, via right click pom.xml, Run as, Maven build...

Name: org.apache.activemq.book.ch2.jobs.Producer-run
Base directory: ${project_loc:amq-in-action-example-src}
Goals: exec:java
Parameter
Name: exec.mainClass
Value: org.apache.activemq.book.ch2.jobs.Producer

Name: org.apache.activemq.book.ch2.jobs.Consumer-run
Base directory: ${project_loc:amq-in-action-example-src}
Goals: exec:java
Parameter
Name: exec.mainClass
Value: org.apache.activemq.book.ch2.jobs.Consumer

/ we zien onder Problems veel errors
/ TODO

/ 13	.

/ activemq	, 
/ wat is in 5.15.0 de maven dependency activemq-core ?
/ TODO 

/ 13. 

/ spring in action,

/ we download 
09-08-2017  15:33         1.672.020 SpringiA4_SourceCode.zip
/ en extract hem in workspace-java-oxygen\SpringiA4_SourceCode	/ we moeten zelf deze maken,

/ buildship is al installed in eclipse oxygen,

/ we maken eerst zelf een Gradle project,
Project root directory: C:\Users\ervelden\eclipse\workspace-java-oxygen\FirstGradle
Gradle user home directory: C:\Users\ervelden\.gradle
Gradle distribution: Gradle wrapper from target build
Gradle version: 3.5

/ in eclipse ziet eruit als een maven project, met src/main/java etc, en met een build.gradle

/ Onthoud:

notepad C:\Users\ervelden\eclipse\workspace-java-oxygen\SpringiA4_SourceCode>notepad Chapter_02\stereo-autoconfig\gradle\wrapper\gradle-wrapper.properties
...
distributionUrl=http\://services.gradle.org/distributions/gradle-3.5-bin.zip

/ Hier stond gradle-1.11-bin.zip

/ en in build.gradle hoeft NIET,
task wrapper(type: Wrapper) {
	gradleVersion = '1.11'
}


/ import in eclipse 
C:\Users\ervelden\eclipse\workspace-java-oxygen\SpringiA4_SourceCode\Chapter_01\knight
/ dit is een Gradle project,

/ Einde Onthoud

/ 13	. 

/ we veranderen	, we laten hem expres falen,
public class BraveKnightTest {
  @Test
  public void knightShouldEmbarkOnQuest() {
    Quest mockQuest = mock(Quest.class);
    BraveKnight knight = new BraveKnight(mockQuest);
    knight.embarkOnQuest();
    verify(mockQuest, times(1)).embark();
    Assert.fail();                                 // <-
  }

/ In Gradle Tasks view , double click: test
/ In Gradle executions we zien dat hij fails,

/ 13	.

/ we add aan PATH in Environment variables: C:\Program Files\Notepad++
/ nu kunnen we op de commmand line:
notepad++

/ 13	. 

/ Spring boot

/ we doen,
C:\Users\ervelden\eclipse\workspace-java-oxygen>mkdir sbia_examples
/ hierin extract we de source code van het boek,

/ ch02 is geen goede gradle project

/ ga naar,

https://start.spring.io/

/ en maak een spring boot gradle app, joshlongvideo
/ we voegen web en h2 toe,
/ we download een zip
/ deze extract we in de workspace-java-oxygen,

/ we vergelijken ch02 met deze, en passen build.gradle aan, en copy uit joshlongvideo gradle\ 
/ en gradlew en gradlew.bat
/ Pas nu kunnen we deze gradle project import.

/ 13	. 

/ we zien in ch02 project in ReadingListApplicationTests.java 

// WAS,
//@RunWith(SpringJUnit4ClassRunner.class)
//@SpringApplicationConfiguration(classes = ReadingListApplication.class)  \
//@WebAppConfiguration

// IS,
@RunWith(SpringRunner.class)
@SpringBootTest(classes=ReadingListApplication.class)
public class ReadingListApplicationTests {

	@Test
	//@Ignore
	public void contextLoads() {
			Assert.assertTrue(true);
	//		Assert.fail();
	}
}

/ Als we Assert.assertTrue(true), dan passes de test, als we Assert.fail() , dan faalt de test.

/ Lees,
https://spring.io/blog/2016/04/15/testing-improvements-in-spring-boot-1-4

/ 13	. 

<hibernate-mapping ...>
	<class name="..." table="...">
		<id ...>
		<property ...>
		<many-to-one>...
	</class>
</hibernate-mapping>

/ 13	. 

/ install spring boot cli on windows
/ lees,
https://howtoprogram.xyz/2016/08/27/install-spring-boot-command-line-interface-on-windows/

/ we download de zip van
http://repo.spring.io/release/org/springframework/boot/spring-boot-cli/1.5.6.RELEASE/
spring-boot-cli-1.5.6.RELEASE-bin.zip

/ we maken de environment variables,
User variables
spring_home C:\Users\ervelden\bin\spring-1.5.6.RELEASE
path ...;%spring_home%/bin

/ open nieuwe command,
C:\Users\ervelden>spring --version
Spring CLI v1.5.6.RELEASE

C:\Users\ervelden>spring shell
/ tab geeft commands,

/ 13	. 

/ we kijken naar de video van josh,
https://www.youtube.com/watch?v=sbPSjI4tt10

/ we hadden joshlongvideo, een gradle proj, 

/ we maken secondspringboot, een maven proj,
web, jpa, h2, actuator
/ we extract de zip in workspace-java-oxygen, en import in eclipse,

$ vi pom.xml
	<parent>
		<groupId>org.springframework.boot</groupId>
		<artifactId>spring-boot-starter-parent</artifactId>
		<version>1.5.6.RELEASE</version>
	</parent>
	
/ kijk in de local repo,
C:\Users\ervelden>dir \Users\ervelden\.m2\repository\org\springframework\boot

10-08-2017  14:56    <DIR>          spring-boot
10-08-2017  14:56    <DIR>          spring-boot-actuator
10-08-2017  14:56    <DIR>          spring-boot-autoconfigure
10-08-2017  14:56    <DIR>          spring-boot-dependencies         // !
10-08-2017  14:56    <DIR>          spring-boot-maven-plugin
10-08-2017  14:56    <DIR>          spring-boot-parent               // !
10-08-2017  14:56    <DIR>          spring-boot-starter
10-08-2017  14:56    <DIR>          spring-boot-starter-actuator
10-08-2017  14:56    <DIR>          spring-boot-starter-aop
10-08-2017  14:56    <DIR>          spring-boot-starter-data-jpa
10-08-2017  14:56    <DIR>          spring-boot-starter-jdbc
10-08-2017  14:56    <DIR>          spring-boot-starter-logging
10-08-2017  14:56    <DIR>          spring-boot-starter-parent
10-08-2017  14:56    <DIR>          spring-boot-starter-test
10-08-2017  14:56    <DIR>          spring-boot-starter-tomcat
10-08-2017  14:56    <DIR>          spring-boot-starter-web
10-08-2017  14:56    <DIR>          spring-boot-starters
10-08-2017  14:56    <DIR>          spring-boot-test
10-08-2017  14:56    <DIR>          spring-boot-test-autoconfigure
10-08-2017  14:56    <DIR>          spring-boot-tools
 
C:\Users\ervelden>dir \Users\ervelden\.m2\repository\org\springframework\boot\spring-boot-starter-parent\1.5.6.RELEASE

10-08-2017  14:56             7.486 spring-boot-starter-parent-1.5.6.RELEASE.pom
10-08-2017  14:56                40 spring-boot-starter-parent-1.5.6.RELEASE.pom.sha1
10-08-2017  14:56               196 _remote.repositories

/ In de parent pom staan alle versions,

$ vi spring-boot-starter-parent-1.5.6.RELEASE.pom
	<parent>
		<groupId>org.springframework.boot</groupId>
		<artifactId>spring-boot-dependencies</artifactId>
		<version>1.5.6.RELEASE</version>
		<relativePath>../spring-boot-dependencies</relativePath>
	</parent>

$ vi spring-boot-dependencies-1.5.6.RELEASE.pom
	<dependencyManagement>
		<dependencies>
			<dependency>
				<groupId>org.springframework.boot</groupId>
				<artifactId>spring-boot-actuator</artifactId>
				<version>1.5.6.RELEASE</version>
			</dependency>
			
			<dependency>
				<groupId>org.springframework.boot</groupId>
				<artifactId>spring-boot-starter-data-jpa</artifactId>
				<version>1.5.6.RELEASE</version>
			</dependency>

/ en in onze pom, ook, maar dan zonder versies,

	<dependencies>
		<dependency>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-starter-actuator</artifactId>
		</dependency>
		<dependency>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-starter-data-jpa</artifactId>
		</dependency>

/ In build.gradle zien we helemaal geen versies,
/ google: 
/ lees: spring boot starter gradle no versions of dependencies
https://stackoverflow.com/questions/41676534/how-are-some-gradle-dependencies-working-with-no-version-supplied
The version of the spring-boot gradle plugin that you declare determines the version of the spring-boot-starter-parent bom that is imported (this ensures that builds are always repeatable). You should always set the version of the spring-boot gradle plugin to the actual Spring Boot version that you wish to use.

/ 13	. 

/ als we de deps in secondspringboot's pom.xml vergl met de deps in joshlongvideo's build.gradle, dan kunnen we ze afmaken

$ vi build.gradle
dependencies {
	compile('org.springframework.boot:spring-boot-starter-data-jpa')
	runtime('com.h2database:h2')
	testCompile('org.springframework.boot:spring-boot-starter-test')
	compile('org.springframework.boot:spring-boot-starter-web')
	compile('org.springframework.boot:spring-boot-starter-thymeleaf')
	compile('org.springframework.boot:spring-boot-starter-actuator')
}

/ voorlopig,

dependencies {
	compile('org.springframework.boot:spring-boot-starter-data-jpa')
	runtime('com.h2database:h2')
	testCompile('org.springframework.boot:spring-boot-starter-test')
	/*
	compile('org.springframework.boot:spring-boot-starter-web')
	compile('org.springframework.boot:spring-boot-starter-thymeleaf')
	compile('org.springframework.boot:spring-boot-starter-actuator')
	*/
}

@SpringBootApplication 
/ doet,
@Configuration
@ComponentScan

/ 13	. 

/ ipv

@SpringBootApplication
public class joshlongvideoApplication {

	public static void main(String[] args) {
		SpringApplication.run(joshlongvideoApplication.class, args);
	}
	
	@Bean CommandLineRunner runner(ReservationRepository rr) {
		return new CommandLineRunner() {
			
			@Override
			public void run(String... args) throws Exception {
				// TODO Auto-generated method stub
				
			}
		};
	}
}

/ doen we 
	@Bean CommandLineRunner runner(ReservationRepository rr) {
		return args ->{
			
		};
	}
/ TODO

/ 13	. 			

/ ipv
	rr.findAll().forEach(r->System.out.println(r));
/ we doen,
	rr.findAll().forEach(System.out::println);
	
/ 13	.

/ in gradle,
	compile('org.springframework.boot:spring-boot-starter-web')
	runtime('com.h2database:h2')
	
/ in maven,
	<scope>compile</scope>		/ default
	<scope>runtime</scope>
	
/ we zien op de video,

<dependency>
	<groupId>com.h2database</groupId>
	<artifactId>h2</artifactId>
	<scope>runtime</scope>
	
/ 13	.

/ in de Gradle tasks view zien we,
bootRun
/ we zien de result in Console, 
/ als niet compiles, dan zien we errors ook in Console,

/ we kunnen ook right click joshlongvideoApplication.java, Run as, Java application

/ er zijn ook
build
test

$ vi joshlongvideoApplication.javapackage my.own.joshlongvideo;

import java.util.Arrays;
import java.util.Collection;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;

import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.Bean;
import org.springframework.data.jpa.repository.JpaRepository;

@SpringBootApplication
public class joshlongvideoApplication {

	public static void main(String[] args) {
		SpringApplication.run(joshlongvideoApplication.class, args);
	}
	
	@Bean CommandLineRunner runner(ReservationRepository rr) {
		return args ->{
			Arrays.asList("Foo,Bar,Baz,Gee,Hee".split(","))
				.forEach(n->rr.save(new Reservation(n)));
			
			rr.findAll().forEach(System.out::println);
			rr.findByName("Foo").forEach(System.out::println);
		};
	}
}
	
interface ReservationRepository extends JpaRepository<Reservation, Long>{
	Collection<Reservation>findByName(String name);
}

@Entity
class Reservation{
	@Id @GeneratedValue
	private Long id;
	
	private String name;

	public String getName() {
		return name;
	}

	@Override
	public String toString() {
		return "Reservation{id="+id+",name="+name+"}";
	}
	public Reservation() { // for JPA TODO
	}
	public Reservation(String name) {
		this.name=name;
	}
	public Long getId() {
		return id;
	}

}

/ hoe gaat dat met 	

public static void main(String[] args) {
		SpringApplication.run(joshlongvideoApplication.class, args);
	}
	@Bean CommandLineRunner runner(ReservationRepository rr) {
*		return args ->{			
**			Arrays.asList("Foo,Bar,Baz,Gee,Hee".split(",")).forEach(n->rr.save(new Reservation(n)));
			...
			
/ we kunnen een b set in * en in **

/ set b in **,
Thread [main] (Suspended (breakpoint at line 25 in joshlongvideoApplication))	
	joshlongvideoApplication.lambda$0(ReservationRepository, String[]) line: 25	
	356300643.run(String[]) line: not available	
	SpringApplication.callRunner(CommandLineRunner, ApplicationArguments) line: 732	
	SpringApplication.callRunners(ApplicationContext, ApplicationArguments) line: 716
			for (Object runner : new LinkedHashSet<Object>(runners)) {
			if (runner instanceof ApplicationRunner) {
/n
				callRunner((ApplicationRunner) runner, args);
			}
			if (runner instanceof CommandLineRunner) {
/j
				callRunner((CommandLineRunner) runner, args);
/s
	SpringApplication.afterRefresh(ConfigurableApplicationContext, ApplicationArguments) line: 703		
		callRunners(context, args);
	SpringApplication.run(String...) line: 304	
	SpringApplication.run(Object[], String[]) line: 1118	
	SpringApplication.run(Object, String...) line: 1107	
	joshlongvideoApplication.main(String[]) line: 20	
			SpringApplication.run(joshlongvideoApplication.class, args);



/ als we b in *, dan zien we dat een @Bean een cglib object is,	
		
joshlongvideoApplication [Java Application]	
	my.own.joshlongvideo.joshlongvideoApplication at localhost:64821	
		Thread [main] (Suspended (breakpoint at line 24 in joshlongvideoApplication))	
			owns: ConcurrentHashMap<K,V>  (id=55)	
			owns: Object  (id=56)	
			joshlongvideoApplication$$EnhancerBySpringCGLIB$$1b463d19(joshlongvideoApplication).runner(ReservationRepository) line: 24	
			joshlongvideoApplication$$EnhancerBySpringCGLIB$$1b463d19.CGLIB$runner$0(ReservationRepository) line: not available	
			joshlongvideoApplication$$EnhancerBySpringCGLIB$$1b463d19$$FastClassBySpringCGLIB$$e3164c3b.invoke(int, Object, Object[]) line: not available	
			MethodProxy.invokeSuper(Object, Object[]) line: 228	
			ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(Object, Method, Object[], MethodProxy) line: 358	
			joshlongvideoApplication$$EnhancerBySpringCGLIB$$1b463d19.runner(ReservationRepository) line: not available	
			NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]	
			NativeMethodAccessorImpl.invoke(Object, Object[]) line: not available	
			DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: not available	
			Method.invoke(Object, Object...) line: not available	
			CglibSubclassingInstantiationStrategy(SimpleInstantiationStrategy).instantiate(RootBeanDefinition, String, BeanFactory, Object, Method, Object...) line: 162	
			ConstructorResolver.instantiateUsingFactoryMethod(String, RootBeanDefinition, Object[]) line: 588	
			DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).instantiateUsingFactoryMethod(String, RootBeanDefinition, Object[]) line: 1173	
			DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).createBeanInstance(String, RootBeanDefinition, Object[]) line: 1067	
			DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).doCreateBean(String, RootBeanDefinition, Object[]) line: 513	
			DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).createBean(String, RootBeanDefinition, Object[]) line: 483	
			AbstractBeanFactory$1.getObject() line: 306	
			DefaultListableBeanFactory(DefaultSingletonBeanRegistry).getSingleton(String, ObjectFactory<?>) line: 230	
			DefaultListableBeanFactory(AbstractBeanFactory).doGetBean(String, Class<T>, Object[], boolean) line: 302	
			DefaultListableBeanFactory(AbstractBeanFactory).getBean(String) line: 197	
			DefaultListableBeanFactory.preInstantiateSingletons() line: 761	
			AnnotationConfigApplicationContext(AbstractApplicationContext).finishBeanFactoryInitialization(ConfigurableListableBeanFactory) line: 867	
			AnnotationConfigApplicationContext(AbstractApplicationContext).refresh() line: 543	
			SpringApplication.refresh(ApplicationContext) line: 693	
			SpringApplication.refreshContext(ConfigurableApplicationContext) line: 360	
			SpringApplication.run(String...) line: 303	
			SpringApplication.run(Object[], String[]) line: 1118	
			SpringApplication.run(Object, String...) line: 1107	
			joshlongvideoApplication.main(String[]) line: 20	
		Daemon Thread [Tomcat JDBC Pool Cleaner[414493378:1502439119253]] (Running)	
/ TODO

/ we zien,

Reservation{id=1,name=Foo}
Reservation{id=2,name=Bar}
Reservation{id=3,name=Baz}
Reservation{id=4,name=Gee}
Reservation{id=5,name=Hee}

Reservation{id=1,name=Foo} / laatste query,

/ 13	.

/ rest api 

/ in joshlongvideo

/ voor rest api moeten we in build.gradle,

dependencies {
	compile('org.springframework.boot:spring-boot-starter-web')
	
/ en doe in eclipse, 
/ right click project, Gradle, Refresh Gradle project

/ 13	. 

/ we add to chrome de JSONView extention, 
/ google: chrome json pretty print

$ vi FirstspringbootApplication.java

@RestController
class ReservationController{
	
	@RequestMapping("/reservations")
	public Collection<Reservation>reservations(){
		return this.reservationRepository.findAll();
		
	}
	@Autowired
	private ReservationRepository reservationRepository;
		
	
}

/ Geef localhost:8080/reservations

[
{
id: 1,
name: "Foo"
},
{
id: 2,
name: "Bar"
},
{
id: 3,
name: "Baz"
},
{
id: 4,
name: "Gee"
},
{
id: 5,
name: "Hee"
}
]
/ Welke functie print deze?
/ TODO

/ bij 
rr.findAll().forEach(System.out::println);
/ zien we 
Reservation{id=1,name=Foo}
Reservation{id=2,name=Bar}
Reservation{id=3,name=Baz}
Reservation{id=4,name=Gee}
Reservation{id=5,name=Hee}
Reservation{id=1,name=Foo}
/ Dit is van de Reservation.toString() method, 

/ 13	. 

/ ipv field injection, kunnen we ook @Autowired op de setter set, NIET op de getter	,

	private ReservationRepository reservationRepository;
	
	
	public ReservationRepository getReservationRepository() {
		return reservationRepository;
	}
	@Autowired
	public void setReservationRepository(ReservationRepository reservationRepository) {
		this.reservationRepository = reservationRepository;
	}
/ OK	,
/ Deze setter kunnen we mock,

/ 13	. 

/ bootRun is ook een run config, net als bij maven,
/ ook test, build, clean
/ Hierin kunnen we program arguments geven,

/ 13	. 


/ we willen de source van de jre classes zien,
/ Windows, preferences, Java, installed JREs
/ add C:\Program Files\Java\jdk1.8.0_144
/ en kies deze als default,

/ right click existing project, build path, libraries
/ edit JRE System Library[jre1.8.0_144]
Alternate JRE: jdk1.8.0_144

/ Geef nu F3 op Arrays, dan zien we de source code.

/ 13	 .

/ WATCH PROCESSES IN WINDOWS

/ Uitgebreidere processes,
/ google: windows 7 show java processes
https://docs.microsoft.com/en-us/sysinternals/downloads/process-explorer
/ we extract in bin\ProcessExplorer, en set deze in mijn path, TODO
/ Geef,
C:\Users\ervelden\eclipse\jee-oxygen>\Users\ervelden\bin\ProcessExplorer\procexp.exe
/ 13	. 

/ google: bootRun arguments
https://stackoverflow.com/questions/25079244/how-to-pass-jvm-options-from-bootrun

$ vi build.gradle

bootRun{
	args=["foo","bar"]
}
/ OK
/ TODO Anders 

/ 	13	. 

/ ipv rest die db queries doet via this.reservationRepository.findAll()
/ we comment out de @RestController class ReservationController,

$ vi build.gradle
dependencies {
	compile('org.springframework.boot:spring-boot-starter-data-jpa')
	compile('org.springframework.boot:spring-boot-starter-web')
	compile('org.springframework.boot:spring-boot-starter-data-rest')        // !
	runtime('com.h2database:h2')
	testCompile('org.springframework.boot:spring-boot-starter-test')
}

/ 13	. 

/ we veranderen,

@RepositoryRestResource
interface ReservationRepository extends JpaRepository<Reservation, Long>{
	Collection<Reservation>findByName(String name);
}

/ de annotatie is @RepositoryRestResource, NIET @RepositoryRestController
/ Als je @RepositoryRestController, dan ERR:
/ Lees over,
This application has no explicit mapping for /error, so you are seeing this as a fallback.
https://stackoverflow.com/questions/31134333/this-application-has-no-explicit-mapping-for-error

/ Lees over @RepositoryRestController
https://faithfull.me/overriding-spring-data-rest-repositories/

/ 13	.

/ STRAKS



/ 7	. 

/ spring data rest

/ lees,
https://spring.io/guides/gs/accessing-data-rest/

/ in eclipse, file import, git, projects from git, 
/ geef url https://github.com/spring-guides/gs-accessing-data-rest.git
/ en zet hem in de workspace-java-oxygen

/ we zien 2 projects, complete en initial, beide zijn en Maven en Gradle projects, we nemen complete,

C:\Users\ervelden\eclipse\workspace-java-oxygen\gs-accessing-data-rest>dir
 Volume in drive C is System
 Volume Serial Number is 90D0-8A5A

 Directory of C:\Users\ervelden\eclipse\workspace-java-oxygen\gs-accessing-data-rest

11-08-2017  17:42    <DIR>          .
11-08-2017  17:42    <DIR>          ..
11-08-2017  17:42               270 .gitignore
11-08-2017  17:42               276 .travis.yml
11-08-2017  17:42    <DIR>          complete
11-08-2017  17:42               133 CONTRIBUTING.adoc
11-08-2017  17:42    <DIR>          initial
11-08-2017  17:42               721 LICENSE.code.txt
11-08-2017  17:42               105 LICENSE.writing.txt
11-08-2017  17:42            12.584 README.adoc
11-08-2017  17:42    <DIR>          test
               6 File(s)         14.089 bytes
               5 Dir(s)  51.603.345.408 bytes free
			   
/ we edit in complete gradle\gradle-wrapper.properties, we set version 3.5
#Mon Aug 29 13:03:41 CDT 2016
distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists
distributionUrl=https\://services.gradle.org/distributions/gradle-3.5-bin.zip

/ Nu kunnen we het Gradle project import, 
/ we zien in eclipse, 
complete [ gs-accessing-data-rest master ]
	src/main/java	lo
	...
/ en we zien met 
Team, Switch to
/ dat er maar 1 branch is: master

/ start de app met bootRun,
/ geef in browser,
localhost:8080
/ we zien
{
	_links: {
		people: {
			href: "http://localhost:8080/people{?page,size,sort}",
			templated: true
		},
		profile: {
			href: "http://localhost:8080/profile"
		}
	}
}

/ 13. 

/ we install curl,
https://curl.haxx.se/download.html#Win64

/ we kiezen,
in64 x86_64 7zip	7.55.0

/ extract in \Users\ervelden\bin
/ set C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin in path,

/ geef C:\Users\ervelden>curl localhost:8080
{
  "_links" : {
    "people" : {
      "href" : "http://localhost:8080/people{?page,size,sort}",
      "templated" : true
    },
    "profile" : {
      "href" : "http://localhost:8080/profile"
    }
  }
}

/ geef in chrome,
http://localhost:8080/profile

/ we zien,
{
	_links: {
		self: {
			href: "http://localhost:8080/profile"
		},
		people: {
			href: "http://localhost:8080/profile/people"
		}
	}
}

/ geef,
http://localhost:8080/profile/people

/ we zien

{
	alps: {
		version: "1.0",
		descriptors: [
			{
				id: "person-representation",
				href: "http://localhost:8080/profile/people",
				descriptors: [
					{
					name: "firstName",
					type: "SEMANTIC"
					},
					{
					name: "lastName",
					type: "SEMANTIC"
					}
				]
				},
			{
			id: "get-people",
			name: "people",
			type: "SAFE",
			rt: "#person-representation",
			descriptors: [
				{
					name: "page",
					doc: {
						value: "The page to return.",
						format: "TEXT"
					},
					type: "SEMANTIC"
					},
				{
					name: "size",
					doc: {
						value: "The size of the page to return.",
						format: "TEXT"
					},
					type: "SEMANTIC"
				},
				{
					name: "sort",
					doc: {
						value: "The sorting criteria to use to calculate the content of the page.",
						format: "TEXT"
					},
					type: "SEMANTIC"
					}
				]
			},
			{
				id: "create-people",
				name: "people",
				type: "UNSAFE",
				rt: "#person-representation"
			},
			{
				id: "update-person",
				name: "person",
				type: "IDEMPOTENT",
				rt: "#person-representation"
			},
			{
				id: "get-person",
				name: "person",
				type: "SAFE",
				rt: "#person-representation"
			},
			{
				id: "patch-person",
				name: "person",
				type: "UNSAFE",
				rt: "#person-representation"
			},
			{
				id: "delete-person",
				name: "person",
				type: "IDEMPOTENT",
				rt: "#person-representation"
			},
			{
				name: "findByLastName",
				type: "SAFE",
				descriptors: [
				{
					name: "name",
					type: "SEMANTIC"
				}
				]
			}
		]
	}
}

/ 13	. 

/ we add 2 people,

/ we zijn nog op,
https://spring.io/guides/gs/accessing-data-rest/

C:\Users\ervelden> curl -i -X POST -H "Content-Type:application/json" -d "{  \"firstName\" : \"Frodo\",  \"lastName\" : \"Baggins\" }"http://localhost:8080/people

HTTP/1.1 201
Location: http://localhost:8080/people/1
Content-Type: application/hal+json;charset=UTF-8
Transfer-Encoding: chunked
Date: Sun, 13 Aug 2017 13:04:59 GMT

{
  "firstName" : "Frodo",
  "lastName" : "Baggins",
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/people/1"
    },
    "person" : {
      "href" : "http://localhost:8080/people/1"
    }
  }
}

/ door -i zien we ook in de response de response headers,

C:\Users\ervelden> curl -i -X POST -H "Content-Type:application/json" -d "{  \"firstName\" : \"Foo\",  \"lastName\" : \"Bar\" }"  http://localhost:8080/people
HTTP/1.1 201
Location: http://localhost:8080/people/2
Content-Type: application/hal+json;charset=UTF-8
Transfer-Encoding: chunked
Date: Sun, 13 Aug 2017 13:08:17 GMT

{
  "firstName" : "Foo",
  "lastName" : "Bar",
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/people/2"
    },
    "person" : {
      "href" : "http://localhost:8080/people/2"
    }
  }
}

/ als we nu naar
localhost:8080/people

{
	_embedded: {
		people: [
		{
		firstName: "Frodo",
		lastName: "Baggins",
		_links: {
			self: {
				href: "http://localhost:8080/people/1"
				},
			person: {
				href: "http://localhost:8080/people/1"
				}
			}
		},
		{
		firstName: "Foo",
		lastName: "Bar",
		_links: {
			self: {
				href: "http://localhost:8080/people/2"
			},
			person: {
				href: "http://localhost:8080/people/2"
			}
		}
		}
		]
	},
	_links: {
	self: {
	href: "http://localhost:8080/people{?page,size,sort}",
	templated: true
	},
	profile: {
	href: "http://localhost:8080/profile/people"
	},
	search: {
	href: "http://localhost:8080/people/search"
	}
	},
	page: {
	size: 20,
	totalElements: 2,
	totalPages: 1,
	number: 0
	}
}

/ _links en page waren er al,

/ 13	. 

C:\Users\ervelden>  curl -X GET http://localhost:8080/people/search
{
  "_links" : {
    "findByLastName" : {
      "href" : "http://localhost:8080/people/search/findByLastName{?name}",
      "templated" : true
    },
    "self" : {
      "href" : "http://localhost:8080/people/search"
    }
  }
}

/ we moeten -X GET geven, NIET -X getC:\Users\ervelden>  curl -X GET http://localhost:8080/people/search/findByLastName?name=Bar
{
  "_embedded" : {
    "people" : [ {
      "firstName" : "Foo",
      "lastName" : "Bar",
      "_links" : {
        "self" : {
          "href" : "http://localhost:8080/people/2"
        },
        "person" : {
          "href" : "http://localhost:8080/people/2"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/people/search/findByLastName?name=Bar"
    }
  }
}

/ 13	. 

/ update,
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw> curl -i -X PUT -H "Content-Type:application/json" -d "{  \"firstName\" : \"Gee\",  \"lastName\" : \"Bar\" }"  http://localhost:8080/people/1
HTTP/1.1 200
Location: http://localhost:8080/people/1
Content-Type: application/hal+json;charset=UTF-8
Transfer-Encoding: chunked
Date: Sun, 13 Aug 2017 19:10:32 GMT

{
  "firstName" : "Gee",
  "lastName" : "Bar",
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/people/1"
    },
    "person" : {
      "href" : "http://localhost:8080/people/1"
    }
  }
}

/ we zien dat we met PUT niet zoals in SQL 1 property kunnen update, we moeten ze allemaal geven	,
/ als je er maar 1 geeft, zoals firstName, wordt de lastName null,

C:\Users\ervelden\bin\curl-7.55.0-win64-mingw> curl -i -X PUT -H "Content-Type:application/json" -d "{  \"firstName\" : \"Foo\" }"  http://localhost:8080/people/1
HTTP/1.1 200
Location: http://localhost:8080/people/1
Content-Type: application/hal+json;charset=UTF-8
Transfer-Encoding: chunked
Date: Sun, 13 Aug 2017 19:14:55 GMT

{
  "firstName" : "Foo",
  "lastName" : null,
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/people/1"
    },
    "person" : {
      "href" : "http://localhost:8080/people/1"
    }
  }
}

/ we hadden eerst de verkeerde url gegeven people ipv people/1:

C:\Users\ervelden\bin\curl-7.55.0-win64-mingw> curl -i -X PUT -H "Content-Type:application/json" -d "{  \"firstName\" : \"Gee\",  \"lastName\" : \"Bar\" }"  http://localhost:8080/people
HTTP/1.1 404
Content-Type: application/json;charset=UTF-8
Transfer-Encoding: chunked
Date: Sun, 13 Aug 2017 19:09:38 GMT

{"timestamp":1502651378752,"status":404,"error":"Not Found","message":"No message available","path":"/people"}


/ 13	.

/ maar met PATCH kun je wel 1 property update,

C:\Users\ervelden\bin\curl-7.55.0-win64-mingw>  curl -X GET http://localhost:8080/people
{
  "_embedded" : {
    "people" : [ {
      "firstName" : "Gee",
      "lastName" : "Bar",
      "_links" : {
        "self" : {
          "href" : "http://localhost:8080/people/1"
        },
        "person" : {
          "href" : "http://localhost:8080/people/1"
        }
      }
    }, {
	...
	
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw> curl -i -X PATCH -H "Content-Type:application/json" -d "{  \"firstName\" : \"Foo\"  }"  http://localhost:8080/people/1
HTTP/1.1 200
Content-Type: application/hal+json;charset=UTF-8
Transfer-Encoding: chunked
Date: Sun, 13 Aug 2017 21:02:09 GMT

{
  "firstName" : "Foo",
  "lastName" : "Bar",
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/people/1"
    },
    "person" : {
      "href" : "http://localhost:8080/people/1"
    }
  }
}

/ 13	. 


C:\Users\ervelden\bin\curl-7.55.0-win64-mingw> curl -i -X DELETE http://localhost:8080/people/2
HTTP/1.1 204
Date: Sun, 13 Aug 2017 21:04:57 GMT


C:\Users\ervelden\bin\curl-7.55.0-win64-mingw>  curl -X GET http://localhost:8080/people
{
  "_embedded" : {
    "people" : [ {
      "firstName" : "Foo",
      "lastName" : "Bar",
      "_links" : {
        "self" : {
          "href" : "http://localhost:8080/people/1"
        },
        "person" : {
          "href" : "http://localhost:8080/people/1"
        }
      }
    } ]
  },
  
/ 13	. 
Congratulations! Youve just developed an application with a hypermedia-based RESTful front end and a JPA-based back end.

/ Toch hebben we geen JpaRepository
/ TODO

/ 13	. 

/ Motivatie Aon:

Ik heb wiskunde gestudeerd, en in mijn vrije tijd neem in kansberekening & statistiek door en oefen met R, en bestudeer ik de algoritmen die gebruikt worden bij encryptie van computerberichten. Maa r vooral mijn kennis van kansberekening & statistiek hoop ik te kunnen gebruiken in uw business.
Ik mijn vorige baan was ik full-stack web ontwikkelaar, en daar wil ik mee doorgaan. De zaak gebruikte Wicket; u gebruikt Spring-MVC. Maar gelukkig lijken op mekaar; beide zijn immers MVC frameworks. Thuis bestudeerde ik AngularJS, maar doordat ik op mijn werk Wicket gebruikte, ben ik Wicket gaan bestuderen. Nu heb ik Angular weer opgepakt. 
Thuis bestudeer ik computer programmas (omdat ik bang ben dat ik anders achterop raak), en een ervan is PL/pgSQL, de PostgreSQL variant van PL/SQL. Gradle gebruik ik bij het oefenen met Spring Boot. Ook met JavaScript heb ik veel geoefend, en jQuery heb ik op het werk gebruikt. Ook heb ik geoefend met Bootstrap. Maar de back-end vind ik ook interessant; thuis build ik Wildfly (met Git en Maven) en kijk hoe two-phase commit werkt en is gemaakt.
Ik mis eerlijk gezegd Mockito in uw lijst van programmas. 


/ 7	. 

/ we import de git project 
https://github.com/spring-projects/spring-data-book.git
/ en set hem in de workspace-java-oxygen.

/ we import dit Maven project, en we zien 

spring-data-book
spring-data-book-gemfire
spring-data-book-jdbc
spring-data-book-jpa
spring-data-book-mongodb
spring-data-book-neo4j
spring-data-book-querydsl
spring-data-book-redis
spring-data-book-rest

spring-data-book is main project, en bevat de main pom,

$ vi pom.xml
	<build>

		<plugins>

			<plugin>
				<groupId>org.codehaus.mojo</groupId>
				<artifactId>build-helper-maven-plugin</artifactId>
				<version>3.0.0</version>

/ de version was 1.5, en daarom kregen we deze err:
No marketplace entries found to handle Execution add-source, in /spring-data-book-jdbc/pom.xml in Eclipse.  Please see Help for more information.

/ 13	. 

/ In spring-data-book-jpa , 

$ vi pom.xml
		<plugins>
			<plugin>
				<groupId>com.mysema.maven</groupId>
				<artifactId>apt-maven-plugin</artifactId>
				<version>1.0.8</version>
				<dependencies>
					<dependency>
						<groupId>com.mysema.querydsl</groupId>
						<artifactId>querydsl-apt</artifactId>
						<version>${querydsl.version}</version>
					</dependency>
				</dependencies>
				<executions>
					<execution>
					
/ maar we hebben ERR op <execution>	, 
You need to run build with JDK or have tools.jar on the classpath.If this occures during eclipse build make sure you run 
eclipse under JDK as well (com.mysema.maven:apt-maven-plugin:1.0.8:process:default:generate-sources) 
org.apache.maven.plugin.MojoExecutionException: You need to run build with JDK or have tools.jar on the classpath.If this 
occures during eclipse build make sure you run eclipse under JDK as well at 

/ 13	. 

https://www.petrikainulainen.net/programming/spring-framework/spring-data-jpa-tutorial-getting-the-required-dependencies/
/ we zien:  get the example application of this blog post from Github.
https://github.com/pkainulainen/spring-data-jpa-examples/tree/master/query-methods

/ we import met eclipse van https://github.com/pkainulainen/spring-data-jpa-examples
https://github.com/pkainulainen/spring-data-jpa-examples.git

/ Deze heeft allemaal sub dirs en deze zijn de maven projects, die we apart moeten import in eclipse,
/ we hebben in workspace-java-oxygen de dir spring-data-jpa-examples/ en deze heeft query-methods/, dit is de Maven project die we in eclipse import,	 

/ we hebben build-helper-maven-plugin version 3.0.0: resolves ERRs,

/ we zien in de pom van query-methods geen versions, maar dat doet hij zo in de pom:

    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>io.spring.platform</groupId>
                <artifactId>platform-bom</artifactId>
                <version>1.1.2.RELEASE</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
        </dependencies>
    </dependencyManagement>
	
/ Deze kunnen we gewoon bekijken in search.maven.org, en we zien bijvoorbeeld	,

	<parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>1.2.3.RELEASE</version>
        <relativePath/>
    </parent>
 
    <groupId>io.spring.platform</groupId>
    <artifactId>platform-bom</artifactId>
    <version>1.1.2.RELEASE</version>
    <packaging>pom</packaging>
	    
	<properties>
		<hibernate-jpa-api.version>1.0.1.Final</hibernate-jpa-api.version>
		   <dependencyManagement>
			<dependencies>
		     <dependency>
                <groupId>org.hibernate</groupId>
                <artifactId>hibernate-core</artifactId>
                <version>${hibernate.version}</version>
            </dependency>
            <dependency>
                <groupId>org.hibernate.javax.persistence</groupId>
                <artifactId>hibernate-jpa-2.0-api</artifactId>
                <version>${hibernate-jpa-api.version}</version>
            </dependency>

/ Kijken we ook in search.maven.org naar spring-boot-starter-parent:1.2.3.RELEASE's pom, dan zien we,

    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-dependencies</artifactId>
        <version>1.2.3.RELEASE</version>
        <relativePath>../../spring-boot-dependencies</relativePath>
    </parent>
    <artifactId>spring-boot-starter-parent</artifactId>
    <packaging>pom</packaging>

/ Kijken we ook in search.maven.org naar spring-boot-dependencies:1.2.3.RELEASE's pom, dan zien we alle deps en versions,

	<properties>
	    <hibernate.version>4.3.8.Final</hibernate.version>
        <hibernate-entitymanager.version>${hibernate.version}</hibernate-entitymanager.version>
		
		<log4j.version>1.2.17</log4j.version>
        <log4j2.version>2.1</log4j2.version>

    <dependencyManagement>
        <dependencies>
		    <dependency>
                <groupId>org.hibernate</groupId>
                <artifactId>hibernate-entitymanager</artifactId>
                <version>${hibernate.version}</version>
            </dependency>         
			
			<dependency>
                <groupId>log4j</groupId>
                <artifactId>log4j</artifactId>
                <version>${log4j.version}</version>
            </dependency>         
			
			<dependency>
                <groupId>org.apache.logging.log4j</groupId>
                <artifactId>log4j-api</artifactId>
                <version>${log4j2.version}</version>
            </dependency>
            <dependency>
                <groupId>org.apache.logging.log4j</groupId>
                <artifactId>log4j-core</artifactId>
                <version>${log4j2.version}</version>
            </dependency>
            <dependency>
                <groupId>org.apache.logging.log4j</groupId>
                <artifactId>log4j-slf4j-impl</artifactId>
                <version>${log4j2.version}</version>
            </dependency>
			
			
			
			
			

/ 13	. 

/ lees,
http://www.baeldung.com/the-persistence-layer-with-spring-data-jpa

/ 13	. 

/ lees, 
https://www.mkyong.com/spring-boot/spring-boot-spring-data-jpa-oracle-example/

/ 13	. 

/ Lees, 

https://spring.io/guides/gs/accessing-data-jpa/

/ hierboven, 
/ https://github.com/spring-guides/gs-accessing-data-rest.git

/ nu import we in eclipse git project,
https://github.com/spring-guides/gs-accessing-data-jpa.git

/ 13	. 

/ zoek naar word in dir

/ lees,
https://technet.microsoft.com/en-us/library/bb490907.aspx

C:\Users\ervelden\eclipse\workspace-java-oxygen\gs-accessing-data-jpa>findstr /s content *.*

complete\build.gradle:    maven { url "https://repository.jboss.org/nexus/content/repositories/releases" }
complete\pom.xml:            <url>https://repository.jboss.org/nexus/content/repositories/releases</url>
complete\target\classes\META-INF\maven\org.springframework\gs-accessing-data-jpa\pom.xml:            <url>https://repository.jboss.org/nexus/content/repositories/releases</url>
initial\build.gradle:    maven { url "https://repository.jboss.org/nexus/content/repositories/releases" }
initial\pom.xml:            <url>https://repository.jboss.org/nexus/content/repositories/releases</url>
README.adoc:include::https://raw.githubusercontent.com/spring-guides/getting-started-macros/master/prereq_editor_jdk_buildtools.adoc[]
README.adoc:include::https://raw.githubusercontent.com/spring-guides/getting-started-macros/master/how_to_complete_this_guide.adoc[]
README.adoc:include::https://raw.githubusercontent.com/spring-guides/getting-started-macros/master/hide-show-gradle.adoc[]
README.adoc:include::https://raw.githubusercontent.com/spring-guides/getting-started-macros/master/hide-show-maven.adoc[]
README.adoc:include::https://raw.githubusercontent.com/spring-guides/getting-started-macros/master/hide-show-sts.adoc[]
README.adoc:include::https://raw.githubusercontent.com/spring-guides/getting-started-macros/master/spring-boot-application.adoc[]
README.adoc:include::https://raw.githubusercontent.com/spring-guides/getting-started-macros/master/build_an_executable_jar_mainhead.adoc[]
README.adoc:include::https://raw.githubusercontent.com/spring-guides/getting-started-macros/master/build_an_executable_jar_with_both.adoc[]
README.adoc:include::https://raw.githubusercontent.com/spring-guides/getting-started-macros/master/footer.adoc[]

/ 13	. 

/ show hidden files.

/ lees,
https://technet.microsoft.com/en-us/library/cc755121(v=ws.11).aspx

C:\Users\ervelden\eclipse\workspace-java-oxygen\tmp>dir . /a:h
 Volume in drive C is System
 Volume Serial Number is 90D0-8A5A

 Directory of C:\Users\ervelden\eclipse\workspace-java-oxygen\tmp

15-08-2017  10:20    <DIR>          .git
               0 File(s)              0 bytes
               1 Dir(s)  52.716.781.568 bytes free
			   
/ Maar dir toont wel .settings
/ is .settings geen hidden dir? TODO

/ 13	. 

/ gs-accessing-data-jpa is een git project, er is een .git/
/ we kunnen gs-accessing-data-rest import als gradle proj, maar dan in de gradle tasks view niet de goede tasks,

/ gs-accessing-data-jpa/complete is een gradle proj, als je deze import, krijg je de juiste tasks, 
/ maar het is geen git project,  er is geen .git/, 
/ maar toch kunnen we een alt branch maken, en switch er naar, dus WH in de repository in de parent, 

/ wat is de bedoeling, wat moeten we import in eclipse, gs-accessing-data-jpa of complete?
/ TODO

/ 13	. 

/ delete branch

/ lees,
https://wiki.eclipse.org/EGit/User_Guide#Delete_Branch

/ Team, Advanced, Delete branch

/ 13	. 

/ we zien dat gs-accessing-data-jpa geen maven project is, maar gs-accessing-data-jpa/complete wel: daar is een pom.xml 
/ er is in complete ook een .mvn/ met daarin maven-wrapper.jar en maven-wrapper.properties 
/ TODO Wat zijn dat ?

/ 13	. 

/ als we in eclipse een gradle project rename, van tmp naar foo, dan moeten we repareren
$ vi settings.gradle
rootProject.name = 'foo'
/ want er stond nog 'tmp'

/ we maken er een git project van, 
Team, Share project
/ en commit, we zien de master branch,

/ we kunnen foo [foo master] rename naar bar, we krijgen allerlei ERRs, maar we moeten weer settings.gradle aanpassen, en 
right click project, Gradle, Refresh gradle project

/ maar in 'Git repositories' en 'Git tasks' views zien we nog steeds foo, de oude name, 
/ TODO

/ 13	. 

/ als we van te voren de complete/ rename naar gs-accessing-data-jpa , en deze import in eclipse, maar dan in .git/ staat nog steeds complete, dus als we in egit commit, dan zien we in Unstaged files alle complete/... files,
/ TODO
/ Lees,
https://stackoverflow.com/questions/11183788/in-a-git-repository-how-to-properly-rename-a-directory

/ we moeten
$ git mv

/ maar in egit zien we deze niet?

/ ga naar om git download,
https://git-scm.com/download/win

/ we install git in C:\Program Files\Git
/ we zien: server certificates will be validated using ca-bundle.ctr file

/ we doen op de command line,

C:\Users\ervelden\eclipse\workspace-java-oxygen\gs-accessing-data-jpa>git mv complete data-jpa-complete

C:\Users\ervelden\eclipse\workspace-java-oxygen\gs-accessing-data-jpa>git status
On branch master
Your branch is up-to-date with 'origin/master'.

Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)

        renamed:    complete/.mvn/wrapper/maven-wrapper.jar -> data-jpa-complete/.mvn/wrapper/maven-wrapper.jar
        renamed:    complete/.mvn/wrapper/maven-wrapper.properties -> data-jpa-complete/.mvn/wrapper/maven-wrapper.properties
        renamed:    complete/build.gradle -> data-jpa-complete/build.gradle
        renamed:    complete/gradle/wrapper/gradle-wrapper.jar -> data-jpa-complete/gradle/wrapper/gradle-wrapper.jar
        renamed:    complete/gradle/wrapper/gradle-wrapper.properties -> data-jpa-complete/gradle/wrapper/gradle-wrapper.properties
        renamed:    complete/gradlew -> data-jpa-complete/gradlew
        renamed:    complete/gradlew.bat -> data-jpa-complete/gradlew.bat
        renamed:    complete/mvnw -> data-jpa-complete/mvnw
        renamed:    complete/mvnw.cmd -> data-jpa-complete/mvnw.cmd
        renamed:    complete/pom.xml -> data-jpa-complete/pom.xml
        renamed:    complete/src/main/java/hello/Application.java -> data-jpa-complete/src/main/java/hello/Application.java
        renamed:    complete/src/main/java/hello/Customer.java -> data-jpa-complete/src/main/java/hello/Customer.java
        renamed:    complete/src/main/java/hello/CustomerRepository.java -> data-jpa-complete/src/main/java/hello/CustomerRepository.java
        renamed:    complete/src/test/java/hello/CustomerRepositoryTests.java -> data-jpa-complete/src/test/java/hello/CustomerRepositoryTests.java


C:\Users\ervelden\eclipse\workspace-java-oxygen\gs-accessing-data-jpa>git commit -m "renamed complete to data-jpa-complete"
[master 5ea6c2e] renamed complete to data-jpa-complete
 Committer: Velden <eric.vander.velden@sogeti.com>
Your name and email address were configured automatically based
on your username and hostname. Please check that they are accurate.
You can suppress this message by setting them explicitly. Run the
following command and follow the instructions in your editor to edit
your configuration file:

    git config --global --edit

After doing this, you may fix the identity used for this commit with:

    git commit --amend --reset-author

 14 files changed, 0 insertions(+), 0 deletions(-)
 rename {complete => data-jpa-complete}/.mvn/wrapper/maven-wrapper.jar (100%)
 rename {complete => data-jpa-complete}/.mvn/wrapper/maven-wrapper.properties (100%)
 rename {complete => data-jpa-complete}/build.gradle (100%)
 rename {complete => data-jpa-complete}/gradle/wrapper/gradle-wrapper.jar (100%)
 rename {complete => data-jpa-complete}/gradle/wrapper/gradle-wrapper.properties (100%)
 rename {complete => data-jpa-complete}/gradlew (100%)
 rename {complete => data-jpa-complete}/gradlew.bat (100%)
 rename {complete => data-jpa-complete}/mvnw (100%)
 rename {complete => data-jpa-complete}/mvnw.cmd (100%)
 rename {complete => data-jpa-complete}/pom.xml (100%)
 rename {complete => data-jpa-complete}/src/main/java/hello/Application.java (100%)
 rename {complete => data-jpa-complete}/src/main/java/hello/Customer.java (100%)
 rename {complete => data-jpa-complete}/src/main/java/hello/CustomerRepository.java (100%)
 rename {complete => data-jpa-complete}/src/test/java/hello/CustomerRepositoryTests.java (100%)

C:\Users\ervelden\eclipse\workspace-java-oxygen\gs-accessing-data-jpa>git status
On branch master
Your branch is ahead of 'origin/master' by 1 commit.
  (use "git push" to publish your local commits)

nothing to commit, working tree clean

/ we hebben intussen \Users\ervelden\.gitconfig create met egit, via Windows, Preferences, Team, Git, Configuration.

/ 13	. 

/ we hebben complete/ in gs-accessing-data-jpa renamed to data-jpa-complete met 'git mv en git commit' 
/ we hebben complete/ in gs-accessing-data-rest renamed to data-rest-complete met 'git mv en git commit' 
/ en we kunnen ze beide als gradle project import in eclipse,

/ 13	. 

/ MORGEN check tags uit in gs-accessing-data-jpa of -rest

/ 7	. 

/ SAMENVATTING DATA REST DATA JPA

/ project data-rest-complete

$ vi PersonRepository.java

@RepositoryRestResource
public interface PersonRepository extends PagingAndSortingRepository<Person, Long> {
	List<Person> findByLastName( @Param("name")String n);
}

/ Omdat we geen path="people" in @RepositoryRestResource(path="people"), moeten we persons geven in de rest calls,

/ we hoeven voor de rest calls hieronder  @Param("name") hoeven te geven in findByLastName( @Param("name")String n), omdat we deze functie hier niet use, maar wel als je 
C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -X GET http://localhost:8080/reservations/search/findByName?name=Foo


C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -X GET http://localhost:8080
{
  "_links" : {
    "persons" : {
      "href" : "http://localhost:8080/persons{?page,size,sort}",
      "templated" : true
    },
    "profile" : {
      "href" : "http://localhost:8080/profile"
    }
  }
}
C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -X GET http://localhost:8080/persons
{
  "_embedded" : {
    "persons" : [ ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/persons{?page,size,sort}",
      "templated" : true
    },
    "profile" : {
      "href" : "http://localhost:8080/profile/persons"
    },
    "search" : {
      "href" : "http://localhost:8080/persons/search"
    }
  },
  "page" : {
    "size" : 20,
    "totalElements" : 0,
    "totalPages" : 0,
    "number" : 0
  }
}

C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -X POST -H "Content-Type:application/json" -d "{  \"firstName\" : \"Frodo\",  \"lastName\" : \"Baggins\" }" http://localhost:8080/persons
{
  "firstName" : "Frodo",
  "lastName" : "Baggins",
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/persons/1"
    },
    "person" : {
      "href" : "http://localhost:8080/persons/1"
    }
  }
}
C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -i -X PATCH -H "Content-Type:application/json" -d "{  \"firstName\" : \"Foo\"  }" http://localhost:8080/persons/1
HTTP/1.1 200
Content-Type: application/hal+json;charset=UTF-8
Transfer-Encoding: chunked
Date: Wed, 16 Aug 2017 06:55:33 GMT

{
  "firstName" : "Foo",
  "lastName" : "Baggins",
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/persons/1"
    },
    "person" : {
      "href" : "http://localhost:8080/persons/1"
    }
  }
}

/ 7	. 

/ In data-jpa-complete hebben we ook een repository, maar is geen @RepositoryRestResource op, 
/ Maar dat is net zo als in joshlongvideo, waar we een jpa repository hebben, en daar bovenop een rest controller, 

@RestController
class ReservationController{
	
	@RequestMapping("/reservations")
	public Collection<Reservation>reservations(){
		return this.reservationRepository.findAll();
	}
	@Autowired
	private ReservationRepository reservationRepository;
		
}

interface ReservationRepository extends JpaRepository<Reservation, Long>{
	Collection<Reservation>findByName(String name);
}
/ omdat we nu alleen kunnen: 
curl -X GET http://localhost:8080/reservations
[{"id":1,"name":"Foo"},{"id":2,"name":"Bar"},{"id":3,"name":"Baz"},{"id":4,"name":"Gee"},{"id":5,"name":"Hee"}]
/ heeft het geen zin om @Param("name") toe te voegen bij het arg van findByName, want die gebruiken we helemaal niet nu, straks wel,

/ STRAKS HIER 




		




	





/ 13	. 

/ Maak de rest endpoint http://localhost:8080/reservations/search/findByName?name=...
/ TODO



/ dit kunnen we samennemen tot 

@RepositoryRestResource
interface ReservationRepository extends JpaRepository<Reservation, Long>{
	Collection<Reservation>findByName(@Param("name")String name);
}

/ we hebben ook @Param("name") toegevoegd, dit is voor 

C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -X GET http://localhost:8080/reservations/search/findByName?name=Fo
{
  "_embedded" : {
    "reservations" : [ {
      "name" : "Foo",
      "_links" : {
        "self" : {
          "href" : "http://localhost:8080/reservations/1"
        },
        "reservation" : {
          "href" : "http://localhost:8080/reservations/1"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/reservations/search/findByName?name=Foo"
    }
  }
}


/ Einde SAMENVATTING DATA REST DATA JPA

/ 7	. 

/ rest 

/ Lees,
https://spring.io/guides/tutorials/bookmarks/

/ we doen in eclipse,
$ git clone https://spring.io/guides/tutorials/bookmarks/


C:\Users\ervelden\eclipse\workspace-java-oxygen>dir tut-bookmarks
16-08-2017  12:50               273 .gitignore
16-08-2017  12:50               242 .travis.yml
16-08-2017  12:50    <DIR>          hateoas
16-08-2017  12:50               721 LICENSE.code.txt
16-08-2017  12:50               105 LICENSE.writing.txt
16-08-2017  12:50    <DIR>          model
16-08-2017  12:50             1.466 pom.xml
16-08-2017  12:50            47.955 README.adoc
16-08-2017  12:50    <DIR>          rest
16-08-2017  12:50    <DIR>          security
16-08-2017  12:50    <DIR>          snippets
              
/ tut-bookmarks is een maven proj. 
/ we import deze in eclipse, we zien de projects,
tut-bookmarks
hateos
model
rest
security
snippets

/ In model zijn def
Account
AccountRepository
Bookmark
BookmarkRepository




/ 7	. 

/ zelf data-rest , spring boot , gradle

/ lees Walls boek, spring boot, 

/ we zien in spring.io's gs-accessing-data-jpa:
dependencies {
    compile("org.springframework.boot:spring-boot-starter-data-rest")
    compile("org.springframework.boot:spring-boot-starter-data-jpa")
    compile("com.h2database:h2")
    testCompile("org.springframework.boot:spring-boot-starter-test")
}

/ we zien in data-rest van spring.io, 

/ Lees, 
https://docs.spring.io/spring-boot/docs/current/reference/html/cli-using-the-cli.html

/ geef bijvoorbeeld
$ spring help init

$ spring --version
Spring CLI v1.5.6.RELEASE

/ de spring boot app heeft dan ook deze versie, 

/ we willen een spring-boot application maken met spring, 

C:\Users\ervelden\eclipse\workspace-java-oxygen>mkdir my-data-rest
C:\Users\ervelden\eclipse\workspace-java-oxygen>cd my-data-rest
C:\Users\ervelden\eclipse\workspace-java-oxygen\my-data-rest> spring init  --dependencies data-rest,data-jpa,h2 --build gradle --extract
Using service at https://start.spring.io
Project extracted to 'C:\Users\ervelden\eclipse\workspace-java-oxygen\my-data-rest'

/ je kunt ook --artifactId my-data-rest, als je niet --extract doet, er onstaat my-data-rest.zip

/ we zien in build.gradle,

dependencies {
	compile('org.springframework.boot:spring-boot-starter-data-jpa')
	compile('org.springframework.boot:spring-boot-starter-data-rest')
	runtime('com.h2database:h2')
	testCompile('org.springframework.boot:spring-boot-starter-test')
}

/ we import dit gradle project in eclipse, en maken er een git project van,

/ 13. 

$ vi Application.java

package my.first;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class Application {

	public static void main(String[] args) {
		SpringApplication.run(Application.class, args);                // !
	}
}

$ vi Person.java

package my.first;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;

@Entity
public class Person {
	
	@Id
	@GeneratedValue(strategy=GenerationType.AUTO)
	private Long id;
	
	private String firstName;
	private String lastName;
	
	// getters and setters
	
$ vi PersonRepository.java

package my.first;

import java.util.List;

import org.springframework.data.repository.CrudRepository;
import org.springframework.data.repository.PagingAndSortingRepository;
import org.springframework.data.repository.query.Param;
import org.springframework.data.rest.core.annotation.RepositoryRestResource;

@RepositoryRestResource
public interface PersonRepository extends CrudRepository<Person, Long>{
	List<Person>findByLastName(@Param("name")String n);
}
/ we moeten persons geven in onze rest calls: curl -X GET http://localhost:8080/persons

/ of,
@RepositoryRestResource(path="people")
public interface PersonRepository extends CrudRepository<Person, Long>{
	List<Person>findByLastName(@Param("name")String n);
}
/ Dit doe je als je people wilt geven in de rest calls: curl -X GET http://localhost:8080/people

/ Dit is van spring.io,
@RepositoryRestResource(collectionResourceRel="people",path="people")
public interface PersonRepository extends PagingAndSortingRepository<Person, Long> {

/ wat is collectionResourceRel?
The rel value to use when generating links to the collection resource.
/ TODO

/ 13	.

/ Repository ipv CrudRepository 

/ als we,
public interface PersonRepository extends Repository<Person, Long>{
	List<Person>findByLastName(@Param("name")String n);
}
/ dan gaan een GET, POST goed, maar een PATCH niet:

C:\Users\ervelden\bin>curl -i -X PATCH -H "Content-Type:application/json" -d "{  \"firstName\" : \"Foo\",  }" http://localhost:8080/people/1
HTTP/1.1 500
Content-Type: application/hal+json;charset=UTF-8
Transfer-Encoding: chunked
Date: Tue, 15 Aug 2017 14:32:21 GMT
Connection: close

{"timestamp":1502807541845,"status":500,"error":"Internal Server Error","exception":"java.lang.IllegalStateException","message":"Repository doesn't have a find-one-method declared!","path":"/people/1"}

/ 13	. 

/ maar als we
public interface PersonRepository extends CrudRepository<Person, Long>{

/ dan gaat PATCH goed,
C:\Users\ervelden\bin>curl -i -X PATCH -H "Content-Type:application/json" -d "{  \"firstName\" : \"Foo\"  }" http://localhost:8080/people/1
HTTP/1.1 200
Content-Type: application/hal+json;charset=UTF-8
Transfer-Encoding: chunked
Date: Tue, 15 Aug 2017 14:39:37 GMT

{
  "firstName" : "Foo",
  "lastName" : "Baggins",
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/people/1"
    },
    "person" : {
      "href" : "http://localhost:8080/people/1"
    }
  }
}

/ POST werkt met localhost:8080/people
/ PUT en PATCH werkt met localhost:8080/people/1
/ GET werkt met localhost:8080, localhost:8080/people, localhost:8080/people/1, het ligt eraan wat je wilt zien,

/ 7	 

/ google: spring boot tutorial
https://docs.spring.io/spring-boot/docs/current/reference/html/getting-started-first-application.html
Next
https://docs.spring.io/spring-boot/docs/current/reference/html/getting-started-whats-next.html
/ hier staat een link naar samples,
https://github.com/spring-projects/spring-boot/tree/v1.5.6.RELEASE/spring-boot-samples


/ 7	. 

/ joshlongvideo

@RepositoryRestResource
interface ReservationRepository extends JpaRepository<Reservation, Long>{
	Collection<Reservation>findByName(@Param("name")String n);
}



/ op de command line in windows moeten we & escape met ^&

/ 13	. 

/ er zijn 5 reservations.
/ als we size=1 geven , zijn er 5 pages, 
/ als we size=2 geven, zijn er 3 pages, 2 pages met 2 reservations, 1 page met 1 reservation, 
/ page begint met 0	,



C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -X GET http://localhost:8080/reservations?page=3^&size=1
{
  "_embedded" : {
    "reservations" : [ {
      "name" : "Gee",
      "_links" : {
        "self" : {
          "href" : "http://localhost:8080/reservations/4"
        },
        "reservation" : {
          "href" : "http://localhost:8080/reservations/4"
        }
      }
    } ]
  },
  "_links" : {
    "first" : {
      "href" : "http://localhost:8080/reservations?page=0&size=1"
    },
    "prev" : {
      "href" : "http://localhost:8080/reservations?page=2&size=1"
    },
    "self" : {
      "href" : "http://localhost:8080/reservations{&sort}",
      "templated" : true
    },
    "next" : {
      "href" : "http://localhost:8080/reservations?page=4&size=1"
    },
    "last" : {
      "href" : "http://localhost:8080/reservations?page=4&size=1"
    },
    "profile" : {
      "href" : "http://localhost:8080/profile/reservations"
    },
    "search" : {
      "href" : "http://localhost:8080/reservations/search"
    }
  },
  "page" : {
    "size" : 1,
    "totalElements" : 5,
    "totalPages" : 5,
    "number" : 3
  }
}

C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -X GET http://localhost:8080/reservations?page=0^&size2
{
  "_embedded" : {
    "reservations" : [ {
      "name" : "Foo",
      "_links" : {
        "self" : {
          "href" : "http://localhost:8080/reservations/1"
        },
        "reservation" : {
          "href" : "http://localhost:8080/reservations/1"
        }
      }
    }, {
      "name" : "Bar",
      "_links" : {
        "self" : {
          "href" : "http://localhost:8080/reservations/2"
        },
        "reservation" : {
          "href" : "http://localhost:8080/reservations/2"
        }
      }
    }, {
      "name" : "Baz",
      "_links" : {
        "self" : {
          "href" : "http://localhost:8080/reservations/3"
        },
        "reservation" : {
          "href" : "http://localhost:8080/reservations/3"
        }
      }
    }, {
      "name" : "Gee",
      "_links" : {
        "self" : {
          "href" : "http://localhost:8080/reservations/4"
        },
        "reservation" : {
          "href" : "http://localhost:8080/reservations/4"
        }
      }
    }, {
      "name" : "Hee",
      "_links" : {
        "self" : {
          "href" : "http://localhost:8080/reservations/5"
        },
        "reservation" : {
          "href" : "http://localhost:8080/reservations/5"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/reservations{?page,size,sort}",
      "templated" : true
    },
    "profile" : {
      "href" : "http://localhost:8080/profile/reservations"
    },
    "search" : {
      "href" : "http://localhost:8080/reservations/search"
    }
  },
  "page" : {
    "size" : 20,
    "totalElements" : 5,
    "totalPages" : 1,
    "number" : 0
  }
}
C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -X GET http://localhost:8080/reservations?page=0^&size=2
{
  "_embedded" : {
    "reservations" : [ {
      "name" : "Foo",
      "_links" : {
        "self" : {
          "href" : "http://localhost:8080/reservations/1"
        },
        "reservation" : {
          "href" : "http://localhost:8080/reservations/1"
        }
      }
    }, {
      "name" : "Bar",
      "_links" : {
        "self" : {
          "href" : "http://localhost:8080/reservations/2"
        },
        "reservation" : {
          "href" : "http://localhost:8080/reservations/2"
        }
      }
    } ]
  },
  "_links" : {
    "first" : {
      "href" : "http://localhost:8080/reservations?page=0&size=2"
    },
    "self" : {
      "href" : "http://localhost:8080/reservations{&sort}",
      "templated" : true
    },
    "next" : {
      "href" : "http://localhost:8080/reservations?page=1&size=2"
    },
    "last" : {
      "href" : "http://localhost:8080/reservations?page=2&size=2"
    },
    "profile" : {
      "href" : "http://localhost:8080/profile/reservations"
    },
    "search" : {
      "href" : "http://localhost:8080/reservations/search"
    }
  },
  "page" : {
    "size" : 2,
    "totalElements" : 5,
    "totalPages" : 3,
    "number" : 0
  }
}
/ als size=2, zijn er 3 pages, 
/ als size=1, zijn er 5 pages,

/ 13	.

/ omdat we een find method hebben in de repository, is er een /search URL	,

C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -X GET http://localhost:8080/reservations/search
{
  "_links" : {
    "findByName" : {
      "href" : "http://localhost:8080/reservations/search/findByName{?name}",
      "templated" : true
    },
    "self" : {
      "href" : "http://localhost:8080/reservations/search"
    }
  }
}
C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -X GET http://localhost:8080/reservations/search/findByName?name=Foo
{
  "_embedded" : {
    "reservations" : [ {
      "name" : "Foo",
      "_links" : {
        "self" : {
          "href" : "http://localhost:8080/reservations/1"
        },
        "reservation" : {
          "href" : "http://localhost:8080/reservations/1"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/reservations/search/findByName?name=Foo"
    }
  }
}
C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -X GET http://localhost:8080/reservations/search/findByName?name=Foo
{
  "_embedded" : {
    "reservations" : [ {
      "name" : "Foo",
      "_links" : {
        "self" : {
          "href" : "http://localhost:8080/reservations/1"
        },
        "reservation" : {
          "href" : "http://localhost:8080/reservations/1"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/reservations/search/findByName?name=Foo"
    }
  }
}

/ 13	. 

/ extra item

/ HAL is implementation of HATEOS

import java.util.Arrays;
import java.util.Collection;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.Bean;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.repository.query.Param;
import org.springframework.data.rest.core.annotation.RepositoryRestResource;
import org.springframework.data.rest.webmvc.RepositoryRestController;
import org.springframework.hateoas.Link;
import org.springframework.hateoas.Resource;
import org.springframework.hateoas.ResourceProcessor;
import org.springframework.stereotype.Component;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;


@Component
class ReservationResourceProcessor implements ResourceProcessor<Resource<Reservation>>{
	@Override
	public Resource<Reservation> process(Resource<Reservation> resource) {
		resource.add((new Link("http://s3.com/imgs"+resource.getContent().getId()+".jpg", "profile-photo")));
		return resource;
	}
}

@RepositoryRestResource
interface ReservationRepository extends JpaRepository<Reservation, Long>{
	Collection<Reservation>findByName(@Param("name")String n);
}

C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -X GET http://localhost:8080/reservations/search/findByName?name=Foo
{
  "_embedded" : {
    "reservations" : [ {
      "name" : "Foo",
      "_links" : {
        "self" : {
          "href" : "http://localhost:8080/reservations/1"
        },
        "reservation" : {
          "href" : "http://localhost:8080/reservations/1"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/reservations/search/findByName?name=Foo"
    }
  }
}
C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -X GET http://localhost:8080/reservations/search/findByName?name=Foo
{
  "_embedded" : {
    "reservations" : [ {
      "name" : "Foo",
      "_links" : {
        "self" : {
          "href" : "http://localhost:8080/reservations/1"
        },
        "reservation" : {
          "href" : "http://localhost:8080/reservations/1"
        },
        "profile-photo" : {                                                // !
          "href" : "http://s3.com/imgs1.jpg"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/reservations/search/findByName?name=Foo"
    }
  }
}

/ wat doen de keys self, reservation, profile-photo ?
/ TODO

/ 13	. 

/ mvc controller,




/ 7	. 

/ REST 

/ 13	. 

/ we kunnen, 

class ReservationController{

	@RequestMapping("/reservations")
/ of,
	@RequestMapping(value="/reservations")
/ of	,
	@RequestMapping(method=RequestMethod.GET,value="/reservations")
	public Collection<Reservation>reservations(){
	
/ 13	.

/ we kunnen ook de @RequestMapping op de class, maar de methods moeten OOK altijd een @RequestMapping hebben:

@RestController
@RequestMapping("/reservations")
class ReservationController{
	
	@RequestMapping
	public Collection<Reservation>reservations(){
	
/ GET is WH de default,

/ 13	.

/ request parameter, dus met ?

/ in joshlongvideo,

$ vi FirstspringbootApplication.java

@RestController
@RequestMapping("/reservations")
class ReservationController{
	
	@RequestMapping
	public Collection<Reservation>reservations(){
		return this.reservationRepository.findAll();
	}
	@RequestMapping("/findById")
	public Reservation reservation(@RequestParam("id")Long id) {
		return reservationRepository.findOne(id);
	}

interface ReservationRepository extends JpaRepository<Reservation, Long>{
	Collection<Reservation>findByName(String n);
}
	

C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -X GET localhost:8080/reservations
[{"id":1,"name":"Foo"},{"id":2,"name":"Bar"},{"id":3,"name":"Baz"},{"id":4,"name":"Gee"},{"id":5,"name":"Hee"}]
C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -X GET localhost:8080/reservations?id=1
[{"id":1,"name":"Foo"},{"id":2,"name":"Bar"},{"id":3,"name":"Baz"},{"id":4,"name":"Gee"},{"id":5,"name":"Hee"}]

C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -X GET localhost:8080/reservations/findById?id=1
{"id":1,"name":"Foo"}
C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -X GET localhost:8080/reservations/findById?id=2
{"id":2,"name":"Bar"}

/ we kunnen achter /reservations ook ?id=1 geven, maar dat heeft geen effect,

/ 1313	. 

/ we kunnen ook een default geven, 

	@RequestMapping("/findById")
	public Reservation reservation(@RequestParam(value="id",defaultValue="2")Long id) {
		return reservationRepository.findOne(id);
	}
	
/ we moeten value= schrijven, @RequestParam("id",defaultValue="2") is ERR,
	
C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -X GET localhost:8080/reservations/findById?id=3
{"id":3,"name":"Baz"}
C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -X GET localhost:8080/reservations/findById
{"id":2,"name":"Bar"}


/ 13	.

/ wat we zien is WH json. 
/ Stel we willen xml,

/ google: spring rest xml
/ Lees,
http://howtodoinjava.com/spring/spring-restful/spring-rest-hello-world-xml-example/
https://spring.io/guides/gs/consuming-rest-xml-android/

/ Lees,
https://www.javainterviewpoint.com/spring-rest-hello-world-example/                     <-
https://askubuntu.com/questions/299870/http-post-and-get-using-curl-in-linux            <-


/ we moeten extra annotaties op de entity, 

$ vi FirstspringbootApplication.java

@RestController
@RequestMapping("/reservations")
class ReservationController{
	
	@RequestMapping(value="/findById2", method=RequestMethod.GET,produces="application/xml")
	public Reservation reservation2(@RequestParam(value="id",defaultValue="2")Long id) {
		return reservationRepository.findOne(id);
	}
	...
}





@Entity
@XmlRootElement                                   // <-
@XmlAccessorType(XmlAccessType.FIELD)             // <-
class Reservation{
	@Id @GeneratedValue @XmlElement               // <-
	private Long id;
	
	@XmlElement                                   // <-
	private String name;

	public String getName() {
		return name;
	}
	public void setName(String name) {
		this.name=name;
	}

	@Override
	public String toString() {
		return "Reservation{id="+id+",name="+name+"}";
	}
	public Reservation() { // for JPA TODO
	}
	public Reservation(String name) {
		this.name=name;
	}
	public Long getId() {
		return id;
	}
	public void setId(Long id) {
		this.id=id;
	}
}

/ produces="application/xml" is een restrictie; als we hem NIET, dan kunnen we curl -H "Accept:application/xml", maar ook -H "Accept:application/json", als we hem WEL, dan kunnen we ALLEEN -H "Accept:application/xml"

/ method=RequestMethod.GET ook een restrictie, see beneden bij post,

/ 1313	 .

/ WEL produces="application/xml"
/ we zien dat -H "Accept:application/json" ERR geeft,

C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -i -X GET -H "Accept:application/xml"  http://localhost:8080/reservations/findById2?id=3
HTTP/1.1 200
Content-Type: application/xml
Transfer-Encoding: chunked
Date: Thu, 17 Aug 2017 07:36:34 GMT

<?xml version="1.0" encoding="UTF-8" standalone="yes"?><reservation><id>3</id><name>Baz</name></reservation>


C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -i -X GET -H "Accept:application/json"  http://localhost:8080/reservations/findById2?id=3
HTTP/1.1 406
Content-Type: application/json;charset=UTF-8
Transfer-Encoding: chunked
Date: Thu, 17 Aug 2017 07:36:44 GMT

{"timestamp":1502955404322,"status":406,"error":"Not Acceptable","exception":"org.springframework.web.HttpMediaTypeNotAcceptableException","message":"Could not find acceptable representation","path":"/reservations/findById2"}

/ 1313	. 

/ GEEN produces="application/xml"
/ we zien dat -H "Accept:application/json" OK is,

C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -i -X GET -H "Accept:application/xml"  http://localhost:8080/reservations/findById2?id=3
HTTP/1.1 200
Content-Type: application/xml
Transfer-Encoding: chunked
Date: Thu, 17 Aug 2017 07:43:59 GMT

<?xml version="1.0" encoding="UTF-8" standalone="yes"?><reservation><id>3</id><name>Baz</name></reservation>


C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -i -X GET -H "Accept:application/json"  http://localhost:8080/reservations/findById2?id=3
HTTP/1.1 200
Content-Type: application/json;charset=UTF-8
Transfer-Encoding: chunked
Date: Thu, 17 Aug 2017 07:44:07 GMT

{"id":3,"name":"Baz"}

/ 1313	. 

/ we rm /findById2 en rm produces="application/json" op /findById, 



/ 13	. 

/ post

$ vi FirstspringbootApplication.java
@RestController
@RequestMapping("/reservations")
class ReservationController{
	
	@RequestMapping(method=RequestMethod.POST,value="/postByName")
	public  Reservation save(@RequestBody Reservation reservation) {
		return reservationRepository.save(reservation);
	}
	...
}
	
interface ReservationRepository extends JpaRepository<Reservation, Long>{
	Collection<Reservation>findByName(String n);
}

@Entity
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
class Reservation{
	@Id 
	@GeneratedValue 
	@XmlElement
	private Long id;
	
	@XmlElement
	private String name;

	public String getName() {
		return name;
	}
	public void setName(String name) {
		this.name=name;
	}

	@Override
	public String toString() {
		return "Reservation{id="+id+",name="+name+"}";
	}
	public Reservation() { // for JPA TODO
	}
	public Reservation(String name) {
		this.name=name;
	}
	public Long getId() {
		return id;
	}
	public void setId(Long id) {
		this.id=id;
	}
}

/ we kunnen WEL of NIET de restrictie method=RequestMethod.POST

/ 1313	.

/ WEL de restrictie method=RequestMethod.POST

C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -i -X GET -H "Content-Type:application/json" -d "{ \"name\" : \"Foo\" }" http://localhost:8080/reservations/postByName
HTTP/1.1 405
Allow: POST
Content-Type: application/json;charset=UTF-8
Transfer-Encoding: chunked
Date: Thu, 17 Aug 2017 08:20:02 GMT

{"timestamp":1502958002463,"status":405,"error":"Method Not Allowed","exception":"org.springframework.web.HttpRequestMethodNotSupportedException","message":"Request method 'GET' not supported","path":"/reservations/postByName"}


C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -i -X POST -H "Content-Type:application/json" -d "{ \"name\" : \"Foo\" }" http://localhost:8080/reservations/postByName
HTTP/1.1 200
Content-Type: application/json;charset=UTF-8
Transfer-Encoding: chunked
Date: Thu, 17 Aug 2017 08:20:13 GMT

{"id":6,"name":"Foo"}

C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -i -X POST -H "Content-Type:application/json" -d "{ \"name\" : \"Foo\" }" http://localhost:8080/reservations/postByName
HTTP/1.1 200
Content-Type: application/json;charset=UTF-8
Transfer-Encoding: chunked
Date: Thu, 17 Aug 2017 08:21:22 GMT

{"id":7,"name":"Foo"}

/ 1313	. 

/ NIET restrictie method=RequestMethod.POST

C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -i -X GET -H "Content-Type:application/json" -d "{ \"name\" : \"Foo\" }" http://localhost:8080/reservations/postByName
HTTP/1.1 200
Content-Type: application/json;charset=UTF-8
Transfer-Encoding: chunked
Date: Thu, 17 Aug 2017 08:23:23 GMT

{"id":6,"name":"Foo"}

C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -i -X GET -H "Content-Type:application/json" -d "{ \"name\" : \"Foo\" }" http://localhost:8080/reservations/postByName
HTTP/1.1 200
Content-Type: application/json;charset=UTF-8
Transfer-Encoding: chunked
Date: Thu, 17 Aug 2017 08:23:28 GMT

{"id":7,"name":"Foo"}

/ 13	. 

/ niet meer met request params, maar met path variables

/ get

$ vi FirstspringbootApplication.java

@RestController
@RequestMapping("/reservations")
class ReservationController{

	@RequestMapping(value="/findWithPathVariableId/{id}")
	public Reservation reservation2(@PathVariable Long id) {
		return reservationRepository.findOne(id);
	}
	...
}

C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -i -X GET -H "Accept:application/xml" http://localhost:8080/reservations/findWithPathVariableId/3
HTTP/1.1 200
Content-Type: application/xml
Transfer-Encoding: chunked
Date: Thu, 17 Aug 2017 09:11:10 GMT

<?xml version="1.0" encoding="UTF-8" standalone="yes"?><reservation><id>3</id><name>Baz</name></reservation>

C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -i -X GET -H "Accept:application/json" http://localhost:8080/reservations/findWithPathVariableId/3
HTTP/1.1 200
Content-Type: application/json;charset=UTF-8
Transfer-Encoding: chunked
Date: Thu, 17 Aug 2017 09:11:18 GMT

{"id":3,"name":"Baz"}

/ 13	. 

/ path variables

/ post

/ Lees,
http://www.baeldung.com/spring-requestmapping

/ 1313	.

/ post 

/ path variables

@RestController
@RequestMapping("/reservations")
class ReservationController{
	@RequestMapping(value="/postWithPathVariableByName/{name}")
	public  Reservation save2(@PathVariable String name) {
		return reservationRepository.save(new Reservation(name));
	}
	...
}
C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -i -X POST -H "Content-Type:application/json" http://localhost:8080/reservations/postWithPathVariableByName/Foo
HTTP/1.1 200
Content-Type: application/json;charset=UTF-8
Transfer-Encoding: chunked
Date: Thu, 17 Aug 2017 11:18:33 GMT

{"id":6,"name":"Foo"}

C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -i -X POST -H "Content-Type:application/json" http://localhost:8080/reservations/postWithPathVariableByName/Foo
HTTP/1.1 200
Content-Type: application/json;charset=UTF-8
Transfer-Encoding: chunked
Date: Thu, 17 Aug 2017 11:18:36 GMT

{"id":7,"name":"Foo"}

/ 1313	.

/ Lees,
https://stackoverflow.com/questions/11938253/jpa-joincolumn-vs-mappedby

/ een restaurant heeft meerdere reserveringen	,

/ 131313.

class Restaurant{
	@OneToMany(mappedBy="restaurant")
	private <Reservation>reservations;

class Reservation{
	@ManyToOne
	private Restaurant restaurant;
	
/ de owner van de relationship is reservation, daar is de fk	,

/ 131313.

class Restaurant{
	@OneToMany
	@JoinColumn(name="restaurant")
	private <Reservation>reservations;

class Reservation{
	@ManyToOne
	private Restaurant restaurant;

/ Nu is de fk's in restaurant en is restaurant de owner van de relationship.
/ TODO Maak het,

/ 1313	. 

/ WH met @RequestBody convert van request parameters naar een entity, 
/ Bestaat zoiets ook voor path variables? Nu maken we een new Reservation met de path variables als ctor args,
/ TODO

/ we maken met de path variables met new een nieuw restaurant, en laat de request params naar een reservation convert, 
/ we moeten wel @ManyToOne(cascade=CascadeType.ALL) set op de restaurant fk in de reservation, anders ERR dat de restaurant nog transient is als de reservation wordt saved	,

/ we maken,

$ vi FirstspringbootApplication.java

@SpringBootApplication
public class FirstspringbootApplication {

	public static void main(String[] args) {
		Arrays.asList(args).forEach(System.out::println);
		SpringApplication.run(FirstspringbootApplication.class, args);
	}
	
	@Bean CommandLineRunner runner(ReservationRepository rr,RestaurantRepository rar) {
		return args ->{
			Arrays.asList("Foo,Bar,Baz,Gee,Hee".split(","))
				.forEach(n->rr.save(new Reservation(n)));
				
			Arrays.asList("Roo,See,Tuu".split(","))                      // <-
			.forEach(n->rar.save(new Restaurant(n)));
			
			rr.findAll().forEach(System.out::println);
			rr.findByName("Foo").forEach(System.out::println);
		};
	}
}
	
@RestController
@RequestMapping("/reservations")
class ReservationController{
	
	@RequestMapping(value="/postWithPathVariableByName/{name}")
	public  Reservation save2(@PathVariable String name,@RequestBody Restaurant restaurant) {
		return reservationRepository.save(new Reservation(name, restaurant));
	}
	
	private ReservationRepository reservationRepository;
	public ReservationRepository getReservationRepository() {
		return reservationRepository;
	}
	@Autowired
	public void setReservationRepository(ReservationRepository reservationRepository) {
		this.reservationRepository = reservationRepository;
	}	
}



interface ReservationRepository extends JpaRepository<Reservation, Long>{
	Collection<Reservation>findByName(String n);
}

interface RestaurantRepository extends JpaRepository<Restaurant, Long>{
	
}

@Entity
class Restaurant{
	@Id
	@GeneratedValue
	private Long id;
	
	private String name;
	
	@OneToMany(mappedBy="restaurant")
	private List<Reservation> reservations;
	
	public Restaurant() {
		// TODO Auto-generated constructor stub
	}
	public Restaurant(String name) {
		this.name=name;
	}

	public Long getId() {
		return id;
	}

	public void setId(Long id) {
		this.id = id;
	}

	public String getName() {
		return name;
	}

	public void setName(String name) {
		this.name = name;
	}
	public List<Reservation> getReservations() {
		return reservations;
	}
	public void setReservations(List<Reservation> reservations) {
		this.reservations = reservations;
	}
	
	
}
@Entity
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
class Reservation{
	@Id 
	@GeneratedValue 
	@XmlElement
	private Long id;
	
	@XmlElement
	private String name;
	
	@ManyToOne(cascade=CascadeType.ALL)                         // <-
	private Restaurant restaurant;

	public String getName() {
		return name;
	}
	public void setName(String name) {
		this.name=name;
	}

	@Override
	public String toString() {
		return "Reservation{id="+id+",name="+name+"}";
	}
	public Reservation() { // for JPA TODO
	}
	public Reservation(String name) {
		this.name=name;
	}
	public Reservation(String name,Restaurant restaurant) {
		this.name=name;
		this.restaurant=restaurant;
	}
	public Long getId() {
		return id;
	}
	public void setId(Long id) {
		this.id=id;
	}
	public Restaurant getRestaurant() {
		return restaurant;
	}
	public void setRestaurant(Restaurant restaurant) {
		this.restaurant = restaurant;
	}
}

C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -i -X POST -H "Content-Type:application/json" -d "{ \"name\":\"Roo\"}" http://localhost:8080/reservations/postWithPathVariableByName/Foo
HTTP/1.1 200
Content-Type: application/json;charset=UTF-8
Transfer-Encoding: chunked
Date: Thu, 17 Aug 2017 12:58:22 GMT

{"id":6,"name":"Foo","restaurant":{"id":4,"name":"Roo","reservations":null}}

/ nog een keer deze call,
{"id":7,"name":"Foo","restaurant":{"id":5,"name":"Roo","reservations":null}}

/ 131313	 .

/ als we NIET cascade=CascadeType.ALL, dan ERR,{"timestamp":1502974283271,"status":500,"error":"Internal Server Error","exception":"org.springframework.dao.InvalidDataAccessApiUsageException","message":"org.hibernate.TransientPropertyValueException: object references an unsaved transient instance - save the transient instance before flushing : my.own.firstspringboot.Reservation.restaurant -> my.own.firstspringboot.Restaurant; nested exception is java.lang.IllegalStateException: org.hibernate.TransientPropertyValueException: object references an unsaved transient instance - save the transient instance before flushing : my.own.firstspringboot.Reservation.restaurant -> my.own.firstspringboot.Restaurant","path":"/reservations/postWithPathVariableByName/Foo"}

/ MORGENOCHTEND
/ 13	.

/ ERRs,

C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -i -X POST -H "Content-Type:application/json" http://localhost:8080/reservations/postWithPathVariableByName/Foo
HTTP/1.1 400
Content-Type: application/json;charset=UTF-8
Transfer-Encoding: chunked
Date: Thu, 17 Aug 2017 10:39:54 GMT
Connection: close

{"timestamp":1502966394518,"status":400,"error":"Bad Request","exception":"org.springframework.web.method.annotation.MethodArgumentTypeMismatchException","message":"Failed to convert value of type 'java.lang.String' to required type 'my.own.firstspringboot.Reservation'; nested exception is org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [java.lang.Long] for value 'Foo'; nested exception is java.lang.NumberFormatException: For input string: \"Foo\"","path":"/reservations/postWithPathVariableByName/Foo"}
C:\Users\ervelden\eclipse\workspace-java-oxygen>


C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -i -X POST -H "Content-Type:application/json" http://localhost:8080/reservations/postWithPathVariableByName/8/Foo

{"timestamp":1502968160342,"status":400,"error":"Bad Request","exception":"org.springframework.http.converter.HttpMessageNotReadableException","message":"Required request body is missing: public my.own.firstspringboot.Reservation my.own.firstspringboot.ReservationController.save2(java.lang.Long,java.lang.String,my.own.firstspringboot.Reservation)","path":"/reservations/postWithPathVariableByName/9/Foo"}

/ 7	.

/ we hebben FirstspringbootApplication.java uitgebreid in project joshlongvideo . 
/ we maken project joshlongvideoext, met daarin de uitgebreide FirstspringbootApplication.java, en herstellen in joshlongvideo FirstspringbootApplication.java zoals de video is,

C:\Users\ervelden\eclipse\workspace-java-oxygen\joshlongvideoext>spring init --dependencies data-jpa,web,data-rest,h2 --build gradle --extract
Using service at https://start.spring.io

/ we import het gradle project joshlongvideoext in eclipse en copy FirstspringbootApplication.java en FirstspringbootApplicationTests.java over vanuit joshlongvideoext.

/ 13	. 

/ Geen field injection: hij bedoeld dat in een unit test annotaties niet gelden, niets doen,
/ Als je de annotatie op een setter set, werkt hij in de appl, en in de test kun je doen:
	obj.set<Property>(new Mock())
/ Met field inj kan dit niet, 
/ Maar misschien toch wel met Mockito's @InjectMocks

/ google: java field injection unit test dies
https://stackoverflow.com/questions/34231426/unit-test-in-spring-injecting-a-dependency-into-a-component-under-test
http://olivergierke.de/2013/11/why-field-injection-is-evil/

/ 13	. 

/ als we @RepositoryRestResource set op de repository zien we metadata, 
/ Als we zelf een @RestController maken, met methods die find of save, geschikt voor GET en POST/PUT/PATCH, dan OK, maar geen metadata. 
/ TODO MORGEN welke methods worden called bij POST/PUT/PATCH

/ -X PATCH persons/1 : bij @RepositoryRestResource
/ TODO

http://localhost:8080/reservations/search/findByName?name=Foo: toch ook bij @RepositoryRestResource
de method heet zo, 
/ TODO
Als we in FirstspringbootApplication @RequestMapping nemen, dus weglaten: (value="/findById"), pakt hij dan ook de method name? 
/ TODO

/ 13	. 

/ thymeleaf

/ we zien in 
src/main/resources
	templates
	static
	application.properties

/ WH zijn dit spring boot directories,

/ als we een HTML file willen maken, start dan JEE eclipse, WH WTP 
/ TODO
http://help.eclipse.org/kepler/index.jsp?topic=%2Forg.eclipse.wst.webtools.doc.user%2Ftopics%2Ftjcrehtm.html

/ we hebben jee-oxygen geopend op workspace-java-oxygen.

/ In thymeleaf: ${...} , NIET $(...)

/ project joshlongvideo, 

$ vi FirstspringbootApplication.java

@RepositoryRestResource
interface ReservationRepository extends JpaRepository<Reservation, Long>{
	Collection<Reservation>findByName(@Param("name")String n);
}

@Component
class ReservationResourceProcessor implements ResourceProcessor<Resource<Reservation>>{
	@Override
	public Resource<Reservation> process(Resource<Reservation> resource) {
		resource.add((new Link("http://s3.com/imgs"+resource.getContent().getId()+".jpg", "profile-photo")));
		return resource;
	}
}

@Controller
class ReservationMvcController{
	@RequestMapping("/reservations.php")
	String reservations(Model model) {
		model.addAttribute("reservations", this.reservationRepository.findAll());
		return "reservations"; // src/main/resources/templates+$X+.html
	}
	@Autowired
	private ReservationRepository reservationRepository;
}

@Entity
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
@Data
@NoArgsConstructor
@RequiredArgsConstructor
class Reservation{
	@Id 
	@GeneratedValue 
	@XmlElement
	private Long id;
	
	@XmlElement
	@NonNull
	private String name;
}

/ Geef
localhost:8080/reservations.php

/ Eerst gaven we localhost:8080/reservations


/ 13	. 

/ isomorphic templates: react based view from out the framework,
/ TODO
https://spring.io/blog/2016/03/15/springone2gx-2015-replay-isomorphic-templating-with-spring-boot-nashorn-and-react


/ 13	. 

/ actuator

$ vi src/main/resources/application.properties
management.security.enabled=false

/ Geef
localhost:8080/metrics
/ OK

/ we geven een aantal keer, 
http://localhost:8080/reservations
http://localhost:8080/reservations/1
http://localhost:8080/reservations/2
http://localhost:8080/reservations.php


/ we zien,
http://localhost:8080/metrics

counter.status.200.root: 14,									/ localhost:8080
counter.status.200.repository.id: 15,                           / localhost:8080/reservations/1 en localhost:8080/reservations/2
counter.status.200.metrics: 4,                                   / locahost:8080/metrics
counter.status.200.reservations.php: 9,                         / localhost:8080/reservations.php
counter.status.200.repository: 13                                   / locahost:8080/reservations

/ er is ook ,

http://localhost:8080/trace
...
{
timestamp: 1503397616189,
info: {
method: "GET",
path: "/reservations/2",
headers: {
request: {
host: "localhost:8080",
connection: "keep-alive",
upgrade-insecure-requests: "1",
user-agent: "Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.90 Safari/537.36",
accept: "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8",
accept-encoding: "gzip, deflate, br",
accept-language: "en-US,en;q=0.8",
cookie: "io=zEll7mwbcXZL3mAMAABX"
},
response: {
X-Application-Context: "application",
Content-Type: "application/hal+json;charset=UTF-8",
Transfer-Encoding: "chunked",
Date: "Tue, 22 Aug 2017 10:26:56 GMT",
status: "200"
}
},
timeTaken: "11"
}
},
/ dus localhost:8080/reservations/2 hebben we 11 keer GET,

/ er is ook,
localhost:8080/env

/ er is ook 
localhost:8080/beans

/ er is ook,
localhost:8080/dump

/ er is ook,
http://localhost:8080/mappings
/ we zien 
/dump
/env

/ we zien ook, maar die heeft helemaal geen mapping, 
/error
/ TODO

/ we zien ook,
{[/reservations.php]}: {
bean: "requestMappingHandlerMapping",
method: "java.lang.String my.own.firstspringboot.ReservationMvcController.reservations(org.springframework.ui.Model)"
},

/ we zien wel 
/reservations.php
maar NIET, 
/reservation
/ TODO

/ 1313	.
>"\Program Files\Java\jdk1.8.0_144\bin\jconsole.exe"
MBeans
org.springframework.boot
	endpoint
		HealthEndpoint
			Operations
				getData()  / click
status=UP
diskSpace={status=UP,total=...,free=...}
db={status=UP,database=H2,hello=1}
/ connection pool has a validation query, and the result of this validation query is 1, so it is 
select 1 from dual

/ 13	. 

/ remote shell 
/ TODO
/ is deprecated

/ 13	. 

/ provided in gradle is compileOnly	,

$ vi build.gradle
dependencies {
	compile('org.springframework.boot:spring-boot-starter-undertow')
	compileOnly('org.springframework.boot:spring-boot-starter-tomcat')
	
2017-08-22 13:01:09.981  INFO 15384 --- [           main] b.c.e.u.UndertowEmbeddedServletContainer : Undertow started on port(s) 8080 (http)

/ geef 
localhost:8080/reservations
/ OK









				
		















/ Einde REST


/ OPEN COMMANDS

C:\Users\ervelden\eclipse\workspace-java-oxygen>curl -i -X POST -H "Content-Type:application/json" -d "{ \"name\":\"Roo\"}" http://localhost:8080/reservations/postWithPathVariableByName/Foo

C:\Users\ervelden\eclipse\workspace-java-oxygen>spring init --dependencies jpa,jdbc,postgresql --build gradle --extract

C:\Users\ervelden\eclipse\workspace-java-oxygen\hibernate> java -classpath "\Program Files (x86)\H2\bin\h2-1.4.196.jar" org.h2.tools.Server -tcp

C:\Users\ervelden\hibernate\hibernate-tutorials>notepad++ basic\src\test\resources\hibernate.cfg.xml






/ Einde OPEN COMMANDS

/ OPEN IN CHROME


http://browserify.org/
https://www.youtube.com/watch?v=EveYfHKXvfc   / deep learning !
http://adrianmejia.com/blog/2016/08/12/Getting-started-with-Node-js-modules-require-exports-imports-npm-and-beyond/   / node exports !
https://spring.io/understanding/javascript-modules
https://www.youtube.com/watch?v=0Oazb7IWzbA           / -1/12 riemann zeta functie
https://www.youtube.com/watch?v=yG4FH60fhUE   / testing angular2 met jasmine en met karma
https://gumroad.com/d/cfd861d00eb812fc4fcab79768bd7da0  / ng-book wat ik kan download,
https://gumroad.com/purchases/8EDIWWAy97GrKdjLoLL8kw==/generate_invoice / ng-book invoicehttps://mail.google.com/mail/u/0/#inbox/15e011a740f5ec6f / email ng-book
http://blog.ng-book.com/
https://code.visualstudio.com/docs/editor/integrated-terminal
https://code.visualstudio.com/docs/getstarted/userinterface
https://code.visualstudio.com/docs/nodejs/angular-tutorial

https://docs.jboss.org/hibernate/orm/5.0/quickstart/html/#tutorial-native

https://www.w3schools.com/js/js_strict.asp
https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions
https://projectlombok.org/

http://infosecuritymagazine.nl/2017/04/13/eerste-nederlandse-cyberwerkplaats-opent-deuren-in-rotterdam/












/ Einde OPEN IN CHROME


/ LOMBOK

/ we download van
https://projectlombok.org/download

/ dubbel click, WH java -jar, en kies de eclipse waarin je lombok wilt install,
/ we zien 2 dingen, 

C:\Users\ervelden\eclipse\jbosstools-jee-oxygen\eclipse>dir
 Directory of C:\Users\ervelden\eclipse\jbosstools-jee-oxygen\eclipse
04-09-2017  11:27         1.440.303 lombok.jar

$ vi eclipse.ini
-javaagent:lombok.jar

/////////////////////////
/ we moeten niet alleen lombok install in eclipse (2 dingen hierboven), maar ook in een project's pom of gradle de dependency op lombok opnemen.

//////////////////////////////////////
/ Geef in build.gradle
compileOnly('org.projectlombok:lombok:1.16.18')
/ of in Spring boot project,
compileOnly('org.projectlombok:lombok')

/ we dubbel click op deze jar, en hij ziet 4 eclipses	, we kiezen alleen java-oxygen,

/ we lezen, dat als we een custom -vm parameter use, we moeten : 
-vmargs -javaagent:lombok.jar
/ TODO

/ 13	. 

/ Voor delombok moeten we de jdk-java use, op de command line, anders vindt hij tools.jar niet,

C:\Users\ervelden\eclipse\workspace-java-oxygen\lombok>"\Program Files"\Java\jdk1.8.0_144\bin\java -jar \Users\ervelden\lombok\lombok.jar delombok -p src\main\java\com\example\demo\DemoApplication.java

        @java.lang.Override
        @java.lang.SuppressWarnings("all")
        @javax.annotation.Generated("lombok")
        public java.lang.String toString() {
                return "User(id=" + this.getId() + ", name=" + this.getName() + ")";
        }

/ Doe
@Data
/ of,
@ToString
@EqualsAndHashCode
@Getter
@Setter

/ de ctors moet je wel doen , naast @Data,

@Data
@NoArgsConstructor
@RequiredArgsConstructor
class User{
	private Long id;
	@NonNull private String name;
}

/ We zien lombok's @NonNull, NIET @NotNull

/ je kunt ook 

@AllArgsConstructor
@Data
@NoArgsConstructor
class Person {
	enum Gender{
		Male,
		Female
	}
	String name;
	LocalDate birth;
	Gender gender;
	String email;
}



/ 7	. 

/ we zijn in spring boot project lombok,
/ google: gradle how to see all dependencies
https://stackoverflow.com/questions/21645071/using-gradle-to-find-dependency-tree
/ we moeten geven, 

gradle dependencies

/ we zien in build.gradle,
lombok-1.16.18

/ kijk in console van eclipse,

Working Directory: C:\Users\ervelden\eclipse\workspace-java-oxygen\lombok
Gradle User Home: C:\Users\ervelden\.gradle
Gradle Distribution: Gradle wrapper from target build
Gradle Version: 3.5.1
Java Home: C:\Program Files\Java\jdk1.8.0_144
JVM Arguments: None
Program Arguments: None
Gradle Tasks: dependencies

:dependencies

------------------------------------------------------------
Root project
------------------------------------------------------------

apiElements - API elements for main. (n)
No dependencies

archives - Configuration for archive artifacts.
No dependencies

compile - Dependencies for source set 'main' (deprecated, use 'implementation ' instead).
\--- org.springframework.boot:spring-boot-starter: -> 1.5.6.RELEASE
     +--- org.springframework.boot:spring-boot:1.5.6.RELEASE
     |    +--- org.springframework:spring-core:4.3.10.RELEASE
     |    \--- org.springframework:spring-context:4.3.10.RELEASE
     |         +--- org.springframework:spring-aop:4.3.10.RELEASE
     |         |    +--- org.springframework:spring-beans:4.3.10.RELEASE
     |         |    |    \--- org.springframework:spring-core:4.3.10.RELEASE
     |         |    \--- org.springframework:spring-core:4.3.10.RELEASE
     |         +--- org.springframework:spring-beans:4.3.10.RELEASE (*)
     |         +--- org.springframework:spring-core:4.3.10.RELEASE
     |         \--- org.springframework:spring-expression:4.3.10.RELEASE
     |              \--- org.springframework:spring-core:4.3.10.RELEASE
     +--- org.springframework.boot:spring-boot-autoconfigure:1.5.6.RELEASE
     |    \--- org.springframework.boot:spring-boot:1.5.6.RELEASE (*)
     +--- org.springframework.boot:spring-boot-starter-logging:1.5.6.RELEASE
     |    +--- ch.qos.logback:logback-classic:1.1.11
     |    |    +--- ch.qos.logback:logback-core:1.1.11
     |    |    \--- org.slf4j:slf4j-api:1.7.22 -> 1.7.25
     |    +--- org.slf4j:jcl-over-slf4j:1.7.25
     |    |    \--- org.slf4j:slf4j-api:1.7.25
     |    +--- org.slf4j:jul-to-slf4j:1.7.25
     |    |    \--- org.slf4j:slf4j-api:1.7.25
     |    \--- org.slf4j:log4j-over-slf4j:1.7.25
     |         \--- org.slf4j:slf4j-api:1.7.25
     +--- org.springframework:spring-core:4.3.10.RELEASE
     \--- org.yaml:snakeyaml:1.17

compileClasspath - Compile classpath for source set 'main'.
+--- org.springframework.boot:spring-boot-starter: -> 1.5.6.RELEASE
|    +--- org.springframework.boot:spring-boot:1.5.6.RELEASE
|    |    +--- org.springframework:spring-core:4.3.10.RELEASE
|    |    \--- org.springframework:spring-context:4.3.10.RELEASE
|    |         +--- org.springframework:spring-aop:4.3.10.RELEASE
|    |         |    +--- org.springframework:spring-beans:4.3.10.RELEASE
|    |         |    |    \--- org.springframework:spring-core:4.3.10.RELEASE
|    |         |    \--- org.springframework:spring-core:4.3.10.RELEASE
|    |         +--- org.springframework:spring-beans:4.3.10.RELEASE (*)
|    |         +--- org.springframework:spring-core:4.3.10.RELEASE
|    |         \--- org.springframework:spring-expression:4.3.10.RELEASE
|    |              \--- org.springframework:spring-core:4.3.10.RELEASE
|    +--- org.springframework.boot:spring-boot-autoconfigure:1.5.6.RELEASE
|    |    \--- org.springframework.boot:spring-boot:1.5.6.RELEASE (*)
|    +--- org.springframework.boot:spring-boot-starter-logging:1.5.6.RELEASE
|    |    +--- ch.qos.logback:logback-classic:1.1.11
|    |    |    +--- ch.qos.logback:logback-core:1.1.11
|    |    |    \--- org.slf4j:slf4j-api:1.7.22 -> 1.7.25
|    |    +--- org.slf4j:jcl-over-slf4j:1.7.25
|    |    |    \--- org.slf4j:slf4j-api:1.7.25
|    |    +--- org.slf4j:jul-to-slf4j:1.7.25
|    |    |    \--- org.slf4j:slf4j-api:1.7.25
|    |    \--- org.slf4j:log4j-over-slf4j:1.7.25
|    |         \--- org.slf4j:slf4j-api:1.7.25
|    +--- org.springframework:spring-core:4.3.10.RELEASE
|    \--- org.yaml:snakeyaml:1.17
\--- org.projectlombok:lombok: -> 1.16.18

compileOnly - Compile only dependencies for source set 'main'.
\--- org.projectlombok:lombok: -> 1.16.18

default - Configuration for default artifacts.
\--- org.springframework.boot:spring-boot-starter: -> 1.5.6.RELEASE
     +--- org.springframework.boot:spring-boot:1.5.6.RELEASE
     |    +--- org.springframework:spring-core:4.3.10.RELEASE
     |    \--- org.springframework:spring-context:4.3.10.RELEASE
     |         +--- org.springframework:spring-aop:4.3.10.RELEASE
     |         |    +--- org.springframework:spring-beans:4.3.10.RELEASE
     |         |    |    \--- org.springframework:spring-core:4.3.10.RELEASE
     |         |    \--- org.springframework:spring-core:4.3.10.RELEASE
     |         +--- org.springframework:spring-beans:4.3.10.RELEASE (*)
     |         +--- org.springframework:spring-core:4.3.10.RELEASE
     |         \--- org.springframework:spring-expression:4.3.10.RELEASE
     |              \--- org.springframework:spring-core:4.3.10.RELEASE
     +--- org.springframework.boot:spring-boot-autoconfigure:1.5.6.RELEASE
     |    \--- org.springframework.boot:spring-boot:1.5.6.RELEASE (*)
     +--- org.springframework.boot:spring-boot-starter-logging:1.5.6.RELEASE
     |    +--- ch.qos.logback:logback-classic:1.1.11
     |    |    +--- ch.qos.logback:logback-core:1.1.11
     |    |    \--- org.slf4j:slf4j-api:1.7.22 -> 1.7.25
     |    +--- org.slf4j:jcl-over-slf4j:1.7.25
     |    |    \--- org.slf4j:slf4j-api:1.7.25
     |    +--- org.slf4j:jul-to-slf4j:1.7.25
     |    |    \--- org.slf4j:slf4j-api:1.7.25
     |    \--- org.slf4j:log4j-over-slf4j:1.7.25
     |         \--- org.slf4j:slf4j-api:1.7.25
     +--- org.springframework:spring-core:4.3.10.RELEASE
     \--- org.yaml:snakeyaml:1.17

implementation - Implementation only dependencies for source set 'main'. (n)
No dependencies

runtime - Runtime dependencies for source set 'main' (deprecated, use 'runtimeOnly ' instead).
\--- org.springframework.boot:spring-boot-starter: -> 1.5.6.RELEASE
     +--- org.springframework.boot:spring-boot:1.5.6.RELEASE
     |    +--- org.springframework:spring-core:4.3.10.RELEASE
     |    \--- org.springframework:spring-context:4.3.10.RELEASE
     |         +--- org.springframework:spring-aop:4.3.10.RELEASE
     |         |    +--- org.springframework:spring-beans:4.3.10.RELEASE
     |         |    |    \--- org.springframework:spring-core:4.3.10.RELEASE
     |         |    \--- org.springframework:spring-core:4.3.10.RELEASE
     |         +--- org.springframework:spring-beans:4.3.10.RELEASE (*)
     |         +--- org.springframework:spring-core:4.3.10.RELEASE
     |         \--- org.springframework:spring-expression:4.3.10.RELEASE
     |              \--- org.springframework:spring-core:4.3.10.RELEASE
     +--- org.springframework.boot:spring-boot-autoconfigure:1.5.6.RELEASE
     |    \--- org.springframework.boot:spring-boot:1.5.6.RELEASE (*)
     +--- org.springframework.boot:spring-boot-starter-logging:1.5.6.RELEASE
     |    +--- ch.qos.logback:logback-classic:1.1.11
     |    |    +--- ch.qos.logback:logback-core:1.1.11
     |    |    \--- org.slf4j:slf4j-api:1.7.22 -> 1.7.25
     |    +--- org.slf4j:jcl-over-slf4j:1.7.25
     |    |    \--- org.slf4j:slf4j-api:1.7.25
     |    +--- org.slf4j:jul-to-slf4j:1.7.25
     |    |    \--- org.slf4j:slf4j-api:1.7.25
     |    \--- org.slf4j:log4j-over-slf4j:1.7.25
     |         \--- org.slf4j:slf4j-api:1.7.25
     +--- org.springframework:spring-core:4.3.10.RELEASE
     \--- org.yaml:snakeyaml:1.17

runtimeClasspath - Runtime classpath of source set 'main'.
\--- org.springframework.boot:spring-boot-starter: -> 1.5.6.RELEASE
     +--- org.springframework.boot:spring-boot:1.5.6.RELEASE
     |    +--- org.springframework:spring-core:4.3.10.RELEASE
     |    \--- org.springframework:spring-context:4.3.10.RELEASE
     |         +--- org.springframework:spring-aop:4.3.10.RELEASE
     |         |    +--- org.springframework:spring-beans:4.3.10.RELEASE
     |         |    |    \--- org.springframework:spring-core:4.3.10.RELEASE
     |         |    \--- org.springframework:spring-core:4.3.10.RELEASE
     |         +--- org.springframework:spring-beans:4.3.10.RELEASE (*)
     |         +--- org.springframework:spring-core:4.3.10.RELEASE
     |         \--- org.springframework:spring-expression:4.3.10.RELEASE
     |              \--- org.springframework:spring-core:4.3.10.RELEASE
     +--- org.springframework.boot:spring-boot-autoconfigure:1.5.6.RELEASE
     |    \--- org.springframework.boot:spring-boot:1.5.6.RELEASE (*)
     +--- org.springframework.boot:spring-boot-starter-logging:1.5.6.RELEASE
     |    +--- ch.qos.logback:logback-classic:1.1.11
     |    |    +--- ch.qos.logback:logback-core:1.1.11
     |    |    \--- org.slf4j:slf4j-api:1.7.22 -> 1.7.25
     |    +--- org.slf4j:jcl-over-slf4j:1.7.25
     |    |    \--- org.slf4j:slf4j-api:1.7.25
     |    +--- org.slf4j:jul-to-slf4j:1.7.25
     |    |    \--- org.slf4j:slf4j-api:1.7.25
     |    \--- org.slf4j:log4j-over-slf4j:1.7.25
     |         \--- org.slf4j:slf4j-api:1.7.25
     +--- org.springframework:spring-core:4.3.10.RELEASE
     \--- org.yaml:snakeyaml:1.17

runtimeElements - Elements of runtime for main. (n)
No dependencies

runtimeOnly - Runtime only dependencies for source set 'main'. (n)
No dependencies

testCompile - Dependencies for source set 'test' (deprecated, use 'testImplementation ' instead).
+--- org.springframework.boot:spring-boot-starter: -> 1.5.6.RELEASE
|    +--- org.springframework.boot:spring-boot:1.5.6.RELEASE
|    |    +--- org.springframework:spring-core:4.3.10.RELEASE
|    |    \--- org.springframework:spring-context:4.3.10.RELEASE
|    |         +--- org.springframework:spring-aop:4.3.10.RELEASE
|    |         |    +--- org.springframework:spring-beans:4.3.10.RELEASE
|    |         |    |    \--- org.springframework:spring-core:4.3.10.RELEASE
|    |         |    \--- org.springframework:spring-core:4.3.10.RELEASE
|    |         +--- org.springframework:spring-beans:4.3.10.RELEASE (*)
|    |         +--- org.springframework:spring-core:4.3.10.RELEASE
|    |         \--- org.springframework:spring-expression:4.3.10.RELEASE
|    |              \--- org.springframework:spring-core:4.3.10.RELEASE
|    +--- org.springframework.boot:spring-boot-autoconfigure:1.5.6.RELEASE
|    |    \--- org.springframework.boot:spring-boot:1.5.6.RELEASE (*)
|    +--- org.springframework.boot:spring-boot-starter-logging:1.5.6.RELEASE
|    |    +--- ch.qos.logback:logback-classic:1.1.11
|    |    |    +--- ch.qos.logback:logback-core:1.1.11
|    |    |    \--- org.slf4j:slf4j-api:1.7.22 -> 1.7.25
|    |    +--- org.slf4j:jcl-over-slf4j:1.7.25
|    |    |    \--- org.slf4j:slf4j-api:1.7.25
|    |    +--- org.slf4j:jul-to-slf4j:1.7.25
|    |    |    \--- org.slf4j:slf4j-api:1.7.25
|    |    \--- org.slf4j:log4j-over-slf4j:1.7.25
|    |         \--- org.slf4j:slf4j-api:1.7.25
|    +--- org.springframework:spring-core:4.3.10.RELEASE
|    \--- org.yaml:snakeyaml:1.17
\--- org.springframework.boot:spring-boot-starter-test: -> 1.5.6.RELEASE
     +--- org.springframework.boot:spring-boot-test:1.5.6.RELEASE
     |    \--- org.springframework.boot:spring-boot:1.5.6.RELEASE (*)
     +--- org.springframework.boot:spring-boot-test-autoconfigure:1.5.6.RELEASE
     |    +--- org.springframework.boot:spring-boot-test:1.5.6.RELEASE (*)
     |    \--- org.springframework.boot:spring-boot-autoconfigure:1.5.6.RELEASE (*)
     +--- com.jayway.jsonpath:json-path:2.2.0
     |    +--- net.minidev:json-smart:2.2.1
     |    |    \--- net.minidev:accessors-smart:1.1
     |    |         \--- org.ow2.asm:asm:5.0.3
     |    \--- org.slf4j:slf4j-api:1.7.16 -> 1.7.25
     +--- junit:junit:4.12
     |    \--- org.hamcrest:hamcrest-core:1.3
     +--- org.assertj:assertj-core:2.6.0
     +--- org.mockito:mockito-core:1.10.19
     |    +--- org.hamcrest:hamcrest-core:1.1 -> 1.3
     |    \--- org.objenesis:objenesis:2.1
     +--- org.hamcrest:hamcrest-core:1.3
     +--- org.hamcrest:hamcrest-library:1.3
     |    \--- org.hamcrest:hamcrest-core:1.3
     +--- org.skyscreamer:jsonassert:1.4.0
     |    \--- com.vaadin.external.google:android-json:0.0.20131108.vaadin1
     +--- org.springframework:spring-core:4.3.10.RELEASE
     \--- org.springframework:spring-test:4.3.10.RELEASE
          \--- org.springframework:spring-core:4.3.10.RELEASE

testCompileClasspath - Compile classpath for source set 'test'.
+--- org.springframework.boot:spring-boot-starter: -> 1.5.6.RELEASE
|    +--- org.springframework.boot:spring-boot:1.5.6.RELEASE
|    |    +--- org.springframework:spring-core:4.3.10.RELEASE
|    |    \--- org.springframework:spring-context:4.3.10.RELEASE
|    |         +--- org.springframework:spring-aop:4.3.10.RELEASE
|    |         |    +--- org.springframework:spring-beans:4.3.10.RELEASE
|    |         |    |    \--- org.springframework:spring-core:4.3.10.RELEASE
|    |         |    \--- org.springframework:spring-core:4.3.10.RELEASE
|    |         +--- org.springframework:spring-beans:4.3.10.RELEASE (*)
|    |         +--- org.springframework:spring-core:4.3.10.RELEASE
|    |         \--- org.springframework:spring-expression:4.3.10.RELEASE
|    |              \--- org.springframework:spring-core:4.3.10.RELEASE
|    +--- org.springframework.boot:spring-boot-autoconfigure:1.5.6.RELEASE
|    |    \--- org.springframework.boot:spring-boot:1.5.6.RELEASE (*)
|    +--- org.springframework.boot:spring-boot-starter-logging:1.5.6.RELEASE
|    |    +--- ch.qos.logback:logback-classic:1.1.11
|    |    |    +--- ch.qos.logback:logback-core:1.1.11
|    |    |    \--- org.slf4j:slf4j-api:1.7.22 -> 1.7.25
|    |    +--- org.slf4j:jcl-over-slf4j:1.7.25
|    |    |    \--- org.slf4j:slf4j-api:1.7.25
|    |    +--- org.slf4j:jul-to-slf4j:1.7.25
|    |    |    \--- org.slf4j:slf4j-api:1.7.25
|    |    \--- org.slf4j:log4j-over-slf4j:1.7.25
|    |         \--- org.slf4j:slf4j-api:1.7.25
|    +--- org.springframework:spring-core:4.3.10.RELEASE
|    \--- org.yaml:snakeyaml:1.17
\--- org.springframework.boot:spring-boot-starter-test: -> 1.5.6.RELEASE
     +--- org.springframework.boot:spring-boot-test:1.5.6.RELEASE
     |    \--- org.springframework.boot:spring-boot:1.5.6.RELEASE (*)
     +--- org.springframework.boot:spring-boot-test-autoconfigure:1.5.6.RELEASE
     |    +--- org.springframework.boot:spring-boot-test:1.5.6.RELEASE (*)
     |    \--- org.springframework.boot:spring-boot-autoconfigure:1.5.6.RELEASE (*)
     +--- com.jayway.jsonpath:json-path:2.2.0
     |    +--- net.minidev:json-smart:2.2.1
     |    |    \--- net.minidev:accessors-smart:1.1
     |    |         \--- org.ow2.asm:asm:5.0.3
     |    \--- org.slf4j:slf4j-api:1.7.16 -> 1.7.25
     +--- junit:junit:4.12
     |    \--- org.hamcrest:hamcrest-core:1.3
     +--- org.assertj:assertj-core:2.6.0
     +--- org.mockito:mockito-core:1.10.19
     |    +--- org.hamcrest:hamcrest-core:1.1 -> 1.3
     |    \--- org.objenesis:objenesis:2.1
     +--- org.hamcrest:hamcrest-core:1.3
     +--- org.hamcrest:hamcrest-library:1.3
     |    \--- org.hamcrest:hamcrest-core:1.3
     +--- org.skyscreamer:jsonassert:1.4.0
     |    \--- com.vaadin.external.google:android-json:0.0.20131108.vaadin1
     +--- org.springframework:spring-core:4.3.10.RELEASE
     \--- org.springframework:spring-test:4.3.10.RELEASE
          \--- org.springframework:spring-core:4.3.10.RELEASE

testCompileOnly - Compile only dependencies for source set 'test'.
No dependencies

testImplementation - Implementation only dependencies for source set 'test'. (n)
No dependencies

testRuntime - Runtime dependencies for source set 'test' (deprecated, use 'testRuntimeOnly ' instead).
+--- org.springframework.boot:spring-boot-starter: -> 1.5.6.RELEASE
|    +--- org.springframework.boot:spring-boot:1.5.6.RELEASE
|    |    +--- org.springframework:spring-core:4.3.10.RELEASE
|    |    \--- org.springframework:spring-context:4.3.10.RELEASE
|    |         +--- org.springframework:spring-aop:4.3.10.RELEASE
|    |         |    +--- org.springframework:spring-beans:4.3.10.RELEASE
|    |         |    |    \--- org.springframework:spring-core:4.3.10.RELEASE
|    |         |    \--- org.springframework:spring-core:4.3.10.RELEASE
|    |         +--- org.springframework:spring-beans:4.3.10.RELEASE (*)
|    |         +--- org.springframework:spring-core:4.3.10.RELEASE
|    |         \--- org.springframework:spring-expression:4.3.10.RELEASE
|    |              \--- org.springframework:spring-core:4.3.10.RELEASE
|    +--- org.springframework.boot:spring-boot-autoconfigure:1.5.6.RELEASE
|    |    \--- org.springframework.boot:spring-boot:1.5.6.RELEASE (*)
|    +--- org.springframework.boot:spring-boot-starter-logging:1.5.6.RELEASE
|    |    +--- ch.qos.logback:logback-classic:1.1.11
|    |    |    +--- ch.qos.logback:logback-core:1.1.11
|    |    |    \--- org.slf4j:slf4j-api:1.7.22 -> 1.7.25
|    |    +--- org.slf4j:jcl-over-slf4j:1.7.25
|    |    |    \--- org.slf4j:slf4j-api:1.7.25
|    |    +--- org.slf4j:jul-to-slf4j:1.7.25
|    |    |    \--- org.slf4j:slf4j-api:1.7.25
|    |    \--- org.slf4j:log4j-over-slf4j:1.7.25
|    |         \--- org.slf4j:slf4j-api:1.7.25
|    +--- org.springframework:spring-core:4.3.10.RELEASE
|    \--- org.yaml:snakeyaml:1.17
\--- org.springframework.boot:spring-boot-starter-test: -> 1.5.6.RELEASE
     +--- org.springframework.boot:spring-boot-test:1.5.6.RELEASE
     |    \--- org.springframework.boot:spring-boot:1.5.6.RELEASE (*)
     +--- org.springframework.boot:spring-boot-test-autoconfigure:1.5.6.RELEASE
     |    +--- org.springframework.boot:spring-boot-test:1.5.6.RELEASE (*)
     |    \--- org.springframework.boot:spring-boot-autoconfigure:1.5.6.RELEASE (*)
     +--- com.jayway.jsonpath:json-path:2.2.0
     |    +--- net.minidev:json-smart:2.2.1
     |    |    \--- net.minidev:accessors-smart:1.1
     |    |         \--- org.ow2.asm:asm:5.0.3
     |    \--- org.slf4j:slf4j-api:1.7.16 -> 1.7.25
     +--- junit:junit:4.12
     |    \--- org.hamcrest:hamcrest-core:1.3
     +--- org.assertj:assertj-core:2.6.0
     +--- org.mockito:mockito-core:1.10.19
     |    +--- org.hamcrest:hamcrest-core:1.1 -> 1.3
     |    \--- org.objenesis:objenesis:2.1
     +--- org.hamcrest:hamcrest-core:1.3
     +--- org.hamcrest:hamcrest-library:1.3
     |    \--- org.hamcrest:hamcrest-core:1.3
     +--- org.skyscreamer:jsonassert:1.4.0
     |    \--- com.vaadin.external.google:android-json:0.0.20131108.vaadin1
     +--- org.springframework:spring-core:4.3.10.RELEASE
     \--- org.springframework:spring-test:4.3.10.RELEASE
          \--- org.springframework:spring-core:4.3.10.RELEASE

testRuntimeClasspath - Runtime classpath of source set 'test'.
+--- org.springframework.boot:spring-boot-starter: -> 1.5.6.RELEASE
|    +--- org.springframework.boot:spring-boot:1.5.6.RELEASE
|    |    +--- org.springframework:spring-core:4.3.10.RELEASE
|    |    \--- org.springframework:spring-context:4.3.10.RELEASE
|    |         +--- org.springframework:spring-aop:4.3.10.RELEASE
|    |         |    +--- org.springframework:spring-beans:4.3.10.RELEASE
|    |         |    |    \--- org.springframework:spring-core:4.3.10.RELEASE
|    |         |    \--- org.springframework:spring-core:4.3.10.RELEASE
|    |         +--- org.springframework:spring-beans:4.3.10.RELEASE (*)
|    |         +--- org.springframework:spring-core:4.3.10.RELEASE
|    |         \--- org.springframework:spring-expression:4.3.10.RELEASE
|    |              \--- org.springframework:spring-core:4.3.10.RELEASE
|    +--- org.springframework.boot:spring-boot-autoconfigure:1.5.6.RELEASE
|    |    \--- org.springframework.boot:spring-boot:1.5.6.RELEASE (*)
|    +--- org.springframework.boot:spring-boot-starter-logging:1.5.6.RELEASE
|    |    +--- ch.qos.logback:logback-classic:1.1.11
|    |    |    +--- ch.qos.logback:logback-core:1.1.11
|    |    |    \--- org.slf4j:slf4j-api:1.7.22 -> 1.7.25
|    |    +--- org.slf4j:jcl-over-slf4j:1.7.25
|    |    |    \--- org.slf4j:slf4j-api:1.7.25
|    |    +--- org.slf4j:jul-to-slf4j:1.7.25
|    |    |    \--- org.slf4j:slf4j-api:1.7.25
|    |    \--- org.slf4j:log4j-over-slf4j:1.7.25
|    |         \--- org.slf4j:slf4j-api:1.7.25
|    +--- org.springframework:spring-core:4.3.10.RELEASE
|    \--- org.yaml:snakeyaml:1.17
\--- org.springframework.boot:spring-boot-starter-test: -> 1.5.6.RELEASE
     +--- org.springframework.boot:spring-boot-test:1.5.6.RELEASE
     |    \--- org.springframework.boot:spring-boot:1.5.6.RELEASE (*)
     +--- org.springframework.boot:spring-boot-test-autoconfigure:1.5.6.RELEASE
     |    +--- org.springframework.boot:spring-boot-test:1.5.6.RELEASE (*)
     |    \--- org.springframework.boot:spring-boot-autoconfigure:1.5.6.RELEASE (*)
     +--- com.jayway.jsonpath:json-path:2.2.0
     |    +--- net.minidev:json-smart:2.2.1
     |    |    \--- net.minidev:accessors-smart:1.1
     |    |         \--- org.ow2.asm:asm:5.0.3
     |    \--- org.slf4j:slf4j-api:1.7.16 -> 1.7.25
     +--- junit:junit:4.12
     |    \--- org.hamcrest:hamcrest-core:1.3
     +--- org.assertj:assertj-core:2.6.0
     +--- org.mockito:mockito-core:1.10.19
     |    +--- org.hamcrest:hamcrest-core:1.1 -> 1.3
     |    \--- org.objenesis:objenesis:2.1
     +--- org.hamcrest:hamcrest-core:1.3
     +--- org.hamcrest:hamcrest-library:1.3
     |    \--- org.hamcrest:hamcrest-core:1.3
     +--- org.skyscreamer:jsonassert:1.4.0
     |    \--- com.vaadin.external.google:android-json:0.0.20131108.vaadin1
     +--- org.springframework:spring-core:4.3.10.RELEASE
     \--- org.springframework:spring-test:4.3.10.RELEASE
          \--- org.springframework:spring-core:4.3.10.RELEASE

testRuntimeOnly - Runtime only dependencies for source set 'test'. (n)
No dependencies

(*) - dependencies omitted (listed previously)

BUILD SUCCESSFUL

Total time: 0.842 secs

/ 13	. 

c:\Users\ervelden\.gradle>dir *jar/s | findstr lombok
 Directory of c:\Users\ervelden\.gradle\caches\modules-2\files-2.1\org.projectlombok\lombok\1.16.18\557d13dcb647038dc687390711cc
b5c9b3ffbd60
17-08-2017  17:42         1.440.303 lombok-1.16.18.jar
 Directory of c:\Users\ervelden\.gradle\caches\modules-2\files-2.1\org.projectlombok\lombok\1.16.18\d65e72edec3424e45335602fc1a4
ff6e614f4553
17-08-2017  17:43           793.722 lombok-1.16.18-sources.jar

c:\Users\ervelden\.gradle>dir *.jar/s | findstr spring-boot
 Directory of c:\Users\ervelden\.gradle\caches\modules-2\files-2.1\org.springframework.boot\spring-boot\1.5.6.RELEASE\886dd7e892
be7916e04323269afcf24b0211dae5
09-08-2017  20:51           480.237 spring-boot-1.5.6.RELEASE-sources.jar
 Directory of c:\Users\ervelden\.gradle\caches\modules-2\files-2.1\org.springframework.boot\spring-boot\1.5.6.RELEASE\a6e13da038
c6eb8b8793795b3189d5ff3f39caa0
09-08-2017  20:51           674.636 spring-boot-1.5.6.RELEASE.jar
 Directory of c:\Users\ervelden\.gradle\caches\modules-2\files-2.1\org.springframework.boot\spring-boot-actuator\1.5.6.RELEASE\2
a0e4f39d58078159c2929c039e7c7813b325871
09-08-2017  21:44           556.647 spring-boot-actuator-1.5.6.RELEASE.jar
...

/ welke pom file spring-boot bepaalt de versions van de dependencies?
/ TODO
/ Lees,
https://stackoverflow.com/questions/12888490/gradle-build-gradle-to-maven-pom-xml











/ Einde LOMBOK

/ TIKKIE

ABN Amro is niet de enige bank die een aparte app heeft uitgebracht voor betaalverzoeken. ING had Twyp (the way you pay) maar dat was geen succes en is gestopt. Om rekeningen te kunnen delen moesten beide partijen de app hebben en dat werkte niet.

Klanten van de bank kunnen via de ING-app betaalverzoeken doen, bij de Rabobank zit het ook in de app verwerkt. Internetbank Bunq heeft Slice.

/ Einde TIKKIE

/ PYTHON

https://www.youtube.com/watch?v=o77LGWwTZxU&feature=push-u-sub&attr_tag=J54Fcf3mHslM69h3-6


/ Einde PYTHON


/ ANGULAR

/ 7	. 

/ Getting started

/ 13

/ resources,

/ Lees,
http://blog.ng-book.com/
https://www.genuitec.com/products/angular-ide
https://cli.angular.io/
https://angular.io/resources

/ 13 

/ webpack in angular

/ lees,
https://stackoverflow.com/questions/39187556/angular-cli-where-is-webpack-config-js-file-new-2017-feb-ng-eject

 Directory of C:\Users\ervelden\AppData\Roaming\npm\node_modules\@angular\cli\node_modules\webpack
 Directory of C:\Users\ervelden\AppData\Roaming\npm\node_modules\@angular\cli\node_modules\@ngtools\webpack
 Directory of C:\Users\ervelden\AppData\Roaming\npm\node_modules\@angular\cli\node_modules\webpack-dev-server\client
03-08-2017  15:55               229 webpack.config.js

$ ng eject 
/ geeft de webpack.config.js file,

/ TODO

/ 13	. 

$ vi package.json
"scripts": {
    "ng": "ng",
    "start": "ng serve",
    "build": "ng build",
    "test": "ng test",
    "lint": "ng lint",
    "e2e": "ng e2e"
  },
  
 / Dus we kunnen
 $ ng serve
 / of
 $ npm start
 
 / 13	. 
 
 / karma
 
 / karma runs WH unit tests in real browsers
 
 / kijk,
 https://www.youtube.com/watch?v=MVw8N3hTfCI
 
 / de config file is bij ons karma.conf.js
 
 $ ng test
 / chrome verschijnt, 
 / maar kijk naar de command line, elke keer als we app.component.ts save, run de tests, we zien op de command line:
Chrome 60.0.3112 (Windows 7 0.0.0): Executed 3 of 3 SUCCESS (0.266 secs / 0.258 secs)
/ de browser blijft staan de hele tijd,

/ kijk,
https://www.youtube.com/watch?v=yG4FH60fhUE

/ 7	. 

/ Tutorial

/ je kunt de quickstart met git clone, of download, we doen git clone,

/ ipv met de cli een project te create, met $ ng new, doen we,
C:\Users\ervelden\my-ng-apps>git clone https://github.com/angular/quickstart.git
C:\Users\ervelden\my-ng-apps>cd quickstart
C:\Users\ervelden\my-ng-apps\quickstart>npm install

$ vi package.json
"scripts": {
    "start": "concurrently \"npm run build:watch\" \"npm run serve\"",
	

/ Dan:

C:\Users\ervelden\my-ng-apps\quickstart> npm start

> angular-quickstart@1.0.0 prestart C:\Users\ervelden\my-ng-apps\quickstart
> npm run build


> angular-quickstart@1.0.0 build C:\Users\ervelden\my-ng-apps\quickstart
> tsc -p src/


> angular-quickstart@1.0.0 start C:\Users\ervelden\my-ng-apps\quickstart
> concurrently "npm run build:watch" "npm run serve"

[0]
[0] > angular-quickstart@1.0.0 build:watch C:\Users\ervelden\my-ng-apps\quickstart
[0] > tsc -p src/ -w
[0]
[1]
[1] > angular-quickstart@1.0.0 serve C:\Users\ervelden\my-ng-apps\quickstart
[1] > lite-server -c=bs-config.json
[1]
[1] ** browser-sync config **
[1] { injectChanges: false,
[1]   files: [ './**/*.{html,htm,css,js}' ],
[1]   watchOptions: { ignored: 'node_modules' },
[1]   server:
[1]    { baseDir: 'src',
[1]      middleware: [ [Function], [Function] ],
[1]      routes: { '/node_modules': 'node_modules' } } }
[1] [Browsersync] Access URLs:
[1]  ----------------------------------------
[1]        Local: http://localhost:3000
[1]     External: http://192.168.123.115:3000
[1]  ----------------------------------------
[1]           UI: http://localhost:3001
[1]  UI External: http://192.168.123.115:3001
[1]  ----------------------------------------
[1] [Browsersync] Serving files from: src
[1] [Browsersync] Watching files...
[1] [Browsersync] Reloading Browsers...
[1] [Browsersync] Reloading Browsers...
[1] [Browsersync] Reloading Browsers...
[1] [Browsersync] Reloading Browsers...
[0] 22:45:52 - Compilation complete. Watching for file changes.
[1] 17.08.19 22:45:52 200 GET /index.html
[1] 17.08.19 22:45:52 200 GET /styles.css
[1] 17.08.19 22:45:52 200 GET /systemjs.config.js
[1] 17.08.19 22:45:52 200 GET /core-js/client/shim.min.js
[1] 17.08.19 22:45:52 200 GET /zone.js/dist/zone.js
[1] 17.08.19 22:45:52 200 GET /systemjs/dist/system.src.js
[1] 17.08.19 22:45:53 200 GET /main.js
[1] 17.08.19 22:45:53 200 GET /favicon.ico
[1] 17.08.19 22:45:53 200 GET /@angular/platform-browser-dynamic/bundles/platform-browser-dynamic.umd.js
[1] 17.08.19 22:45:53 200 GET /systemjs-angular-loader.js
[1] 17.08.19 22:45:53 200 GET /@angular/platform-browser/bundles/platform-browser.umd.js
[1] 17.08.19 22:45:53 200 GET /@angular/common/bundles/common.umd.js
[1] 17.08.19 22:45:53 200 GET /app/app.module.js
[1] 17.08.19 22:45:53 200 GET /app/app.component.js
[1] 17.08.19 22:45:53 200 GET /@angular/core/bundles/core.umd.js
[1] 17.08.19 22:45:53 200 GET /rxjs/Observable.js
[1] 17.08.19 22:45:53 200 GET /rxjs/observable/merge.js
[1] 17.08.19 22:45:53 200 GET /rxjs/operator/share.js
[1] 17.08.19 22:45:53 200 GET /rxjs/Subject.js
[1] 17.08.19 22:45:53 200 GET /rxjs/util/root.js
[1] 17.08.19 22:45:53 200 GET /rxjs/util/toSubscriber.js
[1] 17.08.19 22:45:53 200 GET /rxjs/symbol/observable.js
[1] 17.08.19 22:45:53 200 GET /rxjs/operator/merge.js
[1] 17.08.19 22:45:53 200 GET /rxjs/operator/multicast.js
[1] 17.08.19 22:45:53 200 GET /rxjs/Subscriber.js
[1] 17.08.19 22:45:53 200 GET /rxjs/Subscription.js
[1] 17.08.19 22:45:53 200 GET /rxjs/util/ObjectUnsubscribedError.js
[1] 17.08.19 22:45:53 200 GET /rxjs/SubjectSubscription.js
[1] 17.08.19 22:45:53 200 GET /rxjs/symbol/rxSubscriber.js
[1] 17.08.19 22:45:53 200 GET /rxjs/Observer.js
[1] 17.08.19 22:45:53 200 GET /rxjs/observable/ArrayObservable.js
[1] 17.08.19 22:45:53 200 GET /rxjs/operator/mergeAll.js
[1] 17.08.19 22:45:53 200 GET /rxjs/util/isScheduler.js
[1] 17.08.19 22:45:53 200 GET /rxjs/observable/ConnectableObservable.js
[1] 17.08.19 22:45:53 200 GET /rxjs/util/isFunction.js
[1] 17.08.19 22:45:53 200 GET /rxjs/util/isArray.js
[1] 17.08.19 22:45:53 200 GET /rxjs/util/isObject.js
[1] 17.08.19 22:45:53 200 GET /rxjs/util/tryCatch.js
[1] 17.08.19 22:45:53 200 GET /rxjs/util/errorObject.js
[1] 17.08.19 22:45:53 200 GET /rxjs/util/UnsubscriptionError.js
[1] 17.08.19 22:45:53 200 GET /rxjs/observable/ScalarObservable.js
[1] 17.08.19 22:45:53 200 GET /rxjs/observable/EmptyObservable.js
[1] 17.08.19 22:45:53 200 GET /rxjs/OuterSubscriber.js
[1] 17.08.19 22:45:53 200 GET /rxjs/util/subscribeToResult.js
[1] 17.08.19 22:45:53 200 GET /rxjs/util/isPromise.js
[1] 17.08.19 22:45:53 200 GET /rxjs/symbol/iterator.js
[1] 17.08.19 22:45:53 200 GET /rxjs/InnerSubscriber.js
[1] 17.08.19 22:45:53 200 GET /@angular/compiler/bundles/compiler.umd.js

/ we zien Explorer gestart, 
localhost:3000
Hello Angular

/ 13	. 

/ let op {{...}} , dubbele brackets,

/ tussen backticks `...` kan een multiline string staan, maakt HTML more readable,

/ 13	. 

/ in app.component.ts,

import { Component } from '@angular/core';
export class AppComponent  {                     // controller, 
  title = 'Angular'								// model, set by controller
  hero='Windstorms'								// model
}

/ import en export is typescript, WH NIET es6, 
/ het wordt vertaald naar app.component.js:
...
var core_1 = require("@angular/core");
...
exports.AppComponent = AppComponent;


/ in Angular quickstart, ga naar app.component.js, ga naar require, right click, Go to definition, 
node_modules
	@types
		node	
			index.d.ts

/ exports heeft geen definition, 
/ TODO

/ 13	. 

Notice that you don't call new to create an instance of the AppComponent class. Angular is creating an instance for you. How?
When you bootstrap with the AppComponent class (in main.ts), Angular looks for a <my-app> in the index.html, finds it, instantiates an instance of AppComponent, and renders it inside the <my-app> tag.



/ 13	. 

$ vi app.component.ts

import { Component } from '@angular/core';

export class Hero{
  id:number;
  name:string;
}

/ ANGULAR VS ANGULARJS
@Component({
  selector: 'my-app',                          / in AngularJS is .component("myApp",{
																	template:`...`,
																	AppComponent:function(){
																		this.title='Angular'
																		this.hero={id:1,name:'Windstorm'}
																	
  template: `
    <h1>{{title}}</h1>
    <h2>{{hero.name}} details!</h2>
    <div><label>id: </label>{{hero.id}}</div>
    <div><label>name: </label>{{hero.name}}</div> 
    `
})
export class AppComponent  {              // controller
  title = 'Angular';							// model, set by the controller,
  hero:Hero={								// 
    id:1,
    name:'Windstorm'
  }
}

/ 13	. 

/ we hebben ng-book gekocht,
/ vl$Walnoot27 password

/ we hebben een email, en daarin staat waar het staat wat ik gekocht heb,
https://gumroad.com/d/cfd861d00eb812fc4fcab79768bd7da0

/ 13	. 

/ we vervangen,
    <div><label>name: </label>{{hero.name}}</div> 
/ door,
    <div><label>name: </label><input [(ngModel)]="hero.name" placeholder="name"></div> 

/ in ,
$ vi app.component.ts

import { Component } from '@angular/core';

export class Hero{
  id:number;
  name:string;
}

@Component({
  selector: 'my-app',
  template: `
    <h1>{{title}}</h1>
    <h2>{{hero.name}} details!</h2>
    <div><label>id: </label>{{hero.id}}</div>
    <div><label>name: </label><input [(ngModel)]="hero.name" placeholder="name"></div>              / <-
    `
})
export class AppComponent  { 
  title = 'Angular';
  hero:Hero={
    id:1,
    name:'Windstorm'
  }
}

$ app.module.ts

import { NgModule }      from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';
import{FormsModule} from '@angular/forms';                       / <-
import { AppComponent }  from './app.component';

@NgModule({
  imports:      [ BrowserModule,
                  FormsModule ],                            / <-
  declarations: [ AppComponent ],
  bootstrap:    [ AppComponent ]
})
export class AppModule { }




/ 13	. 

/ Master/Detail

/ In de text input staat: Windstorm. Als we hem edit, zien we dat meteen in de {{hero.name}} details! Dit is two-way binding; ook van view -> model
/ {{...}} is one-way binding

$ vi app.component.ts

import { Component } from '@angular/core';

export class Hero{
  id:number;
  name:string;
}

const HEROES: Hero[] = [
  { id: 11, name: 'Mr. Nice' },
  { id: 12, name: 'Narco' },
  { id: 13, name: 'Bombasto' },
  { id: 14, name: 'Celeritas' },
  { id: 15, name: 'Magneta' },
  { id: 16, name: 'RubberMan' },
  { id: 17, name: 'Dynama' },
  { id: 18, name: 'Dr IQ' },
  { id: 19, name: 'Magma' },
  { id: 20, name: 'Tornado' }
];

@Component({
  selector: 'my-app',
  template: `
    <h1>{{title}}</h1>
    
    <ul class="heroes">
      <li *ngFor="let hero of heroes">
        <span class="badge">{{hero.id}}</span> {{hero.name}}
      </li>
    </ul>
    `
})
export class AppComponent  { 
  title = 'Angular';
  heroes=HEROES;
}

/ we zien alle heroes in het browser window,

/ 1313	.

/ use in template <!-- --> om comment out,

$ vi app.component.js

import { Component } from '@angular/core';

export class Hero{
  id:number;
  name:string;
}

const HEROES: Hero[] = [
  { id: 11, name: 'Mr. Nice' },
  { id: 12, name: 'Narco' },
  { id: 13, name: 'Bombasto' },
  { id: 14, name: 'Celeritas' },
  { id: 15, name: 'Magneta' },
  { id: 16, name: 'RubberMan' },
  { id: 17, name: 'Dynama' },
  { id: 18, name: 'Dr IQ' },
  { id: 19, name: 'Magma' },
  { id: 20, name: 'Tornado' }
];

@Component({
  selector: 'my-app',
  template: `
    <h1>{{title}}</h1>
    
    <ul class="heroes">
	  <li *ngFor="let hero of heroes" (click)="onSelect(hero)" [class.selected]="hero===selectedHero">
        <span class="badge">{{hero.id}}</span> {{hero.name}}
      </li>
	</ul>
    <div *ngIf="selectedHero">
      <h2>{{selectedHero.name}} details!</h2>
      <div><label>id: </label>{{selectedHero.id}}</div>
      <div><label>name: </label><input [(ngModel)]="selectedHero.name" placeholder="name"></div>
    </div> 
    `,
    styles: [`
  .selected {
    background-color: #CFD8DC !important;
    color: white;
  }
  .heroes {
    margin: 0 0 2em 0;
    list-style-type: none;
    padding: 0;
    width: 15em;
  }
  .heroes li {
    cursor: pointer;
    position: relative;
    left: 0;
    background-color: #EEE;
    margin: .5em;
    padding: .3em 0;
    height: 1.6em;
    border-radius: 4px;
  }
  .heroes li.selected:hover {
    background-color: #BBD8DC !important;
    color: white;
  }
  .heroes li:hover {
    color: #607D8B;
    background-color: #DDD;
    left: .1em;
  }
  .heroes .text {
    position: relative;
    top: -3px;
  }
  .heroes .badge {
    display: inline-block;
    font-size: small;
    color: white;
    padding: 0.8em 0.7em 0 0.7em;
    background-color: #607D8B;
    line-height: 1em;
    position: relative;
    left: -1px;
    top: -4px;
    height: 1.8em;
    margin-right: .8em;
    border-radius: 4px 0 0 4px;
  }
`]
})
export class AppComponent  { 
  title = 'Angular';
  heroes=HEROES;
  selectedHero:Hero;
  onSelect(hero:Hero):void{
    this.selectedHero=hero;
  }
}

/ In eerste instantie zien we geen details en een text input. 
/ select een hero uit de list: we zien details en de text input. 
/ als je de name van de hero edit in de input, zien we de entry in de list veranderen, 
/ als we de input clear, clears de entry in de list ook,
/ als we een entry in de list kiezen, krijgt hij iets andere style, door <li ... [class.selected]="hero===selectedHero">

/ 13	. 

/ multiple components



$ vi app.component.ts

import { Component } from '@angular/core';

import {Hero} from './hero'                            / <- 


const HEROES: Hero[] = [
  { id: 11, name: 'Mr. Nice' },
  { id: 12, name: 'Narco' },
  { id: 13, name: 'Bombasto' },
  { id: 14, name: 'Celeritas' },
  { id: 15, name: 'Magneta' },
  { id: 16, name: 'RubberMan' },
  { id: 17, name: 'Dynama' },
  { id: 18, name: 'Dr IQ' },
  { id: 19, name: 'Magma' },
  { id: 20, name: 'Tornado' }
];

@Component({
  selector: 'my-app',
  template: `
    <h1>{{title}}</h1>
    <ul class="heroes">
      <li *ngFor="let hero of heroes" (click)="onSelect(hero)" [class.selected]="hero===selectedHero">
        <span class="badge">{{hero.id}}</span> {{hero.name}}
      </li>
    </ul>
    <hero-detail [hero]="selectedHero"></hero-detail>                 / <- See @Input in hero-detail.component.ts
    `,
    styles: [`
  .selected {
    background-color: #CFD8DC !important;
    color: white;
  }
  .heroes {
    margin: 0 0 2em 0;
    list-style-type: none;
    padding: 0;
    width: 15em;
  }
  .heroes li {
    cursor: pointer;
    position: relative;
    left: 0;
    background-color: #EEE;
    margin: .5em;
    padding: .3em 0;
    height: 1.6em;
    border-radius: 4px;
  }
  .heroes li.selected:hover {
    background-color: #BBD8DC !important;
    color: white;
  }
  .heroes li:hover {
    color: #607D8B;
    background-color: #DDD;
    left: .1em;
  }
  .heroes .text {
    position: relative;
    top: -3px;
  }
  .heroes .badge {
    display: inline-block;
    font-size: small;
    color: white;
    padding: 0.8em 0.7em 0 0.7em;
    background-color: #607D8B;
    line-height: 1em;
    position: relative;
    left: -1px;
    top: -4px;
    height: 1.8em;
    margin-right: .8em;
    border-radius: 4px 0 0 4px;
  }
`],
})
export class AppComponent  { 
  title = 'Angular';
  heroes=HEROES;
  selectedHero:Hero;
  onSelect(hero:Hero):void{
    this.selectedHero=hero;
  }
}

$ vi hero.ts

export class Hero{
  id:number;
  name:string;
}

$ vi hero-detail.component.ts

import {Component,Input} from '@angular/core'
import {Hero} from './hero'                             / <-
@Component({
    selector:'hero-detail',
    template:`
     <div *ngIf="hero">
      <h2>{{hero.name}} details!</h2>
      <div><label>id: </label>{{hero.id}}</div>
      <div><label>name: </label><input [(ngModel)]="hero.name" placeholder="name"></div>
    </div> 
    `
})
export class HeroDetailComponent{
    @Input()hero:Hero;                                / <-
}

$ vi app.module.ts

import { NgModule }      from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';
import {FormsModule} from '@angular/forms';

import { AppComponent }  from './app.component';
import { HeroDetailComponent} from './hero-detail.component';         / <- alle components moeten in de module

@NgModule({
  imports:      [ BrowserModule,FormsModule ],
  declarations: [ AppComponent, HeroDetailComponent ],				/ <- alle components moeten in de module
  bootstrap:    [ AppComponent ]
})
export class AppModule { }

/ MORGEN

/ 13	. 

/ protractor

/ Lees,
https://coryrylan.com/blog/introduction-to-e2e-testing-with-the-angular-cli-and-protractor

/ 13	. 

/ google: yeoman angular cli
https://www.google.nl/search?q=yeoman+angular+cli&rlz=1C1GGRV_enNL756NL756&oq=yeoman+angular+cli&aqs=chrome..69i57.5675j0j4&sourceid=chrome&ie=UTF-8

/ 13	. 
/ google: ng end-to-end
https://coryrylan.com/blog/introduction-to-e2e-testing-with-the-angular-cli-and-protractor
/ google: protractor
http://www.protractortest.org/#/


/ 13. 

/ Results 4. Multiple components

$ vi app.components.ts

import { Component } from '@angular/core';

import {Hero} from './hero'


const HEROES: Hero[] = [
  { id: 11, name: 'Mr. Nice' },
  { id: 12, name: 'Narco' },
  { id: 13, name: 'Bombasto' },
  { id: 14, name: 'Celeritas' },
  { id: 15, name: 'Magneta' },
  { id: 16, name: 'RubberMan' },
  { id: 17, name: 'Dynama' },
  { id: 18, name: 'Dr IQ' },
  { id: 19, name: 'Magma' },
  { id: 20, name: 'Tornado' }
];

@Component({
  selector: 'my-app',
  template: `
    <h1>{{title}}</h1>
    <ul class="heroes">
      <li *ngFor="let hero of heroes" (click)="onSelect(hero)" [class.selected]="hero===selectedHero">
        <span class="badge">{{hero.id}}</span> {{hero.name}}
      </li>
    </ul>
    <hero-detail [hero]="selectedHero"></hero-detail>
    `,
    styles: [`
  .selected {
    background-color: #CFD8DC !important;
    color: white;
  }
  .heroes {
    margin: 0 0 2em 0;
    list-style-type: none;
    padding: 0;
    width: 15em;
  }
  .heroes li {
    cursor: pointer;
    position: relative;
    left: 0;
    background-color: #EEE;
    margin: .5em;
    padding: .3em 0;
    height: 1.6em;
    border-radius: 4px;
  }
  .heroes li.selected:hover {
    background-color: #BBD8DC !important;
    color: white;
  }
  .heroes li:hover {
    color: #607D8B;
    background-color: #DDD;
    left: .1em;
  }
  .heroes .text {
    position: relative;
    top: -3px;
  }
  .heroes .badge {
    display: inline-block;
    font-size: small;
    color: white;
    padding: 0.8em 0.7em 0 0.7em;
    background-color: #607D8B;
    line-height: 1em;
    position: relative;
    left: -1px;
    top: -4px;
    height: 1.8em;
    margin-right: .8em;
    border-radius: 4px 0 0 4px;
  }
`],
})
export class AppComponent  { 
  title = 'Angular';
  heroes=HEROES;
  selectedHero:Hero;
  onSelect(hero:Hero):void{
    this.selectedHero=hero;
  }
}

$ vi app.module.ts

import { NgModule }      from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';
import {FormsModule} from '@angular/forms';

import { AppComponent }  from './app.component';
import { HeroDetailComponent} from './hero-detail.component';

@NgModule({
  imports:      [ BrowserModule,FormsModule ],
  declarations: [ AppComponent, HeroDetailComponent ],
  bootstrap:    [ AppComponent ]
})
export class AppModule { }

$ vi hero-detail.component.ts

import {Component,Input} from '@angular/core'
import {Hero} from './hero'
@Component({
    selector:'hero-detail',
    template:`
     <div *ngIf="hero">
      <h2>{{hero.name}} details!</h2>
      <div><label>id: </label>{{hero.id}}</div>
      <div><label>name: </label><input [(ngModel)]="hero.name" placeholder="name"></div>
    </div> 
    `
})
export class HeroDetailComponent{
    @Input()hero:Hero;
}

$ vi hero.ts

export class Hero{
  id:number;
  name:string;
}


/ 13	. 

/ 5. Services	,

$ vi hero.service.ts

import {Injectable} from '@angular/core';
import {Hero} from './hero';
import {HEROES} from './mock-heroes';

@Injectable() 												// () ! anders is Injectable een expression
export class HeroService{
    getHeroes():Hero[]{
        return HEROES;
    }
}

$ vi mock-heroes.ts

import {Hero} from './hero'

export const HEROES: Hero[] = [									// uit app.component.ts
  { id: 11, name: 'Mr. Nice' },
  { id: 12, name: 'Narco' },
  { id: 13, name: 'Bombasto' },
  { id: 14, name: 'Celeritas' },
  { id: 15, name: 'Magneta' },
  { id: 16, name: 'RubberMan' },
  { id: 17, name: 'Dynama' },
  { id: 18, name: 'Dr IQ' },
  { id: 19, name: 'Magma' },
  { id: 20, name: 'Tornado' }
];

/ 1313	. 

/ in 5 Services dit werkt het, maar de call de service in de ctor van AppComponent, dat we straks gaan veranderen,

$ vi app.component.ts

import { Component } from '@angular/core';
import {Hero} from './hero'
import {HeroService} from './hero.service'

@Component({
  providers:[HeroService],             // creates new HeroService
  selector: 'my-app',
  template: `
    <h1>{{title}}</h1>
    <ul class="heroes">
      <li *ngFor="let hero of heroes" (click)="onSelect(hero)" [class.selected]="hero===selectedHero">
        <span class="badge">{{hero.id}}</span> {{hero.name}}
      </li>
    </ul>
    <hero-detail [hero]="selectedHero"></hero-detail>
    `,
    styles: [`
		...
`],

})
export class AppComponent  { 
  constructor(private heroService:HeroService){  // injection
    this.heroes=heroService.getHeroes();              / call in ctor, later anders,
  }      
  title = 'Angular';
  heroes:Hero[];
  selectedHero:Hero;
  onSelect(hero:Hero):void{
    this.selectedHero=hero;
  }
}

/ 1313	. 

/ ipv de call in de ctor doen we, 


export class AppComponent  { 
  
  private title = 'Angular';
  private heroes:Hero[];
  private selectedHero:Hero;
  constructor(private heroService:HeroService){  // injection 
  }      
  getHeroes():void{
    this.heroes=this.heroService.getHeroes();
  }

getHeros() kent dus this.heroService, dus wat in constructor(...) staat is dus niet zoals gewoonlijk een arg, maar een field declaration, en een injection, dus wordt ook init,

/ 1313. 	

/ met de service:

$ vi app.component.ts

import { Component } from '@angular/core';
import {Hero} from './hero'
import {HeroService} from './hero.service'
import {OnInit} from '@angular/core'                      					/ <-

@Component({
  providers:[HeroService],             // creates new HeroService
  selector: 'my-app',
  template: `
    <h1>{{title}}</h1>
    <ul class="heroes">
      <li *ngFor="let hero of heroes" (click)="onSelect(hero)" [class.selected]="hero===selectedHero">
        <span class="badge">{{hero.id}}</span> {{hero.name}}
      </li>
    </ul>
    <hero-detail [hero]="selectedHero"></hero-detail>
    `,
    styles: [`
	...
`],

})
export class AppComponent implements OnInit { 
  
  private title = 'Angular';
  private heroes:Hero[];
  private selectedHero:Hero;

  constructor(private heroService:HeroService){  // injection 
  }      
  ngOnInit():void{                            // <-
    this.getHeroes();
  }
  getHeroes():void{
    this.heroes=this.heroService.getHeroes();
  }
  onSelect(hero:Hero):void{
    this.selectedHero=hero;
  }
}

/ 13

/ 1313	. 

/ Lees,
https://www.themarketingtechnologist.co/introduction-to-data-binding-in-angular-2-versus-angular-1/

/ [] is ng-bind, is one-way binding voor in div, p
/ [()] is ng-model, is two-way bind voor in input,
/ In angular 1 werkt ng-model niet op een div of p, werkt [()] ook niet op een div of p?
/ TODO 
/ () is ng-click


@Component({
  template: `
    <h1>{{title}}</h1>
    <h1 [innerText]="title"></h1>
})
export class AppComponent implements OnInit { 
  
  private title = 'Angular';

/ we zien inderdaad 2 keer,
Angular
Angular

/ 1313	. 

/ []

/ lees, 
https://stackoverflow.com/questions/35944749/what-is-the-difference-between-parentheses-brackets-and-asterisks-in-angular2
/ ->
https://angular.io/guide/template-syntax

Binding syntax: An overview
[target]="expression"				/ one-way,

$ vi app.component.ts

@Component({

  template: `
    <hero-detail [hero]="selectedHero"></hero-detail>  / AngularJS: hero="selectedHero"
    `,
	
/ dus de hero-detail krijgt de selectedHero, one-way, 
/ we zien de selectedHero in de detail onderin,

$ vi hero-detail.component.ts

export class HeroDetailComponent{
    @Input()hero:Hero;									/ AngularJS: "<"
}

/ MORGEN







/ 1313	. 

/ google: angular 1 one-way binding
/ lees,
https://toddmotto.com/one-way-data-binding-in-angular-1-5/
https://blog.thoughtram.io/angularjs/2014/10/14/exploring-angular-1.3-one-time-bindings.html     / <-

/ lees,
https://www.w3schools.com/angular/angular_databinding.asp

/ {{...}} of ng-bind is model->view : 1-way
/ ng-model is 2-way: view -> model, en model -> view WH, als het model van de input op een andere manier verandert.
/ als je op een div of p ng-model ipv ng-bind, dan werkt het NIET, ng-bind werkt WEL, bijv in 

/ Ga naar, 
https://www.w3schools.com/angular/tryit.asp?filename=try_ng_databinding_ng-model

<div ng-app="myApp" ng-controller="myCtrl">
    <input ng-model="firstname">
    <span ng-model="firstname"></span>
</div>
/ OK

<script>
var app = angular.module('myApp', []);
app.controller('myCtrl', function($scope) {
    $scope.firstname = "John";
    $scope.lastname = "Doe";    
});
</script>

/ 1313	. 

/ lees,
https://docs.angularjs.org/guide/component

/ we zien , 

$ vi index.html

<!-- components match only elements -->
<div ng-controller="MainCtrl as ctrl">
  <b>Hero</b><br>
  <hero-detail hero="ctrl.hero"></hero-detail>
</div>

$ vi index.js

angular.module('heroApp', []).controller('MainCtrl', function MainCtrl() {
  this.hero = {
    name: 'Spawn'
  };
});

$ vi heroDetail.html

<span>Name: {{$ctrl.hero.name}}</span>


$ vi heroDetail.js

angular.module('heroApp').component('heroDetail', {
  templateUrl: 'heroDetail.html',
  bindings: {
    hero: '='          /= 2-way binding
  }
});









/ Einde ANGULAR

/ ANGULAR1

/ We hebben created, 
my-ng-apps\angular1\myapp.html myapp.js index.html heroList.html index.js

/ Lees,

/ kijk,
https://www.youtube.com/watch?v=k4qVkWh1EAo
/ via,
https://www.youtube.com/user/angularjs

/ en 
/ lees,
https://docs.angularjs.org/tutorial/step_00
/ en,
https://docs.angularjs.org/tutorial/#environment-setup
/ TODO

/ in,
C:\Users\ervelden\my-ng-apps\angular1> dir
23-08-2017  14:58         1.268.263 angular.js
23-08-2017  15:23               176 myapp.html
23-08-2017  15:23               107 myapp.js

/ dus angular.js is in deze dir,

/ 13	. 

/ lees over directives,
https://docs.angularjs.org/guide/directive

/ lees over directives en components,
https://gist.github.com/toddmotto/5b4de6c777d3e446e6410fdadb824522


/ 13	. 



$ vi myapp.js

var myapp=angular.module("myapp",[])
myapp.controller("myctrl",function($scope){
	$scope.name="foo"
	$scope.customer={
		name:"bar"
	}
})
.directive("mydir",function(){
	return {
	template:`<h1>Made by a directive!</h1>
				<h2>{{name}}</h2>
				<h2>{{customer.name}}`
	}
})

$ vi myapp.html

<!DOCTYPE html>
<html>
<head>
<script src="angular.js"></script>
<script src="myapp.js"></script>
</head>
<body ng-app="myapp">
	<div ng-controller="myctrl">
		<input ng-model="name">
	
		{{name}}
		<!-- of -->
		<span ng-bind="name"></span>
		
		<mydir></mydir>
	</div>
	
</body>
</html>

/ we kunnen 
<body ng-app="myapp">
	<div ng-controller="myctrl">
/ of
<body ng-app="myapp" ng-controller="myctrl">
	<div >
	
/ het belangrijke is dat mydir binnen een tag met myctrl als controller, want myctrl schrijft in de model van de tag name en customer, en de child tags' models ervan van dat model, 
/ dus als body's controller name en customer in de model van body schrijven, erft de model van de div deze twee, en de model van de mydir erft van de model van de div,
/ als de div's controller name en customer in de div's model writes, dan omdat  mydir's model inherits van dit model, kan mydir ze render, omdat ze in zijn model zitten,


/ wat we in de input geven, zien we ook in de ng-bind="name" en in {{name}} 

/ we kunnen ook,
<div mydir></div mydir>

/ we hebben zojuist zelf een attribute create, net als <hero-detail hero="ctrl.hero">
/ TODO

/ geef, 
file:///C:/Users/ervelden/my-ng-apps/angular1/myapp.html
/ we zien, 
foo             foo foo
--------

Made by a directive!
bar

/ 1313	. 

/ we maken 2 ctrls, en als we tags deze ctrls geven 2 models, die obj inherit:

$ vi myapp.js

var myapp=angular.module("myapp",[])
myapp.controller("parentctrl",function($scope){
	$scope.nameinparent="parent"
})
.controller("childctrl",function($scope){
	$scope.nameinchild="child"
})

$ myapp.html

	<div ng-controller="parentctrl">
		<div ng-controller="childctrl">
			Parent: {{nameinparent}}, child: {{nameinchild}}
		</div>
	</div>
	
/ geef
https://docs.angularjs.org/guide/directive
/ we zien, 
Parent: parent, child: child


/ 1313. 

/ multiple models for the directive , so multiple controllers, 

/ een mydir heeft een model die inherits van de model van zijn parent tag, een div , wiens controller zijn model schrijft, 
/ dus de 1ste mydir's model inherits van de model van de div met controller myctrl. Deze controller sets name en customer in de model van deze dir, en mydir's model inherits van deze,

/ lees
https://docs.angularjs.org/guide/directive
/ we zien onder, aan het eind,
Isolating the Scope of a Directive
/ de link:
"Directive Definition Object - scope" 
https://docs.angularjs.org/api/ng/service/$compile#directive-definition-object

/  hieronder zien we:
.directive("mydir",function(){
	return {
		scope:false,								// default, z'n model is die van de parent;  scope: true is ook OK, eigen model obj 										// inh van parent's model,
		template:`<h1>Made by a directive!</h1>
				<h2>{{name}}</h2>
				<h2>{{customer.name}}`
	}
})

/ als scope false, dan krijgt is de directive's model de parent's model,
/ als scope true, krijgt de directive een model, die object inherits van de parent's model
/ als scope is een obj, dan zeg je via een attribute wat van de parent's model in zijn model komt, het model obj inherits NIET van de parent's model,
/ scope: false en scope:true maakt hier niet uit, 
/ scope:{} , dan zitten name en customer NIET in dit model, dus de view toont ze niet,
  
  
 / 13	. 

/ multiple models for the directive , so multiple controllers, 

$ vi myapp.js

var myapp=angular.module("myapp",[])
myapp.controller("myctrl",function($scope){
	$scope.name="foo"
	$scope.customer={
		name:"bar"
	}
})
.controller("altctrl",function($scope){
	$scope.name="gee"
	$scope.customer={
		name:"hee"
	}
})
.directive("mydir",function(){
	return {
		template:`<h1>Made by a directive!</h1>
				<h2>{{name}}</h2>
				<h2>{{customer.name}}`
	}
})

$ vi myapp.html

<!DOCTYPE html>
<html >
<head>
<script src="angular.js"></script>
<script src="myapp.js"></script>
<body  ng-app="myapp" >

	<div ng-controller="myctrl">

		<input ng-model="name">
	
		{{name}}
	
		<span ng-bind="name"></span>
	
		<mydir></mydir>
	</div>
	<div ng-controller="altctrl">

		<input ng-model="name">
	
		{{name}}
	
		<span ng-bind="name"></span>
	
		<mydir></mydir>
	</div>
	
	
</body>
</html>

/ Geef
file:///C:/Users/ervelden/my-ng-apps/angular1/myapp.html
/ we zien ,

foo				foo foo
---------

Made by a directive!

foo
bar

gee				gee gee
----------

Made by a directive!

gee
hee

/ 13	. 

/ isolated scope

/ we geven de dir zelf een model, we zeggen wat de isolated model mag inherit of copy van de parent's model,

/ we hebben eerder ctlr's renamed: mectrl, youctrl en inheritdir hadden we al,
/ nu ctrl, isodir

/ de isodir's inherit niet de model van de mainctrl, maar we zeggen precies wat van de mainctrl's model in de isodir's model komt, 
/ is dat dan toch inherit, maar dan restricted, of copy?
/ TODO

$ vi myapp.js

var myapp=angular.module("myapp",[])
myapp.controller("mectrl",function($scope){
	$scope.name="foo"
	$scope.customer={
		name:"bar"
	}
})
.controller("youctrl",function($scope){
	$scope.name="gee"
	$scope.customer={
		name:"hee"
	}
})
.directive("inheritdir",function(){
	return {
		template:`<h1>Made by a directive!</h1>
				<h2>{{name}}</h2>
				<h2>{{customer.name}}`
	}
})
.controller("mainctrl",function($scope){
	$scope.me={
		name:"bar"
	}
	$scope.you={
		name:"hee"
	}
})
.directive("isodir",function(){
	return {
		scope:{
			customer:"=customer_"
		},
		template:`<h1>In isolated scope</h1>
					<h2>{{customer.name}}</h2>`
	}

})

$ vi myapp.html

<!DOCTYPE html>
<html >
<head>
<script src="angular.js"></script>
<script src="myapp.js"></script>
</head>
<body  ng-app="myapp" >

	<div ng-controller="mectrl">

		<input ng-model="name">
	
		{{name}}
	
		<span ng-bind="name"></span>
	
		<inheritdir></inheritdir>
	</div>
	<div ng-controller="youctrl">

		<input ng-model="name">
	
		{{name}}
	
		<span ng-bind="name"></span>
	
		<inheritdir></inheritdir>
	</div>
	
	<div ng-controller="mainctrl">
		<isodir customer_="me"></isodir>
		<isodir customer_="you"></isodir>
	</div>
	
	
</body>
</html>

/ 13	. 

/ we lezen,
https://docs.angularjs.org/api/ng/service/$compile#directive-definition-object

/ als een directive scope: false, dan is zijn model die van de parent, dus kan de directive's controller de parent's model schrijven. Een andere directive die van dezelfde parent erft, 

/ google: angularjs directive link function
https://stackoverflow.com/questions/20018507/angularjs-what-is-the-need-of-the-directives-link-function-when-we-already-had

/ hieronder heeft inheritdir de controller fct, 

/ als
inheritdir scope false
altinheritdir scope false/true
/ dan heeft altinheritdir ook : adjusted, want inheritdir heeft de parent's model set,
/ inheritdir heeft adjusted, 

/ als 
inheritdir scope true
altinheritdir scope false/true
/ dan heeft altinheritdir NIET adjusted, maar foo, uit de parent's model, inheritdir heeft alleen zijn eigen model set,
/ inheritdir heeft adjusted, want die is set in eigen model,


$ myapp.js

var myapp=angular.module("myapp",[])
myapp.controller("mectrl",function($scope){
	$scope.name="foo"
	$scope.customer={
		name:"bar"
	}
})
.directive("inheritdir",function(){
	return {
		scope:false,
		template:`<h1>Made by inheritdir!</h1>
				<h2>{{name}}</h2>
				<h2>{{customer.name}}`,
		controller:function($scope){
			$scope.name="adjusted"
		},
	}
})
.directive("altinheritdir",function(){
	return {
		scope:false,
		template:`<h1>Made by altinheritdir!</h1>
				<h2>{{name}}</h2>
				<h2>{{customer.name}}`,
		
	}
})


$ vi myapp.html

	<div ng-controller="mectrl">

		<input ng-model="name">
	
		{{name}}
	
		<span ng-bind="name"></span>
	
		<inheritdir></inheritdir>
		<altinheritdir></altinheritdir>
	</div>

/ 13	. 

/ hetzelfde geldt als we een directive een model geven, 

$ vi myapp.js

.controller("mainctrl",function($scope){
	$scope.me={
		name:"bar"
	}
	$scope.you={
		name:"hee"
	}
})
.directive("isodir",function(){
	return {
		scope:{
			customer:"=customer_"
		},
		template:`<h1>Made by isodir</h1>
					<h2>{{customer.name}}</h2>`,
		controller:function($scope){
			$scope.customer.name="modified"
		},			
	}

})
.directive("altisodir",function(){
	return {
		scope:{
			customer:"=customer_"
		},
		template:`<h1>Made by altisodir</h1>
					<h2>{{customer.name}}</h2>`,		
	}

})

$ vi myapp.html

	<div ng-controller="mainctrl">
		<isodir customer_="me"></isodir>
		<altisodir customer_="me"></altisodir>
		<isodir customer_="you"></isodir>
		<altisodir customer_="you"></altisodir>
	</div>
	
/ we zien,

Made by isodir

modified

Made by altisodir

modified

Made by isodir

modified

Made by altisodir

modified

/ ipv (zonder de ctrl in isodir), 

Made by isodir

bar

Made by altisodir

bar

Made by isodir

hee

Made by altisodir

hee

/ 13	.

/ $scope.me en $scope.you moeten objects zijn, 
/ TODO
/ als we ze strings nemen, komen deze strings NIET in de model van de isodirprim en altisodirprim,
/ behalve als we in isodirprim een controller nemen, schrijft hij de model van isodirprim, maar het model van altisodirprim blijft leeg,

$ vi myapp.js

.controller("mainctrlprim",function($scope){
	$scope.me="bar"
	$scope.you="hee"
})
.directive("isodirprim",function(){
	return {
		scope:{
			customer:"=customer_"
		},
		template:`<h1>Made by isodirprim</h1>
					<h2>{{name}}</h2>`,
		controller:function($scope){
			$scope.name="modifiedprim"
		},			
	}

})
.directive("altisodirprim",function(){
	return {
		scope:{
			customer:"=customer_"
		},
		template:`<h1>Made by altisodirprim</h1>
					<h2>{{name}}</h2>`,		
	}

})

$ vi myapp.html

	<div ng-controller="mainctrlprim">
		<isodirprim customer_="me"></isodirprim>
		<altisodirprim customer_="me"></altisodirprim>
		<isodirprim customer_="you"></isodirprim>
		<altisodirprim customer_="you"></altisodirprim>
	</div>
	
/ we zien, 

Made by isodirprim

modifiedprim

Made by altisodirprim

Made by isodirprim

modifiedprim

Made by altisodirprim
	

/ 7	.

/ components

/ lees,
https://docs.angularjs.org/guide/component

$ vi myapp.js

var myapp=angular.module("myapp",[])
.controller("compctrl",function(){
	this.hero={
		name:"Spawn"
	}
})
.component("heroDetail",{
	template:"<span>Name: {{$ctrl.hero.name}}</span>",
	bindings:{
		hero:"="
	}
})

$ vi myapp.html

	<div ng-controller="compctrl as ctrl">
		<b>Hero</b><br>
		<hero-detail hero="ctrl.hero"></hero-detail>
	</div>
	
/ we zien, 
Hero
Name: Spawn

/ 13	. 

/ in controller function, $scope of niets,
/ lees, 
https://docs.angularjs.org/api/ng/directive/ngController

Two different declaration styles are included below:
one binds methods and properties directly onto the controller using this: ng-controller="SettingsController1 as settings"
one injects $scope into the controller: ng-controller="SettingsController2"

/ 1313	.

$ vi myapp.js

var myapp=angular.module("myapp",[])
.controller("with$scopectrl",function($scope){
	$scope.name="with $scope"
})
.controller("no$scopectrl",function(){
	this.name="no $scope"
})

$ vi myapp.html

	<div ng-controller="with$scopectrl">
		{{name}}
	</div>
	<div ng-controller="no$scopectrl as ctrl">
		{{ctrl.name}}
	</div>

/ 'as ctrl' MOET,


/ 13	. 

/ 2 versies controller: met en zonder $scope, en component,

$ vi myapp.js

.controller("compctrl",function(){
	this.hero={
		name:"Spawn"
	}
})
.component("heroDetail",{
	template:"<span>Name: {{$ctrl.hero.name}}</span>",
	bindings:{
		hero:"="
	}
})

.controller("altcompctrl",function($scope){
	$scope.hero={
		name:"Alt Spawn"
	}
})
.component("altHeroDetail",{
	template:"<span>Name: {{$ctrl.hero.name}}</span>",           /* $cltr ! */
	bindings:{
		hero:"="
	}
})

$ vi myapp.html

	<div ng-controller="compctrl as ctrl">
		<b>Hero</b><br>
		<hero-detail hero="ctrl.hero"></hero-detail>
	</div>
	
	<div ng-controller="altcompctrl">
		<b>Alt Hero</b><br>
		<alt-hero-detail hero="hero"></alt-hero-detail>
	</div>

/ 1313	. 

/  directive, controller no $scope

/ ingewikkeld, niet doen	,

/ lees,
https://toddmotto.com/no-scope-soup-bind-to-controller-angularjs/

$ vi myapp.js

.controller("no$scopectrlwithdir",function(){
	this.name="foo"
	this.customer={
		name:"bar"
	}
})
.directive("thedir",function(){
	return {
		scope:false,
		template:`<h1>Made by altinheritdir!</h1>
				<h2>{{ctrl.name}}</h2>
				<h2>{{ctrl.customer.name}}`,
		controller:"no$scopectrlwithdir",
		controllerAs:"ctrl",
		
	}
})

$ vi myapp.html

	<div ng-controller="no$scopectrlwithdir as ctrl">
		<b>no $scope ctrl with dir</b><br>
		<thedir></thedir>
	</div>

/ 13	. 

/ directive vs. component

/ In html geen verschillen,
/ in js: in .directive staat een fct die een obj returns, in .component alleen een obj
/ bij .component moeten we $ctrl geven in de template, 
/ bij .directive scope, bij .component binding,

/ er is WH een groot verschil:
/ bij een directive zit het object in de scope, bij een component in de controller

/ in een template moeten we $ctrl use, in de controller:function(){... / } kunnen we this use,

$ vi myapp.js

.controller("directivectrl",function($scope){
	$scope.directive={
		name:"For directive"
	}
})
.directive("tag1",function(){
	return {
		template:"<span>Name: {{object.name}}</span>",         
		scope:{
			object:"="
		}
	}
})

.controller("componentctrl",function($scope){
	$scope.component={
		name:"For component"
	}
})
.component("tag2",{
	template:"<span>Name: {{$ctrl.object.name}}</span>",         /* $ctrl ! */
	bindings:{
		object:"="
	}
})

$ vi myapp.html

	<div ng-controller="directivectrl">
		<tag1 object="directive"></tag1>
	</div>
	
	<div ng-controller="componentctrl">
		<tag2 object="component"></tag2>
	</div>
	
	

/ 13	. 

/ als je directive of components met kleine letters noemt in js, bijv, 
.component("thedir",{...})
/ dan moet je in HTML ook kleine letters: <thedir></thedir>
/ maar als je camelCase in js: .component("theDir",{...})	, dan moet je - in HTML <the-dir></the-dir>

/ 13	.
<div ng-controller="ctrl">
	<component property="key" property2="key2"></component>
</div>

/ key en key2 zijn de namen van objecten uit de parent's model, die onder een evt. andere naam used kunnen worden in de template van de component
/ hetzelfde geldt voor directives.

/ Een directive of component zonder controller fct creates zelf niets in zijn model, alles komt van de parent,
/ als hij een isolate model heeft, dan geeft key de key van het object uit de parent's model dat in de model van de directive komt. 
/ dit object is dan te gebruiken in de template van de directive of component,

/ 13	. 

/ ng-repeat

$ vi myapp.js

.controller("repeatctrl",function($scope){
	$scope.names=["foo bar","eric j."]
})

$ vi myapp.html

	<!-- ng-repeat -->
	<div ng-controller="repeatctrl">
		<span ng-repeat="name in names">{{name}}</span>
	</div>

/ 13	. 

/ lees,
https://docs.angularjs.org/guide/component

/ we maken de heros list appl,

$ vi index.html
<hero-list></hero-list>

/ Geen attrs, dus de heroList's model krijgt geen properties van de heroApp model,
/ heroApp heeft geen controller, dus heeft een leeg model,

/ heroList heeft een controller, dus sets properties in zijn model, 
/ dus hero-detail haalt hier zijn properties vandaan, dit is de eerste keer dat we dit zien, vroeger haalde components met bindings zijn properties uit de model van de app,

/ 1313	.

/ eerst zonder ng-repeat, dus er is maar 1 hero, en <hero-list> is nu even een misnomer	,

/ we zien geen .controller in heroApp, 

$ vi index.html

<!DOCTYPE html>
<html >
<head>
	<script src="angular.js"></script>
	<script src="index.js"></script>
</head>
<body ng-app="heroApp" >
	<hero-list></hero-list>
</body>
</html>

$ vi index.js

angular.module("heroApp",[])
.component("heroList",{
	template:`
		<b>Heroes</b>
		<br>
		<hero-detail hero="eric"></hero-detail>
	`,
	controller:function($scope){
		$scope.eric={
			name:"Eric Velden",
			locate:"Train Utrecht",
		}
	}
})
.component("heroDetail",{
	template:`
		<span>{{$ctrl.hero.name}} {{$ctrl.hero.locate}}</span>
	`,
	controller:function($scope){
	},
	bindings:{
		hero:"=",
	},
})

/ geef:
file:///C:/Users/ervelden/my-ng-apps/angular1/index.html
/ we zien,
Heroes 
Eric Velden Train Utrecht

/ 1313	.


/ nu met ng-repeat,

/ we zien, 
		<hero-detail ng-repeat="hero in list" hero="hero"></hero-detail>     
/ we hadden,
		<hero-detail hero="eric"></hero-detail>
		
/ dus de hero uit de list is de hero rechts in hero="hero", 
/ we kunnen om te check,
		<hero-detail ng-repeat="hero_ in list" hero="hero_"></hero-detail>     

/ onveranderd:
$ vi index.html

<!DOCTYPE html>
<html >
<head>
<script src="angular.js"></script>
<script src="index.js"></script>
</head>
<body ng-app="heroApp" >
	<hero-list></hero-list>
</body>
</html>

$ vi index.js

angular.module("heroApp",[])

.component("heroList",{
	template:`
		<b>Heroes</b>
		<br>
		<hero-detail ng-repeat="hero_ in list" hero="hero_"></hero-detail>       / ! mag ook: ng-repeat="hero in list" hero="hero"
																			/ hero_ uit list, wordt hero in hero-detail's template
	`,
	controller:function($scope){
		$scope.list=[{
			name:"Foo Bar",
			locate:"Gee Str"
		},{
			name:"Eric Velden",
			locate:"Train Utrecht"
		},
		]
	}
})
.component("heroDetail",{
	template:`
		<hr>
		<div>
			Name: {{$ctrl.hero.name}}<br>
			Location: {{$ctrl.hero.name}}<br>
		
		</div>
		
	`,
	controller:function($scope){
	},
	bindings:{
		hero:"=",
	},
})

/ 1313	. 

/ button in hero-detail,

/ eerst een kleine test,

$ vi index.js

.component("heroDetail",{
	template:`
		<hr>
		<div>
			Name: {{$ctrl.hero.name}}<br>
			Location: {{$ctrl.hero.name}}<br>
			<button ng-click="$ctrl.delete()">Delete</button>
		</div>
	`,
	controller:function($scope){
		this.delete=function(){
			console.log("delete")
		}
	},
	bindings:{
		hero:"=",
	},
})

/ 131313	.

/ we zien in de console van chrome,
delete

/  nu de echte delete,


/ onveranderd,
$ vi index.html

<!DOCTYPE html>
<html >
<head>
	<script src="angular.js"></script>
	<script src="index.js"></script>
</head>
<body ng-app="heroApp" >
	<hero-list></hero-list>
</body>
</html>

$ vi index.js

angular.module("heroApp",[])

.component("heroList",{
	template:`
		<b>Heroes</b>
		<br>
		<hero-detail ng-repeat="hero_ in list" hero="hero_" on-delete="$ctrl.deleteHero(hero_)"></hero-detail> 
											
											/ deleteHero is in ctrl, dus $ctrl.deleteHero, en list is in de model ($scope), dus list
	`,
	controller:function($scope){
		var ctrl=this
		$scope.list=[{
			name:"Foo Bar",
			locate:"Gee Str"
		},{
			name:"Eric Velden",
			locate:"Train Utrecht"
		},
		],
		this.deleteHero=function(hero){
			var i=$scope.list.indexOf(hero)    / list is in $scope,
			if(i>=0){
				$scope.list.splice(i,1)
			}
		}
	}
})
.component("heroDetail",{
	template:`
		<hr>
		<div>
			Name: {{$ctrl.hero.name}}<br>                     / hero is in de controller, we moeten $ctrl use in templates
			Location: {{$ctrl.hero.name}}<br>
			<button ng-click="$ctrl.delete()">Delete</button>	/ delete is in de controller, daarom $ctrl.delete	,
		</div>
	`,
	controller:function($scope){
		this.delete=function(){
			this.onDelete({hero:this.hero})   / hero is in de controller, 
												/ onDelete(this.hero) is ook OK TODO
		}
	},
	bindings:{
		hero:"=",              / hero is in de controller
		onDelete:"&",
	},
})

/ 1313	. 

/ SAMENVATTING PROPERTIES

/ een hero-details gaat over een hero. Met attr hero="hero_" geeft je hero-details de hero, 

<hero-list>          / hier zit de list van hero's
	<hero-detail hero="hero_">    / hero-detail krijgt de hero van zijn parent, via die attribute
	
/ het staat ook goed in js, 
/ alles wat rechts van het ='s  staat in <hero-detail> staat hier , in heroList, links van = zijn properties in heroDetails (en dat moet ook omdat het properties van heroDetails zijn), waarvan gezegd wordt in bindings dat de value uit de parent komt; dat klopt, want de hero zit in heroList,

/ dus met bindings geeft je aan: de data is niet hier, maar in de parent, 
/ en net zo voor functies: onDelete is ook niet in hero-details, maar in de parent: on-delete="$ctrl.deleteHero(hero__)", dus deleteHero op de hero__, de hero waar de heroDetails op is; de functie is daar waar de data is, 

/ we zien bij de call op functies dat de args de property names (keys) zijn, hero__ en hero$, prop$, value$, 



.component("heroList",{
	template:`
		<hero-detail ng-repeat="hero_ in list" hero="hero_" on-delete="$ctrl.deleteHero(hero__)" on-update="$ctrl.updateHero(hero$,prop$,value$)"></hero-detail>
	`,
	controller:function($scope){
		$scope.list=[{
			name:"Foo Bar",
			locate:"Gee Str"
		},{
			name:"Eric Velden",
			locate:"Train Utrecht"
		},
		]
		this.deleteHero=function(hero){
			var i=$scope.list.indexOf(hero)
			if(i>=0){
				$scope.list.splice(i,1)
			}
		}
		this.updateHero=function(hero,prop,value){
			hero[prop]=value
		}
		
	}
})
.component("heroDetail",{
	template:`
		<hr>
		<div>
			Name: {{$ctrl.hero.name}}<br>
			Location: <editableField field-value="$ctrl.hero.name" field-type="text"  on-update="$ctrl.update('location',value)"</editable-field><br>													
			<button ng-click="$ctrl.delete()">Delete</button>
		</div>
	`,
	controller:function($scope){
		this.delete=function(){
			this.onDelete({hero__:this.hero})
		}
		this.update=function(prop,value){
			this.onUpdate({hero$:this.hero,prop$:prop,value$:value})
		}
	},
	bindings:{
		hero:"=",
		onDelete:"&",
		onUpdate:"&",
	},
})

/ Einde SAMENVATTING PROPERTIES

/ 1313	. 

/ Final 

$ vi index.html

<!DOCTYPE html>
<html >
<head>
<script src="angular.js"></script>
<script src="index.js"></script>
</head>

<body ng-app="heroApp" >
	<hero-list></hero-list>
</body>
</html>

$ vi index.js

angular.module("heroApp",[])

.component("heroList",{
	template:`
		<b>Heroes</b>
		<br>
		<hero-detail ng-repeat="hero_ in list" hero="hero_" on-delete="$ctrl.deleteHero(hero_)" on-update="$ctrl.updateHero(hero,prop,value)"></hero-detail>
	`,
	controller:function($scope){
		$scope.list=[{
			name:"Foo Bar",
			locate:"Gee Str"
		},{
			name:"Eric Velden",
			locate:"Train Utrecht"
		},
		]
		this.deleteHero=function(hero){
			var i=$scope.list.indexOf(hero)
			if(i>=0){
				$scope.list.splice(i,1)
			}
		}
		this.updateHero=function(hero,prop,value){
			hero[prop]=value
		}
		
	}
})
.component("heroDetail",{
	template:`
		<hr>
		<div>
			Name: {{$ctrl.hero.name}}<br>
			Location: <editable-field field-value="$ctrl.hero.location" field-type="text"  on-update="$ctrl.update('location',value)"></editable-field><br>													
			<button ng-click="$ctrl.delete()">Delete</button>
		</div>
	`,
	controller:function($scope){
		this.delete=function(){
			this.onDelete({hero:this.hero})
		}
		this.update=function(prop,value){
			this.onUpdate({hero:this.hero,prop:prop,value:value})
		}
	},
	bindings:{
		hero:"=",
		onDelete:"&",
		onUpdate:"&",
	},
})
.component("editableField",{
	template:`
		<span ng-switch="$ctrl.editMode">
			<input ng-switch-when="true" type="{{$ctrl.fieldType}}" ng-model="$ctrl.fieldValue">
			<span ng-switch-default>{{$ctrl.fieldValue}}</span>
		</span>
		<button ng-click="$ctrl.handleModeChange()">{{$ctrl.editMode?"Save":"Edit"}}</button>
		<button ng-if="$ctrl.editMode" ng-click="$ctrl.reset()">Reset</button>
		
	`,
	controller:function($scope){
		this.editMode=false
		this.$onInit=function(){
			this.fieldValueCopy=this.fieldValue
			if(!this.fieldType){
				this.fieldType="text"
			}
		}
		this.reset=function(){
			this.fieldValue=this.fieldValueCopy
		}
		this.delete=function(){
			this.onDelete({hero:this.hero})
		}
		this.handleModeChange=function(){
			if(this.editMode){
				this.onUpdate({value:this.fieldValue})
				this.fieldValueCopy=this.fieldValue
			}
			this.editMode=!this.editMode
		}
	},
	bindings:{
		fieldValue:"=",
		fieldType:"@?",
		onUpdate:"&",
	},
})







/ Einde ANGULAR1

/ PYTHON

/ kijk,
https://www.youtube.com/watch?v=9by46AAqz70&feature=push-u-sub&attr_tag=slJW8UBYzYGuPwmi-6
Jake VanderPlas

http://scikit-learn.org/stable/
/ machine learning

SciPy: Matlab
PyData: R					/ Pandas

/ 7	 .

Conda
	Miniconda
	Anaconda
/ we hebben nu ook een python installed, next die van de system,

$ conda install numpy scipy panda matplotlib jupyter

/ sandboxes, py2.7 is de name,
$ conda create -n py2.7 python=2.7 numpy=1.3 scipy
$ source activate python2.7
$ conda env list

/ 7	.

/ pip	,

/ pip installs python packages within every environment
/ conda  installs any package within conda environment: je kunt ook node of R install,
/ see blog post : Conda, myths and misconceptions : van jakevdp.github.io/blog/2016/08/25/conda-myths-and-misconceptions

$ conda install jupyter notebook
$ jupyter notebook
/ file based access in your browser

/ Python datascience handbook van Jake VanderPlas,

/ JupyterLab : IDE

/ 13	 .

$ conda install numpy
/ base of scikit or pandas

import numpy as np
x=np.arange(10)
print(x)
print(3*x+7)

M=np.random.rand(5,10)
u,s,v=np.linalg.svd(M)
print(s)

x=np.random.rand(100)
np.fft.fft(x)
print(X[:4])

/ 13	. 

/ schrijf geen for loops zoals in C, in CPython,  maar use : vectorization in NumPy	,

x=np.random.rand(10000000)

%%timeit
y=np.empty(x.shape)
for(i in range(len(x)):
	y[i]=2*x[i]+3
	
/ 1 loop, best of 3: 6.4 sec per loop

/ dit is CPython

/ Maar in NumPy:
	y=2*x+3
	
/ 10 loops, best op 3: 58.6 ms per loop

/ PyCon 2015 , Losing your loops, Fast numerical computation in Python

/ 13	. 

/ Labeled data

/ Pandas

/ Pandas:
/ DataFrame obj, which is like a NumPy array, but has labeled rows and columns,
/ and relational operators

import pandas as pd
df=pd.DataFrame({'x':[1,2,3],'y':[4,5,6]})
print(df)

  x y
0 1 4
1 2 5
2 3 6

/ in NumPy typed data and dense arrays, but in Pandas arrays have labeled rows and columns and indices	,

/ add a column:
df['x+2y']=df['x']+2*df['y']
print(df)

  x y x+2y
0 1 4 9
1 2 5 12
2 3 6 14

/ we zien de indices links,

/ 1313	. 

/ Pandas kan ook read from disk:

/ Horrible in NumPy, loadText, loadGenFromText functions,



# contents of data.csv
name, id
peter, 321
paul, 605
mary, 444

df=pd.read_csv('data.csv')
print(df)

  name  id
0 peter 321
1 paul 	605
2 mary 	444  

/ 1313	. 

/ SQL like, 

/ Kan NIET in SciPy,

df=pd.DataFrame({'id':['A','B','A','B'],'val':[1,2,3,4]})
print(df)
  id val
0 A 1
1 B 2
2 A 3
3 B 4

grouped=df.groupby('id').sum()
print(grouped)

id val
A 4
B 6
/ Geen indices? TODO

/ 13	. 

/ visualization, 

$ conda install matplotlib

/ matplotlib is replaced for MatLab,

import numpy as np
import matplotlib.pyplot as plt
x=np.linspace(0,10,1000)
plt.plot(x,np.sin(x))
plt.plot(x,np.cos(x))

/ 1313	.

/ visualization beyond Matplotlib...

/ visualization of data frames: use Pandas
Pandas offers a simplified matplotlib interface: Pandas produces Matplotlib plot, without using the Matplotlib api,

data=pd.read_csv('iris.csv')
data.plot.scatter('petalLength','petalWidth')  / dit zijn 2 column names
/ je ziet punten plotted, en de names langs de assen,

/ 1313	. 

/ another visualization beyond Matplotlib...

/ Seaborn for statistical data visualization

seaborn.pairplot(data, hue='species')

/ 1313	. 

/ another visualization beyond Matplotlib...

/ Bokeh: interactive visualization in the browser

p=figure()
p.circle(iris.petalLength, iris.sepalLength)
show(p)


/
 1313	. 

/ another visualization beyond Matplotlib...

/ Plotly: modern platform for data science

from plotly.graph_objs import Scatter
from plotly.offline import iplot
p=Scatter(x=iris.petalLength, y=iris.sepalLength, node='markers')
iplot({p})

 1313	. 

/ another visualization beyond Matplotlib...

/ plotnine: grammar of graphics in Python

/ not mature yet, but promising,

/ replacement of R ggplot library: gives ggplot api to give Matplotlib plots

(ggplot(mtcars,aes('wt','mpg',color='factor(gear)'))
+geom_point())
+stat_smooth(method='lm')
+facet_wrap('~gear'))

/ 1313	. 

/ There is also altera
/ TODO

/ 1313	. 

/ PyCon 2017 , Python's visualization landscape 
/ on youtube 
/ TODO

/ 13

/ numerical algorithms: SciPy

$ conda install scipy

/ wrapper around fortran's Netlib & related libraries

/ for physics,

scipy.sparse
scipy.interpolate
scipy.integrate
sicpy.spatial
scipy.stats
scipy.optimize
scipy.linalg
scipy.special
scipy.fttpack

import matplotlib.pyplot as plt
import numpy as np
from scipy import special,optimize

x=np.linspace(0,10,1000)
opt=optimize.minimize(special.j1,x0=3)
plt.plot(x,special.j1(x))
plt.plot(opt.x,special.j1(opt.x),marker='o',color='red')

/ min of first order Bessel function,

/ 13	. 

/ machine learning

$ conda install scikit-learn

/ Make some noisy 2D data for which we can fit a model:

x=10*np.random.rand(100)
y=np.sin(x)+0.1*np.random.randn(100)
plt.plot(x,y,'.k')

/ fit a line (curve TODO)

from sklearn.ensemble import RandomForestRegressor
model=RandomForestRegressor()

model.fit(x[:,np.newaxis],y)
xfit=np.linspace(-1,11,1000)
yfit=model.predict(xfit[:,np.newaxis])

plt.plot(x,y,'.k')
plt.plot(xfit,yfit)

/ change model implementation, 

from sklearn.svm import SVR       / verandert
model=SVR()                        / verandert

model.fit(x[:,np.newaxis],y)          / hier en hieronder hetzelfde
xfit=np.linspace(-1,11,1000)
yfit=model.predict(xfit[:,np.newaxis])

plt.plot(x,y,'.k')
plt.plot(xfit,yfit)

scikit-learn : provides a common api for the most common learning methods

/ 13	. 

/ parallel

$ conda install dask

/ in NumPy doe je,

import numpy as np
a=np.random.randn(1000)
b=a*4
b_min=b.min()
print(b_min)

/ in dask,

import dask.array as da
a2=ds.from_array(a,chunks=200)
b2=a2*4
b2_min=b2.min()
print(b2_min)

-------------
dask.array<amin-aggregate,shape=(),dtype=float64,chunksize=()>
b2_min.compute()
/ TODO

/ 13	. 

$ conda install numba

/ Numba is a bytecode compiler that can convert Python code to fast LLVM code targeting a CPU of GPU

/ big for loops moet je niet doen, use NumPy, maar sommige for loops kun je niet daar naartoe vertalen,

def fib(n):
	a,b=0,1
	for i in range(n):
		a,b=b,a+b
	return a
%timeit fib(1000) # ipython "timeit magic"
100 loops, best of 3: 2.73 ms per loop

/ voeg numba toe,

import numba
@numba.jit
def fib(n):
	a,b=0,1
	for i in range(n):
		a,b=b,a+b
	return a
%timeit fib(1000) # ipython "timeit magic"
100000 loops, best of 3: 6.06 microsec per loop

numba achieves this by doing just-in-time compilation (JIT) of the Python function into LLVM byte-code

/ used door DataShader
https://github.com/bokeh/datashader

/ 13	. 

$ conda install cython

/ cython is a superset of Python language that can be compiled to fast C code.

/ eerst kleine verbetering:

%%cython
def fib(n):
	a,b=0,1
	for i in range(n):
		a,b=b,a+b
	return a
%timeit fib(10000)

100 loops; best of 3 :2.42 ms per loop

/ Cython compiles the code to C, giving marginal speedups without even changing the code
/ 10% speedup

/ nu grote verbetering,
/ voeg types toe:

%%cython
def fib(n):
	cdef int a,b=0,1
	for i in range(n):
		a,b=b,a+b
	return a
%timeit fib(10000)

100000 loops, best of 3 : 5.93 microsec per loop
/ 500% speedup

/ Using cython's syntactic sugar to specify types for the compiler leads to much better performance
/ libsvm in scikit-learn is een C library, cython is used to interface those C libraries


/ Einde PYTHON


/ JENKINS

/ we download jenkins-2.60.3.zip,
/ als we deze extract, zien we jenkins.msi, we kunnen direct hierop click	,
C:\Program Files (x86)\Jenkins\

/ we komen in 
http://localhost:8080/login?from=%2F

Unlock Jenkins
To ensure Jenkins is securely set up by the administrator, a password has been written to the log (not sure where to find it?) and this file on the server: 
C:\Program Files (x86)\Jenkins\secrets\initialAdminPassword
Please copy the password from either location and paste it below.
f1fa391abebb477b9530f48ee48da9b2
/ de file C:\Program Files (x86)\Jenkins\secrets\initialAdminPassword is removed	,

/ we hebben suggested plugins installed, 
/ TODO Hoe kunnen we zien welke dat zijn?



/ Lees, 
https://jenkins.io/doc/pipeline/tour/getting-started/

/ Create First Admin User
admin
viLange17
Admin
eric.vander.velden@sogeti.com

We start Jenkins.
afmelden
/ log weer in met 
admin
viLange17

https://jenkins.io/doc/pipeline/tour/hello-world/















/ Einde JENKINS

/ PIP

https://www.youtube.com/watch?v=jnpC_Ib_lbc&t=202s
https://www.youtube.com/watch?v=U2ZN104hIcc

$ pip help install

$ pip search Pympler
$ pip install Pympler
$ pip list
/ list all installed packages

/ $ pip list shows also the version number of the packages.
/ how can you know this is the latest version?

$ pip list --outdated 
/ of
$ pip list -o
setuptools (Current: 12.0.5 Latest: 15.0 
/ doe daarom :
$ pip install -U setuptools

$ pip freeze
Pympler==0.4
/ waarom staat hier setuptools en pip niet bij?
/ TODO
$ pip freeze >requirements.txt

/ Iemand anders kan de packages in deze requirements.txt install:
$ pip install -r requirements.txt

$ pip freeze --local | grep -v '^\-e' | cut -d = -f 1 | xargs -n1 pip install -U

















/ Einde PIP

/ VIRTUALENV

/ See
https://www.youtube.com/watch?v=N5vscPTWKOk

/ seperate different python environments for different projects,
/ different projects maybe use different versions of django,
/ je kunt niet een global django upgrade, want verschillende projects hebben misschien een zekere versie van django nodig,

$ pip list
/ lists global packages

$ mkdir Environments
$ cd !$
$ virtualenv project1_env
New python executable in project1_env/bin/python
Installing setuptools, pip...done.
$ source project1_env/bin/activate
/ we zijn nu in deze env,
$ which python
.../project_env1/bin/python
(project_env1)
$ pip list
pip (6.1.1)
setuptools (15.0)
(project1_env)
$ pip install numpy pytz psutil
$ pip freeze --local >requirements.txt
$ ls 
project_env1	requirements.txt 

/ we willen terug naar de global env,
$ deactivate
/ TODO which deactivate

/ de prompt (project1_env)_ is weg,
$ which python
/Users/coreyschafer/anaconda/bin/python

/ delete de env,
/ we hebben al deactivate, dus we kunnen,
$ rm -rf project_env1

/ maak env met onze requirements die we nog hebben,
$ ls 
requirements.txt
$ virualenv -p /usr/bin/python2.6 py26_env						/ weer een andere dan de anaconda van boven,
$ source py26_env/bin/activate
$ which python
.../py26_env/bin/python
$ python --version
Python 2.6.9
$ pip install -r requirements.txt
$ deactivate

/ you do not want to have your project files in the environments like py26_env, omdat je ze wh meeneemt naar een andere env,

$ pip install virtualenv





/ Einde VIRTUALENV

/ ANACONDA

/ anaconda is data-science platform , en is van Continuum Analytics
/ heeft python, conda (package manager, to manage environments), en numpy, scipy, en jupyter notebooks
/ er is ook Miniconda, een kleine Anaconda

/ na install
$ python
Python 3.5.2 | Anaconda 4.1.1 (x86_64) | 
>>> import numpy
>>> import matplotlib
>>> exit()


$ pip
/ we zien alle packages die met anaconda meekwamen. 
/ maar anaconda heeft ook conda, hiermee kun je niet python packages install,
$ conda --help
$ conda list
scipy 		0.17.1		np111py35_1
setuptools	23.0.0		py35_0
simplegeneric 0.8.1		py35_1
tk				8.5.18	0
xz				5.2.2	0
yaml			0.1.6	0
zlib			1.2.8	3

/ alle packages met py35 er in, zijn die we ook zien met pip,
/ TODO welke zijn installed met anaconda?
/ je kunt met pip of conda install doen,

/ conda kan env's maken, net als virtualenv, en kan meer,

$ conda create --name my_app flask sqlalchemy
/ it also installs tk, wheel, xz, zlib: non python packages,

/ on Windows
> activate my_app
/ on mac,
$ source activate my_app
/ we zien de prompt
(my_app)
$ pip list
/ we zien alleen local packages,
$ which python
.../my_app/bin/python
(my_app)

/ on windows
> deactivate
/ on mac
$ source deactivate

/ maak env die python 2.7 heeft,
$ conda create --name my_app27 python=2.7 flask sqlalchemy

$ source activate my_app27
$ python
Python 2.7.12 | Continuum Analytics | ...       / omdat we met conda hebben install, komt deze python ook uit Anaconda,
$ source deactivate

/ view env's 

$ conda env list
my_app					/Users/coreyschafer/anaconda/envs/my_app
my_app27				/Users/coreyschafer/anaconda/envs/my_app27
root			* 		/Users/coreyschafer/anaconda						/ * is activated

$ conda remove --name my_app --all

$ jupyter notebook





















/ Einde ANACONDA


/ VAADIN

https://www.youtube.com/watch?v=Lwhg3NrOLVA&t=21s


/ Einde VAADIN

/ ENCRYPTION

https://phys.org/news/2017-08-quantum-mechanics.html

/ Einde ENCRYPTION

/ DATA SCIENCE

https://www.datanami.com/2017/07/21/taking-data-scientist-data-science/


/ Einde DATA SCIENCE

/ PHYSICS

https://phys.org/news/2017-08-quantum-mechanics.html

/ Einde PHYSICS

/ MACHINE LEARNING

http://scikit-learn.org/stable/
https://www.continuum.io/downloads			/ anaconda
https://pandas.pydata.org/pandas-docs/stable/cookbook.html
https://github.com/jvns/pandas-cookbook
http://pandas.pydata.org/
http://nbviewer.jupyter.org/github/jvns/pandas-cookbook/blob/master/cookbook/Chapter%201%20-%20Reading%20from%20a%20CSV.ipynb


/ Einde MACHINE LEARNING

/ SCALA

/ zoek in coursera naar odersky,
https://www.coursera.org/learn/progfun1
/ click Enroll
/ sign up with Facebook
https://www.facebook.com/v2.4/dialog/oauth?app_id=823425307723964&channel_url=https%3A%2F%2Fstaticxx.facebook.com%2Fconnect%2Fxd_arbiter%2Fr%2F0sTQzbapM8j.js%3Fversion%3D42%23cb%3Df3abca8e86ba0a%26domain%3Dwww.coursera.org%26origin%3Dhttps%253A%252F%252Fwww.coursera.org%252Ff2496c5892dc198%26relation%3Dopener&client_id=823425307723964&display=popup&domain=www.coursera.org&e2e=%7B%7D&locale=en_US&origin=1&redirect_uri=https%3A%2F%2Fstaticxx.facebook.com%2Fconnect%2Fxd_arbiter%2Fr%2F0sTQzbapM8j.js%3Fversion%3D42%23cb%3Df383b13b408725%26domain%3Dwww.coursera.org%26origin%3Dhttps%253A%252F%252Fwww.coursera.org%252Ff2496c5892dc198%26relation%3Dopener%26frame%3Df8ad7bc737af4c&response_type=token%2Csigned_request&return_scopes=true&scope=public_profile%2Cemail%2Cuser_friends%2Cuser_education_history%2Cuser_work_history%2Cuser_birthday&sdk=joey&version=v2.4

Coursera ontvangt:
je openbaar profiel, vriendenlijst, e-mailadres, geboortedatum, arbeidsverleden en opleidingen. 
Dit bewerken
Doorgaan als Eric

You already have an account




/ Einde SCALA


Samsung Galaxy S7 Edge 32GB 4G Duos Black Onyx
Samsung Galaxy S8 Plus 64GB 4G Duos Midnight Black

/ TELEFOON

https://www.tele2.nl/mobiel/telefoons/samsung/galaxy-s7-edge-specificaties/?gclid=Cj0KCQjwlf_MBRDUARIsAD8Gj8CKjA5HHdPlx1SD6HBsUWMAaCN-LjF-bvXNHyfhy2_U45_C0VrB7AsaAoRbEALw_wcB&dclid=CLXx2Mbw8dUCFVCYdwodVAwFHg
https://www.tele2.nl/mobiel/telefoons/samsung/galaxy-s8-specificaties/?gclid=Cj0KCQjwlf_MBRDUARIsAD8Gj8DLAKlBHEkawIDYgV2K2Sdgcfb6Lo9LVyVrNqrohLf0yLaPJz7idzEaAp1wEALw_wcB&dclid=CJyo1Ovv8dUCFY4g0wodpCwKHw


/ Einde TELEFOON

/ JAVASCRIPT

/ lees,
https://stackoverflow.com/questions/18128323/if-you-are-not-using-a-dot-in-your-angularjs-models-you-are-doing-it-wrong

/ property in child object shadows the one in the parent,

$ vi inherit_in_js.html

<!DOCTYPE html>
<html >
<head>

<script>
(function(){
var parent=function(){
	this.x=7
	this.o={
		x:21
	}
}
var child=function(){
	this.y=13
}
child.prototype=new parent
var obj=new child
obj.x=4
obj.o.x=27
console.log(obj.x)
})()

</script>
</head>
<body>
</body>
</html>

/ we zien 


obj:child
	x:4
	y:13
	__proto__:parent
		o:{x: 27}
		x:7
		__proto__:Object

/ dus 
obj.x=4 maakt een property in de child, net zo goed als obj.o={} zou doen, maar dat doen we niet,
obj.o.x=27 creates geen object o, maar modifies obj.o, en die komt uit de parent,
/ als we zouden doen: obj.p.x=37, dan ERR: cannot set property x of undefined. 



/ Einde JAVASCRIPT

/ OAUTH

/ kijk,
https://www.youtube.com/watch?v=CPbvxxslDTU



/ Einde OAUTH

/ 13	 .

/ data science: Sap business objects:
https://www.ilionx.com/nl/contentpagina/sap-business-objects?gclid=Cj0KEQjwz_TMBRD0jY-RusGilOYBEiQAN-TuFHq7fKwBWDr5LjQ5eRYzBSS9-bbSI9zUwY8_zuF1-7YaAqZm8P8HAQ

/ 13	. 

/ Rath, Niranjan
jsonview: https://github.com/typicode/json-server
https://docs.oracle.com/cd/E24329_01/web.1211/e24376/ds_annotation.htm#JDBCP1043 
https://www.payara.fish/
https://stackoverflow.com/questions/266322/is-there-a-limit-to-the-length-of-a-get-request


/ 13	. 

/ VISUAL STUDIO, JAVASCRIPT

/ 

/ 7	. 

/ module.exports vs exports

/ Lees,
https://medium.freecodecamp.org/node-js-module-exports-vs-exports-ec7e254d63ac

/ we maken,
C:\Users\ervelden\my-node-examples\calc>

/ Lees,
https://www.wolfe.id.au/2014/02/01/getting-a-new-node-project-started-with-npm/


/ in visual studio code, 
File, Open folder
/ kies de calc dir hierboven,

$ vi calculator.js


var calc={
    add:function(a,b){
        return a+b
    }
}
module.exports=calc

/ of, 

module.exports={
    add:function(a,b){
        return a+b
    }
}

/ of, 

module.exports.add=function(a,b){
    return a+b
}

/ of, 

module.exports.add=(a,b)=>a+b

$ vi use-calculator.js

const calculator=require('./calculator.js')
console.log(calculator.add(2,2))

/ 7	. 

/ arrow functions

/ lees,
https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions
https://www.vinta.com.br/blog/2015/javascript-lambda-and-arrow-functions/



/ 7	. 

/ strict mode

/ lees,
https://www.w3schools.com/js/js_strict.asp

/ in visual studio code,

/ "use strict" wil beschermen tegen het maken van global vars.

/ 13	. 

$ vi strict.js

"use strict"
x=3.14
console.log(x)
/ met "use strict" ERR: ReferenceError: x is not defined
/ zonder "use strict" OK,

"use strict"
var x=3.14
console.log(x)
/ OK

/ 13	. 

/ hetzelfde voor functies,

$ vi strict.js

"use strict"
fun=function(){
	console.log("fun")
}
fun()
/ met "use strict", ERR: fun is not defined
/ zonder "use strict", OK

"use strict"
var fun=function(){
	console.log("fun")
}
fun()

/ 13	. 

/ dit heeft niets met "use strict" te maken:

/ 1313	. 

/ bij functies, 

fun()
fun=function(){
    console.log("fun")
}
/ ERR: function fun is not defined,


fun=function(){
    console.log("fun")
}
fun()
/ OK, zonder "use strict"

/ 1313	. 

console.log(x)
var x=3.14
/ prints: undefined
/ bij functies ERR

x=3.14
console.log(x)
/ zonder "use strict" OK, 

/ 13	.

/ "use strict" kan ook binnen een functie, 

x=3.14               // OK, want niet "use strict"
console.log(x)

fun=function(){         // OK, want niet "use strict"
    "use strict"
    y=3.14				// ERR, want "use strict", OK is: var y=3.14, y is een global var, en "use strict" wil daartegen beschermen,
    console.log(y)
}
fun() 

/ 7	.

/ lees,
https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions

/ 13	. 

function foo(){
    this.age=77
    setInterval(function(){
        this.age++								// this is een Timeout 
        console.log(this.age)					// NaN
    },3000)
}
new foo()

/ 13	. 

function bar(){
    this.age=77
    that=this
    setInterval(function(){
        this.age++
        console.log(this)
        console.log(this.age)
    },3000)
}
new bar()
Timeout {
  _called: true,
  _idleTimeout: 3000,
  _idlePrev: null,
  _idleNext: null,
  _idleStart: 3160,
  _onTimeout: [Function],
  _timerArgs: undefined,
  _repeat: 3000,
  age: NaN }
/ dus we zien dat this.age wel wordt set, maar is NaN
/ TODO

/ 13	

/ In a node script this===module.exports

/ lees,

https://howtonode.org/what-is-this
https://stackoverflow.com/questions/22770299/meaning-of-this-in-node-js-modules-and-functions         <--

/ 1313. 

$ vi calculator.js

console.log(this===module.exports)  / true
module.exports={                    / we replace module.exports with another object
    add:function(a,b){
        return a+b
    },
    min:function(a,b){
        return a-b
    }
}
console.log(this===module.exports)  / false

/ 1313	. 

/ we kunnen ook module.exports aanpassen,

console.log(this===module.exports)

module.exports.add=function(a,b){return a+b}
module.exports.min=function(a,b){return a-b}

console.log(this===module.exports)                 / true

/ 1313	. 

/ we kunnen ook,

this.add=function(a,b){return a+b}
this.min=function(a,b){return a-b}

/ maar we kunnen NIET, 

this={               
    add:function(a,b){
        return a+b
    },
    min:function(a,b){
        return a-b
    }
}

/ 1313	. 

/ use-calculator.js doet:

const calculator=require('./calculator.js')     /= module.exports uit calculator.js, dus {add:...,min:...}




/ 13	. 



/ 13	. 

function bar(){
    this.age=77
    that=this					// ERR met "use strict" , that is een global 	, met var that=this is that een local
    setInterval(function(){
        that.age++
        console.log(that)		// bar{age:78}, bar{age:79}, ...
        console.log(this.age)	// OK, 78, 79, ...
    },3000)
}
new bar()

/ 13	. 

function baz(){
    this.age=77
    setInterval(()=>{
        this.age++
        console.log(this.age)	
    },3000)
}
new baz()



/ 13	. 

/ met een lambda fct 

/ lees, 
https://www.vinta.com.br/blog/2015/javascript-lambda-and-arrow-functions/

var baz1=function(a,b){return a+b}
var baz2=(a,b)=>a+b
var baz3=(a,b)=>{return a+b}

console.log(baz1(2,3))
console.log(baz2(2,3))
console.log(baz3(2,3))
/ OK

/ Maar er zijn verschillen, 

/ 13	. 
https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions

var baz4=function(){return this}
console.log(baz4()===global)						/ true

var baz4=function(){"use strict";return this}
console.log(baz4()===global)						/ false, is baz4()===undefined

var baz5=()=>{"use strict";return this}				/ {}, met en zonder "use strict" TODO Wat is {}
console.log(baz5())

/ 13	. 

var foo1=function(a){
    this.a=a
    console.log(this)
}
var obj=new foo1(7);
foo1.apply(obj,[9])

/ we zien ,
foo1 { a: 7 }
foo1 { a: 9 }

/ 1313.

var foo2=(a)=>{
    this.a=a
    console.log(this)
}
var obj=new foo2(8) 		
/ ERR: foo2 is not a constructor

/ 13	. 

/ tussen {...} moet er altijd return staan, dus OK zijn:

module.exports.min=function(a,b){return a-b}
module.exports.mult=(a,b)=>a*b
module.exports.mult=(a,b)=>{return a*b}


/ 13	.

/ In een arrow function f is this bepaald. Dus met f.call(o,...) wordt o genegeerd, this is al bepaald. Hetzelfde voor f.apply,

/ lees,
https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions

$ vi strict.js

this.x=13
var gee=(a,b)=>this.x*a+b
console.log(gee(2,5))
console.log(gee.call({x:15},2,5))

/ we zien 
31
31

/ 13	. 

/ een arrow functie heeft geen arguments zoals normaal, als er toevallig een arguments is in zijn execution env, die hij insluit, dan neemt hij die,


var arguments={0:'bar',1:13}
console.log(arguments)       / { '0': 'bar', '1': 13 }
var hee=function(a,b){
    return arguments
}

console.log(hee('foo',7))     / { '0': 'foo', '1': 7 }
var hee2=(a,b)=>arguments
console.log(hee2('foo',7))      / { '0': 'bar', '1': 13 }

/ 13	. 

/ import , export in ts,

/ lees,
http://2ality.com/2014/09/es6-modules-final.html
https://developer.mozilla.org/nl/docs/Web/JavaScript/Reference/Statements/import
https://developer.mozilla.org/nl/docs/Web/JavaScript/Reference/Statements/export
https://spring.io/understanding/javascript-modules
http://exploringjs.com/es6/ch_modules.html
https://addyosmani.com/writing-modular-js/
https://www.tutorialspoint.com/es6/es6_modules.htm


/ in eigen node example, calculator,

/ het zien er toch naar uit dat in node exports===module.exports, en dat we dus ook exports kunnen use,

$ vi calculator.js

this.add=function(a,b){return a+b}
module.exports.min=function(a,b){return a-b}
exports.mult=(a,b)=>a*b

/ als we use-calculator.js in browser, via calculator.html die <script src="use-calculator.js"></script> doet, en we geven
file:///C:/Users/ervelden/my-node-examples/calc/calculator.html
/ dan zien we :
require is not defined
/ TODO (browserify?)

/ In Angular write je in ts import/export, en dat wordt compile naar require/exports,
/ ze hebben node ingebouwd, dus met Angular werkt require wel OK
/ TODO


/ 13	. 

/ lees, 
http://adrianmejia.com/blog/2016/08/12/Getting-started-with-Node-js-modules-require-exports-imports-npm-and-beyond/

	
You can think of each module as self-contained function like the following one:

Module Wrapper
(function (exports, require, module, __filename, __dirname) {
  module.exports = exports = {};
  // Your module code ...
});

/ WH we kunnen 
exports.f=...
/ want nu is er ook module.exports.f

/ maar we moeten NIET 
exports={f:...}, want omdat eerder module.exports=exports={}, komt f niet in module.exports, alleen in exports, die reset wordt met een ander object.

/ 13	. 

/ typescript

/ lees,
https://www.typescriptlang.org/



































/ Einde VISUAL STUDIO, JAVASCRIPT

/ DEEPLEARNING.JS

https://research.googleblog.com/2017/08/harness-power-of-machine-learning-in.html?utm_campaign=devshow_series_deeplearnjs_081817&utm_source=gdev&utm_medium=yt-desc

/ kijk, suggestie van google,
https://www.youtube.com/watch?v=-eyhCTvrEtE
/ google: deep learning backpropagation,
http://neuralnetworksanddeeplearning.com/chap2.html
https://medium.com/towards-data-science/back-propagation-414ec0043d7
-> (follow, sign in with twitter)
https://api.twitter.com/oauth/authenticate?oauth_token=r1WLzwAAAAAAHVn4AAABXfnEm4M&force_login=false
Authorize Medium to use your account?
This application will be able to:
Read Tweets from your timeline.
See who you follow, and follow new people.
Update your profile.
Post Tweets for you.
See your email address.
Will not be able to:
Access your direct messages.
See your Twitter password.

/ login in twitter met 
ejvandervelden
ericjvandervelden@gmail.com

/ 7	 

/ Kijk,
https://www.youtube.com/watch?v=EveYfHKXvfc

restricted  boltzmann machine 
Pre-training deep neural networks by supervised learning
autoencoders
nonlinear pca (component analysis)
deep boltzmann machines
convolutional



/ lees,
https://stats.stackexchange.com/questions/163600/pre-training-in-deep-convolutional-neural-network
http://ufldl.stanford.edu/tutorial/unsupervised/Autoencoders/
https://arxiv.org/pdf/1402.0119.pdf

/ Einde DEEPLEARNING.JS

/ HIBERNATE

/ 7	.

/ google: hibernate project with gradle

/ lees,
http://www.concretepage.com/hibernate-4/hibernate-4-annotation-example-with-gradle
http://www.concretepage.com/jsf-2/jsf-2-hibernate-4-integration-example-using-gradle
https://stackoverflow.com/questions/41683388/how-to-get-spring-hibernate-restful-web-service-and-gradle-working-together


/ 7	. 


C:\Users\ervelden\hibernate>git clone https://github.com/hibernate/hibernate-orm.git

/ lees,
https://docs.jboss.org/hibernate/orm/5.0/quickstart/html/#tutorial-native
/ we download,
 hibernate-tutorials.zip
 
 / we extract deze in
C:\Users\ervelden\eclipse\workspace-jee-hibernate\hibernate-tutorials> dir
18-01-2017  23:34    <DIR>          annotations
18-01-2017  23:34    <DIR>          basic
19-01-2017  00:14    <DIR>          entitymanager
19-01-2017  00:14    <DIR>          envers
18-01-2017  23:34    <DIR>          osgi
18-01-2017  23:34             2.619 pom.xml

/ 7	.			   
			   
 / we hebben ook een spring boot project create, 
 
 C:\Users\ervelden\eclipse\workspace-java-oxygen\hibernate>spring init --dependencies jpa,jdbc,postgresql --build gradle --extract
 / TODO
 
 / 7. 
 
 / tot nu toe:
 / jee-oxygen op workspace-java-oxygen: rest, spring boot, 
 
/ voor hibernate maken we workspace-jee-hibernate
/ en we extract hibernate-tutorials.zip in 
 C:\Users\ervelden\eclipse\workspace-jee-hibernate\hibernate-tutorials>
 / in deze dir is een pom.xml
 / we import als Maven project deze dir, 
/ we zien in eclipse de projects,
22-08-2017  15:05    <DIR>          annotations      / hibernate-tutorial-annotations
22-08-2017  15:05    <DIR>          basic              / hibernate-tutorial-hbm
22-08-2017  15:05    <DIR>          entitymanager     / hibernate-tutorial-entitymanager
22-08-2017  15:05    <DIR>          envers

/ in osgi
22-08-2017  15:05    <DIR>          managed-jpa
22-08-2017  15:05    <DIR>          unmanaged-jpa
22-08-2017  15:05    <DIR>          unmanaged-native

/ in eclipse zien we 
hibernate-tutorials
/ dit is de root dir, met de root pom.xml


 
 

 
 



/ Einde HIBERNATE

/ H2

/ de windows installer:
C:\Program Files (x86)\H2

/ server,
C:\Users\ervelden\eclipse\workspace-java-oxygen\hibernate> java -classpath "\Program Files (x86)\H2\bin\h2-1.4.196.jar" org.h2.tools.Server -tcp
TCP server running at tcp://10.234.18.225:9092 (only local connections)

/ client,
C:\Users\ervelden\h2>java -classpath "\Program Files (x86)\h2\bin\h2-1.4.196.jar" org.h2.tools.Shell
/ Hiermee maak je een db, ook de username, password,

Welcome to H2 Shell 1.4.196 (2017-06-10)
Exit with Ctrl+C
[Enter]   jdbc:h2:~/test
URL       jdbc:h2:./test
[Enter]   org.h2.Driver
Driver
[Enter]
User      sa
[Enter]   Hide
Password  sa
Connected
Commands are case insensitive; SQL statements end with ';'
help or ?      Display this help
list           Toggle result list / stack trace mode
maxwidth       Set maximum column width (default is 100)
autocommit     Enable or disable autocommit
history        Show the last 20 statements
quit or exit   Close the connection and exit

/ je kunt autocommit set met 
autocommit
/ of
set autocommit

sql>  autocommit false
Autocommit is now false
sql> set autocommit true;
(Update count: 0, 0 ms)
sql> autocommit
Usage: autocommit [true|false]
Autocommit is now true
sql> autocommit false
Autocommit is now false


/ Einde H2

package com.example.demo;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;

@RunWith(SpringRunner.class)
@SpringBootTest
public class DemoApplicationTests {

	@Test
	public void contextLoads() {
	}

}

/ OPEN in CHROME

/ m2mobi : use RxJava van Netflix
https://www.m2mobi.com/
https://medium.com/netflix-techblog/reactive-programming-in-the-netflix-api-with-rxjava-7811c3a1496a
https://spring.io/blog/2016/07/28/reactive-programming-with-spring-5-0-m1
https://angular.io/guide/template-syntax
https://jenkins.io/doc/book/getting-started/installing/
https://www.coursera.org/learn/neural-networks-deep-learning
https://www.youtube.com/watch?v=CJT8wPnmjTM                   / OTP in Elixer,
https://www.youtube.com/watch?v=F-7MX_Az6_4								/ Elixer's web framework
https://docs.angularjs.org/api/ng/service/$compile#directive-definition-object
https://gist.github.com/toddmotto/5b4de6c777d3e446e6410fdadb824522
https://www.youtube.com/user/angularjs
https://stackoverflow.com/questions/37818740/use-of-symbols-and-in-custom-directives-scope-binding-angula
https://stackoverflow.com/questions/12419619/whats-the-difference-between-ng-model-and-ng-bind
https://www.w3schools.com/angular/angular_directives.asp
https://github.com/angular/angular.js/wiki/Understanding-Scopes
https://coryrylan.com/blog/introduction-to-e2e-testing-with-the-angular-cli-and-protractor
http://howtodoinjava.com/spring/spring-restful/spring-rest-hello-world-xml-example/
https://askubuntu.com/questions/299870/http-post-and-get-using-curl-in-linux
https://www.youtube.com/watch?v=-eyhCTvrEtE									/ Ng with Hinton
http://www.concretepage.com/spring-boot/spring-boot-xml-configuration-example
http://www.javainterviewpoint.com/spring-rest-hello-world-example/
https://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#mvc-ann-requestmapping-uri-templates
https://www.youtube.com/watch?v=EDB24onZxsA			/ reactive programming Josh Long
https://docs.spring.io/spring-boot/docs/current/reference/html/using-boot-using-springbootapplication-annotation.html
http://localhost:8080/reservations
https://eclipsesource.com/blogs/tutorials/egit-tutorial/           / Spring Data JPA
https://github.com/querydsl/apt-maven-plugin
https://github.com/spring-projects/spring-data-book/tree/1.0-book-release   / TODO


/ Deze houden we,
https://www.youtube.com/watch?v=9by46AAqz70&feature=push-u-sub&attr_tag=slJW8UBYzYGuPwmi-6
https://www.youtube.com/watch?v=3TT60EaeAHQ&list=PLG2vLZDgC_ZtmIBB5ERZE4EmMS__n_9GV&index=11
file:///C:/Users/ervelden/my-ng-apps/angular1/index.html
https://docs.angularjs.org/guide/component
mhttps://www.youtube.com/watch?v=CPbvxxslDTU
https://angular.io/tutorial/toh-pt2
https://docs.jboss.org/hibernate/orm/5.0/quickstart/html/#tutorial-native
https://spring.io/guides/tutorials/bookmarks/
https://medium.com/towards-data-science/back-propagation-414ec0043d7
https://www.linkedin.com/learning/building-a-full-stack-app-with-angular-2-plus-and-spring-boot/working-with-the-exercise-files
https://www.youtube.com/watch?v=sbPSjI4tt10&t=1859s       / Getting started with Spring Boot, Josh Long
https://spring.io/guides/gs/accessing-data-jpa/#initial
https://github.com/pkainulainen/spring-data-jpa-examples


/ Einde OPEN IN CHROME

/ JAVA LAMBDAS

/ jee-oxygen op workspace-jee-java8

/ lees,
https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html

/ lees,
https://docs.oracle.com/javase/tutorial/displayCode.html?code=https://docs.oracle.com/javase/tutorial/java/javaOO/examples/RosterTest.java
https://docs.oracle.com/javase/tutorial/displayCode.html?code=https://docs.oracle.com/javase/tutorial/java/javaOO/examples/Person.java

/ gradle project lambdas
/ my.own.Main class,

/ 13	. 

/ gradle test prints,

/ GRADLE
/ lees,
http://mrhaki.blogspot.nl/2014/10/gradle-goodness-show-standard-out-or.html
https://stackoverflow.com/questions/40954017/gradle-how-to-get-output-from-test-stderr-stdout-into-console

$ vi build.gradle
dependencies {
 
	compileOnly 'org.projectlombok:lombok:1.16.18'
    testImplementation 'junit:junit:4.12'
}
test {
    testLogging {
        // Make sure output from
        // standard out or error is shown
        // in Gradle output.
		dependsOn cleanTest              // we zien de prints altijd, 
        showStandardStreams = true
 
        // Or we use events method:
        // events 'standard_out', 'standard_error'
 
        // Or set property events:
        // events = ['standard_out', 'standard_error']
 
        // Instead of string values we can
        // use enum values:
        // events org.gradle.api.tasks.testing.logging.TestLogEvent.STANDARD_OUT,
        //        org.gradle.api.tasks.testing.logging.TestLogEvent.STANDARD_ERROR,
    }
}

/ 13	. 

/ Approach 1: Create Methods That Search for Members That Match One Characteristic

$ vi Roster.java

package my.own;

import java.util.List;

public class Roster {

	public static void printPersonsOlderThan(List<Person>roster,int age) {
		for(Person person:roster) {
			if(person.getAge()>=age) {
				person.printPerson();
			}
		}
	}

}

$ vi Person.java
package my.own;

import java.time.LocalDate;
import java.time.chrono.IsoChronology;
import java.util.logging.Logger;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@AllArgsConstructor
@NoArgsConstructor
class Person{
	String name;
	LocalDate birthDay;
	Sex gender;
	String emailAddress;
	
	private static Logger logger=Logger.getLogger("Person");

	public int getAge() {
		return birthDay.until(IsoChronology.INSTANCE.dateNow()).getYears();
	}
	public void printPerson() {
		logger.info(this.toString());
	}
		
}

package my.own;

public enum Sex{
	MALE,FEMALE
}


$ vi RosterTest.java
package my.own;

import java.time.LocalDate;
import java.time.chrono.IsoChronology;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;

public class RosterTest {
	
	private List<Person> roster;
	private LocalDate localDate;
	private LocalDate localDate2;


	@Before
	public void init() {
		roster=new ArrayList<Person>();
		
		localDate=LocalDate.now();
		// equals
		localDate2=IsoChronology.INSTANCE.dateNow();
	
		Person person1=new Person("Foo1",localDate.minusYears(1),Sex.FEMALE,"foo1@home.nl");
		Person person2=new Person("Foo2",localDate.minusYears(2),Sex.FEMALE,"foo2@home.nl");
		Person person3=new Person("Foo3",localDate.minusYears(3),Sex.FEMALE,"foo3@home.nl");
		Person person4=new Person("Foo4",localDate.minusYears(4),Sex.FEMALE,"foo4@home.nl");
		roster=Arrays.asList(person1,person2,person3,person4);
	}
	
	@Test
	public void testIsoChronology() {
		Assert.assertEquals(localDate, localDate2);
	}
	
	@Test
	public void testLocalDates() {
		LocalDate min1=localDate.minusYears(1);
		LocalDate min2=localDate.minusYears(2);
		LocalDate min3=localDate.minusYears(3);
		LocalDate min4=localDate.minusYears(4);
		
		int age1=min1.until(localDate).getYears();
		int age2=min2.until(localDate).getYears();
		int age3=min3.until(localDate).getYears();
		int age4=min4.until(localDate).getYears();
		
		Assert.assertTrue(age3>=3);
	}
	
	@Test
	public void test() {
		Roster.printPersonsOlderThan(roster, 2);
	}

}

/ als we de test task run, zien we ,

my.own.RosterTest > test1 STANDARD_ERROR
    Aug 30, 2017 3:56:47 AM my.own.Person printPerson
    INFO: Person(name=Foo2, birthDay=2015-08-30, gender=FEMALE, emailAddress=foo2@home.nl)
    Aug 30, 2017 3:56:47 AM my.own.Person printPerson
    INFO: Person(name=Foo3, birthDay=2014-08-30, gender=FEMALE, emailAddress=foo3@home.nl)
    Aug 30, 2017 3:56:47 AM my.own.Person printPerson
    INFO: Person(name=Foo4, birthDay=2013-08-30, gender=FEMALE, emailAddress=foo4@home.nl)
	
	
/ 13	. 

/ Approach 3: Specify Search Criteria Code in a Local Class

$ vi CheckPerson.java

package my.own;

public interface CheckPerson {
	boolean test(Person person);
}

$ vi CheckPersonEligibleForSelectiveService.java

package my.own;

public class CheckPersonEligibleForSelectiveService implements CheckPerson {

	@Override
	public boolean test(Person person) {
		return person.getGender()==Sex.FEMALE && person.getAge()>=2 && person.getAge()<=3;
	}

}

$ vi Roster.java

public class Roster {

	public static void printPersons(List<Person>roster,CheckPerson checkPerson) {
		for(Person person:roster) {
			if(checkPerson.test(person)) {
				person.printPerson();
			}
		}
	}

}

$ vi RosterTest.java

public class RosterTest {

	@Test
	public void test3() {
		CheckPerson checkPerson=new CheckPersonEligibleForSelectiveService();
		Roster.printPersons(roster, checkPerson);
	}
}

/ we zien 	,

my.own.RosterTest > test3 STANDARD_ERROR
    Aug 30, 2017 3:56:47 AM my.own.Person printPerson
    INFO: Person(name=Foo2, birthDay=2015-08-30, gender=FEMALE, emailAddress=foo2@home.nl)
    Aug 30, 2017 3:56:47 AM my.own.Person printPerson
    INFO: Person(name=Foo3, birthDay=2014-08-30, gender=FEMALE, emailAddress=foo3@home.nl)
	
/ klopt,


/ Approach 4: Specify Search Criteria Code in an Anonymous Class

$ vi RosterTest.java

	@Test
	public void test4() {
		Roster.printPersons(roster, new CheckPerson() {
			
			@Override
			public boolean test(Person person) {
				return person.getGender()==Sex.FEMALE && person.getAge()>=2 && person.getAge()<=3;
			}
		});
	}
	
/ we zien, 

my.own.RosterTest > test4 STANDARD_ERROR
    Aug 30, 2017 4:25:52 AM my.own.Person printPerson
    INFO: Person(name=Foo2, birthDay=2015-08-30, gender=FEMALE, emailAddress=foo2@home.nl)
    Aug 30, 2017 4:25:52 AM my.own.Person printPerson
    INFO: Person(name=Foo3, birthDay=2014-08-30, gender=FEMALE, emailAddress=foo3@home.nl)
	
/ Approach 5: Specify Search Criteria Code with a Lambda Expression

$ vi RosterTester.java

public class RosterTest {

	@Test
	public void test5() {
		Roster.printPersons(roster, (person)->person.getGender()==Sex.FEMALE && person.getAge()>=2 && person.getAge()<=3);
	}
}

/ we zien, 

my.own.RosterTest > test5 STANDARD_ERROR
    Aug 30, 2017 4:32:39 AM my.own.Person printPerson
    INFO: Person(name=Foo2, birthDay=2015-08-30, gender=FEMALE, emailAddress=foo2@home.nl)
    Aug 30, 2017 4:32:39 AM my.own.Person printPerson
    INFO: Person(name=Foo3, birthDay=2014-08-30, gender=FEMALE, emailAddress=foo3@home.nl)

/ Hoe werkt dit, want Roster.printPersons verwacht als 2de arg een CheckPerson,
/ TODO

/ Approach 6: Use Standard Functional Interfaces with Lambda Expressions

/ use Predicate ipv CheckPerson,

$ vi Roster.java

public static void printPersons(List<Person>roster,CheckPerson checkPerson) {
		for(Person person:roster) {
			if(checkPerson.test(person)) {
				person.printPerson();
			}
		}
	}
	public static void printPersonsWithPredicate(List<Person>roster,Predicate<Person>predicate) {
		for(Person person:roster) {
			if(predicate.test(person)) {
				person.printPerson();
			}
		}
	}
	
$ vi RosterTester.java

	@Test
	public void test5() {
		Roster.printPersons(roster, (person)->person.getGender()==Sex.FEMALE && person.getAge()>=2 && person.getAge()<=3);
	}
	@Test
	public void test6() {
		Roster.printPersonsWithPredicate(roster, (person)->person.getGender()==Sex.FEMALE && person.getAge()>=2 && person.getAge()<=3);
	}
	
/ we zien, 
my.own.RosterTest > test6 STANDARD_ERROR
    Aug 30, 2017 5:27:15 AM my.own.Person printPerson
    INFO: Person(name=Foo2, birthDay=2015-08-30, gender=FEMALE, emailAddress=foo2@home.nl)
    Aug 30, 2017 5:27:15 AM my.own.Person printPerson
    INFO: Person(name=Foo3, birthDay=2014-08-30, gender=FEMALE, emailAddress=foo3@home.nl)
	
/ Approach 7: Use Lambda Expressions Throughout Your Application

$ vi Roster.java

	public static void processPersons(List<Person>roster,Predicate<Person>predicate,Consumer<Person>consumer) {
		for(Person person:roster) {
			if(predicate.test(person)) {
				consumer.accept(person);
			}
		}
	}
}

$ vi RosterTester.java

	public static void processPersons(List<Person>roster,Predicate<Person>predicate,Consumer<Person>consumer) {
		for(Person person:roster) {
			if(predicate.test(person)) {
				consumer.accept(person);
			}
		}
	}
}

/ we zien, 
my.own.RosterTest > test7 STANDARD_ERROR
    Aug 30, 2017 6:07:19 AM my.own.Person printPerson
    INFO: Person(name=Foo2, birthDay=2015-08-30, gender=FEMALE, emailAddress=foo2@home.nl)
    Aug 30, 2017 6:07:19 AM my.own.Person printPerson
    INFO: Person(name=Foo3, birthDay=2014-08-30, gender=FEMALE, emailAddress=foo3@home.nl)
	
/ 7a	. 

$ vi Roster.java

	public static void processPersonsWithFunction(List<Person>roster,Predicate<Person>predicate,Function<Person, String>function,Consumer<String>consumer) {										/ Consumer<String>, zonet Consumer<Person>
		for(Person person:roster) {
			if(predicate.test(person)) {
				String data=function.apply(person);
				consumer.accept(data);
			}
		}
	}
}

$ vi RosterTester.java
	@Test
	public void test7a() {
		Roster.processPersonsWithFunction(roster, (person)->person.getGender()==Sex.FEMALE && person.getAge()>=2 && person.getAge()<=3, (p)->p.getEmailAddress()	, email->System.out.println(email));
	}

/ we zien deze print helemaal bovenaan	, 
/ TODO

my.own.RosterTester > test7a STANDARD_OUT
    foo2@home.nl
    foo3@home.nl

my.own.RosterTester > test1 STANDARD_ERROR
    Aug 30, 2017 6:46:12 AM my.own.Person printPerson
    INFO: Person(name=Foo2, birthDay=2015-08-30, gender=FEMALE, emailAddress=foo2@home.nl)
    Aug 30, 2017 6:46:12 AM my.own.Person printPerson
    INFO: Person(name=Foo3, birthDay=2014-08-30, gender=FEMALE, emailAddress=foo3@home.nl)
    Aug 30, 2017 6:46:12 AM my.own.Person printPerson
    INFO: Person(name=Foo4, birthDay=2013-08-30, gender=FEMALE, emailAddress=foo4@home.nl)
...

/ predicate is filter, consumer is action, 

/ Approach 8: Use Generics More Extensively

/ we maken processPersonsWithFunction generic: processElements,
/ de test functie verandert niet, behalve dat hij anders heet,

$ vi Roster.java

	public static void processPersonsWithFunction(List<Person>roster,Predicate<Person>predicate,Function<Person, String>function,Consumer<String>consumer) {
		for(Person person:roster) {
			if(predicate.test(person)) {
				String data=function.apply(person);
				consumer.accept(data);
			}
		}
	}

	public static <X,Y>void processElements(Iterable<X>source,Predicate<X>predicate,Function<X, Y>function,Consumer<Y>consumer) {
		for(X x:source) {
			if(predicate.test(x)) {
				Y y=function.apply(x);
				consumer.accept(y);
			}
		}
	}
	
$ vi RosterTester.java

	@Test
	public void tests7a() {
		Roster.processPersonsWithFunction(roster, (person)->person.getGender()==Sex.FEMALE && person.getAge()>=2 && person.getAge()<=3, (p)->p.getEmailAddress()	, email->System.out.println(email));
	}
	@Test
	public void test8() {
		Roster.processElements(roster, (person)->person.getGender()==Sex.FEMALE && person.getAge()>=2 && person.getAge()<=3, (p)->p.getEmailAddress()	, email->System.out.println(email));
	}
	
/ we zien, 

my.own.RosterTester > test8 STANDARD_OUT
    foo2@home.nl
    foo3@home.nl
	
/ we hadden al de tijd Iterable<Person> kunnen use ipv List<Person> als 1ste arg van de Roster functions,

/ we zien dat java.util.logging.Logger naar STANDARD_ERR prints, 
/ TODO

/ Approach 9: Use Aggregate Operations That Accept Lambda Expressions as Parameters 

$ vi RosterTester.java

	@Test
	public void test9() {
		roster
			.stream()
			.filter((person)->person.getGender()==Sex.FEMALE && person.getAge()>=2 && person.getAge()<=3)
			.map((person)->person.getEmailAddress())
			.forEach((email)->System.out.println(email));
	}
	
/ we hoeven dus geen fct aan Roster toe te voegen,

/ we zien,
my.own.RosterTester > test9 STANDARD_OUT
    foo2@home.nl
    foo3@home.nl
	
/ 13	. 

/ we kunnen () weglaten rond (person)	, dus
	person->person.getGender()==Sex.FEMALE && person.getAge()>=2 && person.getAge()<=3
ipv
	(person)->person.getGender()==Sex.FEMALE && person.getAge()>=2 && person.getAge()<=3

/ bijv,

	@Test
	public void test8() {
		Roster.processElements(roster, person->person.getGender()==Sex.FEMALE && person.getAge()>=2 && person.getAge()<=3, (p)->p.getEmailAddress()	, email->System.out.println(email));
	}
	@Test
	public void test9() {
		roster
			.stream()
			.filter(person->person.getGender()==Sex.FEMALE && person.getAge()>=2 && person.getAge()<=3)
			.map(person->person.getEmailAddress())
			.forEach(email->System.out.println(email));
	}

/ 13	. 
	
The operations filter, map, and forEach are aggregate operations. Aggregate operations process elements from a stream, not directly from a collection (which is the reason why the first method invoked in this example is stream). A stream is a sequence of elements. Unlike a collection, it is not a data structure that stores elements. Instead, a stream carries values from a source, such as collection, through a pipeline. A pipeline is a sequence of stream operations, which in this example is filter- map-forEach. In addition, aggregate operations typically accept lambda expressions as parameters, enabling you to customize how they behave.

/ 13	. 

/ Voor de Roster methods kunnen we roster een Iterable<Person> laten zijn, want we doen alleen
	for(Person person:roster) {

/ maar voor .stream() hebben we Collection<Person> nodig, daarom cast we roster naar Collection<Person> 	,



public class RosterTester {
	private Iterable<Person>roster;
	private Predicate<Person>predicate;
	
	@Test
	public void test9() {
		((Collection<Person>)roster)
			.stream()
			
/ 13	. 

/ We begrijpen iets niet:

public class Roster {
	public static void printPersons(Iterable<Person>roster,CheckPerson checkPerson) {
		for(Person person:roster) {
			if(checkPerson.test(person)) {
				person.printPerson();
			}
		}
	}
	public static void printPersonsWithPredicate(Iterable<Person>roster,Predicate<Person>predicate) {
		for(Person person:roster) {
			if(predicate.test(person)) {
				person.printPerson();
			}
		}
	}

public class RosterTester{
	@Test
	public void test5() {
		Roster.printPersons(roster, person->person.getGender()==Sex.FEMALE && person.getAge()>=2 && person.getAge()<=3);
	}
	@Test
	public void test5alt() {
		Roster.printPersons(roster, (CheckPerson)predicate);  // cast ERR,
	}
	@Test
	public void test6() {
		Roster.printPersonsWithPredicate(roster, person->person.getGender()==Sex.FEMALE && person.getAge()>=2 && person.getAge()<=3);
	}
	@Test
	public void test6alt() {
		Roster.printPersonsWithPredicate(roster, predicate);
	}
	
/ test5 is OK, dus de Predicate<Person> wordt op de een of andere manier een CheckPerson, want dat is het 2de arg van printPersons. Maar expliciet de cast is ERR, en test5alt fails,
/ of is 
/ test6alt is OK,

/ Lees	, 
https://dzone.com/articles/writing-clean-predicates-java

/ In test6alt zien we bijvoorbeeld dat predicate is (dus hier zien we een type die Predicate<Person> implements,
	my.own.RosterTester$$Lambda$11/798244209@86be70a
	
/ 13	. 

/ FINAL LAMBDAS

$ vi Roster.java

package my.own;

import java.util.List;
import java.util.function.Consumer;
import java.util.function.Function;
import java.util.function.Predicate;

public class Roster {

	public static void printPersonsOlderThan(Iterable<Person>roster,int age) {
		for(Person person:roster) {
			if(person.getAge()>=age) {
				person.printPerson();
			}
		}
	}
	public static void printPersons(Iterable<Person>roster,CheckPerson checkPerson) {
		for(Person person:roster) {
			if(checkPerson.test(person)) {
				person.printPerson();
			}
		}
	}
	public static void printPersonsWithPredicate(Iterable<Person>roster,Predicate<Person>predicate) {
		for(Person person:roster) {
			if(predicate.test(person)) {
				person.printPerson();
			}
		}
	}
	
	public static void processPersons(Iterable<Person>roster,Predicate<Person>predicate,Consumer<Person>consumer) {
		for(Person person:roster) {
			if(predicate.test(person)) {
				consumer.accept(person);
			}
		}
	}
	public static void processPersonsWithFunction(Iterable<Person>roster,Predicate<Person>predicate,Function<Person, String>function,Consumer<String>consumer) {
		for(Person person:roster) {
			if(predicate.test(person)) {
				String data=function.apply(person);
				consumer.accept(data);
			}
		}
	}
	public static <X,Y>void processElements(Iterable<X>source,Predicate<X>predicate,Function<X, Y>function,Consumer<Y>consumer) {
		for(X x:source) {
			if(predicate.test(x)) {
				Y y=function.apply(x);
				consumer.accept(y);
			}
		}
	}
}

$ vi RosterTester.java

package my.own;

import java.time.LocalDate;
import java.time.chrono.IsoChronology;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collection;
import java.util.List;
import java.util.function.Predicate;

import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;

public class RosterTester {
	
	private Iterable<Person> roster;
	
	private LocalDate localDate;
	private LocalDate localDate2;
	
	private Predicate<Person>predicate;


	@Before
	public void init() {
		
		localDate=LocalDate.now();
		// equals
		localDate2=IsoChronology.INSTANCE.dateNow();
	
		Person person1=new Person("Foo1",localDate.minusYears(1),Sex.FEMALE,"foo1@home.nl");
		Person person2=new Person("Foo2",localDate.minusYears(2),Sex.FEMALE,"foo2@home.nl");
		Person person3=new Person("Foo3",localDate.minusYears(3),Sex.FEMALE,"foo3@home.nl");
		Person person4=new Person("Foo4",localDate.minusYears(4),Sex.FEMALE,"foo4@home.nl");
		roster=Arrays.asList(person1,person2,person3,person4);
		predicate=person->person.getGender()==Sex.FEMALE && person.getAge()>=2 && person.getAge()<=3;
	}
	
	@Test
	public void testIsoChronology() {
		Assert.assertEquals(localDate, localDate2);
	}
	
	@Test
	public void testLocalDates() {
		LocalDate min1=localDate.minusYears(1);
		LocalDate min2=localDate.minusYears(2);
		LocalDate min3=localDate.minusYears(3);
		LocalDate min4=localDate.minusYears(4);
		
		int age1=min1.until(localDate).getYears();
		int age2=min2.until(localDate).getYears();
		int age3=min3.until(localDate).getYears();
		int age4=min4.until(localDate).getYears();
		
		Assert.assertTrue(age3>=3);
	}
	
	@Test
	public void test1() {
		Roster.printPersonsOlderThan(roster, 2);
	}

	@Test
	public void test3() {
		CheckPerson checkPerson=new CheckPersonEligibleForSelectiveService();
		Roster.printPersons(roster, checkPerson);
	}
	
	@Test
	public void test4() {
		Roster.printPersons(roster, new CheckPerson() {
			
			@Override
			public boolean test(Person person) {
				return person.getGender()==Sex.FEMALE && person.getAge()>=2 && person.getAge()<=3;
			}
		});
	}
	
	@Test
	public void test5() {
		Roster.printPersons(roster, person->person.getGender()==Sex.FEMALE && person.getAge()>=2 && person.getAge()<=3);
	}
	@Test
	public void test5alt() {
		boolean impls=predicate instanceof Predicate<Person>;
		Assert.assertTrue(impls);
//		Roster.printPersons(roster, (CheckPerson)predicate);		// cast ERR, TODO
	}
	@Test
	public void test6() {
		Roster.printPersonsWithPredicate(roster, person->person.getGender()==Sex.FEMALE && person.getAge()>=2 && person.getAge()<=3);
	}
	@Test
	public void test6alt() {
		Roster.printPersonsWithPredicate(roster, predicate);
	}
	@Test
	public void test7() {
		Roster.processPersons(roster, person->person.getGender()==Sex.FEMALE && person.getAge()>=2 && person.getAge()<=3, (p)->p.printPerson());
	}
	@Test
	public void test7alt() {
		Roster.processPersonsWithFunction(roster, person->person.getGender()==Sex.FEMALE && person.getAge()>=2 && person.getAge()<=3, (p)->p.getEmailAddress()	, email->System.out.println(email));
	}
	@Test
	public void test8() {
		Roster.processElements(roster, person->person.getGender()==Sex.FEMALE && person.getAge()>=2 && person.getAge()<=3, (p)->p.getEmailAddress()	, email->System.out.println(email));
	}
	@Test
	public void test9() {
		((Collection<Person>)roster)
			.stream()
			.filter(person->person.getGender()==Sex.FEMALE && person.getAge()>=2 && person.getAge()<=3)
			.map(person->person.getEmailAddress())
			.forEach(email->System.out.println(email));
	}
}




/ Einde FINAL LAMBDAS
	
	
/ 13	. 

/ als we F3 geven op een JDK type, bijv List, dan zien we:  rt.jar has no source attachment,

/ lees, 
https://stackoverflow.com/questions/1157597/attach-the-java-source-code

/ we maken een andere JRE in eclipse: C:\Program Files\Java\jdk1.8.0_144
/ op een gegeven moment hebben we: JavaSE-1.8 (jdk1.8.0_144)

/ als we nu F3 op List, dan vallen we in de source code, 

/ 13	. 

/ List heeft geen stream method, maar Collection wel,

public interface List<E> extends Collection<E> {
	
public interface Collection<E> extends Iterable<E> {
    default Stream<E> stream() {
        return StreamSupport.stream(spliterator(), false);
    }

/ Wat is een default method?
/ Dit is een method van een interface, en geen abstract method, maar een concrete, die je normaal in een class schrijft. Een implementing class hoeft deze method dus niet te implements, maar kan dat wel,

$ vi DefaultTester.java

package my.own;

import org.junit.Test;

import org.junit.Assert;

public class DefaultTester extends RosterTester {

	@Test
	public void test() {
		String s=new C().fun();
		Assert.assertEquals("fun", s);
		String s2=new C().fun2();
		Assert.assertEquals("fun2", s2);
	}
}
interface I {
	String str();
	void fct();
	default String fun() {
		return "fun";
	}
	default String fun2() {
		return "fun2";
	}
}
class C implements I{
	@Override
	public String str() {
		return "str";
	}
	@Override
	public void fct() {
		System.out.println("fct");
		
	}
	@Override
	public String fun2() {
		return I.super.fun2();
	}
}

/ we kunnen in src/test/java DefaultTester.java er ook bij set, samen met RosterTester, 
/ als we de test gradle task run, worden de @Test methods in beide files exec, 




/ Einde JAVA LAMBDAS

/ JAVA METHOD REFERENCES

/ Lees	,
https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html

/ we maken in gradle project 'lambdas' MethodReferenceTester.java,



/ Einde JAVA METHOD REFERENCES


/ JAVA STREAMS

https://docs.oracle.com/javase/tutorial/collections/streams/



/ Einde JAVA STREAMS

/ SOAP SPRING BOOT SPRING-WS

/ Lees	, 
https://spring.io/guides/gs/producing-web-service/

/ jee-oxygen, workspace-jee-ws, 

/ we maken een dir guide\ in deze workspace,


C:\Users\ervelden\eclipse\workspace-jee-ws\guide>spring init --dependencies web-services --build gradle --extract
Using service at https://start.spring.io
/ import in eclipse

/ we willen de jdk1.8.0_144, 
/ right click guide project, build path, libraries,
/ we zien: JRE System Library [JavaSE-1.8], Edit
/ we zien: Execution environment: JavaSE-1.8 (jre1.8.0_144)
/ we moeten eerst een JRE toevoegen, voordat we JavaSE-1.8 kunnen veranderen, click 'Installed JREs...',
/ click daar 'Add...', en select \Program Files\Java\jdk1.8.0_144, Apply and close,
/ terug bij JRE System Library, click nu Environments,
/ click JavaSE-1.8, nu zien we rechts 2 entries: jdk1.8.0_144 en jre1.8.0_144, kies jdk1.8.0_144,

/ we zien 

$ vi build.gradle

buildscript {
	ext {
		springBootVersion = '1.5.6.RELEASE'
	}
	repositories {
		mavenCentral()
	}
	dependencies {
		classpath("org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}")
	}
}

apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'org.springframework.boot'

version = '0.0.1-SNAPSHOT'
sourceCompatibility = 1.8

repositories {
	mavenCentral()
}


dependencies {
	compile('org.springframework.boot:spring-boot-starter-web-services')
	testCompile('org.springframework.boot:spring-boot-starter-test')
}

/ we edit de dependencies,

dependencies {
	compile('org.springframework.boot:spring-boot-starter-web-services')
	testCompile('org.springframework.boot:spring-boot-starter-test')
	compile("wsdl4j:wsdl4j:1.6.1")
    jaxb("org.glassfish.jaxb:jaxb-xjc:2.2.11")
    compile(files(genJaxb.classesDir).builtBy(genJaxb))
}

/ Lees,
http://gdpotter.com/2017/08/14/jaxb-gradle-config/
/ TODO


/ we maken in src/main/resources,

$ vi countries.xsd

<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://spring.io/guides/gs-producing-web-service"
           targetNamespace="http://spring.io/guides/gs-producing-web-service" elementFormDefault="qualified">

    <xs:element name="getCountryRequest">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="name" type="xs:string"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element>

    <xs:element name="getCountryResponse">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="country" type="tns:country"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element>

    <xs:complexType name="country">
        <xs:sequence>
            <xs:element name="name" type="xs:string"/>
            <xs:element name="population" type="xs:int"/>
            <xs:element name="capital" type="xs:string"/>
            <xs:element name="currency" type="tns:currency"/>
        </xs:sequence>
    </xs:complexType>

    <xs:simpleType name="currency">
        <xs:restriction base="xs:string">
            <xs:enumeration value="GBP"/>
            <xs:enumeration value="EUR"/>
            <xs:enumeration value="PLN"/>
        </xs:restriction>
    </xs:simpleType>
</xs:schema>

/ we voegen toe aan build.gradle,

targetCompatibility = 1.8

configurations{
	jaxb
}

jar{
	baseName='gs-producing-web-service'
	version='0.1.0'
	from genJaxb.classesDir
}

//////////////////
/ VOLGORDE IN BUILD.GRADLE

/ In build.gradle moeten we op de volgorde letten:

/ 7	. 

/ omdat in dependencies jaxb staat, moet configurations{jaxb} voor dependencies,

configurations{
	jaxb
}
dependencies {
	compile('org.springframework.boot:spring-boot-starter-web-services')
	testCompile('org.springframework.boot:spring-boot-starter-test')
	compile("wsdl4j:wsdl4j:1.6.1")
    jaxb "org.glassfish.jaxb:jaxb-xjc:2.2.11"
    compile(files(genJaxb.classesDir).builtBy(genJaxb))
}

/ 7	. 

/ omdat genJaxb in jar{...} staat, moet de def van de task genJaxb voor jar{...}

task genJaxb{
	ext.sourcesDir="${buildDir}/generated-sources/jaxb"
	ext.classesDir="${buildDir}/classes/jaxb"
	ext.schema="src/main/resources/countries.xsd"
	
	outputs.dir classesDir
	
	doLast(){
		project ant{
			taskdef name:"xjc",classname:"com.sun.tools.xjc.XJCTask",
					classpath:configurations.jaxb.asPath
			mkdir(dir:sourcesDir)
			mkdir(dir:classesDir)
			xjc(destdir:sourcesDir,schema:schema){
				arg(value:"-wsdl")
				produces(dir:sourcesDir,includes:"**/*.java")
			}
			javac(destdir:classesDir,source:"1.8",target:"1.8",debug:"true",
					debugLevel:"lines,vars,source",classpath:configuations.jaxb.asPath){
				src(path:sourcesDir)
				include(name:"**/*.java")
				include(name:"*.java")
			}
			copy(todir:classesDir){
				fileset(dir:sourcesDir,erroronmissingdir:false){
					exclude(name:"**/*.java")
				}
			}
		}
	}
}

jar{
	baseName='gs-producing-web-service'
	version='0.1.0'
	from genJaxb.classesDir
}
	

/ Einde VOLGORDE IN BUILD.GRADLE

/ MORGENOCHTEND

/ 7	. 

/ we download de source,
C:\Users\ervelden\eclipse\workspace-jee-ws>git clone https://github.com/spring-guides/gs-producing-web-service.git




/ Einde SOAP SPRING BOOT SPRING-WS

/ JAXB

https://www.thoughts-on-java.org/generate-your-jaxb-classes-in-second/

/ Lees ook,
http://javapapers.com/jee/jaxb-tutorial/

C:\Users\ervelden\java\xjc>notepad schema.xsd

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xs:schema version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:element name="author" type="author"/>

  <xs:element name="book" type="book"/>

  <xs:complexType name="author">
    <xs:sequence>
      <xs:element name="firstName" type="xs:string" minOccurs="0"/>
      <xs:element name="lastName" type="xs:string" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="book">
    <xs:sequence>
      <xs:element ref="author" minOccurs="0"/>
      <xs:element name="pages" type="xs:int"/>
      <xs:element name="publicationDate" type="xs:dateTime" minOccurs="0"/>
      <xs:element name="title" type="xs:string" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>
</xs:schema>

/ we zien de def van 2 elems, en hun 2 types,


C:\Users\ervelden\java\xjc> mkdir src

C:\Users\ervelden\java\xjc> xjc -d src -p my.own.xjc.result schema.xsd
parsing a schema...
compiling a schema...
my\own\xjc\result\Author.java
my\own\xjc\result\Book.java
my\own\xjc\result\ObjectFactory.java

C:\Users\ervelden\java\xjc> notepad++ Author.java

//
// This file was generated by the JavaTM Architecture for XML Binding(JAXB) Reference Implementation, v2.2.8-b130911.1802 
// See <a href="http://java.sun.com/xml/jaxb">http://java.sun.com/xml/jaxb</a> 
// Any modifications to this file will be lost upon recompilation of the source schema. 
// Generated on: 2017.08.31 at 08:16:12 AM GMT+01:00 
//


package my.own.xjc.result;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlType;


/**
 * <p>Java class for author complex type.
 * 
 * <p>The following schema fragment specifies the expected content contained within this class.
 * 
 * <pre>
 * &lt;complexType name="author">
 *   &lt;complexContent>
 *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
 *       &lt;sequence>
 *         &lt;element name="firstName" type="{http://www.w3.org/2001/XMLSchema}string" minOccurs="0"/>
 *         &lt;element name="lastName" type="{http://www.w3.org/2001/XMLSchema}string" minOccurs="0"/>
 *       &lt;/sequence>
 *     &lt;/restriction>
 *   &lt;/complexContent>
 * &lt;/complexType>
 * </pre>
 * 
 * 
 */
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "author", propOrder = {
    "firstName",
    "lastName"
})
public class Author {

    protected String firstName;
    protected String lastName;

    /**
     * Gets the value of the firstName property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getFirstName() {
        return firstName;
    }

    /**
     * Sets the value of the firstName property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setFirstName(String value) {
        this.firstName = value;
    }

    /**
     * Gets the value of the lastName property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getLastName() {
        return lastName;
    }

    /**
     * Sets the value of the lastName property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setLastName(String value) {
        this.lastName = value;
    }

}

$ vi Book.java

//
// This file was generated by the JavaTM Architecture for XML Binding(JAXB) Reference Implementation, v2.2.8-b130911.1802 
// See <a href="http://java.sun.com/xml/jaxb">http://java.sun.com/xml/jaxb</a> 
// Any modifications to this file will be lost upon recompilation of the source schema. 
// Generated on: 2017.08.31 at 08:16:12 AM GMT+01:00 
//


package my.own.xjc.result;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlSchemaType;
import javax.xml.bind.annotation.XmlType;
import javax.xml.datatype.XMLGregorianCalendar;


/**
 * <p>Java class for book complex type.
 * 
 * <p>The following schema fragment specifies the expected content contained within this class.
 * 
 * <pre>
 * &lt;complexType name="book">
 *   &lt;complexContent>
 *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
 *       &lt;sequence>
 *         &lt;element ref="{}author" minOccurs="0"/>
 *         &lt;element name="pages" type="{http://www.w3.org/2001/XMLSchema}int"/>
 *         &lt;element name="publicationDate" type="{http://www.w3.org/2001/XMLSchema}dateTime" minOccurs="0"/>
 *         &lt;element name="title" type="{http://www.w3.org/2001/XMLSchema}string" minOccurs="0"/>
 *       &lt;/sequence>
 *     &lt;/restriction>
 *   &lt;/complexContent>
 * &lt;/complexType>
 * </pre>
 * 
 * 
 */
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "book", propOrder = {
    "author",
    "pages",
    "publicationDate",
    "title"
})
public class Book {

    protected Author author;
    protected int pages;
    @XmlSchemaType(name = "dateTime")
    protected XMLGregorianCalendar publicationDate;
    protected String title;

    /**
     * Gets the value of the author property.
     * 
     * @return
     *     possible object is
     *     {@link Author }
     *     
     */
    public Author getAuthor() {
        return author;
    }

    /**
     * Sets the value of the author property.
     * 
     * @param value
     *     allowed object is
     *     {@link Author }
     *     
     */
    public void setAuthor(Author value) {
        this.author = value;
    }

    /**
     * Gets the value of the pages property.
     * 
     */
    public int getPages() {
        return pages;
    }

    /**
     * Sets the value of the pages property.
     * 
     */
    public void setPages(int value) {
        this.pages = value;
    }

    /**
     * Gets the value of the publicationDate property.
     * 
     * @return
     *     possible object is
     *     {@link XMLGregorianCalendar }
     *     
     */
    public XMLGregorianCalendar getPublicationDate() {
        return publicationDate;
    }

    /**
     * Sets the value of the publicationDate property.
     * 
     * @param value
     *     allowed object is
     *     {@link XMLGregorianCalendar }
     *     
     */
    public void setPublicationDate(XMLGregorianCalendar value) {
        this.publicationDate = value;
    }

    /**
     * Gets the value of the title property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getTitle() {
        return title;
    }

    /**
     * Sets the value of the title property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setTitle(String value) {
        this.title = value;
    }

}

$ vi ObjectFactory.java

//
// This file was generated by the JavaTM Architecture for XML Binding(JAXB) Reference Implementation, v2.2.8-b130911.1802 
// See <a href="http://java.sun.com/xml/jaxb">http://java.sun.com/xml/jaxb</a> 
// Any modifications to this file will be lost upon recompilation of the source schema. 
// Generated on: 2017.08.31 at 08:16:12 AM GMT+01:00 
//


package my.own.xjc.result;

import javax.xml.bind.JAXBElement;
import javax.xml.bind.annotation.XmlElementDecl;
import javax.xml.bind.annotation.XmlRegistry;
import javax.xml.namespace.QName;


/**
 * This object contains factory methods for each 
 * Java content interface and Java element interface 
 * generated in the my.own.xjc.result package. 
 * <p>An ObjectFactory allows you to programatically 
 * construct new instances of the Java representation 
 * for XML content. The Java representation of XML 
 * content can consist of schema derived interfaces 
 * and classes representing the binding of schema 
 * type definitions, element declarations and model 
 * groups.  Factory methods for each of these are 
 * provided in this class.
 * 
 */
@XmlRegistry
public class ObjectFactory {

    private final static QName _Author_QNAME = new QName("", "author");
    private final static QName _Book_QNAME = new QName("", "book");

    /**
     * Create a new ObjectFactory that can be used to create new instances of schema derived classes for package: my.own.xjc.result
     * 
     */
    public ObjectFactory() {
    }

    /**
     * Create an instance of {@link Author }
     * 
     */
    public Author createAuthor() {
        return new Author();
    }

    /**
     * Create an instance of {@link Book }
     * 
     */
    public Book createBook() {
        return new Book();
    }

    /**
     * Create an instance of {@link JAXBElement }{@code <}{@link Author }{@code >}}
     * 
     */
    @XmlElementDecl(namespace = "", name = "author")
    public JAXBElement<Author> createAuthor(Author value) {
        return new JAXBElement<Author>(_Author_QNAME, Author.class, null, value);
    }

    /**
     * Create an instance of {@link JAXBElement }{@code <}{@link Book }{@code >}}
     * 
     */
    @XmlElementDecl(namespace = "", name = "book")
    public JAXBElement<Book> createBook(Book value) {
        return new JAXBElement<Book>(_Book_QNAME, Book.class, null, value);
    }

}

/ 7	. 

/ lees,
https://docs.oracle.com/javase/tutorial/jaxb/intro/examples.html
http://javapapers.com/jee/jaxb-tutorial/

/ we install van mo
https://github.com/javaee/jaxb-v2
C:\Users\ervelden\java\jaxb-v2\
/ en import in eclipse, 
/ in jaxb-ri\ is pom.xml, en run $ mvn clean install
/ er verschijnt	,
C:\Users\ervelden\java\jaxb-v2\jaxb-ri\bundles\ri\target\stage\jaxb-ri\samples\
/ met daarin bijvoorbeeld modify-marshal,

/ we hebben ook nog (voor op command line; in eclipse is al ant), installed in \Users\ervelden\bin ant,

/ als je in eclipse right click op build.xml... in modify-marshal, dan wordt er een run config gemaakt, maar deze is later te vinden onder run, exterior tools,
/ hier kunnen we of, ...
(ant) clean
(ant) clean compile
(ant) clean run 

/ als we (ant) clean compile , of clean run, worden de Java classes gen, maar zien we een vreemde foutmelding, 
compile:
     [echo] Compiling the schema...
      [xjc] C:\Users\ervelden\java\jaxb-v2\jaxb-ri\bundles\ri\target\stage\jaxb-ri\samples\modify-marshal\gen-src\primer.po is not found and thus excluded from the dependency check
      [xjc] Compiling file:/C:/Users/ervelden/java/jaxb-v2/jaxb-ri/bundles/ri/target/stage/jaxb-ri/samples/modify-marshal/po.xsd
      [xjc] Writing output to C:\Users\ervelden\java\jaxb-v2\jaxb-ri\bundles\ri\target\stage\jaxb-ri\samples\modify-marshal\gen-src
      [xjc] Command invoked: xjc"C:\Program Files\Java\jdk1.8.0_144\jre\bin\java.exe"
      [xjc] failure in the XJC task. Use the Ant -verbose switch for more details

/ workaround: doe dus eerst: clean compile, edit build.xml en comment out <xjc ...>,
$ vi build.xml
 <!--
    <xjc schema="po.xsd" package="primer.po" destdir="gen-src">
      <produces dir="gen-src/primer.po" includes="**/*.java" />
    </xjc> -->
	
/ ga naar de modify-marshal build.xml run config (via exterior tools), en maak (ant) run
/ dan zien we 	,
Buildfile: C:\Users\ervelden\java\jaxb-v2\jaxb-ri\bundles\ri\target\stage\jaxb-ri\samples\modify-marshal\build.xml
compile:
     [echo] Compiling the schema...
     [echo] Compiling the java source files...
    [mkdir] Created dir: C:\Users\ervelden\java\jaxb-v2\jaxb-ri\bundles\ri\target\stage\jaxb-ri\samples\modify-marshal\classes
    [javac] C:\Users\ervelden\java\jaxb-v2\jaxb-ri\bundles\ri\target\stage\jaxb-ri\samples\modify-marshal\build.xml:70: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
    [javac] Compiling 5 source files to C:\Users\ervelden\java\jaxb-v2\jaxb-ri\bundles\ri\target\stage\jaxb-ri\samples\modify-marshal\classes
run:
     [echo] Running the sample application...
     [java] <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
     [java] <purchaseOrder orderDate="1999-10-20">
     [java]     <shipTo country="US">
     [java]         <name>Alice Smith</name>
     [java]         <street>123 Maple Street</street>
     [java]         <city>Cambridge</city>
     [java]         <state>MA</state>
     [java]         <zip>12345</zip>
     [java]     </shipTo>
     [java]     <billTo country="US">
     [java]         <name>John Bob</name>
     [java]         <street>242 Main Street</street>
     [java]         <city>Beverly Hills</city>
     [java]         <state>CA</state>
     [java]         <zip>90210</zip>
     [java]     </billTo>
     [java]     <items>
     [java]         <item partNum="242-NO">
     [java]             <productName>Nosferatu - Special Edition (1929)</productName>
     [java]             <quantity>5</quantity>
     [java]             <USPrice>19.99</USPrice>
     [java]         </item>
     [java]         <item partNum="242-MU">
     [java]             <productName>The Mummy (1959)</productName>
     [java]             <quantity>3</quantity>
     [java]             <USPrice>19.98</USPrice>
     [java]         </item>
     [java]         <item partNum="242-GZ">
     [java]             <productName>Godzilla and Mothra: Battle for Earth/Godzilla vs. King Ghidora</productName>
     [java]             <quantity>3</quantity>
     [java]             <USPrice>27.95</USPrice>
     [java]         </item>
     [java]     </items>
     [java] </purchaseOrder>
BUILD SUCCESSFUL
Total time: 1 second

/ 7	 .

/ google: xmlaccessortype xmltype
/ lees, 
https://stackoverflow.com/questions/11520724/xmlrootelement-versus-xmltype
http://blog.bdoughan.com/2012/02/jaxbs-xmltype-and-proporder.html
https://docs.oracle.com/javase/7/docs/api/javax/xml/bind/annotation/XmlType.html


/ jaxb en java8	,
https://stackoverflow.com/questions/28536666/jaxb-fails-to-parse-xml-after-moving-to-java-8

com.sun.tools.xjc.XJCTask is in jaxb-xjc.jar,

/ 7	. 

/ set in eclipse's external config , abcmodify-marshal build.xml-clean
set an Input Handler 	UNCHECK
/ anders doet hij het niet,

/ 7	 

/ Lees, misschien, waarom ant task xjc ERR,
https://github.com/stianh/gradle-jaxb-plugin/issues/20

/ 7	. 

/ lees, 
http://www.baeldung.com/introduction-to-apache-cxf

/ 7	. 

/ Lees,

http://www.baeldung.com/jaxb
/ ->
http://docs.oracle.com/javaee/7/api/javax/xml/bind/annotation/package-summary.html

C:\Users\ervelden\java>git clone https://github.com/eugenp/tutorials.git  baeldung-tutorials

/ 7	. 

/ met schema
C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen-jaxb\abcmodify-marshal>schemagen -d \temp\xsd-gen -cp classes gen-src\primer\po\PurchaseOrderType.java
warning: Supported source version 'RELEASE_7' from annotation processor 'com.sun.tools.internal.jxc.ap.SchemaGenerator' less than -source '1.8'
Note: Writing C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen-jaxb\abcmodify-marshal\schema1.xsd

/ 7	. 

/ In jaxb-v2\jaxb-ri\bundles\ri\target\stage\jaxb-ri is bin\ en samples\ en lib\	, 
/ lib\ heeft de jar's , zoals jaxb-xjc.jar, 
/ bin\ heeft xjc.bat, 

$ vi xjc.bat
%JAVA% %XJC_OPTS% -jar "%JAXB_HOME%\lib\jaxb-xjc.jar" %*


/ dus we moeten dit doen: 
C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen-jaxb\abcmodify-marshal>java -jar WebContent\WEB-INF\lib\jaxb-xjc.jar -d \temp\gen-src -p primer.po po.xsd
parsing a schema...
compiling a schema...
primer\po\Items.java
primer\po\ObjectFactory.java
primer\po\PurchaseOrderType.java
primer\po\USAddress.java

/ Vandaar dat 
$ java -cp jaxb-xjc.jar com.sun.tools.xjc.XJCTask: Not found
/ TODO

/ we maken in abcmodify-marshal een tmp\ en doen daar,
> jar xvf ..\WebContent\WEB-INF\lib\jaxb-xjc.jar
>type META-INF\MANIFEST.MF
...
Require-Capability: osgi.ee;filter:="(&(osgi.ee=JavaSE)(version=1.7))"
Tool: Bnd-3.3.0.201609221906
Main-Class: com.sun.tools.xjc.XJCFacade

/ lees,
https://javaee.github.io/jaxb-v2/doc/user-guide/ch04.html

/ 7	. 

/ OPLOSSING ANT XJC

/ Lees,
https://ant.apache.org/manual/Tasks/java.html
-> (via Command line arguments)	,
https://ant.apache.org/manual/using.html#arg



/ 13	. 

/ Maar we kunnen ook, 

C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen-jaxb\abcmodify-marshal>java -cp WebContent\WEB-INF\lib\jaxb-xjc.jar com.sun.tools.xjc.XJCFacade -d \temp\gen-src -p primer.po po.xsd
parsing a schema...
compiling a schema...
primer\po\Items.java
primer\po\ObjectFactory.java
primer\po\PurchaseOrderType.java
primer\po\USAddress.java

/ Herinner: com.sun.tools.xjc.XJCTask vond hij niet; com.sun.tools.xjc.XJCFacade is de main method uit de executable jar,

/ we probeerden	,

$ vi build.xml

  <taskdef name="xjc" classname="com.sun.tools.xjc.XJCFacade">
    <classpath refid="classpath" />
  </taskdef>
  
/ Maar we zien ERR: XJCFacade heeft geen execute method,
/ XJCTask heeft die wel, via ProtectedTask	,
/ lees,
https://ant.apache.org/manual/develop.html


$ vi build.xml

 <taskdef name="xjc" classname="com.sun.tools.xjc.XJCTask">
    <classpath refid="classpath" />
  </taskdef>

 <!--
    <xjc schema="po.xsd" package="primer.po" destdir="gen-src">
      <produces dir="gen-src/primer.po" includes="**/*.java" />
    </xjc> 
  -->
  	
  	<java jar="WebContent/WEB-INF/lib/jaxb-xjc.jar" fork="true"> 
  	  		<arg line="-d gen-src"/>						<!-- GEEN <classpath refid="classpath" /> nodig, -->
  	  		<arg line="-p primer.po"/>
  	  		<arg value="po.xsd"/>
  	 </java>
	 
/ of, 

  	<java classname="com.sun.tools.xjc.XJCFacade" fork="true">
  		<classpath refid="classpath"/>
  		<arg line="-d gen-src"/>
  		<arg line="-p primer.po"/>
  		 <arg value="po.xsd"/>
  	</java>
	
	
/ TODO
/ execute method voor ant task, 
/ lees,
https://ant.apache.org/manual/tutorial-writing-tasks.html
http://grepcode.com/file/repo1.maven.org/maven2/com.sun.xml.bind/jaxb-xjc/2.2/com/sun/istack/tools/ProtectedTask.java


/ of workaround, 
/ comment out alle task hierboven, dus de <xjc/> en de 2 <java/> tasks, 
/ eclipse external runconfig ant clean,
/ op de commmand line,
C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen-jaxb\abcmodify-marshal> mkdir gen-src
C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen-jaxb\abcmodify-marshal>xjc -d gen-src -p primer.po po.xsd
parsing a schema...
compiling a schema...
primer\po\Items.java
primer\po\ObjectFactory.java
primer\po\PurchaseOrderType.java
primer\po\USAddress.java
/ eclipse external run config ant run



/ Einde OPLOSSING ANT XJC 

/ 7	.
	 
/ Maar schemagen.bat gaat anders,

C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen-jaxb\abcmodify-marshal>java -cp C:\Users\ervelden\java\jaxb-v2\jaxb-ri\bundles\ri\target\stage\jaxb-ri\lib\jaxb-core.jar:C:\Users\ervelden\java\jaxb-v2\jaxb-ri\bundles\ri\target\stage\jaxb-ri\lib\jaxb-xjc.jar;C:\Users\ervelden\java\jaxb-v2\jaxb-ri\bundles\ri\target\stage\jaxb-ri\lib\jaxb-jxc.jar;C:\Users\ervelden\java\jaxb-v2\jaxb-ri\bundles\ri\target\stage\jaxb-ri\lib\jaxb-impl.jar com.sun.tools.jxc.SchemaGeneratorFacade -d \temp\xsd-gen -cp classes gen-src\primer\po\PurchaseOrderType.java

/ of vanuit andere dir,
C:\Users\ervelden\java\jaxb-v2\jaxb-ri\bundles\ri\target\stage\jaxb-ri>java -cp lib\jaxb-core.jar:lib\jaxb-xjc.jar;lib\jaxb-jxc.
jar;lib\jaxb-impl.jar com.sun.tools.jxc.SchemaGeneratorFacade -d \temp\xsd-gen -cp C:\Users\ervelden\eclipse\workspace-jbosstool
s-jee-oxygen-jaxb\abcmodify-marshal\classes C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen-jaxb\abcmodify-marshal\gen
-src\primer\po\PurchaseOrderType.java C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen-jaxb\abcmodify-marshal\gen-src\p
rimer\po\Items.java

/ OPLOSSING ANT SCHEMAGEN

/ 7	. 

/ In j2s-create-marshal,

/ eclipse external run config ant clean
/ op de command line,
C:\Users\ervelden\java\jaxb-v2\jaxb-ri\bundles\ri\target\stage\jaxb-ri\samples\j2s-create-marshal>mkdir schemas
C:\Users\ervelden\java\jaxb-v2\jaxb-ri\bundles\ri\target\stage\jaxb-ri\samples\j2s-create-marshal>schemagen -d schemas src\cardfile\*.java
warning: Supported source version 'RELEASE_7' from annotation processor 'com.sun.tools.internal.jxc.ap.SchemaGenerator' less tha
n -source '1.8'
/ eclipse external run config ant run
/ we zien 
classes
	cardfile
		Address.class
		BusinessClass.class
		package-info.class
	Main.class

/ Doordat we alle .java files opgeven als arg, hoeven we geen -cp te geven, 

C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen-jaxb\abcmodify-marshal>schemagen -d gen-xsd -cp classes gen-src\primer\po\PurchaseOrderType.java
/ we krijgen schema1.xsd (met alle types), en alleen PurchaseOrderType.class, 

/ 13	. 

/ Door @XmlRootElement class BusinessCard geeft schemagen een root element in schema1.xsd,

$ vi schema1.xsd

<xs:schema version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:element name="businessCard" type="businessCard"/>





/ Einde OPLOSSING ANT SCHEMAGEN

/ 7	. 

/ FINAL COMMANDS XJC SCHEMAGEN

/ we zijn in abcmodify-marshal,
$ ant clean
$ mkdir gen-src
$ xjc -d gen-src -p primer.po po.xsd		/ in gen-src\ verschijnen de .java files
$ ant run									/ compiles de .java files in gen-src, in classes\ en execs Main,
$ mkdir gen-xsd
$ schemagen -d gen-xsd gen-src\primer\po\*.java	/ creates schema1.xsd in gen-xsd en class files in gen-xsd, 


$ schemagen -d \temp\xsd-gen -cp classes gen-src\primer\po\PurchaseOrderType.java
/ OK, schema1.xsd heeft alle types, maar er is maar 1 class file, als we 1 .java file geven , moeten we -cp vanwege de anderen,

/ dus, 

$ xjc -d gen-src -p primer.po po.xsd
$ schemagen -d schemas src/Main.java src/card/*.java

/ Einde FINAL COMMANDS XJC SCHEMAGEN

/ 7	. 

/ STUDY XSD

/ we studie po.xsd

/ 13	. 

$ vi po2.xsd
/ zonder 
	<xsd:element name="comment" type="xsd:string"/>
	     <xsd:element ref="comment" minOccurs="0"/>
/ maar direct, 
     <xsd:element ref="comment" minOccurs="0"/>
	 
$ vi build.xml

	<path id="jaxb-classes">
		<fileset dir="${jaxb.home}" includes="lib/*.jar" />
	</path>
	<path id="classpath2">
		<pathelement path="classes2"/>
		<path refid="jaxb-classes"/>
	</path>
		
	<target name="compile2" description="Compile all Java source files">
		<echo message="Compiling the java source files..." />
		    <mkdir dir="classes2" />
		    <javac destdir="classes2" debug="on">
		      <src path="src" />
		      <src path="gen-src2" />
		      <classpath refid="jaxb-classes" />
		    </javac>
	</target>
	<target name="run2" depends="compile2" description="Run the sample app">
	    <echo message="Running the sample application..." />
	    <java classname="Main" fork="true">
	      <classpath refid="classpath2" />
	    </java>
	</target>

> mkdir gen-src2
> mkdir gen-xsd2
>xjc -d gen-src2 -p primer.po po2.xsd
>ant compile2
>ant run2
>schemagen -d gen-xsd2 -cp classes2 gen-src2\primer\po\*.java

/ de schema1.xsd in gen-xsd2 heeft GEEN 
	<xsd:element name="comment" type="xsd:string"/>
/ TODO

/ 13	. 

/ zonder 
$ vi po2.xsd
  <xsd:element name="purchaseOrder" type="PurchaseOrderType"/>

 >xjc -d gen-src2 -p primer.po po2.xsd
 > ant compile2
 / OK
>ant run2
run2:
     [echo] Running the sample application...
     [java] javax.xml.bind.UnmarshalException: unexpected element (uri:"", local:"purchaseOrder"). Expected elements are (none)
     [java]     at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:741)
     [java]     at com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:262)
     [java]     at com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:257)
     [java]     at com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportUnexpectedChildElement(Loader.java:124)
 
/ want 
$ vi Main.java
            JAXBElement poe = 
                (JAXBElement)u.unmarshal( new FileInputStream( "po.xml" ) );
            PurchaseOrderType po = (PurchaseOrderType)poe.getValue();
			
$ vi po.xml
<purchaseOrder orderDate="1999-10-20">
  ...
</purchaseOrder>

/ Deze moet voorkomen in xsd als <element ...>

/ Einde STUDY XSD

	
	 



/ 7	. 

/ project j2s-create-marshal

C:\Users\ervelden\java\jaxb-v2\jaxb-ri\bundles\ri\target\stage\jaxb-ri\samples\j2s-create-marshal>mkdir schemas
C:\Users\ervelden\java\jaxb-v2\jaxb-ri\bundles\ri\target\stage\jaxb-ri\samples\j2s-create-marshal>schemagen -d schemas src\cardfile\*.java
/ we zien in schemas\ schema1.xsd, 
/ in schemas\ zien we ook card\ met alle class files, schemas\ zit in het classpath, maar classes\ ook en de compile task zet alle classes en de Main.class daar in, schema1.xsd wordt ook used door Main, 
/ we kunnen alle classes rm uit schemas\ als we dat willen 	,
$ ant run
/ OK, want schemas\ is in het classpath,
/ TODO Of hij pakt classes\, 

$ vi build.xml
...
<target name="compile" description="Compile all Java source files">
  	<!--
    <echo message="Generating schemas..." />
    <mkdir dir="schemas" />
  	
    <schemagen destdir="schemas">
      <src path="src" />
      <classpath refid="classpath" />
    </schemagen>
    -->
    <echo message="Compiling the java source files..." />
    <mkdir dir="classes" />
    <javac destdir="classes" debug="on">
      <src path="src" />
      <classpath refid="classpath" />
    </javac>
  </target>

/ 13	. 

@XmlType
public class Address {
/ @XmlType hoeft NIET,
/ TODO 

@XmlRootElement
public class BusinessCard {
/ @XmlRootElement MOET, 

$ vi card.xml

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<businessCard>
	<name>John Doe</name>
	<title>Sr. Widget Designer</title>
	<company>Acme, Inc.</company>
	<address>
		<street>123 Widget Way</street>
		<city>Anytown</city>
		<state>MA</state>
		<zip>12345</zip>
	</address>
	<phone>123.456.7890</phone>
	<fax>123.456.7891</fax>
	<email>John.Doe@Acme.ORG</email>
</businessCard>

/ 7	. 

/we willen XmlJavaTypeAdapter begrijpen, 

/ project j2s-xmlAdapter


C:\Users\ervelden\java\jaxb-v2\jaxb-ri\bundles\ri\target\stage\jaxb-ri\samples\j2s-xmlAdapter>mkdir schemas
C:\Users\ervelden\java\jaxb-v2\jaxb-ri\bundles\ri\target\stage\jaxb-ri\samples\j2s-xmlAdapter>schemagen -d schemas src\shoppingCart\*.java
Note: Writing C:\Users\ervelden\java\jaxb-v2\jaxb-ri\bundles\ri\target\stage\jaxb-ri\samples\j2s-xmlAdapter\schema1.xsd
/ OK, maar nu ook AdapterPurchaseListToHashMap in schema1.xsd	,


/ probeer, 
C:\Users\ervelden\java\jaxb-v2\jaxb-ri\bundles\ri\target\stage\jaxb-ri\samples\j2s-xmlAdapter>schemagen -d schemas src\shoppingCart\KitchenWorldBasket.java src\shoppingCart\PartEntry.java src\shoppingCart\PurchaseList.java
null

/ we moeten -cp src 	,
C:\Users\ervelden\java\jaxb-v2\jaxb-ri\bundles\ri\target\stage\jaxb-ri\samples\j2s-xmlAdapter>schemagen -d schemas -cp src src\shoppingCart\KitchenWorldBasket.java src\shoppingCart\PartEntry.java src\shoppingCart\PurchaseList.java
Note: Writing C:\Users\ervelden\java\jaxb-v2\jaxb-ri\bundles\ri\target\stage\jaxb-ri\samples\j2s-xmlAdapter\schema1.xsd
/ OK

$ vi schema1.xsd

<xs:schema version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:element name="kitchenWorldBasket" type="KitchenWorldBasketType"/>
  <xs:element name="purchaseList" type="PurchaseListType"/>

/ 13	 .

/ @XmlValue

Enables mapping a class to a XML Schema complex type with a simpleContent or a XML Schema simple type.

/ 1313	. 

$ vi PartEntry.java
public class PartEntry {
  @XmlValue 
  public String value;
  @XmlAttribute 
  public int key;
  
 $ ant clean 
 $ mkdir schemas
 $ schemagen -d schemas -cp src src\shoppingCart\KitchenWorldBasket.java src\shoppingCart\PartEntry.java src\shoppingCart\PurchaseList.java

 $ vi schema1.xsd
 
  <xs:complexType name="partEntry">
    <xs:simpleContent>
      <xs:extension base="xs:string">
        <xs:attribute name="key" type="xs:int" use="required"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  
/ 1313	. 

$ vi PartEntry.java
public class PartEntry {
//  @XmlValue 
  public String value;
  @XmlAttribute 
  public int key;
  
 $ ant clean 
 $ mkdir schemas
 $ schemagen -d schemas -cp src src\shoppingCart\KitchenWorldBasket.java src\shoppingCart\PartEntry.java src\shoppingCart\PurchaseList.java
 
 $ vi schema1.xsd
 
  <xs:complexType name="partEntry">
    <xs:sequence>
      <xs:element name="value" type="xs:string" minOccurs="0"/>
    </xs:sequence>
    <xs:attribute name="key" type="xs:int" use="required"/>
  </xs:complexType>
  
  
/ 7	. 

/ @XmlJavaTypeAdapter

/ project abcmodify-marshal

/ we maken in src\ een package me, met daarin 	,
Foo.java
MyEntry.java
MyHashMap.java
MyHashMapAdapter.java

$ vi MyEntry.java

public class MyEntry {
	@XmlAttribute
	public int key;
	@XmlValue
	public String value;
	
	public MyEntry() {
	}
	public MyEntry(int key,String value) {
		this.key=key;
		this.value=value;
	}
	@Override
	public String toString() {
		return "key="+key+", value="+value;
	}
}

$ vi MyHashMap.java

public class MyHashMap {
	public List<MyEntry>myEntries;
	
	public MyHashMap() {
		myEntries=new ArrayList<>();
	}
	@Override
	public String toString() {
		StringBuilder builder=new StringBuilder();
		for(int i=0;i<myEntries.size();i++) {
			builder.append(myEntries.get(i));
		}
		return builder.toString();
	}
}

$ vi MyHashMapAdapter.java

public class MyHashMapAdapter extends XmlAdapter<MyHashMap, HashMap<Integer, String>> {

	@Override
	public HashMap<Integer, String> unmarshal(MyHashMap v) throws Exception {
		HashMap<Integer, String>hashMap=new HashMap<>();
		
		List<MyEntry>myEntries=v.myEntries;
		for(int i=0;i<myEntries.size();i++) {
			MyEntry entryType=myEntries.get(i);
			hashMap.put(entryType.key, entryType.value);	
		}
		return hashMap;
	}

	@Override
	public MyHashMap marshal(HashMap<Integer, String> v) throws Exception {
		MyHashMap hashMapType=new MyHashMap();
		
		for(int i:v.keySet()) {
			MyEntry entryType=new MyEntry(i, v.get(i));
			hashMapType.myEntries.add(entryType);
		}
		return hashMapType;
	}

}

$ vi Foo.java

@XmlRootElement
public class Foo {
	@XmlJavaTypeAdapter(MyHashMapAdapter.class)
	public HashMap<Integer, String>hashMap;
	
	@Override
	public String toString() {
		StringBuilder builder=new StringBuilder();
		for(int i:hashMap.keySet()) {
			builder.append( "key: "+i+", value: "+hashMap.get(i));
		}
		return builder.toString();
	}
}

C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen-jaxb\abcmodify-marshal>ant clean
C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen-jaxb\abcmodify-marshal>mkdir schemas
C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen-jaxb\abcmodify-marshal>schemagen -d schemas src\me\MyEntry.java src\me\MyHashMap.java

$ vi schema1.xsd

<xs:schema version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:complexType name="myEntry">
    <xs:simpleContent>
      <xs:extension base="xs:string">
        <xs:attribute name="key" type="xs:int" use="required"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>

  <xs:complexType name="myHashMap">
    <xs:sequence>
      <xs:element name="myEntries" type="myEntry" nillable="true" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
</xs:schema>

/ TODO
/ Maak data file foo.xml
/ Maak Main die een Foo unmarshals	, en dan hem weer marshal,


/ lees, over loop over HashMap,
https://stackoverflow.com/questions/1066589/iterate-through-a-hashmap

/ we hebben wireshark installed \Program Files\Wireshark


/ kijk wireshark,
https://www.youtube.com/embed/U0QABcTD-xc


/ HIER HIER HIER 

/ 7	. 

/ project abcmodify-marshal,

/ 13	. 

$ vi po.xsd
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:element name="purchaseOrder" type="PurchaseOrderType"/>
  <xsd:element name="comment" type="xsd:string"/>
  ...
/ purchaseOrder is een root element, 
/ hij hoeft niet perse bovenaan te staan; onderaan mag ook,
/ comment zou ook root element kunnen zijn WH TODO 


$ vi po.xml
<purchaseOrder orderDate="1999-10-20">
  <shipTo country="US">
  ...
</purchaseOrder>

/ lees,
https://stackoverflow.com/questions/8854144/xml-schema-root-element

/ Andersom, see j2s-create-marshal	, create we in xmlschema een root element met @XmlRootElement	,

/ 13	. 

/ we zien ,
$ vi po.xsd
  <xsd:complexType name="USAddress">
    <xsd:attribute name="country" type="xsd:NMTOKEN" fixed="US"/>
/ dit vertaalt zich zo: 

$ vi USAddress.java

public class USAddress {
	...
    public String getCountry() {
        if (country == null) {
            return "US";
        } else {
            return country;
        }
    }

/ 	7.

/ lees over @XmlElement of @XmlAttribute	,
https://stackoverflow.com/questions/33746/xml-attribute-vs-xml-element

/ lees over @XmlElement
https://stackoverflow.com/questions/19266391/xmlelement-and-useless-required-parameter
/ als er geen minOccurs attr is 	, is hij dan required=true	?
/ TODO
/ TODO Maak project hiervoor,

/ 7	 

/ we waren open in,
C:\Users\ervelden\java\jaxb-v2\jaxb-ri\bundles\ri\target\stage\jaxb-ri\samples\j2s-create-marshal>
C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen-jaxb\abcmodify-marshal>

/ 7	. 

/ abcmodify-marshal, Main,

/ je hebt xjc, schemagen: Java class <-> xml schema,
/ marshal, unmarshal : Java object <-> xml,

/ 7	 .

/ lees,
https://www.w3schools.com/xml/schema_complex_indicators.asp

For all "Order" and "Group" indicators (any, all, choice, sequence, group name, and group reference) the default value for maxOccurs and minOccurs is 1.

/ we zien dat @XmlElement(required=true) -> geen minOccurs , want de default =1	, 
/ we zien dat @XmlElement of niets -> minOccurs="0"
/ we zien dat @XmlAttribute(required=true) -> use="required"	, bij <xs:attribute use=.../>, bij <xs:element minOccurs=.../>

public static class Item {
	@XmlElement(name = "USPrice", required = true)
	protected BigDecimal usPrice;

	protected String comment;

	@XmlAttribute(name = "partNum", required = true)
	protected String partNum;

-> (schemagen)

<xs:element name="item" maxOccurs="unbounded">
	<xs:complexType>
	  <xs:sequence>
		<xs:element name="USPrice" type="xs:decimal"/>
		<xs:element name="comment" type="xs:string" minOccurs="0"/>
		<xs:attribute name="partNum" type="xs:string" use="required"/>

/ 7	. 

/ in gen-src,
   public static class Item {
        @XmlElement(name = "USPrice", required = true)
        protected BigDecimal usPrice;

/ dan moet in po.xml

 <items>
    <item partNum="242-NO">
      <USPrice>19.99</USPrice>
    </item>

/ de namen moeten kloppen	, dan pakt Main hem bij unmarshal niet op: we zien in de marshal die erop volgt geen USPrice entry,

/ 7	. 

/ we zien geen effect van required=true, 
/ TODO 

/ 7	. 

      @XmlAccessorType(XmlAccessType.PROPERTY)   
    @XmlType(name = "", propOrder = {
        
        "quantity",
        
        "usPrice",
        "productName",
        "comment",
        "shipDate"
        
    })
    public static class Item {
	
/ als we met schemagen een xsd maken, of als we in Main marshal, dan zien we deze volgorde, 

/ 7	. 

/ De default is XmlAccessType.PUBLIC_MEMBER	,

/ we veranderen @XmlAccessorType(XmlAccessType.FIELD) in @XmlAccessorType(XmlAccessType.PROPERTY),
/ we moeten de @XmlElement en @XmlAttribute en @XmlSchemaType op een getter of setter zetten, kan allebei,
/ xjc gen getUSPrice	, maar dit moet getUsPrice zijn, we zien dit pas als je de @Xml... op de getter of setter set ipv op de field, 



$ vi Items.java

...

    @XmlAccessorType(XmlAccessType.PROPERTY)
    @XmlType(name = "", propOrder = {
        
        "quantity",
        
        "usPrice",
        "productName",
        "comment",
        "shipDate"
        
    })
    public static class Item {

        
        protected String productName;
        protected int quantity;
        
        protected BigDecimal usPrice;
        protected String comment;
        
        protected XMLGregorianCalendar shipDate;
        
        protected String partNum;

        /**
         * Gets the value of the productName property.
         * 
         * @return
         *     possible object is
         *     {@link String }
         *     
         */
        @XmlElement(required = true)
        public String getProductName() {
            return productName;
        }

        /**
         * Sets the value of the productName property.
         * 
         * @param value
         *     allowed object is
         *     {@link String }
         *     
         */
        public void setProductName(String value) {
            this.productName = value;
        }

        /**
         * Gets the value of the quantity property.
         * 
         */
        public int getQuantity() {
            return quantity;
        }

        /**
         * Sets the value of the quantity property.
         * 
         */
        public void setQuantity(int value) {
            this.quantity = value;
        }

        /**
         * Gets the value of the usPrice property.
         * 
         * @return
         *     possible object is
         *     {@link BigDecimal }
         *     
         */
        
        public BigDecimal getUsPrice() {
            return usPrice;
        }

        /**
         * Sets the value of the usPrice property.
         * 
         * @param value
         *     allowed object is
         *     {@link BigDecimal }
         *     
         */
        @XmlElement(name = "USPrice", required = true)
        public void setUsPrice(BigDecimal value) {
            this.usPrice = value;
        }

        /**
         * Gets the value of the comment property.
         * 
         * @return
         *     possible object is
         *     {@link String }
         *     
         */
        public String getComment() {
            return comment;
        }

        /**
         * Sets the value of the comment property.
         * 
         * @param value
         *     allowed object is
         *     {@link String }
         *     
         */
        public void setComment(String value) {
            this.comment = value;
        }

        /**
         * Gets the value of the shipDate property.
         * 
         * @return
         *     possible object is
         *     {@link XMLGregorianCalendar }
         *     
         */
        @XmlSchemaType(name = "date")
        public XMLGregorianCalendar getShipDate() {
            return shipDate;
        }

        /**
         * Sets the value of the shipDate property.
         * 
         * @param value
         *     allowed object is
         *     {@link XMLGregorianCalendar }
         *     
         */
        public void setShipDate(XMLGregorianCalendar value) {
            this.shipDate = value;
        }

        /**
         * Gets the value of the partNum property.
         * 
         * @return
         *     possible object is
         *     {@link String }
         *     
         */
        @XmlAttribute(name = "partNum", required = true)
        public String getPartNum() {
            return partNum;
        }

        /**
         * Sets the value of the partNum property.
         * 
         * @param value
         *     allowed object is
         *     {@link String }
         *     
         */
        public void setPartNum(String value) {
            this.partNum = value;
        }

    }

}



/ Einde JAXB






/ TOMCAT LOGGING

/ workspace-java-oxygen-jaxb
/ proj abcmodify-marshal	, = self modify-marshal


/ 13	. 

/ In abcmodify-marshal2	, let op in external run config, dat je abcmodify-marshal2 als project neemt, click erop , dan verschijnt rechts build.xml, check deze, 
/ we maken run config 'clean compile'	, 
/ we zien die fout weer, maar we zien gen-src, 
/////////////////////////////////////////////////////////////
/ set deze in Build path, sources, dan kent Main PurchageOrderType, ... en verschijnt PurchaseOrderType.class in build/classes, naast Main.class, die er al was,

/ in build path, source: Default output folder: abcmodify-marshal2/build/classes

/ we hebben dus een Dynamic Web project, create , met lib/ in root, en zo ook in build.xml, 
/ maar dat zien we ze niet in de WAR, 
/ TODO

/ 13	. 

/ we zien in search.maven.org
com.sun.xml.bind:jaxb-xjc:2.3.0	,


/ 13	. 

/ In abcmodify-marshal hebben de de lib/ in WEB_INF	, anders komen de jaxb jars niet in de WAR, 

$ vi build.xml
 <property name="jaxb.home" value="WebContent/WEB-INF" />
 
/ 13	 

/ In de build.xml van abcmodify-marshal, kun je daar build/classes ipv classes? 
/ TODO

/ 13	 .

/ we hebben een tomcat server config create, 
/ we hadden de server running, en hebben veranderd in de config: Publish module contexts to separate  config files
/ we kunnen de abcmodify-marshal remove en add, maar dat is WH niet eens nodig: pas als je de tomcat hebt restart, zie je de config file in conf/Catalina/localhost/ 

C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen-jaxb>type .metadata\.plugins\org.eclipse.wst.server.core\tmp0\conf\Cat
alina\localhost\abcmodify-marshal.xml
<?xml version="1.0" encoding="UTF-8"?>
<Context docBase="C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen-jaxb\.metadata\.plugins\org.eclipse.wst.server.core\
tmp0\wtpwebapps\abcmodify-marshal" path="/abcmodify-marshal" reloadable="true" source="org.eclipse.jst.jee.server:abcmodify-mars
hal"/>

/ we zien 
$ vi conf\server.xml
...      <Context docBase="C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen-jaxb\.metadata\.plugins\org.eclipse.wst.server
.core\tmp0\wtpwebapps\ROOT" path="" reloadable="false"/></Host>
    </Engine>
  </Service>
</Server>

/ 13	 .

//////////////////////////
/ index.html moet in WebContent, NIET in WebContent/WEB-INF	,

/ er hoeft GEEN web.xml  te geven, 

/ in abctmp2 is geen web.xml , maar index.html en index.htm en index.jsp worden automatisch opgepakt, index.ht niet: not found,

/ we rm web.xml,

/ 13	. 

/ Waar moet log4j.properties	?

/ google
dynamic web project where log4j.properties
/ lees,
https://stackoverflow.com/questions/5081316/where-is-the-correct-location-to-put-log4j-properties-in-an-eclipse-project


/ STRAKS,
/ log4j print classpath 	,
/ lees,
https://stackoverflow.com/questions/24146028/how-to-set-a-tomcat-webapp-classpath
->
http://tomcat.apache.org/tomcat-8.0-doc/class-loader-howto.html  
/ hier staat het hoe het classpath wordt create, WEB-INF/classes en WEB-INF/lib zitten daar ook bij,

/ we hebben, 
import org.apache.log4j.Logger;
/ maar er is ook
java.util.logging.Logger	,
/ TODO

/ 7	. 

/ JSP

/ we hebben van abcmodify-marshal een kleine webapp gemaakt,	

/ lees,
https://stackoverflow.com/questions/5736842/what-does-the-dollar-curly-brackets-mean-in-jsp
->
http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPIntro7.html 

/ set javax.servlet-api.3.1.0.jar in WEB-INF/lib,		/ javax.servlet:javax.servlet-api:3.1.0

$ vi index.jsp
<!doctype html> 
<jsp:useBean id="a" class="my.A" scope="request"></jsp:useBean>
<html>
<body>
${a.name}
</body>
</html>

/ 7	. 

/ Lees,
http://tomcat.apache.org/tomcat-8.5-doc/logging.html

The internal logging for Apache Tomcat uses JULI, a packaged renamed fork of Apache Commons Logging that is hard-coded to use the java.util.logging framework. This ensures that Tomcat's internal logging and any web application logging will remain independent, even if a web application uses Apache Commons Logging.

Apache Tomcat has its own implementation of several key elements of java.util.logging API. This implementation is called JULI. The key component there is a custom LogManager implementation, that is aware of different web applications running on Tomcat (and their different class loaders). It supports private per-application logging configurations. It is also notified by Tomcat when a web application is unloaded from memory, so that the references to its classes can be cleared, preventing memory leaks.

This java.util.logging implementation is enabled by providing certain system properties when starting Java. The Apache Tomcat startup scripts do this for you, but if you are using different tools to run Tomcat (such as jsvc, or running Tomcat from within an IDE), you should take care of them by yourself.

The default implementation of java.util.logging provided in the JDK is too limited to be useful. The key limitation is the inability to have per-web application logging, as the configuration is per-VM. As a result, Tomcat will, in the default configuration, replace the default LogManager implementation with a container friendly implementation called JULI, which addresses these shortcomings.


JULI is enabled by default, and supports per classloader configuration, in addition to the regular global java.util.logging configuration. This means that logging can be configured at the following layers:

Globally. That is usually done in the ${catalina.base}/conf/logging.properties file. The file is specified by the java.util.logging.config.file System property which is set by the startup scripts. If it is not readable or is not configured, the default is to use the ${java.home}/lib/logging.properties file in the JRE.
In the web application. The file will be WEB-INF/classes/logging.properties

/ 7	. 

/ 13	. 


/ verschil Apache Commons Logging (JCL) en slf4j,
SLF4J is conceptually very similar to JCL. As such, it can be thought of as yet another logging facade. However, SLF4J is much simpler in design and arguably more robust. In a nutshell, SLF4J avoid the class loader issues that plague JCL.

/ 13	. 

C:\Users\ervelden\eclipse\jbosstools-jee-oxygen\eclipse>dir /s  "\Program Files\Java\jdk1.8.0_144\*logging*"
 Directory of C:\Program Files\Java\jdk1.8.0_144\jre\lib
03-10-2017  17:38             2.455 logging.properties

C:\Users\ervelden\eclipse\jbosstools-jee-oxygen\eclipse>dir /s "\Program Files\Apache Software Foundation\Tomcat 8.5\*logging*"
 Directory of C:\Program Files\Apache Software Foundation\Tomcat 8.5\conf
02-08-2017  23:36             3.692 logging.properties

/ 13	. 

/ we edit A.java
	public A() {
		this.name=System.getProperty("java.util.logging.config.file");
	}
/ we zien dit in de logging in eclipse:
okt 14, 2017 10:31:11 AM org.apache.catalina.core.StandardContext reload
INFO: Reloading Context with name [/abcmodify-marshal] is completed
/ TODO Soms wel, soms niet,
/ TODO Welke logging is dit?

$ vi index.jsp
<jsp:useBean id="a" class="my.A" scope="request"></jsp:useBean>
${a.name}

/ als we tomcat start in eclipse, zie we geen file op het scherm, 
/ als we tomcat met catalina.bat start, zien we, 
C:\Program Files\Apache Software Foundation\Tomcat 8.5\conf\logging.properties

/ dit is set in catalina.bat, 
$ vi catalina.bat

if not "%LOGGING_CONFIG%" == "" goto noJuliConfig		/n, want hij is wel leeg, 	we geven niets,
set LOGGING_CONFIG=-Dnop
if not exist "%CATALINA_BASE%\conf\logging.properties" goto noJuliConfig
set LOGGING_CONFIG=-Djava.util.logging.config.file="%CATALINA_BASE%\conf\logging.properties"
:noJuliConfig

if not "%LOGGING_MANAGER%" == "" goto noJuliManager		/n
set LOGGING_MANAGER=-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager
:noJuliManager

%_EXECJAVA% %LOGGING_CONFIG% %LOGGING_MANAGER% ...

/ we zien,
"C:\Program Files\Java\jdk1.8.0_144\bin\java.exe"  -Djava.util.logging.config.file="C:\Program Files\Apache Software Foundation\Tomcat 8.5\conf\logging.properties" -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager  "-Djdk.tls.ephemeralDHKeySize=2048" -Djava.protocol.handler.pkgs=org.apache.catalina.webresources -agentlib:jdwp=transport=dt_socket,address=localhost:8000,server=y,suspend=n   -classpath "C:\Program Files\Apache Software Foundation\Tomcat 8.5\bin\bootstrap.jar;C:\Program Files\Apache Software Foundation\Tomcat 8.5\bin\tomcat-juli.jar" -Dcatalina.base="C:\Program Files\Apache Software Foundation\Tomcat 8.5" -Dcatalina.home="C:\Program Files\Apache Software Foundation\Tomcat 8.5" -Djava.io.tmpdir="C:\Program Files\Apache Software Foundation\Tomcat 8.5\temp" org.apache.catalina.startup.Bootstrap  start


/ 13	. 

https://github.com/OneBusAway/onebusaway/wiki/Setting-Up-a-Tomcat-Server-in-Eclipse
/ onderaan: log startup van tomcat,

/ lees,
https://help.eclipse.org/neon/index.jsp?topic=%2Forg.eclipse.stardust.docs.wst%2Fhtml%2Fwst-integration%2Fconfiguration.html

/ 7	. 

/ TOMCAT LOGGING FINAL

/ google: tomcat logging debug
->
https://stackoverflow.com/questions/4119213/how-to-set-level-logging-to-debug-in-tomcat		/ hier staat het,
->
https://tomcat.apache.org/tomcat-7.0-doc/logging.html
->
http://docs.oracle.com/javase/6/docs/api/java/util/logging/package-summary.html
->
http://docs.oracle.com/javase/6/docs/technotes/guides/logging/overview.html

/ 13	. 

/ tomcat's logging,

/ we moeten de logging.properties uit tomcat's conf vrijwel intact laten, 
/ alleen beneden moeten we zeggen wat we willen log, 

# we zien alles	,
#.level=FINE

# we zien alles in package org.apache.catalina.startup, dus HostConfig
#org.apache.catalina.startup.level=FINE

org.apache.catalina.startup.EngineConfig.level=FINE

/ 13	. 

/ webapp logging,

/ Als we in de webapp logging.properties willen, 
/ maak in eclipse naast src/ resource/ en zet daarin 
$ vi logging.properties

handlers = org.apache.juli.FileHandler, java.util.logging.ConsoleHandler

############################################################
# Handler specific properties.
# Describes specific configuration info for Handlers.
############################################################

org.apache.juli.FileHandler.level = FINE
org.apache.juli.FileHandler.directory = ${catalina.base}/logs
org.apache.juli.FileHandler.prefix = abcmodify-marshal.

java.util.logging.ConsoleHandler.level = FINE
java.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter

my.level=FINE

$ vi my/A.java

package my;

import java.util.logging.Logger;

public class A {
	private String name;
	private String address;
	private String country;
	Logger logger=Logger.getLogger("my.A");
	public A() {
		this.name=System.getProperty("java.util.logging.config.file");
		this.address=System.getProperty("java.class.path");
		logger.fine("*************");
	}
	
	public A(String s) {
		this.name=s;
	}

	public String getName() {
		logger.fine("*************");
		return name;
	}
	
/ We zien als we de page localhost:8080/abcmodify-marsal in de console log van de server,

okt 14, 2017 8:20:54 PM my.A <init>
FINE: *************
okt 14, 2017 8:20:54 PM my.A getName
FINE: *************

/ 7	. 

/ lees,
https://wiki.apache.org/tomcat/Logging_Tutorial

/ lees,
https://stackoverflow.com/questions/4119213/how-to-set-level-logging-to-debug-in-tomcat

/ waarom level set on logger and on handler?

In the Handler specific properties section, you're setting the logging level for those handlers to DEBUG. This means the handlers will handle any log messages with the DEBUG level or higher. It doesn't necessarily mean any DEBUG messages are actually getting passed to the handlers.

In the Facility specific properties section, you're setting the logging level for a few explicitly-named loggers to DEBUG. For those loggers, anything at level DEBUG or above will get passed to the handlers.

The default logging level is INFO, and apart from the loggers mentioned in the Facility specific properties section, all loggers will have that level.
/ Staat dit in de config file, of is dit zo programmed?
/ TODO 



/ Einde TOMCAT LOGGING FINAL


/ 131313	.

https://stackoverflow.com/questions/15153163/setting-the-log-level-to-debug-for-a-webapp-in-tomcat
->
http://logging.apache.org/log4j/1.2/manual.html

/ 131313	. 

/ lees,
http://www.anexinet.com/blog/java-web-app-logging-in-tomcat/



/ 7	 .

/ log4j

$ vi log4j.properties

# Root logger option
log4j.rootLogger=DEBUG, file, stdout
 
# Direct log messages to a log file
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=C:\\temp\\abcmodify-marshal.log
log4j.appender.file.MaxFileSize=10MB
log4j.appender.file.MaxBackupIndex=100
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{dd-MM-yyyy HH:mm:ss:SSS} %5p %c{1}:%L - %m%n
 
# Direct log messages to stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{dd-MM-yyyy HH:mm:ss:SSS} %5p %c{1}:%L - %m%n




/ Einde TOMCAT LOGGING

/ SLF4J

/ lees,
https://www.slf4j.org/docs.html
->
https://www.youtube.com/watch?v=tMLEbGJ2z7I&hd=1 	/ video over slf4j,

/ google slf4j log4j2
/ lees,
http://www.baeldung.com/slf4j-with-log4j2-logback
/ TODO

/ Einde SLF4J


/ GIT 

/ Lees, 
http://www.vogella.com/tutorials/EclipseGit/article.html

/ open de view Git, Git repositories, 
/ we zien de tag 2.3.0	,
/ open de view git staging,

/ we kiezen tag 2.3.0 	, right click : checkout	, 
/ we zien : 
you are in 'detached HEAD' state, which means you don't have a local branch checked out,
you can look around, but it is not recommended to commit changes. The reason is that these commits would not be on any branch, and would not be visible after checking out another branch
if  you want to make changes, create or checkout a local branch first 


/ Einde GIT 

/ OPEN in CHROME

/ 2017-10-13

http://www.studytonight.com/jsp/usebean-tag.php
https://www.tutorialspoint.com/log4j/log4j_sample_program.htm

https://docs.oracle.com/javase/8/docs/technotes/tools/unix/xjc.html
https://docs.oracle.com/javase/7/docs/api/javax/xml/bind/annotation/XmlAccessorType.html
https://docs.oracle.com/javase/7/docs/api/javax/xml/bind/annotation/XmlType.html
https://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/jaxb/ant.html
https://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/2.0/jaxb/xjcTask.html
https://www.thoughts-on-java.org/generate-your-jaxb-classes-in-second/
http://javapapers.com/jee/jaxb-tutorial/
https://help.eclipse.org/neon/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2FgettingStarted%2Fqs-81_basics.htm
https://github.com/javaee/jaxb-v2
https://docs.oracle.com/javase/tutorial/jaxb/intro/basic.html  <-
https://docs.oracle.com/javase/7/docs/api/javax/xml/bind/annotation/adapters/XmlAdapter.html
http://cxf.apache.org/docs/a-simple-jax-ws-service.html <-
http://www.baeldung.com/introduction-to-apache-cxf <-
https://javaee.github.io/jaxb-v2/doc/user-guide/ch04.html

https://spring.io/guides/gs/producing-web-service/
https://spring.io/guides/tutorials/bookmarks/

https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html
http://www.oracle.com/technetwork/articles/java/ma14-java-se-8-streams-2177646.html
https://docs.oracle.com/javase/tutorial/java/javaOO/examples/MethodReferencesTest.java
https://docs.oracle.com/javase/tutorial/displayCode.html?code=https://docs.oracle.com/javase/tutorial/java/javaOO/examples/Person.java


http://www.vogella.com/tutorials/EclipseGit/article.html
https://www.mkyong.com/ant/ant-how-to-create-a-java-project/


http://narayana.io/docs/project/index.html 
http://www.developerscrappad.com/435/java/java-ee/ejb-3-x-jpa-bean-managed-transaction-with-javax-ejb-usertransaction/


http://in.relation.to/2014/02/21/addon-development-with-forge-2-a-basic-primer/
https://tools.jboss.org/documentation/howto/forge.html								<-


https://www.youtube.com/watch?v=HN3OcP2f6a8					/ wildfly-swarm,


https://github.com/arquillian/arquillian-container-chameleon
https://blogs.oracle.com/developers/testing-java-ee-7-applications-in-docker-with-arquillian-cube
https://docs.jboss.org/author/display/ARQ/Container+config+runtime+selection
http://arquillian.org/guides/testing_java_persistence/
https://docs.jboss.org/author/display/ARQ/JBoss+AS+6.0+-+Embedded
https://github.com/bartoszmajsak/Beer-Advisor			/ arquillian examples,
https://stackoverflow.com/questions/32763989/arquillian-cant-inject-stateless-bean
https://stackoverflow.com/questions/32560358/arquillian-use-different-ports-for-the-managed-wildfly-container-than-a-norma
http://arquillian.org/guides/functional_testing_using_graphene/
https://github.com/tolis-e/arquillian-wildfly-example/blob/master/src/test/resources/arquillian.xml
https://github.com/arquillian/arquillian-examples/blob/master/arquillian-tutorial/pom.xml
https://moelholm.com/2017/03/16/javaee-helloworld-kotlin/

https://www.youtube.com/watch?v=aircAruvnKk <- machine learning
https://www.youtube.com/watch?v=IHZwWFHWa-w&feature=push-u&attr_tag=vODppsjTr3YzCLkQ-6 	/ deep learning deel 2	,

http://docs.oracle.com/javaee/6/tutorial/doc/gjbnz.html / cdi
https://blogs.oracle.com/arungupta/whats-new-in-ejb-32-java-ee-7-chugging-along / session beans
https://docs.oracle.com/javaee/7/tutorial/cdi-basic008.htm
https://stackoverflow.com/questions/30639785/jsf-controller-service-and-dao <-
https://stackoverflow.com/questions/36694311/wflyjpa0060-transaction-is-required-to-perform-this-operation-either-use-a-tra
https://stackoverflow.com/questions/35808246/transaction-is-required-to-perform-this-operation-either-use-a-transaction-or-e	/ named queries
http://docs.oracle.com/javaee/6/tutorial/doc/gjbbk.html / scopes van cdi beans,
https://blogs.oracle.com/arungupta/totd-161:-java-ee-6-cdi-qualifiers-explained-default,-any,-new,-named / @Default, ...
https://rmannibucau.wordpress.com/2015/03/10/cdi-and-startup/
https://docs.jboss.org/author/display/WFLY10/Management+Clients
https://docs.jboss.org/author/display/WFLY10/Application+deployment		/ hoe deploy in wildfly
https://dzone.com/articles/cdi-di-p1
http://docs.jboss.org/weld/reference/latest/en-US/html/beanscdi.html#_session_beans
https://abhirockzz.wordpress.com/2015/09/27/native-cdi-qualifiers-any-and-default/
http://blog.dblevins.com/2012/11/cdi-when-to-break-out-ejbs.html
https://docs.oracle.com/cd/E19798-01/821-1841/gipsz/index.html / concurrency
https://stackoverflow.com/questions/2351220/stateless-and-stateful-enterprise-java-beans?rq=1 <-
https://github.com/javaee/tutorial-examples/blob/master/README.md	/ javaee tutorial examples,	 TODO (al WH)	,

https://www.youtube.com/watch?v=AoDhQt8PtUQ	/ docker+kubernetes+openshift,	vagrant	,



https://stackoverflow.com/questions/16894032/how-to-use-poms-as-a-dependency-in-maven
https://stackoverflow.com/questions/16894032/how-to-use-poms-as-a-dependency-in-maven
https://docs.jboss.org/author/display/ARQ/JBoss+AS+6.0+-+Embedded
http://www.avajava.com/tutorials/lessons/how-do-i-display-the-value-of-a-property.html / print in maven via ant,
https://stackoverflow.com/questions/11556170/how-to-invoke-maven-default-lifecycle
https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference
http://www.mojohaus.org/exec-maven-plugin/examples/example-exec-for-java-programs.html
https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html
http://softwaremavens.blogspot.nl/2009/09/running-tests-from-maven-test-jar-in.html	/ process-test-classes,
htt
ps://maven.apache.org/plugins/maven-compiler-plugin/examples/compile-using-different-jdk.html
https://stackoverflow.com/questions/16894032/how-to-use-poms-as-a-dependency-in-maven	/ transitive deps,
https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html



https://www.eclipse.org/forums/index.php/t/204176/		/ tomcat in eclipse,
https://tomcat.apache.org/tomcat-7.0-doc/appdev/deployment.html#Web_Application_Deployment_Descriptor	/ deployment 
https://tomcat.apache.org/tomcat-7.0-doc/config/context.html
http://tomcat.apache.org/tomcat-7.0-doc/config/host.html#Automatic_Application_Deployment
http://mrhaki.blogspot.nl/2011/02/configure-log4j-on-tomcat.html	<-
http://tomcat.apache.org/tomcat-7.0-doc/logging.html				<-
https://tomcat.apache.org/tomcat-8.0-doc/logging.html#Using_Log4j

https://www.youtube.com/watch?v=YJC6ldI3hWk	/ anaconda

https://docs.angularjs.org/guide/component
https://www.themarketingtechnologist.co/introduction-to-data-binding-in-angular-2-versus-angular-1/
https://www.linkedin.com/learning/building-a-full-stack-app-with-angular-2-plus-and-spring-boot/what-you-should-know-before-watching-this-course

https://www.youtube.com/watch?v=CPbvxxslDTU / oauth2

https://docs.jboss.org/hibernate/orm/5.0/quickstart/html/#tutorial-native



/ Einde OPEN IN CHROME

/ OPEN IN COMMAND

C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen-jaxb>	/ hadden eclipse op jaxb ws, kijken hoe het fs eruit ziet,
C:\Users\ervelden\java\jaxb-v2>jar tvf C:\Users\ervelden\java\jaxb-v2\jaxb-ri\bundles\ri\target\stage\jaxb-ri\lib\jaxb-xjc.jar / samples,
C:\Users\ervelden\h2>java -classpath ..\bin\wildfly-10.1.0.Final\modules\system\layers\base\com\h2database\h2\main\h2-1.3.173.jar org.h2.tools.Shell -url jdbc:h2:tcp://localhost/~/h2/test -user sa -password sa / client 
C:\Users\ervelden\bin\wildfly-10.1.0.Final>java -classpath modules\system\layers\base\com\h2database\h2\main\h2-1.3.173.jar org.h2.tools.Server -tcp / server
C:\Users\ervelden\bin\wildfly-10.1.0.Final>bin\jboss-cli.bat
C:\Users\ervelden\.m2\repository\org\arquillian\universe\arquillian-chameleon\1.1.13.0>notepad++ arquillian-chameleon-1.1.13.0.p
om
C:\Users\ervelden\java\apache-cxf-3.2.0-src>dir distribution\src\main\release\samples\java_first_jaxws\pom.xml

C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen>forge
[GameDaoTest.java]$ exit


/ Einde OPEN IN COMMAND 




/ JAVA PROJECT TEST

/ Lees,
https://stackoverflow.com/questions/6470651/creating-a-memory-leak-with-java?rq=1


/ lees,
https://stackoverflow.com/questions/20057771/no-junit-tests-found-in-eclipse

/ workspace-java-oxygen-jaxb
/ project abcexport
/ src is automatisch een source folder, we zien hem in build path onder sources,
/ we hebben zelf een test folder create, maar dat moet ook een source folder zijn , want anders kun je NIET: een unit test right click en run as unit test, (je kunt dit doen door right click de test folder, dan zie je add source folder),
/ we hebben zelf een lib/ create, met junit.jar er in, maar onder Build path , onder Libraries moet je deze lib dir add, anders wordt junit.jar niet gevonden	, 
/ we moeten ook hamcrest-core-1.3.jar in lib set, right click, Build path, Add to build path 
/ Nu kunnen we ATest, right click , run as , Junit test,
/ dit is allemaal eclipse gedoe	, 
/ je kunt de tests ook met ant run, gaat totaal buiten eclipse om.

/ 7	. 

/ we wilden abcexport , right click Export..., Web, WAR file
/ we kregen foutmelding, 
/ lees,
https://stackoverflow.com/questions/6129780/module-name-is-invalid-when-exporting-an-existing-eclipse-project-to-a-war-fil

/ we maken een Java project, abcexportaswar	, 
/ we zien de src dir als source dir, onder Build path, 
/ right click project, properties, project facets, check Dynamic Project, 
/ dan zien we in eclipse
WebContent
	META-INF
	WEB-INF
		lib
/ we zien in Buildpath bij Source, Default output folder: abcexportaswar/bin,
/ we maken in WEB-INF een classes/ en we maken deze tot Default output folder,
/ we zien classes/ nog niet in eclipse, WH omdat leeg is, maar hij is er wel op fs	,

/ dus we hebben 
abcexportaswar
	src
	WebContent
		META-INF 
		WEB-INF
			lib
				junit.jar
				hamcrest-core-1.3.jar 
			classes

/ we zien in build path, libraries
Web app libraries	
junit.jar
hamcrest-core-1.3.jar	


https://stackoverflow.com/questions/7703825/why-cant-we-see-classes-folder-of-a-dynamic-web-application-from-eclipse-ide
http://www.vogella.com/tutorials/Eclipse/article.html

/ lees,
http://crunchify.com/eclipse-missing-web-xml-file-how-can-i-create-web-xml-in-eclipse/
/ We hoeven geen web.xml, want met  servlet-3.0   hoeft dat niet meer, en tomcat7 en tomcat 8 zijn servlet-3.0	, en kunnen we annotaties use,
/ maar het kan wel, 
/ right click project, Java EE tools, Generate Deployment Descriptor stub,
/ we zien WEB-INF/web.xml	, een servlet-3.0 web.xml,

/ we export abcexportaswar naar c:\temp\abcexportaswar.war
C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen-jaxb\abcexportaswar>jar tvf \temp\abcexportaswar.war
    39 Thu Oct 12 16:18:30 GMT+01:00 2017 META-INF/MANIFEST.MF
     0 Thu Oct 12 16:18:12 GMT+01:00 2017 META-INF/
     0 Thu Oct 12 17:32:32 GMT+01:00 2017 WEB-INF/
     0 Thu Oct 12 16:36:30 GMT+01:00 2017 WEB-INF/classes/
     0 Thu Oct 12 16:36:30 GMT+01:00 2017 WEB-INF/classes/abcexport/
   535 Thu Oct 12 16:36:48 GMT+01:00 2017 WEB-INF/classes/abcexport/A.class
     0 Thu Oct 12 17:22:38 GMT+01:00 2017 WEB-INF/classes/my/
   618 Thu Oct 12 17:22:56 GMT+01:00 2017 WEB-INF/classes/my/ATest.class
     0 Thu Oct 12 16:18:56 GMT+01:00 2017 WEB-INF/lib/
 45024 Thu Oct 12 15:21:28 GMT+01:00 2017 WEB-INF/lib/hamcrest-core-1.3.jar
314932 Thu Oct 12 14:49:58 GMT+01:00 2017 WEB-INF/lib/junit-4.12.jar
   642 Thu Oct 12 17:32:50 GMT+01:00 2017 WEB-INF/web.xml
   
   
/ MORGEN, 
abcexportwithmvnaswar maven project, 
/ logs in tomcat in eclipse,


/ 7	. 

http://www.internetmosquito.com/2012/03/making-custom-ant-task-and-debugging-it.html 	/ debug ant script, TODO
https://www.mkyong.com/ant/ant-how-to-create-a-java-project/ / Ant project zoals Maven project bestaat niet, maak Java project,


/ we maken zelf een Java project, deze heeft wel een Build Path, abcmodify-marshal
/ Maar we zien dat de classes niet op het classpath, maar ant komt er wel uit want die zet ze, maar eclipse moet apart doen,
/ we zien dus in Main dat hij PurchaseOrderType niet kent,	

/ right click Build path, 
/ voeg aan Sources to: abcmodify-marshal/gen-src
/ voeg aan Libraries to: abcmodify-marshal/classes
/ Een van de 2 is OK: Main kent de types PurchaseOrderType	, en F3 werkt ook, 
/ Debug werkt nu ook : right click op Main,

/ 13	. 

/ Beter is om meteen een Dynamic Web Project te create, 
file, new , other, web, Dynamic Web project, abctmp
/ we zien, 
abctmp
	Java Resources
		src
			abcexport
				A.java
		test				/ maken we zelf	,
			my
				ATest.java
		Libraries
			JRE System libraries		/ alle jars,
			Web App libraries			/ die we in WEB-INF/lib add, maar omdat Web App Libraries al in Build path, Libraries , is 	type @Test bekend in ATest, 
				hamcrest-core-1.3.jar
				junit.jar
	build
		classes
			abcexport
				A.class
			my
				ATest.class
	WebContent
		META-INF
		WEB-INF
			lib
				hamcrest-core-1.3.jar
				junit.jar

/ In build path is onder Sources, Default output folder: abctmp/build/classes

/ we hoeven geen classes/ in WEB-INF te create,

/ Maar eclipse snapt het allemaal, als we export WAR,
 
C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen-jaxb>jar tvf \temp\abctmp.war
    39 Thu Oct 12 20:22:04 GMT+01:00 2017 META-INF/MANIFEST.MF
     0 Thu Oct 12 20:21:46 GMT+01:00 2017 META-INF/
     0 Thu Oct 12 20:21:46 GMT+01:00 2017 WEB-INF/
     0 Thu Oct 12 20:23:28 GMT+01:00 2017 WEB-INF/classes/
     0 Thu Oct 12 20:23:28 GMT+01:00 2017 WEB-INF/classes/abcexport/
   535 Thu Oct 12 20:25:42 GMT+01:00 2017 WEB-INF/classes/abcexport/A.class
     0 Thu Oct 12 20:24:08 GMT+01:00 2017 WEB-INF/classes/my/
   618 Thu Oct 12 20:25:42 GMT+01:00 2017 WEB-INF/classes/my/ATest.class
     0 Thu Oct 12 20:25:24 GMT+01:00 2017 WEB-INF/lib/
 45024 Thu Oct 12 15:21:28 GMT+01:00 2017 WEB-INF/lib/hamcrest-core-1.3.jar
314932 Thu Oct 12 14:49:58 GMT+01:00 2017 WEB-INF/lib/junit-4.12.jar
   649 Thu Oct 12 20:22:04 GMT+01:00 2017 WEB-INF/web.xml

/ In build path zien we bij Sources: Source folders on build path: abctmp/src en abctmp/test, dus daarom kent ATest A,
/ In build path zien we bij Libraries: JARs en class folders on build path: Web App Libraries , dus daarom kent ATest @Test,
/ TODO 

   
 





/ Einde JAVA PROJECT TEST


/ SOAP AXIS

/ 13	. 

/ Lees	, 
http://gdpotter.com/2017/08/14/jaxb-gradle-config/
https://www.thoughts-on-java.org/generate-your-jaxb-classes-in-second/

/ Lees,
https://www.tutorialspoint.com/soap/soap_resources.htm
Apache SOAP
http://axis.apache.org/axis/

GLUE from the Web Methods
...

/ nu axis2, ipv axis
/ lees,
 http://axis.apache.org/axis2/java/core/docs/quickstartguide.html
 
 / 13	. 
 

/ Einde SOAP AXIS


/ TOMCAT

/ we install Tomcat, met 
32-bit/64-bit Windows Service Installer (pgp, md5, sha1)

/ we kiezen ook,
Host manager          / nu krijgt admin ook de admin-gui role straks,
Examples

Server shutdown port 8005
HTTP/1.1 Connector port 8080
AJP/1.3 Connector port 8009
Windows service name Tomcat8
Create shortcut for all users: Check
Tomcat administrator login:
admin
s3cret
Roles: admin-gui,manager-gui

Java SE:
C:\Program Files\Java\jdk1.8.0_144      / hij had select: C:\Program Files\Java\jre1.8.0_144

/ destination folder:
C:\Program Files\Apache Software Foundation\Tomcat 8.5

/ we zien, 

C:\Program Files\Apache Software Foundation\Tomcat 8.5>dir
 Volume in drive C is System
 Volume Serial Number is 90D0-8A5A

 Directory of C:\Program Files\Apache Software Foundation\Tomcat 8.5

31-08-2017  08:01    <DIR>          .
31-08-2017  08:01    <DIR>          ..
31-08-2017  08:01    <DIR>          bin
31-08-2017  08:03    <DIR>          conf
31-08-2017  08:01    <DIR>          lib
02-08-2017  23:36            58.153 LICENSE
31-08-2017  08:03    <DIR>          logs
02-08-2017  23:36             1.774 NOTICE
02-08-2017  23:36             7.241 RELEASE-NOTES
31-08-2017  08:01    <DIR>          temp
02-08-2017  23:36            21.630 tomcat.ico
02-08-2017  23:36            73.704 Uninstall.exe
31-08-2017  08:01    <DIR>          webapps
31-08-2017  08:03    <DIR>          work
               5 File(s)        162.502 bytes
               9 Dir(s)  49.690.230.784 bytes free
			   
/ we zien dat manager-gui OK is, thuis hadden we manager-script, 
/ admin-gui werkt ook ,
/ we zien op localhost:8080 2 buttons: 
manager app
host manager


$ notepad++ conf\tomcat-users.xml

<?xml version='1.0' encoding='cp1252'?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<tomcat-users xmlns="http://tomcat.apache.org/xml"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://tomcat.apache.org/xml tomcat-users.xsd"
              version="1.0">
<user username="admin" password="s3cret" roles="admin-gui,manager-gui" />
<!--
  NOTE:  By default, no user is included in the "manager-gui" role required
  to operate the "/manager/html" web application.  If you wish to use this app,
  you must define such a user - the username and password are arbitrary. It is
  strongly recommended that you do NOT use one of the users in the commented out
  section below since they are intended for use with the examples web
  application.
-->
<!--
  NOTE:  The sample user and role entries below are intended for use with the
  examples web application. They are wrapped in a comment and thus are ignored
  when reading this file. If you wish to configure these users for use with the
  examples web application, do not forget to remove the <!.. ..> that surrounds
  them. You will also need to set the passwords to something appropriate.
-->
<!--
  <role rolename="tomcat"/>
  <role rolename="role1"/>
  <user username="tomcat" password="<must-be-changed>" roles="tomcat"/>
  <user username="both" password="<must-be-changed>" roles="tomcat,role1"/>
  <user username="role1" password="<must-be-changed>" roles="role1"/>
-->
</tomcat-users>

/ START TOMCAT

/ Lees,
https://tomcat.apache.org/tomcat-8.5-doc/
/ links zien we 
User guide
2) Set up
https://tomcat.apache.org/tomcat-8.5-doc/setup.html
/ we zien Windows
/ Daar zien we Windows Service-HOWTO
https://tomcat.apache.org/tomcat-8.5-doc/windows-service-howto.html




/ 7	. 

/ start, Configure Tomcat
/ we zien nieuw window, kies General
/ click Start
/ we zien in procexp, Sysinternals
Tomcat8.exe
Tomcat8w.exe

/ 7	.

/ op command line:

C:\Program Files\Apache Software Foundation\Tomcat 8.5>bin\catalina.bat  jpda run
C:\Program Files\Apache Software Foundation\Tomcat 8.5>bin\catalina.bat jpda run
Using CATALINA_BASE:   "C:\Program Files\Apache Software Foundation\Tomcat 8.5"
Using CATALINA_HOME:   "C:\Program Files\Apache Software Foundation\Tomcat 8.5"
Using CATALINA_TMPDIR: "C:\Program Files\Apache Software Foundation\Tomcat 8.5\temp"
Using JRE_HOME:        "C:\Program Files\Java\jdk1.8.0_144"
Using CLASSPATH:       "C:\Program Files\Apache Software Foundation\Tomcat 8.5\bin\bootstrap.jar;C:\Program Files\Apache Softwar
e Foundation\Tomcat 8.5\bin\tomcat-juli.jar"
Listening for transport dt_socket at address: 8000
31-Aug-2017 07:26:35.844 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server version:        Apache Tomcat/
8.5.20
31-Aug-2017 07:26:35.844 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server built:          Aug 2 2017 21:
35:49 UTC
31-Aug-2017 07:26:35.844 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server number:         8.5.20.0
31-Aug-2017 07:26:35.844 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Name:               Windows 7
31-Aug-2017 07:26:35.844 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Version:            6.1
31-Aug-2017 07:26:35.844 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Architecture:          amd64
31-Aug-2017 07:26:35.844 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Java Home:             C:\Program Fil
es\Java\jdk1.8.0_144\jre
31-Aug-2017 07:26:35.844 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM Version:           1.8.0_144-b01
31-Aug-2017 07:26:35.844 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM Vendor:            Oracle Corpora
tion
31-Aug-2017 07:26:35.844 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log CATALINA_BASE:         C:\Program Fil
es\Apache Software Foundation\Tomcat 8.5
31-Aug-2017 07:26:35.844 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log CATALINA_HOME:         C:\Program Fil
es\Apache Software Foundation\Tomcat 8.5
31-Aug-2017 07:26:35.844 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.util.lo
gging.config.file=C:\Program Files\Apache Software Foundation\Tomcat 8.5\conf\logging.properties
31-Aug-2017 07:26:35.844 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.util.lo
gging.manager=org.apache.juli.ClassLoaderLogManager
31-Aug-2017 07:26:35.844 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djdk.tls.ephe
meralDHKeySize=2048
31-Aug-2017 07:26:35.860 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.protoco
l.handler.pkgs=org.apache.catalina.webresources
31-Aug-2017 07:26:35.860 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -agentlib:jdwp
=transport=dt_socket,address=localhost:8000,server=y,suspend=n
31-Aug-2017 07:26:35.860 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcatalina.bas
e=C:\Program Files\Apache Software Foundation\Tomcat 8.5
31-Aug-2017 07:26:35.860 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcatalina.hom
e=C:\Program Files\Apache Software Foundation\Tomcat 8.5
31-Aug-2017 07:26:35.860 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.io.tmpd
ir=C:\Program Files\Apache Software Foundation\Tomcat 8.5\temp
31-Aug-2017 07:26:35.860 INFO [main] org.apache.catalina.core.AprLifecycleListener.lifecycleEvent The APR based Apache Tomcat Na
tive library which allows optimal performance in production environments was not found on the java.library.path: [C:\Program Fil
es\Java\jdk1.8.0_144\bin;C:\WINDOWS\Sun\Java\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\ProgramData\Oracle\Java\javapath;C:\Program F
iles (x86)\Intel\iCLS Client\;C:\Program Files\Intel\iCLS Client\;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\WIN
DOWS\System32\WindowsPowerShell\v1.0\;C:\WINDOWS\System32\WindowsPowerShell\v1.0\;C:\Program Files\Intel\Intel(R) Management Eng
ine Components\DAL;C:\Program Files (x86)\Intel\Intel(R) Management Engine Components\DAL;C:\Program Files\Intel\Intel(R) Manage
ment Engine Components\IPT;C:\Program Files (x86)\Intel\Intel(R) Management Engine Components\IPT;C:\Program Files\nodejs\;C:\WI
NDOWS\System32\WindowsPowerShell\v1.0\;C:\Program Files\Git\cmd;C:\Program Files\Java\jdk1.8.0_144\bin;C:\Users\ervelden\AppData
\Roaming\npm;C:\Program Files (x86)\Microsoft VS Code\bin;C:\Program Files\Notepad++;C:\Users\ervelden\bin\spring-1.5.6.RELEASE\
bin;\Users\ervelden\bin\ProcessExplorer;\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin;.]
31-Aug-2017 07:26:35.969 INFO [main] org.apache.coyote.AbstractProtocol.init Initializing ProtocolHandler ["http-nio-8080"]
31-Aug-2017 07:26:36.219 INFO [main] org.apache.tomcat.util.net.NioSelectorPool.getSharedSelector Using a shared selector for se
rvlet write/read
31-Aug-2017 07:26:36.234 INFO [main] org.apache.coyote.AbstractProtocol.init Initializing ProtocolHandler ["ajp-nio-8009"]
31-Aug-2017 07:26:36.234 INFO [main] org.apache.tomcat.util.net.NioSelectorPool.getSharedSelector Using a shared selector for se
rvlet write/read
31-Aug-2017 07:26:36.234 INFO [main] org.apache.catalina.startup.Catalina.load Initialization processed in 671 ms
31-Aug-2017 07:26:36.250 INFO [main] org.apache.catalina.core.StandardService.startInternal Starting service [Catalina]
31-Aug-2017 07:26:36.250 INFO [main] org.apache.catalina.core.StandardEngine.startInternal Starting Servlet Engine: Apache Tomca
t/8.5.20
31-Aug-2017 07:26:36.265 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deploying web appli
cation directory [C:\Program Files\Apache Software Foundation\Tomcat 8.5\webapps\docs]
31-Aug-2017 07:26:36.531 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web a
pplication directory [C:\Program Files\Apache Software Foundation\Tomcat 8.5\webapps\docs] has finished in [266] ms
31-Aug-2017 07:26:36.531 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deploying web appli
cation directory [C:\Program Files\Apache Software Foundation\Tomcat 8.5\webapps\examples]
31-Aug-2017 07:26:36.811 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web a
pplication directory [C:\Program Files\Apache Software Foundation\Tomcat 8.5\webapps\examples] has finished in [280] ms
31-Aug-2017 07:26:36.811 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deploying web appli
cation directory [C:\Program Files\Apache Software Foundation\Tomcat 8.5\webapps\host-manager]
31-Aug-2017 07:26:36.858 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web a
pplication directory [C:\Program Files\Apache Software Foundation\Tomcat 8.5\webapps\host-manager] has finished in [47] ms
31-Aug-2017 07:26:36.858 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deploying web appli
cation directory [C:\Program Files\Apache Software Foundation\Tomcat 8.5\webapps\manager]
31-Aug-2017 07:26:36.874 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web a
pplication directory [C:\Program Files\Apache Software Foundation\Tomcat 8.5\webapps\manager] has finished in [16] ms
31-Aug-2017 07:26:36.874 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deploying web appli
cation directory [C:\Program Files\Apache Software Foundation\Tomcat 8.5\webapps\ROOT]
31-Aug-2017 07:26:36.905 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web a
pplication directory [C:\Program Files\Apache Software Foundation\Tomcat 8.5\webapps\ROOT] has finished in [31] ms
31-Aug-2017 07:26:36.905 INFO [main] org.apache.coyote.AbstractProtocol.start Starting ProtocolHandler ["http-nio-8080"]
31-Aug-2017 07:26:36.905 INFO [main] org.apache.coyote.AbstractProtocol.start Starting ProtocolHandler ["ajp-nio-8009"]
31-Aug-2017 07:26:36.905 INFO [main] org.apache.catalina.startup.Catalina.start Server startup in 680 ms

/ Einde START TOMCAT

/ Intermezzo

/ thuis Tomcat config,

<role rolename="manager-script"/>
<user username="tomcat"password="s3cret" roles="manager-script"/>
</tomcat-users>

$ vi ~/.m2/settings.xml
<settings>
	<servers>
		<server>
			<id>tomcat</id>
			<username>tomcat</username>
			<password>s3cret</password>
		</server>
	</servers>
</settings>

/ Einde Intermezzo

/ Einde TOMCAT

/ GIT

/ over maven , git tag
https://stackoverflow.com/questions/42720795/how-to-set-tag-for-maven-release

Your pom is probably on version 1.3-SNAPSHOT

mvn release:prepare
Will update the version to 1.3, create the git tag "artifactid-version" in your case my-project-1.3, then set the version in your pom to 1.4-SNAPSHOT for the next iteration.

To fix your problem delete the tag see How to delete a git remote tag? then run mvn release:prepare again.

You may need to set your version back to 1.3-SNAPSHOT, this can be done with

mvn versions:set -DnewVersion=1.3-SNAPSHOT
Or just edit you pom/poms.

/ lees,
https://stackoverflow.com/questions/41750646/maven-release-plugin-and-git-tagging-style

While I didn't find documentation on this question (maybe it exists out there), I did a trial run. Create a local GIT repository with a simple POM and do a maven release:prepare. When I run git show $MYTAG on the resulting tag, git output contains "Tagger" data which suggests it is an annotated tag.

/ Lees,
https://www.avisi.nl/blog/2012/02/15/maven-release-plugin-setup-guide-for-git/

<build> 
	<plugins> ... 
		<plugin> 
			<groupId>org.apache.maven.plugins</groupId> 
			<artifactId>maven-release-plugin</artifactId> 
			<version>2.2.1</version> 
			<executions> 
				<execution> 
					<id>default</id> 
					<goals> 
						<goal>perform</goal> 
					</goals> 
					<configuration> 
						<pomFileName>
							<your_project>/pom.xml
						</pomFileName> 
					</configuration> 
				</execution> 
			</executions> 
		</plugin> ... 
	</plugins>
</build>

/ Einde GIT

/ Maven

/ lees,
https://spring.io/guides/gs/producing-web-service/

$ vi pom.xml

<plugin>
	<groupId>org.codehaus.mojo</groupId>
	<artifactId>jaxb2-maven-plugin</artifactId>
	<version>1.6</version>
	<executions>
		<execution>
			<id>xjc</id>
			<goals>
				<goal>xjc</goal>
			</goals>
		</execution>
	</executions>
	<configuration>
		<schemaDirectory>${project.basedir}/src/main/resources/</schemaDirectory>
		<outputDirectory>${project.basedir}/src/main/java</outputDirectory>
		<clearOutputDir>false</clearOutputDir>
	</configuration>
</plugin>

/ lees,
http://www.avajava.com/tutorials/lessons/how-do-i-create-a-hello-world-goal-for-a-maven-plugin.html
http://www.avajava.com/tutorials/lessons/how-do-i-attach-a-plugin-goal-to-a-particular-phase-of-a-maven-lifecycle.html

/ lees,
http://www.mojohaus.org/jaxb2-maven-plugin/Documentation/v2.3.1/example_xjc_basic.html


/ Einde Maven

/ WILDFLY

/ we hebben download wildfly-10.1.0.Final.zip, en we extract hem in \Users\ervelden\bin,

C:\Users\ervelden\bin\wildfly-10.1.0.Final\bin>standalone.bat



/ Einde WILDFLY

/ JBOSSTOOLS FORGE WILDFLY SWARM

/ kijk,
https://www.youtube.com/watch?v=ebcnOopZFWs
/ lees,
https://tools.jboss.org/documentation/howto/forge.htmlhttps://wildfly-swarm.gitbooks.io/wildfly-swarm-users-guide/getting-started/tooling/forge-addon.html

/ lees,
https://github.com/forge/wildfly-swarm-addon

/ lees,
http://forge.jboss.org/

/ google, project type wildfly swarm microservice
/ lees,
https://dzone.com/articles/develop-a-microservice-with-forge-wildfly-swarm-an-1
/ lees,
http://wildfly-swarm.io/

/ ctrl+4
/ Forge/Manage, Install an addon from git
url: https://github.com/forge/wildfly-swarm-addon.git

/ lees,
http://blog.eisele.net/2015/10/wildfly-swarm-jax-rs-microservice-on-docker.html

/ 7	. 

https://www.youtube.com/watch?v=ebcnOopZFWs

/ ctrl+4
/ onder Forge/Manage
Install an addon from GIT, to forge 									/ we install dus een addon to forge,
url: https://github.com/forge/wildfly-swarm-addon.git

/ je kunt filter op wat je ziet in ctrl+4,
forge

/ omdat we in eclipse.ini hebben gezegd dat -vm jdk1.8.0_144 is (jdk dus ipv jre)	, kan hij compile,	

/ als we ctrl+4
Project: New
/dan zien we nu de extra entry,
Wildfly Swarm


/ we zien bij Install addon from git:


[INFO] Scanning for projects...
[INFO] Inspecting build with total of 1 modules...
[INFO] Installing Nexus Staging features:
[INFO]   ... total of 1 executions of maven-deploy-plugin replaced with nexus-staging-maven-plugin
[INFO] 
[INFO] [1m------------------------------------------------------------------------[m
[INFO] [1mBuilding wildfly-swarm 2017.8.2-SNAPSHOT[m
[INFO] [1m------------------------------------------------------------------------[m
[INFO] 
[INFO] [1m--- [0;32mmaven-clean-plugin:3.0.0:clean[m [1m(default-clean)[m @ [36mwildfly-swarm[0;1m ---[m
[INFO] 
[INFO] [1m--- [0;32mmaven-enforcer-plugin:1.4.1:enforce[m [1m(enforce-java-version)[m @ [36mwildfly-swarm[0;1m ---[m
[INFO] 
[INFO] [1m--- [0;32mmaven-enforcer-plugin:1.4.1:enforce[m [1m(enforce-maven-version)[m @ [36mwildfly-swarm[0;1m ---[m
[INFO] 
[INFO] [1m--- [0;32mbuildnumber-maven-plugin:1.4:create[m [1m(get-scm-revision)[m @ [36mwildfly-swarm[0;1m ---[m
[INFO] Executing: cmd.exe /X /C "git rev-parse --verify HEAD"
[INFO] Working directory: C:\Users\ervelden\AppData\Local\Temp\tmpdir6387031468665632935
[INFO] Storing buildNumber: f4812184b5f35608c718f3efd8be40c93fdd0286 at timestamp: 1504252739636
[INFO] Storing buildScmBranch: master
[INFO] 
[INFO] [1m--- [0;32mmaven-resources-plugin:3.0.1:resources[m [1m(default-resources)[m @ [36mwildfly-swarm[0;1m ---[m
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] [1m--- [0;32mmaven-compiler-plugin:3.6.0:compile[m [1m(default-compile)[m @ [36mwildfly-swarm[0;1m ---[m
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 14 source files to C:\Users\ervelden\AppData\Local\Temp\tmpdir6387031468665632935\target\classes
[INFO] 
[INFO] [1m--- [0;32mmaven-resources-plugin:3.0.1:testResources[m [1m(default-testResources)[m @ [36mwildfly-swarm[0;1m ---[m
[INFO] Not copying test resources
[INFO] 
[INFO] [1m--- [0;32mmaven-compiler-plugin:3.6.0:testCompile[m [1m(default-testCompile)[m @ [36mwildfly-swarm[0;1m ---[m
[INFO] Not compiling test sources
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 4 source files to C:\Users\ervelden\AppData\Local\Temp\tmpdir6387031468665632935\target\test-classes
[INFO] 
[INFO] [1m--- [0;32mmaven-surefire-plugin:2.19.1:test[m [1m(default-test)[m @ [36mwildfly-swarm[0;1m ---[m
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/maven-surefire-common/2.19.1/maven-surefire-common-2.19.1.pom
Progress (1): 2.2/7.3 kB
Progress (1): 4.9/7.3 kB
Progress (1): 7.3 kB    
                    
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/maven-surefire-common/2.19.1/maven-surefire-common-2.19.1.pom (7.3 kB at 34 kB/s)
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugin-tools/maven-plugin-annotations/3.3/maven-plugin-annotations-3.3.pom
Progress (1): 1.6 kB
                    
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugin-tools/maven-plugin-annotations/3.3/maven-plugin-annotations-3.3.pom (1.6 kB at 48 kB/s)
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugin-tools/maven-plugin-tools/3.3/maven-plugin-tools-3.3.pom

                   
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugin-tools/maven-plugin-tools/3.3/maven-plugin-tools-3.3.pom (13 kB at 264 kB/s)
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-api/2.19.1/surefire-api-2.19.1.pom
 
                    
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-api/2.19.1/surefire-api-2.19.1.pom (3.5 kB at 37 kB/s)
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-booter/2.19.1/surefire-booter-2.19.1.pom
  
                    
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-booter/2.19.1/surefire-booter-2.19.1.pom (3.2 kB at 36 kB/s)
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/reporting/maven-reporting-api/3.0/maven-reporting-api-3.0.pom

                    
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/reporting/maven-reporting-api/3.0/maven-reporting-api-3.0.pom (2.4 kB at 38 kB/s)
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/maven-surefire-common/2.19.1/maven-surefire-common-2.19.1.jar
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugin-tools/maven-plugin-annotations/3.3/maven-plugin-annotations-3.3.jar
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-api/2.19.1/surefire-api-2.19.1.jar
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/reporting/maven-reporting-api/3.0/maven-reporting-api-3.0.jar
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-booter/2.19.1/surefire-booter-2.19.1.jar

                                                        
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/maven-surefire-common/2.19.1/maven-surefire-common-2.19.1.jar (293 kB at 1.7 MB/s)
  
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugin-tools/maven-plugin-annotations/3.3/maven-plugin-annotations-3.3.jar (14 kB at 69 kB/s)
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/reporting/maven-reporting-api/3.0/maven-reporting-api-3.0.jar (11 kB at 53 kB/s)

                               
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-booter/2.19.1/surefire-booter-2.19.1.jar (46 kB at 206 kB/s)

                    
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-api/2.19.1/surefire-api-2.19.1.jar (196 kB at 703 kB/s)
[INFO] Tests are skipped.
[INFO] 
[INFO] [1m--- [0;32mmaven-jar-plugin:3.0.2:jar[m [1m(default-jar)[m @ [36mwildfly-swarm[0;1m ---[m
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/maven-archiver/3.1.1/maven-archiver-3.1.1.pom

                    
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/maven-archiver/3.1.1/maven-archiver-3.1.1.pom (4.3 kB at 69 kB/s)
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-shared-utils/3.0.1/maven-shared-utils-3.0.1.pom

                    
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-shared-utils/3.0.1/maven-shared-utils-3.0.1.pom (4.6 kB at 73 kB/s)
Downloading: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-archiver/3.3/plexus-archiver-3.3.pom

Downloaded: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-archiver/3.3/plexus-archiver-3.3.pom (5.3 kB at 61 kB/s)
Downloading: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-io/2.7.1/plexus-io-2.7.1.pom

                    
Downloaded: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-io/2.7.1/plexus-io-2.7.1.pom (4.9 kB at 75 kB/s)
Downloading: https://repo.maven.apache.org/maven2/org/apache/commons/commons-compress/1.11/commons-compress-1.11.pom

                   
Downloaded: https://repo.maven.apache.org/maven2/org/apache/commons/commons-compress/1.11/commons-compress-1.11.pom (13 kB at 135 kB/s)
Downloading: https://repo.maven.apache.org/maven2/org/iq80/snappy/snappy/0.4/snappy-0.4.pom

                   
Downloaded: https://repo.maven.apache.org/maven2/org/iq80/snappy/snappy/0.4/snappy-0.4.pom (15 kB at 186 kB/s)
Downloading: https://repo.maven.apache.org/maven2/org/tukaani/xz/1.5/xz-1.5.pom

                    
Downloaded: https://repo.maven.apache.org/maven2/org/tukaani/xz/1.5/xz-1.5.pom (1.9 kB at 24 kB/s)
Downloading: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-archiver/3.4/plexus-archiver-3.4.pom
   
                    
Downloaded: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-archiver/3.4/plexus-archiver-3.4.pom (5.3 kB at 121 kB/s)
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/maven-archiver/3.1.1/maven-archiver-3.1.1.jar
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-shared-utils/3.0.1/maven-shared-utils-3.0.1.jar
Downloading: https://repo.maven.apache.org/maven2/org/apache/commons/commons-compress/1.11/commons-compress-1.11.jar
Downloading: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-archiver/3.4/plexus-archiver-3.4.jar
Downloading: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-io/2.7.1/plexus-io-2.7.1.jar
                                                   
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/maven-archiver/3.1.1/maven-archiver-3.1.1.jar (24 kB at 370 kB/s)

                                           
Downloading: https://repo.maven.apache.org/maven2/org/iq80/snappy/snappy/0.4/snappy-0.4.jar
Downloaded: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-io/2.7.1/plexus-io-2.7.1.jar (86 kB at 1.7 MB/s)
Downloading: https://repo.maven.apache.org/maven2/org/tukaani/xz/1.5/xz-1.5.jar
                                                                 
Downloaded: https://repo.maven.apache.org/maven2/org/tukaani/xz/1.5/xz-1.5.jar (100 kB at 490 kB/s)

                                                         
Downloaded: https://repo.maven.apache.org/maven2/org/iq80/snappy/snappy/0.4/snappy-0.4.jar (58 kB at 285 kB/s)

Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-shared-utils/3.0.1/maven-shared-utils-3.0.1.jar (154 kB at 583 kB/s)

                                 
Downloaded: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-archiver/3.4/plexus-archiver-3.4.jar (187 kB at 599 kB/s)

                    
Downloaded: https://repo.maven.apache.org/maven2/org/apache/commons/commons-compress/1.11/commons-compress-1.11.jar (426 kB at 1.1 MB/s)
[INFO] Building jar: C:\Users\ervelden\AppData\Local\Temp\tmpdir6387031468665632935\target\wildfly-swarm-addon.jar
[INFO] 
[INFO] [1m--- [0;32mmaven-source-plugin:3.0.1:jar-no-fork[m [1m(attach-sources)[m @ [36mwildfly-swarm[0;1m ---[m
[INFO] Building jar: C:\Users\ervelden\AppData\Local\Temp\tmpdir6387031468665632935\target\wildfly-swarm-addon-sources.jar
[INFO] 
[INFO] [1m--- [0;32mmaven-jar-plugin:3.0.2:jar[m [1m(create-forge-addon)[m @ [36mwildfly-swarm[0;1m ---[m
[INFO] Building jar: C:\Users\ervelden\AppData\Local\Temp\tmpdir6387031468665632935\target\wildfly-swarm-addon-forge-addon.jar
[INFO] 
[INFO] [1m--- [0;32mmaven-install-plugin:2.5.2:install[m [1m(default-install)[m @ [36mwildfly-swarm[0;1m ---[m
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-shared-utils/0.4/maven-shared-utils-0.4.pom
Progress (1): 2.1/4.0 kB
Progress (1): 4.0 kB    
                    
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-shared-utils/0.4/maven-shared-utils-0.4.pom (4.0 kB at 36 kB/s)
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-shared-utils/0.4/maven-shared-utils-0.4.jar
Downloading: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/3.0.15/plexus-utils-3.0.15.jar

                             
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-shared-utils/0.4/maven-shared-utils-0.4.jar (155 kB at 960 kB/s)
Downloaded: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/3.0.15/plexus-utils-3.0.15.jar (239 kB at 1.3 MB/s)
[INFO] Installing C:\Users\ervelden\AppData\Local\Temp\tmpdir6387031468665632935\target\wildfly-swarm-addon.jar to C:\Users\ervelden\.m2\repository\org\jboss\forge\addon\wildfly-swarm\2017.8.2-SNAPSHOT\wildfly-swarm-2017.8.2-SNAPSHOT.jar
[INFO] Installing C:\Users\ervelden\AppData\Local\Temp\tmpdir6387031468665632935\pom.xml to C:\Users\ervelden\.m2\repository\org\jboss\forge\addon\wildfly-swarm\2017.8.2-SNAPSHOT\wildfly-swarm-2017.8.2-SNAPSHOT.pom
[INFO] Installing C:\Users\ervelden\AppData\Local\Temp\tmpdir6387031468665632935\target\wildfly-swarm-addon-sources.jar to C:\Users\ervelden\.m2\repository\org\jboss\forge\addon\wildfly-swarm\2017.8.2-SNAPSHOT\wildfly-swarm-2017.8.2-SNAPSHOT-sources.jar
[INFO] Installing C:\Users\ervelden\AppData\Local\Temp\tmpdir6387031468665632935\target\wildfly-swarm-addon-forge-addon.jar to C:\Users\ervelden\.m2\repository\org\jboss\forge\addon\wildfly-swarm\2017.8.2-SNAPSHOT\wildfly-swarm-2017.8.2-SNAPSHOT-forge-addon.jar
[INFO] [1m------------------------------------------------------------------------[m
[INFO] [1;32mBUILD SUCCESS[m
[INFO] [1m------------------------------------------------------------------------[m
[INFO] Total time: 10.081 s
[INFO] Finished at: 2017-09-01T08:59:07+01:00
[INFO] Final Memory: 147M/287M
[INFO] [1m------------------------------------------------------------------------[m

/ 13	. 

/ ctrl-4, Project Generation/Project New
Project name: demo
Top level package: demo.org				/ TODO
Project type: Wildfly Swarm
Use target project root				/ TODO
Stack: JavaEE 7
Next
Http Port:8080
Fraction List
JAX-RS
Finish

/ we zien demo project,
/ hier zit alleen HelloWorldEndpoint.java en pom.xml in,

$ vi HelloWorldEndpoint.java

package org.demo.rest;

import javax.ws.rs.Path;
import javax.ws.rs.core.Response;
import javax.ws.rs.GET;
import javax.ws.rs.Produces;

@Path("/hello")
public class HelloWorldEndpoint {

	@GET
	@Produces("text/plain")
	public Response doGet() {
		return Response.ok("Hello from WildFly Swarm!").build();
	}
}

/ In Spring werken ze met @RequestMapping(method=RequestMethod.GET, value="/...")

/ 13	. 

/ Net als op de video 
https://www.youtube.com/watch?v=ebcnOopZFWs
/ maken we zelf ook een REST endpoint,
ctrl+4
filter op rest
Java EE/JAX-RS   REST:New Endpoint

/ in het 1ste window doen we NIETS,
Application path: /rest
Configuration strategy: Application class
Target package: org.demo.rest
Class name: RestApplication

/ in het 2de window,
Package name: org.demo.rest
Type name: MyEndpoint
Methods: GET

/ we zien nu 
MyEndpoint.java
RestApplication.java       / TODO

$ vi RestApplication.java

package org.demo.rest;

import javax.ws.rs.core.Application;
import javax.ws.rs.ApplicationPath;

@ApplicationPath("/rest")
public class RestApplication extends Application {
}

$ vi MyEndpoint.java

package org.demo.rest;

import javax.ws.rs.Path;
import javax.ws.rs.core.Response;
import javax.ws.rs.GET;
import javax.ws.rs.Produces;

@Path("/my")
public class MyEndpoint {

	@GET
	@Produces("text/plain")
	public Response doGet() {
		return Response.ok("method doGet invoked").build();
	}
}

/ 13	. 

/ ctrl-4, Wildfly Swarm: New Main Class

Package name: org.demo
Type name: Main

$ vi Main.java

package org.demo;

import org.wildfly.swarm.Swarm;

public class Main {

	public static void main(String[] args) throws Exception {
		Swarm swarm = new Swarm();
		swarm.start();
		swarm.deploy();
	}
}

/ 13	. 

/ als we right click Main.java, en run as application, dan ERR:
Failed to resolve artifact 'xalan:serializer:2.7.1.jbossorg-2'

/ Dit is een Gradle message, 

/ zoek naar string in file,
C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\demo>findstr /s /c:"static void" *.*
src\main\java\org\demo\Main.java:       public static void main(String[] args) throws Exception {

/ als je op deze manier zoekt naar 'artifact name', want dat zagen we ergens in de ERR messages, dan vinden we niets,


/ 13	. 

/ we zagen dit ergens op stackoverflow, maar helpt niet voor :  right click Main.java, run as application 

  <repositories>
  	<repository>
  		<id></id>
  		<name></name>
  		<url>https://maven.repository.redhat.com/nexus/content/repositories/releases/</url>
  	</repository>
  	<repository>
  		<id></id>
  		<name></name>
  		<url>https://maven.repository.redhat.com/nexus/content/repositories/thirdparty-releases/</url>
  	</repository>
  	
  </repositories>
  
/ 13	. 

/ right click project demo, of pom.xml (NIET Main.java)	, 
$ mvn clean verify

/ Door verify gaat hij alles download, ook xalan, 

[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building demo 1.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ demo ---
[INFO] Deleting C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\demo\target
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ demo ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 0 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ demo ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 4 source files to C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\demo\target\classes
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ demo ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 0 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ demo ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ demo ---
[INFO] 
[INFO] --- maven-war-plugin:2.2:war (default-war) @ demo ---
[INFO] Packaging webapp
[INFO] Assembling webapp [demo] in [C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\demo\target\demo]
[INFO] Processing war project
[INFO] Copying webapp resources [C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\demo\src\main\webapp]
[INFO] Webapp assembled in [219 msecs]
[INFO] Building war: C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\demo\target\demo.war
[INFO] 
[INFO] --- wildfly-swarm-plugin:2017.8.1:package (default) @ demo ---
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/wildfly/swarm/tools/2017.8.1/tools-2017.8.1.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/wildfly/swarm/tools/2017.8.1/tools-2017.8.1.pom (3 KB at 5.8 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/net/lingala/zip4j/zip4j/1.3.2/zip4j-1.3.2.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/net/lingala/zip4j/zip4j/1.3.2/zip4j-1.3.2.pom (922 B at 14.5 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/eclipse/aether/aether-util/1.0.0.v20140518/aether-util-1.0.0.v20140518.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/eclipse/aether/aether-util/1.0.0.v20140518/aether-util-1.0.0.v20140518.pom (3 KB at 27.5 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/eclipse/aether/aether/1.0.0.v20140518/aether-1.0.0.v20140518.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/eclipse/aether/aether/1.0.0.v20140518/aether-1.0.0.v20140518.pom (30 KB at 267.7 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/eclipse/aether/aether-api/1.0.0.v20140518/aether-api-1.0.0.v20140518.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/eclipse/aether/aether-api/1.0.0.v20140518/aether-api-1.0.0.v20140518.pom (2 KB at 29.9 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/wildfly/swarm/tools/2017.8.1/tools-2017.8.1.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/wildfly/swarm/tools/2017.8.1/tools-2017.8.1.jar (52 KB at 542.1 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/net/lingala/zip4j/zip4j/1.3.2/zip4j-1.3.2.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/net/lingala/zip4j/zip4j/1.3.2/zip4j-1.3.2.jar (129 KB at 632.0 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/eclipse/aether/aether-util/1.0.0.v20140518/aether-util-1.0.0.v20140518.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/eclipse/aether/aether-util/1.0.0.v20140518/aether-util-1.0.0.v20140518.jar (143 KB at 828.0 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/eclipse/aether/aether-api/1.0.0.v20140518/aether-api-1.0.0.v20140518.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/eclipse/aether/aether-api/1.0.0.v20140518/aether-api-1.0.0.v20140518.jar (134 KB at 1210.0 KB/sec)
[WARNING] 
------
Custom main() usage is intended to be deprecated in a future release and is no longer supported, 
please refer to http://reference.wildfly-swarm.io for YAML configuration that replaces it.
------
Resolving 148 out of 206 artifacts
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/common/jboss-common-beans/2.0.0.Final/jboss-common-beans-2.0.0.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/common/jboss-common-beans/2.0.0.Final/jboss-common-beans-2.0.0.Final.jar (63 KB at 27.3 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/wildfly-naming/10.1.0.Final/wildfly-naming-10.1.0.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/wildfly-naming/10.1.0.Final/wildfly-naming-10.1.0.Final.jar (253 KB at 222.8 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-deployment-repository/2.2.1.Final/wildfly-deployment-repository-2.2.1.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-deployment-repository/2.2.1.Final/wildfly-deployment-repository-2.2.1.Final.jar (30 KB at 42.6 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/invocation/jboss-invocation/1.4.1.Final/jboss-invocation-1.4.1.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/invocation/jboss-invocation/1.4.1.Final/jboss-invocation-1.4.1.Final.jar (74 KB at 104.1 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/xnio/xnio-nio/3.4.3.Final/xnio-nio-3.4.3.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/xnio/xnio-nio/3.4.3.Final/xnio-nio-3.4.3.Final.jar (115 KB at 53.3 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/jboss-remote-naming/2.0.4.Final/jboss-remote-naming-2.0.4.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/jboss-remote-naming/2.0.4.Final/jboss-remote-naming-2.0.4.Final.jar (163 KB at 202.2 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/ch/qos/cal10n/cal10n-api/0.8.1/cal10n-api-0.8.1.jar
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/slf4j/jcl-over-slf4j/1.7.7.jbossorg-1/jcl-over-slf4j-1.7.7.jbossorg-1.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/slf4j/jcl-over-slf4j/1.7.7.jbossorg-1/jcl-over-slf4j-1.7.7.jbossorg-1.jar (17 KB at 11.1 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/xnio/xnio-api/3.4.3.Final/xnio-api-3.4.3.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/xnio/xnio-api/3.4.3.Final/xnio-api-3.4.3.Final.jar (529 KB at 330.1 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/io/undertow/jastow/jastow/2.0.1.Final/jastow-2.0.1.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/io/undertow/jastow/jastow/2.0.1.Final/jastow-2.0.1.Final.jar (607 KB at 456.0 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/remoting/jboss-remoting/4.0.21.Final/jboss-remoting-4.0.21.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/remoting/jboss-remoting/4.0.21.Final/jboss-remoting-4.0.21.Final.jar (271 KB at 315.4 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/slf4j/slf4j-jboss-logmanager/1.0.3.GA/slf4j-jboss-logmanager-1.0.3.GA.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/slf4j/slf4j-jboss-logmanager/1.0.3.GA/slf4j-jboss-logmanager-1.0.3.GA.jar (11 KB at 15.2 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/xerces/xercesImpl/2.11.0.SP5/xercesImpl-2.11.0.SP5.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/xerces/xercesImpl/2.11.0.SP5/xercesImpl-2.11.0.SP5.jar (1767 KB at 1026.5 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/glassfish/jaxb/codemodel/2.2.11.jbossorg-1/codemodel-2.2.11.jbossorg-1.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/glassfish/jaxb/codemodel/2.2.11.jbossorg-1/codemodel-2.2.11.jbossorg-1.jar (149 KB at 98.8 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/security/jboss-negotiation-common/3.0.2.Final/jboss-negotiation-common-3.0.2.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/security/jboss-negotiation-common/3.0.2.Final/jboss-negotiation-common-3.0.2.Final.jar (41 KB at 47.2 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-controller/2.2.1.Final/wildfly-controller-2.2.1.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-controller/2.2.1.Final/wildfly-controller-2.2.1.Final.jar (1814 KB at 949.5 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/security/jboss-negotiation-extras/3.0.2.Final/jboss-negotiation-extras-3.0.2.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/security/jboss-negotiation-extras/3.0.2.Final/jboss-negotiation-extras-3.0.2.Final.jar (44 KB at 63.6 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-process-controller/2.2.1.Final/wildfly-process-controller-2.2.1.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-process-controller/2.2.1.Final/wildfly-process-controller-2.2.1.Final.jar (126 KB at 166.8 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-protocol/2.2.1.Final/wildfly-protocol-2.2.1.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-protocol/2.2.1.Final/wildfly-protocol-2.2.1.Final.jar (101 KB at 146.1 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/threads/jboss-threads/2.2.1.Final/jboss-threads-2.2.1.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/threads/jboss-threads/2.2.1.Final/jboss-threads-2.2.1.Final.jar (122 KB at 172.8 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/codehaus/jackson/jackson-jaxrs/1.9.13/jackson-jaxrs-1.9.13.jar
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/joda-time/joda-time/2.7/joda-time-2.7.jar
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/com/sun/xml/bind/external/rngom/2.2.11.jbossorg-1/rngom-2.2.11.jbossorg-1.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/com/sun/xml/bind/external/rngom/2.2.11.jbossorg-1/rngom-2.2.11.jbossorg-1.jar (305 KB at 136.8 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/metadata/jboss-metadata-ear/10.0.0.Final/jboss-metadata-ear-10.0.0.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/metadata/jboss-metadata-ear/10.0.0.Final/jboss-metadata-ear-10.0.0.Final.jar (67 KB at 95.1 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/glassfish/jaxb/jaxb-xjc/2.2.11.jbossorg-1/jaxb-xjc-2.2.11.jbossorg-1.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/glassfish/jaxb/jaxb-xjc/2.2.11.jbossorg-1/jaxb-xjc-2.2.11.jbossorg-1.jar (1017 KB at 629.6 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-platform-mbean/2.2.1.Final/wildfly-platform-mbean-2.2.1.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-platform-mbean/2.2.1.Final/wildfly-platform-mbean-2.2.1.Final.jar (123 KB at 177.6 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/jboss-vfs/3.2.12.Final/jboss-vfs-3.2.12.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/jboss-vfs/3.2.12.Final/jboss-vfs-3.2.12.Final.jar (141 KB at 199.8 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/common/wildfly-common/1.1.0.Final/wildfly-common-1.1.0.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/common/wildfly-common/1.1.0.Final/wildfly-common-1.1.0.Final.jar (49 KB at 71.1 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/picketbox/picketbox/4.9.6.Final/picketbox-4.9.6.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/picketbox/picketbox/4.9.6.Final/picketbox-4.9.6.Final.jar (926 KB at 798.1 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-remoting/2.2.1.Final/wildfly-remoting-2.2.1.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-remoting/2.2.1.Final/wildfly-remoting-2.2.1.Final.jar (206 KB at 284.6 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/resteasy/resteasy-client/3.0.19.Final/resteasy-client-3.0.19.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/resteasy/resteasy-client/3.0.19.Final/resteasy-client-3.0.19.Final.jar (152 KB at 219.8 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/resteasy/resteasy-jackson2-provider/3.0.19.Final/resteasy-jackson2-provider-3.0.19.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/resteasy/resteasy-jackson2-provider/3.0.19.Final/resteasy-jackson2-provider-3.0.19.Final.jar (14 KB at 20.3 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/logmanager/log4j-jboss-logmanager/1.1.2.Final/log4j-jboss-logmanager-1.1.2.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/logmanager/log4j-jboss-logmanager/1.1.2.Final/log4j-jboss-logmanager-1.1.2.Final.jar (483 KB at 558.2 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/xalan/serializer/2.7.1.jbossorg-2/serializer-2.7.1.jbossorg-2.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/xalan/serializer/2.7.1.jbossorg-2/serializer-2.7.1.jbossorg-2.jar (279 KB at 333.5 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/resteasy/resteasy-jaxrs/3.0.19.Final/resteasy-jaxrs-3.0.19.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/resteasy/resteasy-jaxrs/3.0.19.Final/resteasy-jaxrs-3.0.19.Final.jar (870 KB at 713.0 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/apache/httpcomponents/httpasyncclient/4.1/httpasyncclient-4.1.jar
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/resteasy/async-http-servlet-3.0/3.0.19.Final/async-http-servlet-3.0-3.0.19.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/resteasy/async-http-servlet-3.0/3.0.19.Final/async-http-servlet-3.0-3.0.19.Final.jar (21 KB at 14.2 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/picketbox/picketbox-commons/1.0.0.final/picketbox-commons-1.0.0.final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/picketbox/picketbox-commons/1.0.0.final/picketbox-commons-1.0.0.final.jar (21 KB at 31.2 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-version/2.2.1.Final/wildfly-version-2.2.1.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-version/2.2.1.Final/wildfly-version-2.2.1.Final.jar (16 KB at 23.4 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/glassfish/jaxb/jaxb-runtime/2.2.11.jbossorg-1/jaxb-runtime-2.2.11.jbossorg-1.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/glassfish/jaxb/jaxb-runtime/2.2.11.jbossorg-1/jaxb-runtime-2.2.11.jbossorg-1.jar (1009 KB at 531.1 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/com/sun/istack/istack-commons-tools/2.21/istack-commons-tools-2.21.jar
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/xalan/xalan/2.7.1.jbossorg-2/xalan-2.7.1.jbossorg-2.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/xalan/xalan/2.7.1.jbossorg-2/xalan-2.7.1.jbossorg-2.jar (3178 KB at 724.9 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-core-security/2.2.1.Final/wildfly-core-security-2.2.1.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-core-security/2.2.1.Final/wildfly-core-security-2.2.1.Final.jar (15 KB at 20.6 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/com/sun/xsom/xsom/20140925/xsom-20140925.jar
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/io/undertow/undertow-websockets-jsr/1.4.0.Final/undertow-websockets-jsr-1.4.0.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/io/undertow/undertow-websockets-jsr/1.4.0.Final/undertow-websockets-jsr-1.4.0.Final.jar (164 KB at 85.5 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-io/2.2.1.Final/wildfly-io-2.2.1.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-io/2.2.1.Final/wildfly-io-2.2.1.Final.jar (46 KB at 66.4 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/marshalling/jboss-marshalling/1.4.11.Final/jboss-marshalling-1.4.11.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/marshalling/jboss-marshalling/1.4.11.Final/jboss-marshalling-1.4.11.Final.jar (221 KB at 195.2 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/apache/httpcomponents/httpcore/4.4.1/httpcore-4.4.1.jar
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/jboss-dmr/1.3.0.Final/jboss-dmr-1.3.0.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/jboss-dmr/1.3.0.Final/jboss-dmr-1.3.0.Final.jar (95 KB at 49.6 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/spec/javax/servlet/jsp/jboss-jsp-api_2.3_spec/1.0.1.Final/jboss-jsp-api_2.3_spec-1.0.1.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/spec/javax/servlet/jsp/jboss-jsp-api_2.3_spec/1.0.1.Final/jboss-jsp-api_2.3_spec-1.0.1.Final.jar (58 KB at 82.1 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/security/wildfly-elytron/1.0.2.Final/wildfly-elytron-1.0.2.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/security/wildfly-elytron/1.0.2.Final/wildfly-elytron-1.0.2.Final.jar (188 KB at 183.7 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-threads/2.2.1.Final/wildfly-threads-2.2.1.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-threads/2.2.1.Final/wildfly-threads-2.2.1.Final.jar (128 KB at 51.2 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/glassfish/jaxb/jaxb-core/2.2.11.jbossorg-1/jaxb-core-2.2.11.jbossorg-1.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/glassfish/jaxb/jaxb-core/2.2.11.jbossorg-1/jaxb-core-2.2.11.jbossorg-1.jar (150 KB at 170.8 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/stdio/jboss-stdio/1.0.2.GA/jboss-stdio-1.0.2.GA.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/stdio/jboss-stdio/1.0.2.GA/jboss-stdio-1.0.2.GA.jar (19 KB at 25.6 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/sasl/jboss-sasl/1.0.5.Final/jboss-sasl-1.0.5.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/sasl/jboss-sasl/1.0.5.Final/jboss-sasl-1.0.5.Final.jar (92 KB at 120.7 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/glassfish/jaxb/jaxb-jxc/2.2.11.jbossorg-1/jaxb-jxc-2.2.11.jbossorg-1.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/glassfish/jaxb/jaxb-jxc/2.2.11.jbossorg-1/jaxb-jxc-2.2.11.jbossorg-1.jar (117 KB at 155.3 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/apache/httpcomponents/httpclient/4.5/httpclient-4.5.jar
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/apache/httpcomponents/httpcore-nio/4.4.1/httpcore-nio-4.4.1.jar
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/wildfly-undertow/10.1.0.Final/wildfly-undertow-10.1.0.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/wildfly-undertow/10.1.0.Final/wildfly-undertow-10.1.0.Final.jar (686 KB at 253.2 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/spec/javax/servlet/jstl/jboss-jstl-api_1.2_spec/1.1.3.Final/jboss-jstl-api_1.2_spec-1.1.3.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/spec/javax/servlet/jstl/jboss-jstl-api_1.2_spec/1.1.3.Final/jboss-jstl-api_1.2_spec-1.1.3.Final.jar (440 KB at 500.6 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-logging/2.2.1.Final/wildfly-logging-2.2.1.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-logging/2.2.1.Final/wildfly-logging-2.2.1.Final.jar (427 KB at 490.9 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/metadata/jboss-metadata-web/10.0.0.Final/jboss-metadata-web-10.0.0.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/metadata/jboss-metadata-web/10.0.0.Final/jboss-metadata-web-10.0.0.Final.jar (433 KB at 499.4 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/marshalling/jboss-marshalling-river/1.4.11.Final/jboss-marshalling-river-1.4.11.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/marshalling/jboss-marshalling-river/1.4.11.Final/jboss-marshalling-river-1.4.11.Final.jar (81 KB at 114.3 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/security/jboss-negotiation-ntlm/3.0.2.Final/jboss-negotiation-ntlm-3.0.2.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/security/jboss-negotiation-ntlm/3.0.2.Final/jboss-negotiation-ntlm-3.0.2.Final.jar (15 KB at 21.0 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/wildfly-jaxrs/10.1.0.Final/wildfly-jaxrs-10.1.0.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/wildfly-jaxrs/10.1.0.Final/wildfly-jaxrs-10.1.0.Final.jar (55 KB at 79.2 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/apache/httpcomponents/httpmime/4.5/httpmime-4.5.jar
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/codehaus/jackson/jackson-xc/1.9.13/jackson-xc-1.9.13.jar
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/spec/javax/security/jacc/jboss-jacc-api_1.5_spec/1.0.0.Final/jboss-jacc-api_1.5_spec-1.0.0.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/spec/javax/security/jacc/jboss-jacc-api_1.5_spec/1.0.0.Final/jboss-jacc-api_1.5_spec-1.0.0.Final.jar (35 KB at 17.8 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/com/fasterxml/jackson/datatype/jackson-datatype-jsr310/2.7.4/jackson-datatype-jsr310-2.7.4.jar
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/com/sun/istack/istack-commons-runtime/2.21/istack-commons-runtime-2.21.jar
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/codehaus/woodstox/woodstox-core-asl/4.4.1/woodstox-core-asl-4.4.1.jar
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-controller-client/2.2.1.Final/wildfly-controller-client-2.2.1.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-controller-client/2.2.1.Final/wildfly-controller-client-2.2.1.Final.jar (207 KB at 101.4 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/com/github/relaxng/relaxngDatatype/2011.1/relaxngDatatype-2011.1.jar
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/resteasy/resteasy-jackson-provider/3.0.19.Final/resteasy-jackson-provider-3.0.19.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/resteasy/resteasy-jackson-provider/3.0.19.Final/resteasy-jackson-provider-3.0.19.Final.jar (8 KB at 5.2 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/resteasy/resteasy-jaxb-provider/3.0.19.Final/resteasy-jaxb-provider-3.0.19.Final.jar
sep 01, 2017 11:50:59 AM okhttp3.internal.platform.Platform log
WARNING: A connection to https://repository.jboss.org/ was leaked. Did you forget to close a response body? To see where this was allocated, set the OkHttpClient logger level to FINE: Logger.getLogger(OkHttpClient.class.getName()).setLevel(Level.FINE);
sep 01, 2017 11:50:59 AM okhttp3.internal.platform.Platform log
WARNING: A connection to https://repository.jboss.org/ was leaked. Did you forget to close a response body? To see where this was allocated, set the OkHttpClient logger level to FINE: Logger.getLogger(OkHttpClient.class.getName()).setLevel(Level.FINE);
sep 01, 2017 11:50:59 AM okhttp3.internal.platform.Platform log
WARNING: A connection to https://repository.jboss.org/ was leaked. Did you forget to close a response body? To see where this was allocated, set the OkHttpClient logger level to FINE: Logger.getLogger(OkHttpClient.class.getName()).setLevel(Level.FINE);
sep 01, 2017 11:50:59 AM okhttp3.internal.platform.Platform log
WARNING: A connection to https://repository.jboss.org/ was leaked. Did you forget to close a response body? To see where this was allocated, set the OkHttpClient logger level to FINE: Logger.getLogger(OkHttpClient.class.getName()).setLevel(Level.FINE);
sep 01, 2017 11:50:59 AM okhttp3.internal.platform.Platform log
WARNING: A connection to https://repository.jboss.org/ was leaked. Did you forget to close a response body? To see where this was allocated, set the OkHttpClient logger level to FINE: Logger.getLogger(OkHttpClient.class.getName()).setLevel(Level.FINE);
sep 01, 2017 11:50:59 AM okhttp3.internal.platform.Platform log
WARNING: A connection to https://repository.jboss.org/ was leaked. Did you forget to close a response body? To see where this was allocated, set the OkHttpClient logger level to FINE: Logger.getLogger(OkHttpClient.class.getName()).setLevel(Level.FINE);
sep 01, 2017 11:50:59 AM okhttp3.internal.platform.Platform log
WARNING: A connection to https://repository.jboss.org/ was leaked. Did you forget to close a response body? To see where this was allocated, set the OkHttpClient logger level to FINE: Logger.getLogger(OkHttpClient.class.getName()).setLevel(Level.FINE);
sep 01, 2017 11:50:59 AM okhttp3.internal.platform.Platform log
WARNING: A connection to https://repository.jboss.org/ was leaked. Did you forget to close a response body? To see where this was allocated, set the OkHttpClient logger level to FINE: Logger.getLogger(OkHttpClient.class.getName()).setLevel(Level.FINE);
sep 01, 2017 11:50:59 AM okhttp3.internal.platform.Platform log
WARNING: A connection to https://repository.jboss.org/ was leaked. Did you forget to close a response body? To see where this was allocated, set the OkHttpClient logger level to FINE: Logger.getLogger(OkHttpClient.class.getName()).setLevel(Level.FINE);
sep 01, 2017 11:50:59 AM okhttp3.internal.platform.Platform log
WARNING: A connection to https://repository.jboss.org/ was leaked. Did you forget to close a response body? To see where this was allocated, set the OkHttpClient logger level to FINE: Logger.getLogger(OkHttpClient.class.getName()).setLevel(Level.FINE);
sep 01, 2017 11:50:59 AM okhttp3.internal.platform.Platform log
WARNING: A connection to https://repository.jboss.org/ was leaked. Did you forget to close a response body? To see where this was allocated, set the OkHttpClient logger level to FINE: Logger.getLogger(OkHttpClient.class.getName()).setLevel(Level.FINE);
sep 01, 2017 11:50:59 AM okhttp3.internal.platform.Platform log
WARNING: A connection to https://repository.jboss.org/ was leaked. Did you forget to close a response body? To see where this was allocated, set the OkHttpClient logger level to FINE: Logger.getLogger(OkHttpClient.class.getName()).setLevel(Level.FINE);
sep 01, 2017 11:50:59 AM okhttp3.internal.platform.Platform log
WARNING: A connection to https://repository.jboss.org/ was leaked. Did you forget to close a response body? To see where this was allocated, set the OkHttpClient logger level to FINE: Logger.getLogger(OkHttpClient.class.getName()).setLevel(Level.FINE);
sep 01, 2017 11:50:59 AM okhttp3.internal.platform.Platform log
WARNING: A connection to https://repository.jboss.org/ was leaked. Did you forget to close a response body? To see where this was allocated, set the OkHttpClient logger level to FINE: Logger.getLogger(OkHttpClient.class.getName()).setLevel(Level.FINE);
sep 01, 2017 11:50:59 AM okhttp3.internal.platform.Platform log
WARNING: A connection to https://repository.jboss.org/ was leaked. Did you forget to close a response body? To see where this was allocated, set the OkHttpClient logger level to FINE: Logger.getLogger(OkHttpClient.class.getName()).setLevel(Level.FINE);
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/resteasy/resteasy-jaxb-provider/3.0.19.Final/resteasy-jaxb-provider-3.0.19.Final.jar (78 KB at 78.1 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/msc/jboss-msc/1.2.6.Final/jboss-msc-1.2.6.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/msc/jboss-msc/1.2.6.Final/jboss-msc-1.2.6.Final.jar (226 KB at 197.0 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/security/jboss-negotiation-spnego/3.0.2.Final/jboss-negotiation-spnego-3.0.2.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/security/jboss-negotiation-spnego/3.0.2.Final/jboss-negotiation-spnego-3.0.2.Final.jar (34 KB at 46.8 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/apache/james/apache-mime4j/0.6/apache-mime4j-0.6.jar
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/metadata/jboss-metadata-common/10.0.0.Final/jboss-metadata-common-10.0.0.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/metadata/jboss-metadata-common/10.0.0.Final/jboss-metadata-common-10.0.0.Final.jar (460 KB at 193.6 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/javax/activation/activation/1.1.1/activation-1.1.1.jar
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/resteasy/resteasy-cdi/3.0.19.Final/resteasy-cdi-3.0.19.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/resteasy/resteasy-cdi/3.0.19.Final/resteasy-cdi-3.0.19.Final.jar (29 KB at 18.0 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/logging/jul-to-slf4j-stub/1.0.1.Final/jul-to-slf4j-stub-1.0.1.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/logging/jul-to-slf4j-stub/1.0.1.Final/jul-to-slf4j-stub-1.0.1.Final.jar (4 KB at 4.7 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/picketbox/picketbox-infinispan/4.9.6.Final/picketbox-infinispan-4.9.6.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/picketbox/picketbox-infinispan/4.9.6.Final/picketbox-infinispan-4.9.6.Final.jar (23 KB at 33.8 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-server/2.2.1.Final/wildfly-server-2.2.1.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-server/2.2.1.Final/wildfly-server-2.2.1.Final.jar (1259 KB at 584.8 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/glassfish/jaxb/txw2/2.2.11.jbossorg-1/txw2-2.2.11.jbossorg-1.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/glassfish/jaxb/txw2/2.2.11.jbossorg-1/txw2-2.2.11.jbossorg-1.jar (68 KB at 95.9 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-request-controller/2.2.1.Final/wildfly-request-controller-2.2.1.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-request-controller/2.2.1.Final/wildfly-request-controller-2.2.1.Final.jar (37 KB at 54.9 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/codehaus/woodstox/stax2-api/3.1.4/stax2-api-3.1.4.jar
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-self-contained/2.2.1.Final/wildfly-self-contained-2.2.1.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-self-contained/2.2.1.Final/wildfly-self-contained-2.2.1.Final.jar (9 KB at 5.6 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-core-security-api/2.2.1.Final/wildfly-core-security-api-2.2.1.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-core-security-api/2.2.1.Final/wildfly-core-security-api-2.2.1.Final.jar (5 KB at 4.7 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/classfilewriter/jboss-classfilewriter/1.1.2.Final/jboss-classfilewriter-1.1.2.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/classfilewriter/jboss-classfilewriter/1.1.2.Final/jboss-classfilewriter-1.1.2.Final.jar (112 KB at 113.5 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/staxmapper/1.2.0.Final/staxmapper-1.2.0.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/staxmapper/1.2.0.Final/staxmapper-1.2.0.Final.jar (36 KB at 52.2 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/eclipse/jdt/core/compiler/ecj/4.5.1/ecj-4.5.1.jar
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/spec/javax/security/auth/message/jboss-jaspi-api_1.1_spec/1.0.0.Final/jboss-jaspi-api_1.1_spec-1.0.0.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/spec/javax/security/auth/message/jboss-jaspi-api_1.1_spec/1.0.0.Final/jboss-jaspi-api_1.1_spec-1.0.0.Final.jar (34 KB at 18.8 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-domain-management/2.2.1.Final/wildfly-domain-management-2.2.1.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-domain-management/2.2.1.Final/wildfly-domain-management-2.2.1.Final.jar (816 KB at 472.2 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/wildfly-ee/10.1.0.Final/wildfly-ee-10.1.0.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/wildfly-ee/10.1.0.Final/wildfly-ee-10.1.0.Final.jar (568 KB at 438.2 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/io/undertow/undertow-servlet/1.4.0.Final/undertow-servlet-1.4.0.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/io/undertow/undertow-servlet/1.4.0.Final/undertow-servlet-1.4.0.Final.jar (497 KB at 481.0 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/wildfly-security/10.1.0.Final/wildfly-security-10.1.0.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/wildfly-security/10.1.0.Final/wildfly-security-10.1.0.Final.jar (282 KB at 333.4 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/wildfly-web-common/10.1.0.Final/wildfly-web-common-10.1.0.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/wildfly-web-common/10.1.0.Final/wildfly-web-common-10.1.0.Final.jar (48 KB at 68.3 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-network/2.2.1.Final/wildfly-network-2.2.1.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-network/2.2.1.Final/wildfly-network-2.2.1.Final.jar (42 KB at 58.8 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/com/fasterxml/jackson/datatype/jackson-datatype-jdk8/2.7.4/jackson-datatype-jdk8-2.7.4.jar
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/spec/javax/xml/bind/jboss-jaxb-api_2.2_spec/1.0.4.Final/jboss-jaxb-api_2.2_spec-1.0.4.Final.jar
[INFO] Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/spec/javax/xml/bind/jboss-jaxb-api_2.2_spec/1.0.4.Final/jboss-jaxb-api_2.2_spec-1.0.4.Final.jar (103 KB at 45.4 KB/sec)
[INFO] Downloading: https://repository.jboss.org/nexus/content/groups/public/org/glassfish/javax.enterprise.concurrent/1.0/javax.enterprise.concurrent-1.0.jar
[INFO] Downloading: https://repo.maven.apache.org/maven2/ch/qos/cal10n/cal10n-api/0.8.1/cal10n-api-0.8.1.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/ch/qos/cal10n/cal10n-api/0.8.1/cal10n-api-0.8.1.jar (38 KB at 149.2 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/codehaus/jackson/jackson-jaxrs/1.9.13/jackson-jaxrs-1.9.13.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/codehaus/jackson/jackson-jaxrs/1.9.13/jackson-jaxrs-1.9.13.jar (18 KB at 190.5 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/joda-time/joda-time/2.7/joda-time-2.7.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/joda-time/joda-time/2.7/joda-time-2.7.jar (576 KB at 1098.2 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/httpcomponents/httpasyncclient/4.1/httpasyncclient-4.1.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/httpcomponents/httpasyncclient/4.1/httpasyncclient-4.1.jar (173 KB at 1225.4 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/com/sun/istack/istack-commons-tools/2.21/istack-commons-tools-2.21.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/com/sun/istack/istack-commons-tools/2.21/istack-commons-tools-2.21.jar (25 KB at 318.6 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/com/sun/xsom/xsom/20140925/xsom-20140925.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/com/sun/xsom/xsom/20140925/xsom-20140925.jar (403 KB at 2857.3 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/httpcomponents/httpcore/4.4.1/httpcore-4.4.1.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/httpcomponents/httpcore/4.4.1/httpcore-4.4.1.jar (315 KB at 2537.8 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/httpcomponents/httpclient/4.5/httpclient-4.5.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/httpcomponents/httpclient/4.5/httpclient-4.5.jar (711 KB at 3759.3 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/httpcomponents/httpcore-nio/4.4.1/httpcore-nio-4.4.1.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/httpcomponents/httpcore-nio/4.4.1/httpcore-nio-4.4.1.jar (348 KB at 3186.8 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/httpcomponents/httpmime/4.5/httpmime-4.5.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/httpcomponents/httpmime/4.5/httpmime-4.5.jar (40 KB at 640.9 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/codehaus/jackson/jackson-xc/1.9.13/jackson-xc-1.9.13.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/codehaus/jackson/jackson-xc/1.9.13/jackson-xc-1.9.13.jar (27 KB at 562.7 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/com/fasterxml/jackson/datatype/jackson-datatype-jsr310/2.7.4/jackson-datatype-jsr310-2.7.4.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/com/fasterxml/jackson/datatype/jackson-datatype-jsr310/2.7.4/jackson-datatype-jsr310-2.7.4.jar (87 KB at 1109.5 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/com/sun/istack/istack-commons-runtime/2.21/istack-commons-runtime-2.21.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/com/sun/istack/istack-commons-runtime/2.21/istack-commons-runtime-2.21.jar (23 KB at 365.5 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/codehaus/woodstox/woodstox-core-asl/4.4.1/woodstox-core-asl-4.4.1.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/codehaus/woodstox/woodstox-core-asl/4.4.1/woodstox-core-asl-4.4.1.jar (475 KB at 3737.2 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/com/github/relaxng/relaxngDatatype/2011.1/relaxngDatatype-2011.1.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/com/github/relaxng/relaxngDatatype/2011.1/relaxngDatatype-2011.1.jar (16 KB at 242.5 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/james/apache-mime4j/0.6/apache-mime4j-0.6.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/james/apache-mime4j/0.6/apache-mime4j-0.6.jar (337 KB at 3091.4 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/javax/activation/activation/1.1.1/activation-1.1.1.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/javax/activation/activation/1.1.1/activation-1.1.1.jar (68 KB at 869.0 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/codehaus/woodstox/stax2-api/3.1.4/stax2-api-3.1.4.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/codehaus/woodstox/stax2-api/3.1.4/stax2-api-3.1.4.jar (159 KB at 2549.6 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/eclipse/jdt/core/compiler/ecj/4.5.1/ecj-4.5.1.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/eclipse/jdt/core/compiler/ecj/4.5.1/ecj-4.5.1.jar (2338 KB at 3941.5 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/com/fasterxml/jackson/datatype/jackson-datatype-jdk8/2.7.4/jackson-datatype-jdk8-2.7.4.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/com/fasterxml/jackson/datatype/jackson-datatype-jdk8/2.7.4/jackson-datatype-jdk8-2.7.4.jar (26 KB at 422.5 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/glassfish/javax.enterprise.concurrent/1.0/javax.enterprise.concurrent-1.0.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/glassfish/javax.enterprise.concurrent/1.0/javax.enterprise.concurrent-1.0.jar (55 KB at 877.1 KB/sec)
[INFO] Repackaging .war: C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\demo\target\demo.war
[INFO] Repackaged .war: C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\demo\target\demo.war
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 01:56 min
[INFO] Finished at: 2017-09-01T11:51:32+01:00
[INFO] Final Memory: 30M/335M
[INFO] ------------------------------------------------------------------------

/ 13	. 

C:\Program Files (x86)\Jenkins\jenkins.exe
C:\Program Files\Apache Software Foundation\Tomcat 8.5\bin\Tomcat8w.exe

/ we hadden jenkins.exe kill, maar toch zien we nog,
"C:\Program Files (x86)\Jenkins\jre\bin\java" -Xrs -Xmx256m -Dhudson.lifecycle=hudson.lifecycle.WindowsServiceLifecycle -jar "C:\Program Files (x86)\Jenkins\jenkins.war" --httpPort=8080 --webroot="C:\Program Files (x86)\Jenkins\war"
/ TODO

/ grep,
$ tasklist | findstr jenkins
/ NIETS, 
$ tasklist | findstr tomcat
/ NIETS

mvn exec:exec -Dexec.executable="maven" [-Dexec.workingdir="/tmp"] -Dexec.args="-X myproject:dist"
mvn exec:java -Dexec.mainClass="com.example.Main" [-Dexec.args="argument1"] ...

/ 13	. 

/ right click Main.java, run as application,

/ of lees,
https://wildfly-swarm.gitbooks.io/wildfly-swarm-users-guide/getting-started/tooling/maven-plugin.html

$ mvn clean wildfly-swarm:run

Fri Sep 01 12:27:38 GMT+01:00 2017 INFO [org.wildfly.swarm.bootstrap] (main) Dependencies not bundled; resolving from M2REPO.
2017-09-01 12:27:40,067 INFO  [org.wildfly.swarm] (main) WFSWARM0013: Installed fraction:                  Logging - STABLE          org.wildfly.swarm:logging:2017.8.1
2017-09-01 12:27:40,067 INFO  [org.wildfly.swarm] (main) WFSWARM0013: Installed fraction:                 Undertow - STABLE          org.wildfly.swarm:undertow:2017.8.1
2017-09-01 12:27:40,067 INFO  [org.wildfly.swarm] (main) WFSWARM0013: Installed fraction:                   JAX-RS - STABLE          org.wildfly.swarm:jaxrs:2017.8.1
2017-09-01 12:27:41,834 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final
2017-09-01 12:27:41,896 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0049: WildFly Swarm 2017.8.1 (WildFly Core 2.2.1.Final) starting
2017-09-01 12:27:41,946 INFO  [org.wildfly.swarm] (MSC service thread 1-6) WFSWARM0019: Install MSC service for command line args: []
2017-09-01 12:27:42,539 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 10) WFLYSEC0002: Activating Security Subsystem
2017-09-01 12:27:42,539 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 12) WFLYNAM0001: Activating Naming Subsystem
2017-09-01 12:27:42,539 INFO  [org.jboss.as.security] (MSC service thread 1-4) WFLYSEC0001: Current PicketBox version=4.9.6.Final
2017-09-01 12:27:42,539 INFO  [org.wildfly.extension.io] (ServerService Thread Pool -- 16) WFLYIO001: Worker 'default' has auto-configured to 16 core threads with 128 task threads based on your 8 available processors
2017-09-01 12:27:42,554 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-1) WFLYUT0003: Undertow 1.4.11.Final starting
2017-09-01 12:27:42,570 INFO  [org.jboss.as.naming] (MSC service thread 1-6) WFLYNAM0003: Starting Naming Service
2017-09-01 12:27:42,601 INFO  [org.xnio] (MSC service thread 1-8) XNIO version 3.4.3.Final
2017-09-01 12:27:42,601 INFO  [org.xnio.nio] (MSC service thread 1-8) XNIO NIO Implementation Version 3.4.3.Final
2017-09-01 12:27:42,663 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-5) WFLYUT0012: Started server default-server.
2017-09-01 12:27:42,788 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-6) WFLYUT0006: Undertow HTTP listener default listening on [0:0:0:0:0:0:0:0]:8080
2017-09-01 12:27:42,851 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Swarm 2017.8.1 (WildFly Core 2.2.1.Final) started in 1049ms - Started 70 of 77 services (14 services are lazy, passive or on-demand)
2017-09-01 12:27:43,430 INFO  [org.wildfly.swarm.runtime.deployer] (main) deploying 0ceaccec-4af5-49a5-9988-9bc5d1c4388a.war
2017-09-01 12:27:43,445 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) WFLYSRV0027: Starting deployment of "0ceaccec-4af5-49a5-9988-9bc5d1c4388a.war" (runtime-name: "0ceaccec-4af5-49a5-9988-9bc5d1c4388a.war")
2017-09-01 12:27:44,326 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-2) WFLYUT0018: Host default-host starting
2017-09-01 12:27:44,561 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 4) RESTEASY002225: Deploying javax.ws.rs.core.Application: class org.demo.rest.RestApplication
2017-09-01 12:27:44,577 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 4) WFLYUT0021: Registered web context: /
2017-09-01 12:27:44,623 INFO  [org.jboss.as.server] (main) WFLYSRV0010: Deployed "0ceaccec-4af5-49a5-9988-9bc5d1c4388a.war" (runtime-name : "0ceaccec-4af5-49a5-9988-9bc5d1c4388a.war")


/ geef
http://localhost:8080/rest/hello
Hello from WildFly Swarm!
http://localhost:8080/rest/my

/ 13	. 

/ right click project, debug as ...
/ Kan dit ook met 
$ maven clean wildfly-swarm:run

/ 13	. 

/ lees,
https://wildfly-swarm.gitbooks.io/wildfly-swarm-users-guide/configuration_properties.html

/ we zijn in jbosstools-jee-oxygen eclipse, en workspace-jbosstools-jee-oxygen

/ 13	. 

https://www.youtube.com/watch?v=47730LFtemY


/ 13	. 

/ kijk,
https://www.youtube.com/watch?v=5BvJVAlZyvo

/ we install forge op de command line,

/ 13	. 

https://www.youtube.com/watch?v=iBJ8FlUA3ok&t=288s


/ Einde JBOSSTOOLS FORGE WILDFLY SWARM

/ JBOSSTOOLS FORGE WILDFLY SWARM

/ 7	. 

/ kijk,
https://www.youtube.com/watch?v=5BvJVAlZyvo

/ we install forge op de command line,

/ we download de zip file, en als we unzip zien we een folder, dus we kunnen extract in \Users\ervelden\bin

C:\Users\ervelden\bin>dir
24-07-2017  15:45    <DIR>          forge-distribution-3.7.2.Final
11-08-2017  13:12    <DIR>          ProcessExplorer
27-07-2017  07:27    <DIR>          spring-1.5.6.RELEASE

/ we voegen de bin dir toe aan het User path,

/ we start forge in de 'root' dir, de appl dir wordt create, en forge stapt daar meteen in ,
C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen>forge

/ 1313	. 

/ op de oude manier, create war, deploy in wildfly

/ use view 'Forge Console', dan hoeven project niet te import in eclipse,

[workspace-jbosstools-jee-oxygen]$ project-new --named dvxuk --stack JAVA_EE_7
***SUCCESS*** Project named 'dvxuk' has been created.
***SUCCESS*** Stack 'Java EE 7' installed in project
[dvxuk]$
/ we import dit Maven project in eclipse, jee-oxygen, op workspace-jbosstools-jee-oxygen,
/ er is nog niets, behalve een pom.xml,

$ vi pom.xml

  <groupId>org.dvxuk</groupId>
  <artifactId>dvxuk</artifactId>
  <version>1.0.0-SNAPSHOT</version>
  <packaging>war</packaging>                   / we gaan in gewone wildfly deploy, 
  <build>
    <finalName>dvxuk</finalName>
  </build>
  <dependencies>
    <dependency>
      <groupId>javax</groupId>
      <artifactId>javaee-api</artifactId>			/ the appl want to use java ee 7
      <scope>provided</scope>
    </dependency>
  </dependencies>
  <dependencyManagement>
    <dependencies>
      <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>7.0</version>
        <scope>provided</scope>
      </dependency>
    </dependencies>
  </dependencyManagement>
  
[dvxuk]$ rest-new-endpoint --named HelloEndpoint --path hello --methods GET  // --methods GET is default, kun je weglaten,
										// --path hello kun je ook weglaten, wordt herleid tot hello vanwege name HelloEndpoint
***SUCCESS*** JAX-RS has been installed.
***SUCCESS*** REST org.dvxuk.rest.HelloEndpoint was created
[HelloEndpoint.java]$


$ vi RestApplication.java

package org.dvxuk.rest;

import javax.ws.rs.core.Application;
import javax.ws.rs.ApplicationPath;

@ApplicationPath("/rest")
public class RestApplication extends Application {
}

$ vi HelloEndpoint.java

package org.dvxuk.rest;

import javax.ws.rs.Path;
import javax.ws.rs.core.Response;
import javax.ws.rs.GET;
import javax.ws.rs.Produces;

@Path("/hello")
public class HelloEndpoint {

	@GET
	@Produces("text/plain")
	public Response doGet() {
		return Response.ok("method doGet invoked").build();
	}
}

/ de pom is onveranderd,

/ 13	. 

/ We kunnen de appl build op 2 manieren, direct met maven in eclipse of in forge,

/ 1313	. 

/ in eclipse maken we run config
clean package

/ run, en refresh dvx project, 
/ we zien dvx.war in target/

/ 1313	. 


[RtdEndpoint.java]$ build
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building rtd 1.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ rtd ---
[INFO] Deleting C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\rtd\target
[INFO]
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ rtd ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 0 resource
[INFO]
[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ rtd ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 2 source files to C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\rtd\target\classes
[INFO]
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ rtd ---
[INFO] Not copying test resources
[INFO]
[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ rtd ---
[INFO] Not compiling test sources
[INFO]
[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ rtd ---
[INFO] Tests are skipped.
[INFO]
[INFO] --- maven-war-plugin:2.2:war (default-war) @ rtd ---
[INFO] Packaging webapp
[INFO] Assembling webapp [rtd] in [C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\rtd\target\rtd]
[INFO] Processing war project
[INFO] Copying webapp resources [C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\rtd\src\main\webapp]
[INFO] Webapp assembled in [32 msecs]
[INFO] Building war: C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\rtd\target\rtd.war
[INFO]
[INFO] --- maven-install-plugin:2.4:install (default-install) @ rtd ---
[INFO] Installing C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\rtd\target\rtd.war to C:\Users\ervelden\.m2\repository\org\rtd\rtd\1.0.0-SNAPSHOT\rtd-1.0.0-SNAPSHOT.war
[INFO] Installing C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\rtd\pom.xml to C:\Users\ervelden\.m2\repository\org\rtd\rtd\1.0.0-SNAPSHOT\rtd-1.0.0-SNAPSHOT.pom
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.208 s
[INFO] Finished at: 2017-09-06T09:45:23+01:00
[INFO] Final Memory: 46M/160M
[INFO] ------------------------------------------------------------------------
***SUCCESS*** Build Success

/ TODO Waarom $ maven clean install? $ maven clean package is toch genoeg?

/ 13	. 

/ deploy in gewone wildfly, 



/ deze gaan we deploy in wildfly met GUI
/ we start met standalone.bat wilfly in  \Users\ervelden\bin\wildfly-10.1.0.Final\bin,

/ geef 
localhost:8080
/ OK
/ we click link 'Administration console', maar krijgen ERR page,
http://localhost:9990/error/index_win.html

C:\Users\ervelden\bin\wildfly-10.1.0.Final\bin> add-user.bat

What type of user do you wish to add?
 a) Management User (mgmt-users.properties)
 b) Application User (application-users.properties)
(a):

Enter the details of the new user to add.
Using realm 'ManagementRealm' as discovered from the existing property files.
Username (admin) : ericj
Password recommendations are listed below. To modify these restrictions edit the add-user.properties configuration file.
 - The password should be different from the username
 - The password should not be one of the following restricted values {root, admin, administrator}
 - The password should contain at least 8 characters, 1 alphabetic character(s), 1 digit(s), 1 non-alphanumeric symbol(s
Password :
vi_lang17
Re-enter Password :
What groups do you want this user to belong to? (Please enter a comma separated list, or leave blank for none)[  ]:
About to add user 'ericj' for realm 'ManagementRealm'
Is this correct yes/no? yes
Added user 'ericj' to file 'C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone\configuration\mgmt-users.properties'
Added user 'ericj' to file 'C:\Users\ervelden\bin\wildfly-10.1.0.Final\domain\configuration\mgmt-users.properties'
Added user 'ericj' with groups  to file 'C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone\configuration\mgmt-groups.propert
ies'
Added user 'ericj' with groups  to file 'C:\Users\ervelden\bin\wildfly-10.1.0.Final\domain\configuration\mgmt-groups.properties'

Is this new user going to be used for one AS process to connect to another AS process?
e.g. for a slave host controller connecting to the master or for a Remoting connection for server to server EJB calls.
yes/no? yes
To represent the user add the following to the server-identities definition <secret value="dmlfbGFuZzE3" />
Press any key to continue . . .
/ TODO

/ click 'Try again', we komen op 
localhost:9990/console/App.html
/ we zien login window,
ericj
vi_lang17
/ Gelukt, 

/ click in horizontal menu boven op Deployments, of click in main window bij Deployments op start,
http://localhost:9990/console/App.html#standalone-deployments
/ click Add, check Upload new deployment, Next, 
...
Verify upload,
Name: dvx.war
Runtime name: dvx.war
Enable: check
Finish

/ geef,
localhost:8080/dvx/rest/my
method doGet invoked,

/ Lees,
https://docs.jboss.org/author/display/WFLY10/Application+deployment
/ hoe deploy met cli

/ Hoe in wildfly web console redeploy war?
/ TODO
/ Lees,
https://www.mkyong.com/maven/maven-deploy-web-application-to-wildfly/


$ vi pom.xml

<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.dvx</groupId>
  <artifactId>dvx</artifactId>
  <version>1.0.0-SNAPSHOT</version>
  <packaging>war</packaging>
  <build>
    <finalName>dvx</finalName>
  </build>
  <dependencies>
    <dependency>
      <groupId>javax</groupId>
      <artifactId>javaee-api</artifactId>
      <scope>provided</scope>
    </dependency>
  </dependencies>
  <dependencyManagement>
    <dependencies>
      <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>7.0</version>
        <scope>provided</scope>
      </dependency>
    </dependencies>
  </dependencyManagement>
  <properties>
    <failOnMissingWebXml>false</failOnMissingWebXml>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
</project>


/ 13	. 


/ ipv dat we een war deploy in een appl server, gaan we nu alles in een uber jar stoppen: de appl en de parts of the appl server die we nodig hebben, zoals JAX-RS,

/ fraction Wildfly Swarm,
Java EE
Netflix OSS (Ribbon, Hystrix, RxJava)
Spring
LogStash
Swagger

/ 1313	. 

/ nu op de nieuwe manier, de andere kant op,

/ de appl, rest endpoint verandert niet, daar gaan we mee verder, 

/ shutdown wildfly,


/ we zijn dus in 
[HelloEndpoint.java]$

[HelloEndpoint.java]$ wildfly-swarm-setup --context-path dvxuk
***SUCCESS*** WildFly Swarm is now set up! Enjoy!

/ we zien een plugin wildfly-swarm-plugin, en de dependency bom-all

$ vi pom.xml

<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.dvx</groupId>
  <artifactId>dvx</artifactId>
  <version>1.0.0-SNAPSHOT</version>
  <packaging>war</packaging>
  <build>
    <finalName>dvx</finalName>
    <plugins>
      <plugin>                                                 / nieuw!
        <groupId>org.wildfly.swarm</groupId>
        <artifactId>wildfly-swarm-plugin</artifactId>
        <version>${version.wildfly-swarm}</version>
        <executions>
          <execution>
            <goals>
              <goal>package</goal>
            </goals>
          </execution>
        </executions>
        <configuration>
          <properties>
            <swarm.context.path>dvx</swarm.context.path>
          </properties>
        </configuration>
      </plugin>
    </plugins>
  </build>
  <dependencies>
    <dependency>
      <groupId>javax</groupId>
      <artifactId>javaee-api</artifactId>
      <scope>provided</scope>
    </dependency>
  </dependencies>
  <dependencyManagement>
    <dependencies>
      <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>7.0</version>
        <scope>provided</scope>
      </dependency>
      <dependency>                                       / nieuw!
        <groupId>org.wildfly.swarm</groupId>
        <artifactId>bom-all</artifactId>
        <version>${version.wildfly-swarm}</version>
        <type>pom</type>
        <scope>import</scope>
      </dependency>
    </dependencies>
  </dependencyManagement>
  <properties>
    <failOnMissingWebXml>false</failOnMissingWebXml>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <version.wildfly-swarm>2017.8.1</version.wildfly-swarm>
  </properties>
</project>


  
[HelloEndpoint.java]$ wildfly-swarm-detect-fractions
***INFO*** Detecting fractions  [1/1] ...
***INFO*** Detected fractions: [org.wildfly.swarm:jaxrs:2017.8.1]
/ Deze moeten we dus add,
  
[HelloEndpoint.java]$ wildfly-swarm-list-fractions
/ lists alle fractions die er zijn,

[HelloEndpoint.java]$  wildfly-swarm-add-fraction jaxrs
/ TODO nodig?

/ als we forge uitgaan, en we willen weer in HelloEndpoint.java komen, 

C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen>forge
Hit '<TAB>' for a list of available commands and 'man [cmd]' for help on a specific command.
To quit the shell, type 'exit'.

[workspace-jbosstools-jee-oxygen]$ cd dvxuk
[dvxuk]$ cd  src/main/java/org/dvxuk/rest/HelloEndpoint.java
[HelloEndpoint.java]$ wildfly-swarm-add-fraction --fractions jaxrs

/ als we NIEt in HelloEndpoint.java zijn, maar in dvxuk, dan geeft code completion NIET wildfly-swarm-add-fraction, alleen wildfly-swarm-list-fractions, 

/ we zien in de pom.xml GEEN jaxrs entry, 

/ als we in eclipse mvn clean verify, dan zien we,

INFO] --- wildfly-swarm-plugin:2017.8.1:package (default) @ dvxuk ---
[INFO] Scanning for needed WildFly Swarm fractions with mode: when_missing
[INFO] Detected fractions: jaxrs:2017.8.1
[INFO] Adding fractions: container:2017.8.1, jaxrs-cdi:2017.8.1, jaxrs:2017.8.1, logging:2017.8.1, security:2017.8.1, undertow:2017.8.1
Resolving 46 out of 206 artifacts
[INFO] Repackaging .war: C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\dvxuk\target\dvxuk.war
[INFO] Fallback file move: C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\dvxuk\target\dvxuk.war
[INFO] Copied C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\dvxuk\target\dvxuk.war to C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\dvxuk\target\dvxuk.war.original
[INFO] Fallback failed to delete, will overwrite existing file: C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\dvxuk\target\dvxuk.war
[INFO] Repackaged .war: C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\dvxuk\target\dvxuk.war
[INFO] ------------------------------------------------------------------------

/ Het ziet er inderdaad naar uit dat hij jaxrs detect, en hem add
/ TODO

/ doe in eclipse
$ mvn clean wildfly-swarm:run

/ we zien in target\dvxuk.war die er al was, maar nu ook dvxuk.swarm.jar
/ TODO Wanneer created?

/ als we jaxrs dep, dan OK
import org.wildfly.swarm.Swarm;
/ TODO


/ 7	. 

/ SAMENVATTING FORGE COMMAND LINE

https://www.youtube.com/watch?v=5BvJVAlZyvo

C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen>forge
[workspace-jbosstools-jee-oxygen]$ project-new --named dvx3 --stack JAVA_EE_7 --type wildfly-swarm
[dvx3]$ rest-new-endpoint --named MyEndpoint
[MyEndpoint.java]$ wildfly-swarm-add-fraction --fractions jaxrs
[Main.java]$ wildfly-swarm-run										/ stop met ctlr-C, en geef opnieuw om te restart,
/ geef: localhost:8080/rest/my

/ met $ project-new --type wildfly-swarm hoeven we niet later $ wildfly-swarm-setup 

/ we kunnen ook,
$ wildfly-swarm-new-main-class
$ wildfly-swarm-setup --context-path dvx3
/ wildfly-swarm-new-main-class is voor als je wilt debug TODO
/ met een context-path verandert de url, we moeten geven: localhost:8080/dvx3/rest/my

/ in de pom zien we in de wildfly-swarm plugin of
/ de main class
/ of de context path
/ of niets (als we niets deden , dus niet main class en niet context path), 


/ verander iets in de rest endpoint, restart wildfly-swarm, we zien de verandering	, 

/ 13	. 

/ we doen het allemaal nog een keer,

[workspace-jbosstools-jee-oxygen]$ project-new --named rtd --stack JAVA_EE_7
[rtd]$ rest-new-endpoint --named MyEndpoint
[RtdEndpoint.java]$ build				/ doet mvn clean install
/ start wildfly, deploy rtd.war met GUI 
/ geef localhost:8080/rtd/rest/my
/ stop wildfly
[RtdEndpoint.java]$ wildfly-swarm-setup  --context-path rtd
[RtdEndpoint.java]$ wildfly-swarm-detect-fractions
[RtdEndpoint.java]$ wildfly-swarm-add-fraction --fractions jaxrs
[RtdEndpoint.java]$ wildfly-swarm-run
...
2017-09-06 09:59:37,191 INFO  [org.jboss.as.server] (main) WFLYSRV0010: Deployed "rtd.war" (runtime-name : "rtd.war")
2017-09-06 09:59:37,193 INFO  [org.wildfly.swarm] (main) WFSWARM99999: WildFly Swarm is Ready
/ geef localhost:8080/rtd/rest/my
[RtdEndpoint.java]$ wildfly-swarm-new-main-class
[Main.java]$ wildfly-swarm-run
/ geef localhost:8080/rest/my			/ het context path is verdwenen	, het is of context path of main, TODO

/ in de wildfly-swarm-plugin,
        <configuration>
          <mainClass>org.rtd.Main</mainClass>
        </configuration>
		
/ als we weer context-path geven, verdwijnt Main,
[RtdEndpoint.java]$ wildfly-swarm-setup --context-path rtd
/ in de wildfly-swarm-plugin,
        <configuration>
          <properties>
            <swarm.context.path>rtd</swarm.context.path>
          </properties>
        </configuration>
		
/ we kunnen ook geen context-path en geen main,

[RtdEndpoint.java]$ wildfly-swarm-setup           / in de wildfly-swarm-plugin geen context path en geen main,
[RtdEndpoint.java]$ wildfly-swarm-run
/ geef localhost:8080/rest/my-app

/ 13	. 

/ notes

/ 1313	. 

/ we werken niet in 'Forge Console' view, maar op de command line,  en import het project in eclipse,

/ 1313	. 

/ Na wildfly-swarm-add-fraction --fractions jaxrs,
$ vi pom.xml

<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.dvx3</groupId>
  <artifactId>dvx3</artifactId>
  <version>1.0.0-SNAPSHOT</version>
  <packaging>war</packaging>
  <build>
    <finalName>dvx3</finalName>
    <plugins>
      <plugin>
        <groupId>org.wildfly.swarm</groupId>
        <artifactId>wildfly-swarm-plugin</artifactId>
        <version>${version.wildfly-swarm}</version>
        <executions>
          <execution>
            <goals>
              <goal>package</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
  <dependencies>
    <dependency>
      <groupId>javax</groupId>
      <artifactId>javaee-api</artifactId>
      <scope>provided</scope>
    </dependency>
    <dependency>                                          / !
      <groupId>org.wildfly.swarm</groupId>
      <artifactId>jaxrs</artifactId>
    </dependency>
  </dependencies>
  <dependencyManagement>
    <dependencies>
      <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>7.0</version>
        <scope>provided</scope>
      </dependency>
      <dependency>
        <groupId>org.wildfly.swarm</groupId>
        <artifactId>bom-all</artifactId>
        <version>${version.wildfly-swarm}</version>
        <type>pom</type>
        <scope>import</scope>
      </dependency>
    </dependencies>
  </dependencyManagement>
  <properties>
    <failOnMissingWebXml>false</failOnMissingWebXml>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <version.wildfly-swarm>2017.8.1</version.wildfly-swarm>
  </properties>
</project>

/ dit is de pom als we NIET $ wildfly-swarm-setup --context-path  of $ wildfly-swarm-new-main-class 
/ als we een van de 2 doen, dan zien we in de pom 1 van de 2 in de wildfly-swarm-plugin
/ het is of het een of het ander, of niets,

[MyEndpoint.java]$ wildfly-swarm-setup --context-path dvx6

      <plugin>
        <groupId>org.wildfly.swarm</groupId>
        <artifactId>wildfly-swarm-plugin</artifactId>
        <version>${version.wildfly-swarm}</version>
        <executions>
          <execution>
            <goals>
              <goal>package</goal>
            </goals>
          </execution>
        </executions>
        <configuration>
          <properties>
            <swarm.context.path>dvx6</swarm.context.path>
          </properties>
        </configuration>
      </plugin>
	  
[MyEndpoint.java]$ wildfly-swarm-new-main-class

      <plugin>
        <groupId>org.wildfly.swarm</groupId>
        <artifactId>wildfly-swarm-plugin</artifactId>
        <version>${version.wildfly-swarm}</version>
        <executions>
          <execution>
            <goals>
              <goal>package</goal>
            </goals>
          </execution>
        </executions>
        <configuration>
          <mainClass>org.dvx6.Main</mainClass>
        </configuration>
      </plugin>
	  
	  



/ 1313	. 

[Main.java]$ wildfly-swarm-run
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building dvx3 1.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] >>> wildfly-swarm-plugin:2017.8.1:run (default-cli) > package @ dvx3 >>>
[INFO]
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ dvx3 ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 0 resource
[INFO]
[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ dvx3 ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 3 source files to C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\dvx3\target\classes
[INFO]
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ dvx3 ---
[INFO] Not copying test resources
[INFO]
[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ dvx3 ---
[INFO] Not compiling test sources
[INFO]
[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ dvx3 ---
[INFO] Tests are skipped.
[INFO]
[INFO] --- maven-war-plugin:2.2:war (default-war) @ dvx3 ---
[INFO] Packaging webapp
[INFO] Assembling webapp [dvx3] in [C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\dvx3\target\dvx3]
[INFO] Processing war project
[INFO] Copying webapp resources [C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\dvx3\src\main\webapp]
[INFO] Webapp assembled in [203 msecs]
[INFO] Building war: C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\dvx3\target\dvx3.war
[INFO]
[INFO] --- wildfly-swarm-plugin:2017.8.1:package (default) @ dvx3 ---
[WARNING]
------
Custom main() usage is intended to be deprecated in a future release and is no longer supported,
please refer to http://reference.wildfly-swarm.io for YAML configuration that replaces it.
------
Resolving 46 out of 206 artifacts
[INFO] Repackaging .war: C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\dvx3\target\dvx3.war
[INFO] Repackaged .war: C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\dvx3\target\dvx3.war
[INFO]
[INFO] <<< wildfly-swarm-plugin:2017.8.1:run (default-cli) < package @ dvx3 <<<
[INFO]
[INFO]
[INFO] --- wildfly-swarm-plugin:2017.8.1:run (default-cli) @ dvx3 ---
[WARNING]
------
Custom main() usage is intended to be deprecated in a future release and is no longer supported,
please refer to http://reference.wildfly-swarm.io for YAML configuration that replaces it.
------
[INFO] Starting .war
Mon Sep 04 05:50:06 GMT+01:00 2017 INFO [org.wildfly.swarm.bootstrap] (main) Dependencies not bundled; resolving from M2REPO.
2017-09-04 05:50:07,853 INFO  [org.wildfly.swarm] (main) WFSWARM0013: Installed fraction:                  Logging - STABLE
     org.wildfly.swarm:logging:2017.8.1
2017-09-04 05:50:07,860 INFO  [org.wildfly.swarm] (main) WFSWARM0013: Installed fraction:                 Undertow - STABLE
     org.wildfly.swarm:undertow:2017.8.1
2017-09-04 05:50:07,860 INFO  [org.wildfly.swarm] (main) WFSWARM0013: Installed fraction:                   JAX-RS - STABLE
     org.wildfly.swarm:jaxrs:2017.8.1
2017-09-04 05:50:09,371 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final
2017-09-04 05:50:09,431 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0049: WildFly Swarm 2017.8.1 (WildFly Core 2.2.1.Fi
nal) starting
2017-09-04 05:50:09,475 INFO  [org.wildfly.swarm] (MSC service thread 1-6) WFSWARM0019: Install MSC service for command line arg
s: []
2017-09-04 05:50:09,977 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 10) WFLYNAM0001: Activating Naming Subsystem
2017-09-04 05:50:09,977 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 12) WFLYSEC0002: Activating Security Subsyst
em
2017-09-04 05:50:09,985 INFO  [org.wildfly.extension.io] (ServerService Thread Pool -- 16) WFLYIO001: Worker 'default' has auto-
configured to 16 core threads with 128 task threads based on your 8 available processors
2017-09-04 05:50:09,987 INFO  [org.jboss.as.security] (MSC service thread 1-3) WFLYSEC0001: Current PicketBox version=4.9.6.Fina
l
2017-09-04 05:50:10,006 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-4) WFLYUT0003: Undertow 1.4.11.Final starti
ng
2017-09-04 05:50:10,023 INFO  [org.jboss.as.naming] (MSC service thread 1-6) WFLYNAM0003: Starting Naming Service
2017-09-04 05:50:10,040 INFO  [org.xnio] (MSC service thread 1-5) XNIO version 3.4.3.Final
2017-09-04 05:50:10,049 INFO  [org.xnio.nio] (MSC service thread 1-5) XNIO NIO Implementation Version 3.4.3.Final
2017-09-04 05:50:10,111 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-3) WFLYUT0012: Started server default-serve
r.
2017-09-04 05:50:10,232 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-1) WFLYUT0006: Undertow HTTP listener defau
lt listening on [0:0:0:0:0:0:0:0]:8080
2017-09-04 05:50:10,291 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Swarm 2017.8.1 (WildFly Core 2.2.1.Fi
nal) started in 953ms - Started 70 of 77 services (14 services are lazy, passive or on-demand)
2017-09-04 05:50:10,780 INFO  [org.wildfly.swarm.runtime.deployer] (main) deploying dvx3.war
2017-09-04 05:50:10,799 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-8) WFLYSRV0027: Starting deployment of "dvx
3.war" (runtime-name: "dvx3.war")
2017-09-04 05:50:11,474 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-6) WFLYUT0018: Host default-host starting
2017-09-04 05:50:11,675 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 6) RESTEASY002225: Deployin
g javax.ws.rs.core.Application: class org.dvx3.rest.RestApplication
2017-09-04 05:50:11,694 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 6) WFLYUT0021: Registered web conte
xt: /
2017-09-04 05:50:11,732 INFO  [org.jboss.as.server] (main) WFLYSRV0010: Deployed "dvx3.war" (runtime-name : "dvx3.war")
2017-09-04 05:50:11,733 INFO  [org.wildfly.swarm] (main) WFSWARM99999: WildFly Swarm is Ready

/ Einde SAMENVATTING FORGE COMMAND LINE

/ SAMENVATTING FORGE COMMAND GUI

/ See
https://www.youtube.com/watch?v=ebcnOopZFWs

/ 13	. 

/ Als we $ project-new --type wildfly-swarm doen, hoeven we GEEN wildfly-swarm-setup te doen	,

/ we geven in de GUI ook --type wildfly-swarm,

[workspace-jbosstools-jee-oxygen]$ project-new --named dvx4 --stack JAVA_EE_7 --type wildfly-swarm 
[dvx4]$ rest-new-endpoint --named MyEndpoint
[dvx4]$ wildfly-swarm-add-fraction --fractions jaxrs
[dvx4]$ wildfly-swarm-new-main-class
[Main.java]$ wildfly-swarm-run
/ Geef localhost:8080/rest/my

/ 131313. 

/ we kunnen 3 dingen doen	,
[Main.java]$ wildfly-swarm-new-main-class
/ of,
[Main.java]$ wildfly-swarm-setup --context-path dvx5
/ of
/ niets
/ we kunnen in alle 3 de gevallen 
$ wildfly-swarm-run

/ bij de 1ste en 3de geef
localhost:8080/rest/my
/ bij de 2de geef
localhost:8080/dvx5/rest/my

/ we moeten 1 keer de maven project import, daarna bij ieder command in forge wordt de pom.xml update, we hoeven geen refresh te doen,

/ we zien dat in de pom of de main class er staat, of de context path, of niets,

/ na $ wildfly-swarm-setup --context-path dvx5
$ vi pom.xml
     <plugin>
        <groupId>org.wildfly.swarm</groupId>
        <artifactId>wildfly-swarm-plugin</artifactId>
        <version>${version.wildfly-swarm}</version>
        <executions>
          <execution>
            <goals>
              <goal>package</goal>
            </goals>
          </execution>
        </executions>
        <configuration>
          <properties>
            <swarm.context.path>dvx5</swarm.context.path>
          </properties>
        </configuration>
      </plugin>
	  
/ na $ wildfly-swarm-new-main-class,

   <plugins>
      <plugin>
        <groupId>org.wildfly.swarm</groupId>
        <artifactId>wildfly-swarm-plugin</artifactId>
        <version>${version.wildfly-swarm}</version>
        <executions>
          <execution>
            <goals>
              <goal>package</goal>
            </goals>
          </execution>
        </executions>
        <configuration>
          <mainClass>org.dvx5.Main</mainClass>
        </configuration>
      </plugin>




/ Einde SAMENVATTING FORGE COMMAND GUI

/ 7	. 

ctrl+4, filter op new
Project Generation Project New
Java EE/JAX-RS REST:New Endpoint
Wildfly Swarm Wilfly Swarm:New Main Class

/ we gaan ze alle 3 use, 
/ bij Project New kun je in het 2de scherm de fractions add, maar als je dat vergeet, kun je dat later ook met 
Wildfly Swarm Wilfly Swarm:Add Fraction

/ we zien in ctrl-4 NIET wildfly-swarm-run









/ 13	. 


[HelloEndpoint.java]$ addon-
addon-add-dependency            addon-install-from-git          addon-remove                    addon-watch-start               
addon-build-and-install         addon-list                      addon-search                    
addon-install                   addon-new-annotated-ui-command  addon-test-setup                
addon-install-from-catalog      addon-new-ui-command            addon-update                    

/13. 	

Introduced addon-search and addon-install-from-catalog: Its now possible to query the available addons in http://forge.jboss.org/addons using the addon-search command and install them using the addon-install-from-catalog --addon <addonId>:

[bin]$ addon-search wildfly

¦org.jboss.forge.addon:wildfly-swarm¦WildFly Swarm¦Create self-contained Java microservices based upon the normal WildFly application-server.¦
¦org.jboss.forge.addon:jboss-as     ¦WildFly AS   ¦Deployment and control for JBoss Wildfly and EAP                                          ¦

Yes, we also introduced a nice tabular text format API in the text addon. More info in https://github.com/inamik/java_text_tables

[bin]$ addon-install-from-catalog --addon org.jboss.forge.addon:wildfly-swarm
addon-install-from-git --url https://github.com/forge/wildfly-swarm-addon.git --coordinate org.jboss.forge.addon:wildfly-swarm
...

/ 	13	. 

/ subscribed to forge-users@lists.jboss.org


/ 13	. 

/ ga naar,
forge.jboss.org/addons

/ daar zien we alle addons,

/ de core addons, zijn die al installed?
 / TODO



/ 13	. 

/ Lees,
https://docs.jboss.org/tools/4.0.1.Final/en/forge_reference/html_single/index.html

/ open forge command line in eclipse, met de view 'Forge Console'

/ 7	. 

/ lees,
http://forge.jboss.org/document/hands-on-lab

/ 7	. 

/ lees,
http://forge.jboss.org/documentation

/ 7	. 

/ kijk,
https://www.youtube.com/watch?v=tMh_kpSQlGA


/ 7	. 

http://forge.jboss.org/addon/org.jboss.forge.addon:wildfly-swarm

/ Hier zien we ook de video die alles met ctrl+4 doet, 
https://www.youtube.com/watch?time_continue=14&v=ebcnOopZFWs

/ maar we lezen en use de command line in 'Forge Console' view in eclipse,

[HelloEndpoint.java]$ project-new  --named you --type wildfly-swarm --stack JAVA_EE_7 
***SUCCESS*** Project named 'you' has been created.
***SUCCESS*** Stack 'Java EE 7' installed in project
***SUCCESS*** WildFly Swarm is now set up! Enjoy!

/ WH overbodig	,
[you]$ wildfly-swarm-setup 
***SUCCESS*** WildFly Swarm is now set up! Enjoy!

[MyEndpoint.java]$ wildfly-swarm-detect-fractions --depend 
***INFO*** Detecting fractions 	[1/2] ...
***INFO*** Detected fractions: [org.wildfly.swarm:jaxrs:2017.8.1, org.wildfly.swarm:cdi:2017.8.1]
***INFO*** Adding missing fractions as project dependencies... 	[2/2] ...
***INFO*** Installing the following dependencies: [org.wildfly.swarm:jaxrs:2017.8.1, org.wildfly.swarm:cdi:2017.8.1]
[MyEndpoint.java]$ 

$ vi pom.xml

  <dependencies>
    <dependency>
      <groupId>javax</groupId>
      <artifactId>javaee-api</artifactId>       / was er al,
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>org.wildfly.swarm</groupId>		/ nieuw	,
      <artifactId>jaxrs</artifactId>
    </dependency>
    <dependency>
      <groupId>org.wildfly.swarm</groupId>			/ nieuw	,
      <artifactId>cdi</artifactId>
    </dependency>
  </dependencies>










/ Einde JBOSSTOOLS FORGE WILDFLY SWARM

/ FORGE

/ 7	.  

/ Kijk, in jboss tools news,
https://developer.jboss.org/blogs/weekly-editorial/2017/07/13/this-week-in-jboss-13th-july-2017?_sscc=t
->
/ kijk naar Hystrix,
https://medium.com/netflix-techblog/introducing-hystrix-for-resilience-engineering-13531c1ab362
/ kijk naar Ribbon, for client-side load balancing
https://www.youtube.com/watch?v=rsrYZ5cEySE	/ javainuse.com/spring/springcloud

/ kijk
http://www.hawkular.org/blog/2017/07/opentracing-jaxrs.html




/ 7	 .

/ Ga naar, 
http://forge.jboss.org/documentation

http://forge.jboss.org/document/sample-forge-usage-tasks

/ 13	. 

/ custom package

[workspace-jbosstools-jee-oxygen]$ project-new --named example --top-level-package org.mycomp.myapp --stack JAVA_EE_7 --type war
 --final-name myExample
 
$ vi pom.xml
<project>
  <groupId>org.mycomp.myapp</groupId>
  <artifactId>example</artifactId>
  <version>1.0.0-SNAPSHOT</version>
  <packaging>war</packaging>
  <build>
    <finalName>myExample</finalName>
  </build>

/ en, in src/main/java is er package org.mycomp.myapp	,

[workspace-jbosstools-jee-oxygen]$ project-new --named example2 --stack JAVA_EE_7

<project>
  <groupId>org.example2</groupId>
  <artifactId>example2</artifactId>
  <version>1.0.0-SNAPSHOT</version>
  <packaging>war</packaging>
  <build>
    <finalName>example2</finalName>
  </build>

/ en in src/main/java is er package org.example2	,

/ --type war is de default; als we --type wildfly-swarm, zien we een wildfly-swarm-plugin in pom.xml	,


/ 13	. 

/ EXAMPLE VANAVOND

/ jpa

[workspace-jbosstools-jee-oxygen]$ project-new --named example --stack JAVA_EE_7

[example]$ jpa-new-entity --named SampleEntity

/ omdat project example heet, en we jpa doen, komt SampleEntity in package org.example.model	, 
/ een rest endpoint komt in org.example.rest package,

***SUCCESS*** Persistence (JPA) is installed.
***SUCCESS*** JPA Entity org.example.model.SampleEntity was created

/ als we lombok use, blijft er over,

$ vi SampleEntity.java

package org.example.model;

import javax.persistence.Entity;
import java.io.Serializable;
import javax.persistence.Id;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Column;
import javax.persistence.Version;

import lombok.Data;

@Entity
@Data
public class SampleEntity2 implements Serializable {

	private static final long serialVersionUID = 1L;
	@Id
	@GeneratedValue(strategy = GenerationType.AUTO)
	@Column(name = "id", updatable = false, nullable = false)
	private Long id;
	@Version
	@Column(name = "version")
	private int version;


}

[SampleEntity.java]$ jpa-new-field --named sampleField

/ we zien 
@Entity
public class SampleEntity implements Serializable {

	@Column
	private String sampleField;
	
/ + getter/setter	,

[SampleEntity.java]$ jpa-new-field --named createdOn --type java.util.Date --temporal-type TIMESTAMP

import javax.persistence.Temporal;
import javax.persistence.TemporalType;
	@Column
	@Temporal(TemporalType.TIMESTAMP)
	private Date createdOn;
/ Temporal type geeft WH de type in db waarop java.util.Date mapped wordt.

/ 13	. 

/ n-to-n relationship

[SampleEntity.java]$ jpa-new-entity --named Continent
[Continent.java]$ jpa-new-entity --named Hurricane
[Hurricane.java]$ jpa-new-field --named hurricanes --type org.example.model.Hurricane --relationship-type Many-to-Many --inverse
-field-name continents

$ vi Hurricane.java
public class Hurricane implements Serializable {
	...
	@ManyToMany(mappedBy = "continents")
	private Set<Hurricane> hurricanes = new HashSet<Hurricane>();
	@ManyToMany
	private Set<Hurricane> continents = new HashSet<Hurricane>();

/ Continent.java is like always,

/ de field hurricanes had ik in Continent verwacht, 
/ TODO

/ 13	. 

/ validation

[model]$ cd C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\example
[example]$ pwd
C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\example              // example is het project,

[example]$ jpa-new-entity --named Speaker

/ 

/ we moeten als we een entity create het project in eclipse refresh, 
/ als we een field add, dan hoeven we niets te doen, eclipse wordt update,

[Speaker.java]$ jpa-new-field --named firstname
[Speaker.java]$ jpa-new-field --named surname
[Speaker.java]$ jpa-new-field --named bio --length 2000
[Speaker.java]$ jpa-new-field --named twitter
[Speaker.java]$ constraint-add --on-property firstname --constraint NotNull
[Speaker.java]$ constraint-add --on-property surname --constraint NotNull
[Speaker.java]$ constraint-add --on-property bio --constraint Size --max 2000

package org.example.model;

import javax.persistence.Entity;
import java.io.Serializable;
import javax.persistence.Id;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Column;
import javax.persistence.Version;
import javax.validation.constraints.NotNull;
import javax.validation.constraints.Size;

@Entity
public class Speaker implements Serializable {

	private static final long serialVersionUID = 1L;
	@Id
	@GeneratedValue(strategy = GenerationType.AUTO)
	@Column(name = "id", updatable = false, nullable = false)
	private Long id;
	@Version
	@Column(name = "version")
	private int version;

	@Column
	@NotNull
	private String firstname;

	@Column
	@NotNull
	private String surname;

	@Column(length = 2000)
	@Size(max = 2000)
	private String bio;

	@Column
	private String twitter;

	public Long getId() {
		return this.id;
	}

	public void setId(final Long id) {
		this.id = id;
	}

	public int getVersion() {
		return this.version;
	}

	public void setVersion(final int version) {
		this.version = version;
	}

	@Override
	public boolean equals(Object obj) {
		if (this == obj) {
			return true;
		}
		if (!(obj instanceof Speaker)) {
			return false;
		}
		Speaker other = (Speaker) obj;
		if (id != null) {
			if (!id.equals(other.id)) {
				return false;
			}
		}
		return true;
	}

	@Override
	public int hashCode() {
		final int prime = 31;
		int result = 1;
		result = prime * result + ((id == null) ? 0 : id.hashCode());
		return result;
	}

	public String getFirstname() {
		return firstname;
	}

	public void setFirstname(String firstname) {
		this.firstname = firstname;
	}

	public String getSurname() {
		return surname;
	}

	public void setSurname(String surname) {
		this.surname = surname;
	}

	public String getBio() {
		return bio;
	}

	public void setBio(String bio) {
		this.bio = bio;
	}

	public String getTwitter() {
		return twitter;
	}

	public void setTwitter(String twitter) {
		this.twitter = twitter;
	}

	@Override
	public String toString() {
		String result = getClass().getSimpleName() + " ";
		if (firstname != null && !firstname.trim().isEmpty())
			result += "firstname: " + firstname;
		if (surname != null && !surname.trim().isEmpty())
			result += ", surname: " + surname;
		if (bio != null && !bio.trim().isEmpty())
			result += ", bio: " + bio;
		if (twitter != null && !twitter.trim().isEmpty())
			result += ", twitter: " + twitter;
		return result;
	}
}

/ 13	. 

/ rest



[SampleEntity.java]$ rest-generate-endpoints-from-entities --targets org.example.model.SampleEntity

$ vi SampleEntity.java

package org.example.model;
@Entity
@XmlRootElement																			// !
public class SampleEntity implements Serializable {

$ vi SampleEntityRestEndpoint.java

package org.example.rest;

import java.util.List;

import javax.ejb.Stateless;
import javax.persistence.EntityManager;
import javax.persistence.NoResultException;
import javax.persistence.OptimisticLockException;
import javax.persistence.PersistenceContext;
import javax.persistence.TypedQuery;
import javax.ws.rs.Consumes;
import javax.ws.rs.DELETE;
import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.PUT;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.ws.rs.QueryParam;
import javax.ws.rs.core.Response;
import javax.ws.rs.core.Response.Status;
import javax.ws.rs.core.UriBuilder;
import org.example.model.SampleEntity;

/**
 * 
 */
@Stateless
@Path("/sampleentities")
public class SampleEntityEndpoint {
	@PersistenceContext(unitName = "example-persistence-unit")
	private EntityManager em;

	@POST
	@Consumes("application/json")
	public Response create(SampleEntity entity) {
		em.persist(entity);
		return Response.created(
				UriBuilder.fromResource(SampleEntityEndpoint.class)
						.path(String.valueOf(entity.getId())).build()).build();
	}

	@DELETE
	@Path("/{id:[0-9][0-9]*}")
	public Response deleteById(@PathParam("id") Long id) {
		SampleEntity entity = em.find(SampleEntity.class, id);
		if (entity == null) {
			return Response.status(Status.NOT_FOUND).build();
		}
		em.remove(entity);
		return Response.noContent().build();
	}

	@GET
	@Path("/{id:[0-9][0-9]*}")
	@Produces("application/json")
	public Response findById(@PathParam("id") Long id) {
		TypedQuery<SampleEntity> findByIdQuery = em
				.createQuery(
						"SELECT DISTINCT s FROM SampleEntity s WHERE s.id = :entityId ORDER BY s.id",
						SampleEntity.class);
		findByIdQuery.setParameter("entityId", id);
		SampleEntity entity;
		try {
			entity = findByIdQuery.getSingleResult();
		} catch (NoResultException nre) {
			entity = null;
		}
		if (entity == null) {
			return Response.status(Status.NOT_FOUND).build();
		}
		return Response.ok(entity).build();
	}

	@GET
	@Produces("application/json")
	public List<SampleEntity> listAll(
			@QueryParam("start") Integer startPosition,
			@QueryParam("max") Integer maxResult) {
		TypedQuery<SampleEntity> findAllQuery = em.createQuery(
				"SELECT DISTINCT s FROM SampleEntity s ORDER BY s.id",
				SampleEntity.class);
		if (startPosition != null) {
			findAllQuery.setFirstResult(startPosition);
		}
		if (maxResult != null) {
			findAllQuery.setMaxResults(maxResult);
		}
		final List<SampleEntity> results = findAllQuery.getResultList();
		return results;
	}

	@PUT
	@Path("/{id:[0-9][0-9]*}")
	@Consumes("application/json")
	public Response update(@PathParam("id") Long id, SampleEntity entity) {
		if (entity == null) {
			return Response.status(Status.BAD_REQUEST).build();
		}
		if (id == null) {
			return Response.status(Status.BAD_REQUEST).build();
		}
		if (!id.equals(entity.getId())) {
			return Response.status(Status.CONFLICT).entity(entity).build();
		}
		if (em.find(SampleEntity.class, id) == null) {
			return Response.status(Status.NOT_FOUND).build();
		}
		try {
			entity = em.merge(entity);
		} catch (OptimisticLockException e) {
			return Response.status(Response.Status.CONFLICT)
					.entity(e.getEntity()).build();
		}

		return Response.noContent().build();
	}
}

$ vi RestApplication.java

package org.example.rest;

import javax.ws.rs.core.Application;
import javax.ws.rs.ApplicationPath;

@ApplicationPath("/rest")
public class RestApplication extends Application {
}


/ 7	. 

/ bookStore


/ rest, maar van andere site,

/ Lees,
https://stackify.com/how-to-build-microservices-with-java-ee-and-jbossforge/

/ en, 
https://forge.jboss.org/document/write-a-java-ee-rest-application---basic

/ we zijn in example project,

[workspace-jbosstools-jee-oxygen]$ project-new --named bookStore --stack JAVA_EE_7
[bookStore]$ wildfly-swarm-setup				/ we waren vergeten --type wildfly-swarm te geven aan project-new,
/ je kunt NIET ook nog een keer geven: project-new --named bookStore --stack JAVA_EE_7 --type wildfly-swarm, want dan maak je een BookStore project in het al bestaande BookStore project,
[bookStore]$ jpa-new-entity --named Book
/ we moeten eclipse refresh om Book te zien,
[Book.java]$ jpa-new-field --named title
[Book.java]$ jpa-new-field --named publishingDate --type java.time.LocalDate

$ vi Book.java

package org.bookStore.model;
@Entity
public class Book implements Serializable {
	private static final long serialVersionUID = 1L;
	@Id
	@GeneratedValue(strategy = GenerationType.AUTO)
	@Column(name = "id", updatable = false, nullable = false)
	private Long id;
	@Version
	@Column(name = "version")
	private int version;

	@Column
	private String title;
	
$ vi persistence.xml

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<persistence xmlns="http://xmlns.jcp.org/xml/ns/persistence" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.1" 
	xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/persistence 												http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd">
  <persistence-unit name="bookStore-persistence-unit" transaction-type="JTA">
    <description>Forge Persistence Unit</description>
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>java:jboss/datasources/ExampleDS</jta-data-source>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties>
      <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
      <property name="hibernate.show_sql" value="true"/>
      <property name="hibernate.format_sql" value="true"/>
      <property name="hibernate.transaction.flush_before_completion" value="true"/>
      <property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect"/>
    </properties>
  </persistence-unit>
</persistence>

/ Intermezzo

/ In de bom-all.pom van wildfly-swarm zien we geen hibernate.
/ Lees, 
https://docs.jboss.org/hibernate/orm/5.2/topical/html_single/wildfly/Wildfly.html

The WildFly application server includes Hibernate ORM as the default JPA provider out of the box.
This means that you dont need to package Hibernate ORM with the applications you deploy on WildFly, instead the application server will automatically enable Hibernate support if it detects that your application is using JPA.

/ Maar in bom-all.pom zien we ook geen <scope>provided</scope> van hibernate, 
/ TODO

C:\Users\ervelden\.m2\repository\org\wildfly>dir *hibernate* /s

 Directory of C:\Users\ervelden\.m2\repository\org\wildfly\jipijapa-hibernate5\10.1.0.Final
03-09-2017  19:18            93.841 jipijapa-hibernate5-10.1.0.Final.jar
03-09-2017  19:17               731 jipijapa-hibernate5-10.1.0.Final.jar.lastUpdated
03-09-2017  19:18                40 jipijapa-hibernate5-10.1.0.Final.jar.sha1

/ swarm is naast jipijapa-hibernate5, WH maakt hij zo gebruik van jar's in wildfly
/ TODO

/ Einde Intermezzo

[BookEndpoint.java]$ rest-generate-endpoints-from-entities --targets org.example.model.Book
/ --content-type application/json is de default, 

/ we kunnen ook,
[BookEndpoint.java]$ rest-generate-endpoints-from-entities --targets org.example.model.Book --content-type application/xml
[BookEndpoint.java]$ rest-generate-endpoints-from-entities --targets org.example.model.Book --content-type application/js
/ we kunnen deze achter elkaar doen, hij maakt BookEndpoint.java opnieuw	, 

/ In Book.java komt altijd @XmlRootelement	, 
/ TODO

$ vi Book.java

package org.bookStore.model;
@Entity
@XmlRootElement
public class Book implements Serializable {

/ Als je --content-type application/xml, dan zien we 	,
	@Consumes("application/xml")
/ Als je --content-type application/json, dan zien we 	,
	@Consumes("application/json")

$ vi BookEndpoint.java

package org.bookStore.rest;

import java.util.List;

import javax.ejb.Stateless;
import javax.persistence.EntityManager;
import javax.persistence.NoResultException;
import javax.persistence.OptimisticLockException;
import javax.persistence.PersistenceContext;
import javax.persistence.TypedQuery;
import javax.ws.rs.Consumes;
import javax.ws.rs.DELETE;
import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.PUT;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.ws.rs.QueryParam;
import javax.ws.rs.core.Response;
import javax.ws.rs.core.Response.Status;
import javax.ws.rs.core.UriBuilder;
import org.example.model.Book;

/**
 * 
 */
@Stateless
@Path("/books")
public class BookEndpoint {
	@PersistenceContext(unitName = "example-persistence-unit")
	private EntityManager em;

	@POST
	@Consumes("application/json")
	public Response create(Book entity) {
		em.persist(entity);
		return Response.created(
				UriBuilder.fromResource(BookEndpoint.class)
						.path(String.valueOf(entity.getId())).build()).build();
	}

	@DELETE
	@Path("/{id:[0-9][0-9]*}")
	public Response deleteById(@PathParam("id") Long id) {
		Book entity = em.find(Book.class, id);
		if (entity == null) {
			return Response.status(Status.NOT_FOUND).build();
		}
		em.remove(entity);
		return Response.noContent().build();
	}

	@GET
	@Path("/{id:[0-9][0-9]*}")
	@Produces("application/json")
	public Response findById(@PathParam("id") Long id) {
		TypedQuery<Book> findByIdQuery = em
				.createQuery(
						"SELECT DISTINCT b FROM Book b WHERE b.id = :entityId ORDER BY b.id",
						Book.class);
		findByIdQuery.setParameter("entityId", id);
		Book entity;
		try {
			entity = findByIdQuery.getSingleResult();
		} catch (NoResultException nre) {
			entity = null;
		}
		if (entity == null) {
			return Response.status(Status.NOT_FOUND).build();
		}
		return Response.ok(entity).build();
	}

	@GET
	@Produces("application/json")
	public List<Book> listAll(@QueryParam("start") Integer startPosition,
			@QueryParam("max") Integer maxResult) {
		TypedQuery<Book> findAllQuery = em.createQuery(
				"SELECT DISTINCT b FROM Book b ORDER BY b.id", Book.class);
		if (startPosition != null) {
			findAllQuery.setFirstResult(startPosition);
		}
		if (maxResult != null) {
			findAllQuery.setMaxResults(maxResult);
		}
		final List<Book> results = findAllQuery.getResultList();
		return results;
	}

	@PUT
	@Path("/{id:[0-9][0-9]*}")
	@Consumes("application/json")
	public Response update(@PathParam("id") Long id, Book entity) {
		if (entity == null) {
			return Response.status(Status.BAD_REQUEST).build();
		}
		if (id == null) {
			return Response.status(Status.BAD_REQUEST).build();
		}
		if (!id.equals(entity.getId())) {
			return Response.status(Status.CONFLICT).entity(entity).build();
		}
		if (em.find(Book.class, id) == null) {
			return Response.status(Status.NOT_FOUND).build();
		}
		try {
			entity = em.merge(entity);
		} catch (OptimisticLockException e) {
			return Response.status(Response.Status.CONFLICT)
					.entity(e.getEntity()).build();
		}

		return Response.noContent().build();
	}
}

$ vi RestApplication.java

package org.bookStore.rest;

import javax.ws.rs.core.Application;
import javax.ws.rs.ApplicationPath;

@ApplicationPath("/rest")
public class RestApplication extends Application {
}

[BookEndpoint.java]$  wildfly-swarm-run
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building bookStore 1.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] >>> wildfly-swarm-plugin:2017.8.1:run (default-cli) > package @ bookStore >>>
[INFO]
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ bookStore ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO]
[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ bookStore ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 3 source files to C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\bookStore\target\classes
[INFO]
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ bookStore ---
[INFO] Not copying test resources
[INFO]
[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ bookStore ---
[INFO] Not compiling test sources
[INFO]
[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ bookStore ---
[INFO] Tests are skipped.
[INFO]
[INFO] --- maven-war-plugin:2.2:war (default-war) @ bookStore ---
[INFO] Packaging webapp
[INFO] Assembling webapp [bookStore] in [C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\bookStore\target\bookStore]
[INFO] Processing war project
[INFO] Copying webapp resources [C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\bookStore\src\main\webapp]
[INFO] Webapp assembled in [30 msecs]
[INFO] Building war: C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\bookStore\target\bookStore.war
[INFO]
[INFO] --- wildfly-swarm-plugin:2017.8.1:package (default) @ bookStore ---
[INFO] Scanning for needed WildFly Swarm fractions with mode: when_missing
[INFO] Detected fractions: ejb:2017.8.1, jaxrs-jaxb:2017.8.1, jpa:2017.8.1, undertow:2017.8.1
[INFO] Adding fractions: container:2017.8.1, datasources:2017.8.1, ee:2017.8.1, ejb:2017.8.1, io:2017.8.1, jaxrs-jaxb:2017.8.1,
jaxrs:2017.8.1, jca:2017.8.1, jpa:2017.8.1, logging:2017.8.1, request-controller:2017.8.1, security:2017.8.1, undertow:2017.8.1
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/swarm/datasources/2017.8.1/datasources-2017.8.
1.pom
Downloading: https://repo.maven.apache.org/maven2/org/wildfly/swarm/datasources/2017.8.1/datasources-2017.8.1.pom
Downloaded: https://repo.maven.apache.org/maven2/org/wildfly/swarm/datasources/2017.8.1/datasources-2017.8.1.pom (4.0 kB at 16 k
B/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/swarm/jca/2017.8.1/jca-2017.8.1.pom
Downloading: https://repo.maven.apache.org/maven2/org/wildfly/swarm/jca/2017.8.1/jca-2017.8.1.pom
Downloaded: https://repo.maven.apache.org/maven2/org/wildfly/swarm/jca/2017.8.1/jca-2017.8.1.pom (2.6 kB at 38 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/swarm/connector/2017.8.1/connector-2017.8.1.po
m
Downloading: https://repo.maven.apache.org/maven2/org/wildfly/swarm/connector/2017.8.1/connector-2017.8.1.pom
Downloaded: https://repo.maven.apache.org/maven2/org/wildfly/swarm/connector/2017.8.1/connector-2017.8.1.pom (2.6 kB at 44 kB/s)

Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/spec/javax/resource/jboss-connector-api_1.7_spec
/1.0.0.Final/jboss-connector-api_1.7_spec-1.0.0.Final.pom
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/spec/javax/resource/jboss-connector-api_1.7_spec/
1.0.0.Final/jboss-connector-api_1.7_spec-1.0.0.Final.pom (4.8 kB at 3.5 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/ironjacamar/ironjacamar-jdbc/1.3.4.Final/ironjac
amar-jdbc-1.3.4.Final.pom
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/ironjacamar/ironjacamar-jdbc/1.3.4.Final/ironjaca
mar-jdbc-1.3.4.Final.pom (3.0 kB at 2.8 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/swarm/jpa/2017.8.1/jpa-2017.8.1.pom
Downloading: https://repo.maven.apache.org/maven2/org/wildfly/swarm/jpa/2017.8.1/jpa-2017.8.1.pom
Downloaded: https://repo.maven.apache.org/maven2/org/wildfly/swarm/jpa/2017.8.1/jpa-2017.8.1.pom (3.4 kB at 67 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/swarm/jaxrs-jaxb/2017.8.1/jaxrs-jaxb-2017.8.1.
pom
Downloading: https://repo.maven.apache.org/maven2/org/wildfly/swarm/jaxrs-jaxb/2017.8.1/jaxrs-jaxb-2017.8.1.pom
Downloaded: https://repo.maven.apache.org/maven2/org/wildfly/swarm/jaxrs-jaxb/2017.8.1/jaxrs-jaxb-2017.8.1.pom (2.5 kB at 40 kB/
s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/swarm/ejb/2017.8.1/ejb-2017.8.1.pom
Downloading: https://repo.maven.apache.org/maven2/org/wildfly/swarm/ejb/2017.8.1/ejb-2017.8.1.pom
Downloaded: https://repo.maven.apache.org/maven2/org/wildfly/swarm/ejb/2017.8.1/ejb-2017.8.1.pom (3.5 kB at 95 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/spec/javax/ejb/jboss-ejb-api_3.2_spec/1.0.0.Fina
l/jboss-ejb-api_3.2_spec-1.0.0.Final.pom
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/spec/javax/ejb/jboss-ejb-api_3.2_spec/1.0.0.Final
/jboss-ejb-api_3.2_spec-1.0.0.Final.pom (5.2 kB at 3.8 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/ejb3/jboss-ejb3-ext-api/2.2.0.Final/jboss-ejb3-e
xt-api-2.2.0.Final.pom
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/ejb3/jboss-ejb3-ext-api/2.2.0.Final/jboss-ejb3-ex
t-api-2.2.0.Final.pom (2.2 kB at 2.8 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/swarm/datasources/2017.8.1/datasources-2017.8.
1.jar
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/swarm/jpa/2017.8.1/jpa-2017.8.1.jar
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/swarm/connector/2017.8.1/connector-2017.8.1.ja
r
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/swarm/jca/2017.8.1/jca-2017.8.1.jar
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/swarm/jaxrs-jaxb/2017.8.1/jaxrs-jaxb-2017.8.1.
jar
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/swarm/ejb/2017.8.1/ejb-2017.8.1.jar
Downloading: https://repo.maven.apache.org/maven2/org/wildfly/swarm/datasources/2017.8.1/datasources-2017.8.1.jar
Downloading: https://repo.maven.apache.org/maven2/org/wildfly/swarm/jca/2017.8.1/jca-2017.8.1.jar
Downloading: https://repo.maven.apache.org/maven2/org/wildfly/swarm/connector/2017.8.1/connector-2017.8.1.jar
Downloading: https://repo.maven.apache.org/maven2/org/wildfly/swarm/jpa/2017.8.1/jpa-2017.8.1.jar
Downloading: https://repo.maven.apache.org/maven2/org/wildfly/swarm/jaxrs-jaxb/2017.8.1/jaxrs-jaxb-2017.8.1.jar
Downloaded: https://repo.maven.apache.org/maven2/org/wildfly/swarm/jca/2017.8.1/jca-2017.8.1.jar (9.5 kB at 102 kB/s)
Downloading: https://repo.maven.apache.org/maven2/org/wildfly/swarm/ejb/2017.8.1/ejb-2017.8.1.jar
Downloaded: https://repo.maven.apache.org/maven2/org/wildfly/swarm/jaxrs-jaxb/2017.8.1/jaxrs-jaxb-2017.8.1.jar (4.6 kB at 32 kB/
s)
Downloaded: https://repo.maven.apache.org/maven2/org/wildfly/swarm/jpa/2017.8.1/jpa-2017.8.1.jar (7.7 kB at 51 kB/s)
Downloaded: https://repo.maven.apache.org/maven2/org/wildfly/swarm/ejb/2017.8.1/ejb-2017.8.1.jar (14 kB at 90 kB/s)
Downloaded: https://repo.maven.apache.org/maven2/org/wildfly/swarm/datasources/2017.8.1/datasources-2017.8.1.jar (46 kB at 243 k
B/s)
Downloaded: https://repo.maven.apache.org/maven2/org/wildfly/swarm/connector/2017.8.1/connector-2017.8.1.jar (149 kB at 613 kB/s
)
Resolving 88 out of 420 artifacts
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-host-controller/2.2.1.Final/wildf
ly-host-controller-2.2.1.Final.jar
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/aesh/aesh/0.66.8/aesh-0.66.8.jar
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/apache/activemq/artemis-core-client/1.1.0.wildfly-017/
artemis-core-client-1.1.0.wildfly-017.jar
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/apache/activemq/artemis-native/1.1.0.wildfly-017/artem
is-native-1.1.0.wildfly-017.jar
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/apache/activemq/artemis-selector/1.1.0.wildfly-017/art
emis-selector-1.1.0.wildfly-017.jar
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/apache/activemq/artemis-native/1.1.0.wildfly-017/artemi
s-native-1.1.0.wildfly-017.jar (32 kB at 21 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-embedded/2.2.1.Final/wildfly-embe
dded-2.2.1.Final.jar
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/apache/activemq/artemis-selector/1.1.0.wildfly-017/arte
mis-selector-1.1.0.wildfly-017.jar (101 kB at 62 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/wildfly-messaging-activemq/10.1.0.Final/wildfl
y-messaging-activemq-10.1.0.Final.jar
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/aesh/aesh/0.66.8/aesh-0.66.8.jar (399 kB at 171 k
B/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-domain-http-interface/2.2.1.Final
/wildfly-domain-http-interface-2.2.1.Final.jar
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-embedded/2.2.1.Final/wildfly-embed
ded-2.2.1.Final.jar (51 kB at 22 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/apache/activemq/artemis-jms-client/1.1.0.wildfly-017/a
rtemis-jms-client-1.1.0.wildfly-017.jar
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/apache/activemq/artemis-core-client/1.1.0.wildfly-017/a
rtemis-core-client-1.1.0.wildfly-017.jar (611 kB at 244 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/apache/activemq/artemis-hqclient-protocol/1.1.0.wildfl
y-017/artemis-hqclient-protocol-1.1.0.wildfly-017.jar
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-host-controller/2.2.1.Final/wildfl
y-host-controller-2.2.1.Final.jar (1.1 MB at 392 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-management-client-content/2.2.1.F
inal/wildfly-management-client-content-2.2.1.Final.jar
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-domain-http-interface/2.2.1.Final/
wildfly-domain-http-interface-2.2.1.Final.jar (101 kB at 33 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/apache/activemq/artemis-journal/1.1.0.wildfly-017/arte
mis-journal-1.1.0.wildfly-017.jar
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/wildfly-messaging-activemq/10.1.0.Final/wildfly
-messaging-activemq-10.1.0.Final.jar (599 kB at 188 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/remotingjmx/remoting-jmx/2.0.1.Final/remoting-jm
x-2.0.1.Final.jar
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/apache/activemq/artemis-hqclient-protocol/1.1.0.wildfly
-017/artemis-hqclient-protocol-1.1.0.wildfly-017.jar (11 kB at 3.4 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-cli/2.2.1.Final/wildfly-cli-2.2.1
.Final.jar
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/apache/activemq/artemis-jms-client/1.1.0.wildfly-017/ar
temis-jms-client-1.1.0.wildfly-017.jar (170 kB at 50 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/apache/activemq/artemis-cli/1.1.0.wildfly-017/artemis-
cli-1.1.0.wildfly-017.jar
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-management-client-content/2.2.1.Fi
nal/wildfly-management-client-content-2.2.1.Final.jar (27 kB at 7.7 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-jmx/2.2.1.Final/wildfly-jmx-2.2.1
.Final.jar
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/apache/activemq/artemis-journal/1.1.0.wildfly-017/artem
is-journal-1.1.0.wildfly-017.jar (169 kB at 45 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/hornetq/hornetq-core-client/2.4.7.Final/hornetq-core-c
lient-2.4.7.Final.jar
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/remotingjmx/remoting-jmx/2.0.1.Final/remoting-jmx
-2.0.1.Final.jar (314 kB at 78 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/jboss/activemq/artemis/integration/artemis-wildfly-int
egration/1.0.2/artemis-wildfly-integration-1.0.2.jar
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-jmx/2.2.1.Final/wildfly-jmx-2.2.1.
Final.jar (232 kB at 55 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/apache/activemq/artemis-server/1.1.0.wildfly-017/artem
is-server-1.1.0.wildfly-017.jar
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/apache/activemq/artemis-cli/1.1.0.wildfly-017/artemis-c
li-1.1.0.wildfly-017.jar (173 kB at 41 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/hornetq/hornetq-jms-client/2.4.7.Final/hornetq-jms-cli
ent-2.4.7.Final.jar
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/wildfly/core/wildfly-cli/2.2.1.Final/wildfly-cli-2.2.1.
Final.jar (1.0 MB at 233 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/apache/activemq/artemis-commons/1.1.0.wildfly-017/arte
mis-commons-1.1.0.wildfly-017.jar
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/jboss/activemq/artemis/integration/artemis-wildfly-inte
gration/1.0.2/artemis-wildfly-integration-1.0.2.jar (46 kB at 9.8 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/apache/activemq/artemis-service-extensions/1.1.0.wildf
ly-017/artemis-service-extensions-1.1.0.wildfly-017.jar
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/hornetq/hornetq-core-client/2.4.7.Final/hornetq-core-cl
ient-2.4.7.Final.jar (569 kB at 119 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/io/netty/netty-all/4.0.33.Final/netty-all-4.0.33.Final.jar

Downloading: https://repository.jboss.org/nexus/content/groups/public/org/apache/activemq/artemis-ra/1.1.0.wildfly-017/artemis-r
a-1.1.0.wildfly-017.jar
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/hornetq/hornetq-jms-client/2.4.7.Final/hornetq-jms-clie
nt-2.4.7.Final.jar (138 kB at 28 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/apache/activemq/artemis-jms-server/1.1.0.wildfly-017/a
rtemis-jms-server-1.1.0.wildfly-017.jar
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/apache/activemq/artemis-commons/1.1.0.wildfly-017/artem
is-commons-1.1.0.wildfly-017.jar (138 kB at 27 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/hornetq/hornetq-commons/2.4.7.Final/hornetq-commons-2.
4.7.Final.jar
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/apache/activemq/artemis-service-extensions/1.1.0.wildfl
y-017/artemis-service-extensions-1.1.0.wildfly-017.jar (31 kB at 5.7 kB/s)
Downloading: https://repository.jboss.org/nexus/content/groups/public/org/apache/activemq/artemis-dto/1.1.0.wildfly-017/artemis-
dto-1.1.0.wildfly-017.jar
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/apache/activemq/artemis-server/1.1.0.wildfly-017/artemi
s-server-1.1.0.wildfly-017.jar (1.2 MB at 221 kB/s)
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/apache/activemq/artemis-jms-server/1.1.0.wildfly-017/ar
temis-jms-server-1.1.0.wildfly-017.jar (150 kB at 27 kB/s)
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/hornetq/hornetq-commons/2.4.7.Final/hornetq-commons-2.4
.7.Final.jar (115 kB at 20 kB/s)
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/apache/activemq/artemis-dto/1.1.0.wildfly-017/artemis-d
to-1.1.0.wildfly-017.jar (13 kB at 2.2 kB/s)
Downloaded: https://repository.jboss.org/nexus/content/groups/public/org/apache/activemq/artemis-ra/1.1.0.wildfly-017/artemis-ra
-1.1.0.wildfly-017.jar (146 kB at 22 kB/s)
Downloading: https://repo.maven.apache.org/maven2/io/netty/netty-all/4.0.33.Final/netty-all-4.0.33.Final.jar
Downloaded: https://repo.maven.apache.org/maven2/io/netty/netty-all/4.0.33.Final/netty-all-4.0.33.Final.jar (2.1 MB at 4.0 MB/s)

[INFO] Repackaging .war: C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\bookStore\target\bookStore.war
[INFO] Repackaged .war: C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\bookStore\target\bookStore.war
[INFO]
[INFO] <<< wildfly-swarm-plugin:2017.8.1:run (default-cli) < package @ bookStore <<<
[INFO]
[INFO]
[INFO] --- wildfly-swarm-plugin:2017.8.1:run (default-cli) @ bookStore ---
[INFO] Starting .war
[INFO] Scanning for needed WildFly Swarm fractions with mode: when_missing
[INFO] Detected fractions: ejb:2017.8.1, jaxrs-jaxb:2017.8.1, jpa:2017.8.1, undertow:2017.8.1
[INFO] Using fractions: container:2017.8.1, datasources:2017.8.1, ee:2017.8.1, ejb:2017.8.1, io:2017.8.1, jaxrs-jaxb:2017.8.1, j
axrs:2017.8.1, jca:2017.8.1, jpa:2017.8.1, logging:2017.8.1, request-controller:2017.8.1, security:2017.8.1, undertow:2017.8.1
Wed Sep 06 12:43:59 GMT+01:00 2017 INFO [org.wildfly.swarm.bootstrap] (main) Dependencies not bundled; resolving from M2REPO.
2017-09-06 12:44:00,461 INFO  [org.wildfly.swarm] (main) WFSWARM0013: Installed fraction:                  Logging - STABLE
     org.wildfly.swarm:logging:2017.8.1
2017-09-06 12:44:00,468 INFO  [org.wildfly.swarm] (main) WFSWARM0013: Installed fraction:                      EJB - STABLE
     org.wildfly.swarm:ejb:2017.8.1
2017-09-06 12:44:00,469 INFO  [org.wildfly.swarm] (main) WFSWARM0013: Installed fraction:                   JAX-RS - STABLE
     org.wildfly.swarm:jaxrs:2017.8.1
2017-09-06 12:44:00,469 INFO  [org.wildfly.swarm] (main) WFSWARM0013: Installed fraction:         JAX-RS with JAXB - STABLE
     org.wildfly.swarm:jaxrs-jaxb:2017.8.1
2017-09-06 12:44:00,469 INFO  [org.wildfly.swarm] (main) WFSWARM0013: Installed fraction:              Datasources - STABLE
     org.wildfly.swarm:datasources:2017.8.1
2017-09-06 12:44:00,470 INFO  [org.wildfly.swarm] (main) WFSWARM0013: Installed fraction:             Transactions - STABLE
     org.wildfly.swarm:transactions:2017.8.1
2017-09-06 12:44:00,470 INFO  [org.wildfly.swarm] (main) WFSWARM0013: Installed fraction:                      JCA - STABLE
     org.wildfly.swarm:jca:2017.8.1
2017-09-06 12:44:00,470 INFO  [org.wildfly.swarm] (main) WFSWARM0013: Installed fraction:                      JPA - STABLE
     org.wildfly.swarm:jpa:2017.8.1
2017-09-06 12:44:00,471 INFO  [org.wildfly.swarm] (main) WFSWARM0013: Installed fraction:                 Undertow - STABLE
     org.wildfly.swarm:undertow:2017.8.1
2017-09-06 12:44:02,342 WARN  [org.wildfly.swarm.datasources] (main) WFSWARM1005: Not creating a default datasource due to lack
of JDBC driver
2017-09-06 12:44:03,008 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final
2017-09-06 12:44:03,074 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0049: WildFly Swarm 2017.8.1 (WildFly Core 2.2.1.Fi
nal) starting
2017-09-06 12:44:03,120 INFO  [org.wildfly.swarm] (MSC service thread 1-6) WFSWARM0019: Install MSC service for command line arg
s: []
2017-09-06 12:44:03,827 WARN  [org.jboss.as.txn] (ServerService Thread Pool -- 22) WFLYTX0013: Node identifier property is set t
o the default value. Please make sure it is unique.
2017-09-06 12:44:03,827 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 15) WFLYSEC0002: Activating Security Subsyst
em
2017-09-06 12:44:03,827 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 17) WFLYNAM0001: Activating Naming Subsystem
2017-09-06 12:44:03,846 INFO  [org.jboss.as.security] (MSC service thread 1-3) WFLYSEC0001: Current PicketBox version=4.9.6.Fina
l
2017-09-06 12:44:03,873 INFO  [org.wildfly.extension.io] (ServerService Thread Pool -- 23) WFLYIO001: Worker 'default' has auto-
configured to 16 core threads with 128 task threads based on your 8 available processors
2017-09-06 12:44:03,893 INFO  [org.jboss.as.naming] (MSC service thread 1-1) WFLYNAM0003: Starting Naming Service
2017-09-06 12:44:03,973 INFO  [org.jboss.as.connector] (MSC service thread 1-8) WFLYJCA0009: Starting JCA Subsystem (WildFly/Iro
nJacamar 1.3.4.Final)
2017-09-06 12:44:03,987 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-4) WFLYUT0003: Undertow 1.4.11.Final starti
ng
2017-09-06 12:44:04,084 INFO  [org.xnio] (MSC service thread 1-5) XNIO version 3.4.3.Final
2017-09-06 12:44:04,135 INFO  [org.xnio.nio] (MSC service thread 1-5) XNIO NIO Implementation Version 3.4.3.Final
2017-09-06 12:44:04,261 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-5) WFLYUT0012: Started server default-serve
r.
2017-09-06 12:44:04,302 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-5) WFLYUT0006: Undertow HTTP listener defau
lt listening on [0:0:0:0:0:0:0:0]:8080
2017-09-06 12:44:04,437 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Swarm 2017.8.1 (WildFly Core 2.2.1.Fi
nal) started in 1467ms - Started 134 of 145 services (25 services are lazy, passive or on-demand)
2017-09-06 12:44:05,177 INFO  [org.wildfly.swarm.runtime.deployer] (main) deploying bookStore.war
2017-09-06 12:44:05,196 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-6) WFLYSRV0027: Starting deployment of "boo
kStore.war" (runtime-name: "bookStore.war")
2017-09-06 12:44:06,661 INFO  [org.jboss.as.jpa] (MSC service thread 1-8) WFLYJPA0002: Read persistence.xml for bookStore-persis
tence-unit
2017-09-06 12:44:06,754 WARN  [org.jboss.as.dependency.private] (MSC service thread 1-1) WFLYSRV0018: Deployment "deployment.boo
kStore.war" is using a private module ("org.jboss.jts:main") which may be changed or removed in future versions without notice.
2017-09-06 12:44:06,755 WARN  [org.jboss.as.dependency.private] (MSC service thread 1-1) WFLYSRV0018: Deployment "deployment.boo
kStore.war" is using a private module ("org.jboss.ironjacamar.jdbcadapters:main") which may be changed or removed in future vers
ions without notice.
2017-09-06 12:44:06,805 INFO  [org.jboss.as.ejb3.deployment] (MSC service thread 1-4) WFLYEJB0473: JNDI bindings for session bea
n named 'BookEndpoint' in deployment unit 'deployment "bookStore.war"' are as follows:

        java:global/bookStore/BookEndpoint!org.bookStore.rest.BookEndpoint
        java:app/bookStore/BookEndpoint!org.bookStore.rest.BookEndpoint
        java:module/BookEndpoint!org.bookStore.rest.BookEndpoint
        java:global/bookStore/BookEndpoint
        java:app/bookStore/BookEndpoint
        java:module/BookEndpoint

2017-09-06 12:44:06,952 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-7) WFLYUT0018: Host default-host starting
2017-09-06 12:44:06,983 ERROR [org.jboss.as.controller.management-operation] (main) WFLYCTL0013: Operation ("add") failed - addr
ess: (("deployment" => "bookStore.war")) - failure description: {
    "WFLYCTL0412: Required services that are not installed:" => ["jboss.naming.context.java.jboss.datasources.ExampleDS"],
    "WFLYCTL0180: Services with missing/unavailable dependencies" => [
        "jboss.persistenceunit.\"bookStore.war#bookStore-persistence-unit\" is missing [jboss.naming.context.java.jboss.datasour
ces.ExampleDS]",
        "jboss.persistenceunit.\"bookStore.war#bookStore-persistence-unit\".__FIRST_PHASE__ is missing [jboss.naming.context.jav
a.jboss.datasources.ExampleDS]"
    ]
}
2017-09-06 12:44:06,985 ERROR [org.jboss.as.server] (main) WFLYSRV0021: Deploy of deployment "bookStore.war" was rolled back wit
h the following failure message:
{
    "WFLYCTL0412: Required services that are not installed:" => ["jboss.naming.context.java.jboss.datasources.ExampleDS"],
    "WFLYCTL0180: Services with missing/unavailable dependencies" => [
        "jboss.persistenceunit.\"bookStore.war#bookStore-persistence-unit\" is missing [jboss.naming.context.java.jboss.datasour
ces.ExampleDS]",
        "jboss.persistenceunit.\"bookStore.war#bookStore-persistence-unit\".__FIRST_PHASE__ is missing [jboss.naming.context.jav
a.jboss.datasources.ExampleDS]"
    ]
}
2017-09-06 12:44:06,993 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-1) WFLYUT0019: Host default-host stopping
2017-09-06 12:44:07,096 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) WFLYSRV0028: Stopped deployment bookStor
e.war (runtime-name: bookStore.war) in 111ms
2017-09-06 12:44:07,098 INFO  [org.jboss.as.controller] (main) WFLYCTL0183: Service status report
WFLYCTL0184:    New missing/unsatisfied dependencies:
      service jboss.deployment.unit."bookStore.war".component.BookEndpoint.CREATE (missing) dependents: [service jboss.deploymen
t.unit."bookStore.war".component.BookEndpoint.START]
      service jboss.deployment.unit."bookStore.war".component.BookEndpoint.JndiBindingsService (missing) dependents: [service jb
oss.deployment.unit."bookStore.war".jndiDependencyService]
      service jboss.deployment.unit."bookStore.war".component.BookEndpoint.START (missing) dependents: [service jboss.deployment
.unit."bookStore.war".deploymentCompleteService, service jboss.undertow.deployment.default-server.default-host./, service jboss.
deployment.unit."bookStore.war".moduleDeploymentRuntimeInformationStart]
      service jboss.deployment.unit."bookStore.war".component.BookEndpoint.VIEW."org.bookStore.rest.BookEndpoint".LOCAL (missing
) dependents: [service jboss.deployment.unit."bookStore.war".component.BookEndpoint.START]
      service jboss.deployment.unit."bookStore.war".component.BookEndpoint.ejb.non-functional-timerservice (missing) dependents:
 [service jboss.deployment.unit."bookStore.war".component.BookEndpoint.START]
      service jboss.deployment.unit."bookStore.war".component."javax.servlet.jsp.jstl.tlv.PermittedTaglibsTLV".JndiBindingsServi
ce (missing) dependents: [service jboss.deployment.unit."bookStore.war".jndiDependencyService]
      service jboss.deployment.unit."bookStore.war".component."javax.servlet.jsp.jstl.tlv.PermittedTaglibsTLV".START (missing) d
ependents: [service jboss.deployment.unit."bookStore.war".deploymentCompleteService, service jboss.undertow.deployment.default-s
erver.default-host./, service jboss.undertow.deployment.default-server.default-host./.UndertowDeploymentInfoService]
      service jboss.deployment.unit."bookStore.war".component."javax.servlet.jsp.jstl.tlv.ScriptFreeTLV".CREATE (missing) depend
ents: [service jboss.deployment.unit."bookStore.war".component."javax.servlet.jsp.jstl.tlv.ScriptFreeTLV".START]
      service jboss.deployment.unit."bookStore.war".component."javax.servlet.jsp.jstl.tlv.ScriptFreeTLV".JndiBindingsService (mi
ssing) dependents: [service jboss.deployment.unit."bookStore.war".jndiDependencyService]
      service jboss.deployment.unit."bookStore.war".component."javax.servlet.jsp.jstl.tlv.ScriptFreeTLV".START (missing) depende
nts: [service jboss.deployment.unit."bookStore.war".deploymentCompleteService, service jboss.undertow.deployment.default-server.
default-host./]
      service jboss.deployment.unit."bookStore.war".ee.ComponentRegistry (missing) dependents: [service jboss.undertow.deploymen
t.default-server.default-host./.UndertowDeploymentInfoService]
      service jboss.deployment.unit."bookStore.war".jndiDependencyService (missing) dependents: [service jboss.deployment.unit."
bookStore.war".component."javax.servlet.jsp.jstl.tlv.ScriptFreeTLV".START, service jboss.deployment.unit."bookStore.war".compone
nt.BookEndpoint.START]
      service jboss.naming.context.java.app.bookStore.env (missing) dependents: [service jboss.deployment.unit."bookStore.war".j
ndiDependencyService]
      service jboss.naming.context.java.jboss.datasources.ExampleDS (missing) dependents: [service jboss.persistenceunit."bookSt
ore.war#bookStore-persistence-unit".__FIRST_PHASE__, service jboss.persistenceunit."bookStore.war#bookStore-persistence-unit"]
      service jboss.naming.context.java.module.bookStore.bookStore.DefaultContextService (missing) dependents: [service jboss.de
ployment.unit."bookStore.war".jndiDependencyService]
      service jboss.naming.context.java.module.bookStore.bookStore.DefaultManagedExecutorService (missing) dependents: [service
jboss.deployment.unit."bookStore.war".jndiDependencyService]
      service jboss.naming.context.java.module.bookStore.bookStore.DefaultManagedScheduledExecutorService (missing) dependents:
[service jboss.deployment.unit."bookStore.war".jndiDependencyService]
      service jboss.naming.context.java.module.bookStore.bookStore.DefaultManagedThreadFactory (missing) dependents: [service jb
oss.deployment.unit."bookStore.war".jndiDependencyService]
      service jboss.naming.context.java.module.bookStore.bookStore.EJBContext (missing) dependents: [service jboss.deployment.un
it."bookStore.war".jndiDependencyService]
      service jboss.naming.context.java.module.bookStore.bookStore.TimerService (missing) dependents: [service jboss.deployment.
unit."bookStore.war".jndiDependencyService]
      service jboss.naming.context.java.module.bookStore.bookStore.TransactionSynchronizationRegistry (missing) dependents: [ser
vice jboss.deployment.unit."bookStore.war".jndiDependencyService]
      service jboss.naming.context.java.module.bookStore.bookStore.UserTransaction (missing) dependents: [service jboss.deployme
nt.unit."bookStore.war".jndiDependencyService]
      service jboss.naming.context.java.module.bookStore.bookStore.env (missing) dependents: [service jboss.deployment.unit."boo
kStore.war".jndiDependencyService]
      service jboss.naming.context.java.module.bookStore.bookStore.env."org.bookStore.rest.BookEndpoint".em (missing) dependents
: [service jboss.deployment.unit."bookStore.war".component.BookEndpoint.START, service jboss.deployment.unit."bookStore.war".jnd
iDependencyService]
      service jboss.persistenceunit."bookStore.war#bookStore-persistence-unit" (missing) dependents: [service jboss.deployment.u
nit."bookStore.war".component."javax.servlet.jsp.jstl.tlv.PermittedTaglibsTLV".START, service jboss.deployment.unit."bookStore.w
ar".component."javax.servlet.jsp.jstl.tlv.ScriptFreeTLV".START, service jboss.deployment.unit."bookStore.war".deploymentComplete
Service, service jboss.undertow.deployment.default-server.default-host./, WFLYCTL0208: ... and 4 more ]
      service jboss.undertow.deployment.default-server.default-host./ (missing) dependents: [service jboss.deployment.unit."book
Store.war".deploymentCompleteService]
      service jboss.undertow.deployment.default-server.default-host./.UndertowDeploymentInfoService (missing) dependents: [servi
ce jboss.undertow.deployment.default-server.default-host./]
      service jboss.undertow.deployment.default-server.default-host./.codec (missing) dependents: [service jboss.undertow.deploy
ment.default-server.default-host./.UndertowDeploymentInfoService]

2017-09-06 12:44:07,128 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-8) WFLYUT0008: Undertow HTTP listener defau
lt suspending
2017-09-06 12:44:07,144 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-8) WFLYUT0007: Undertow HTTP listener defau
lt stopped, was bound to [0:0:0:0:0:0:0:0]:8080
2017-09-06 12:44:07,144 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-6) WFLYUT0004: Undertow 1.4.11.Final stoppi
ng
2017-09-06 12:44:07,145 INFO  [org.jboss.as] (MSC service thread 1-5) WFLYSRV0050: WildFly Swarm 2017.8.1 (WildFly Core 2.2.1.Fi
nal) stopped in 29ms
2017-09-06 12:44:07,172 INFO  [org.jboss.weld.Bootstrap] (main) WELD-ENV-002001: Weld SE container internal shut down
2017-09-06 12:44:07,175 ERROR [stderr] (main) Exception in thread "main" java.lang.reflect.InvocationTargetException

2017-09-06 12:44:07,176 ERROR [stderr] (main)   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

2017-09-06 12:44:07,176 ERROR [stderr] (main)   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)


2017-09-06 12:44:07,176 ERROR [stderr] (main)   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.
java:43)

2017-09-06 12:44:07,176 ERROR [stderr] (main)   at java.lang.reflect.Method.invoke(Method.java:498)

2017-09-06 12:44:07,176 ERROR [stderr] (main)   at org.wildfly.swarm.bootstrap.MainInvoker.invoke(MainInvoker.java:39)

2017-09-06 12:44:07,176 ERROR [stderr] (main)   at org.wildfly.swarm.bootstrap.MainInvoker.main(MainInvoker.java:83)

2017-09-06 12:44:07,177 ERROR [stderr] (main) Caused by: org.wildfly.swarm.container.DeploymentException: org.wildfly.swarm.cont
ainer.DeploymentException: WFSWARM0004: Deployment failed: {"WFLYCTL0412: Required services that are not installed:" => ["jboss.
naming.context.java.jboss.datasources.ExampleDS"],"WFLYCTL0180: Services with missing/unavailable dependencies" => ["jboss.persi
stenceunit.\"bookStore.war#bookStore-persistence-unit\" is missing [jboss.naming.context.java.jboss.datasources.ExampleDS]","jbo
ss.persistenceunit.\"bookStore.war#bookStore-persistence-unit\".__FIRST_PHASE__ is missing [jboss.naming.context.java.jboss.data
sources.ExampleDS]"]}

2017-09-06 12:44:07,177 ERROR [stderr] (main)   at org.wildfly.swarm.container.runtime.RuntimeDeployer.deploy(RuntimeDeployer.ja
va:301)

2017-09-06 12:44:07,177 ERROR [stderr] (main)   at org.wildfly.swarm.container.runtime.RuntimeDeployer.deploy(RuntimeDeployer.ja
va:174)

2017-09-06 12:44:07,177 ERROR [stderr] (main)   at org.wildfly.swarm.container.runtime.RuntimeDeployer.deploy(RuntimeDeployer.ja
va:107)

2017-09-06 12:44:07,178 ERROR [stderr] (main)   at org.wildfly.swarm.container.runtime.RuntimeDeployer$Proxy$_$$_WeldClientProxy
.deploy(Unknown Source)

2017-09-06 12:44:07,178 ERROR [stderr] (main)   at org.wildfly.swarm.Swarm.deploy(Swarm.java:447)

2017-09-06 12:44:07,178 ERROR [stderr] (main)   at org.wildfly.swarm.Swarm.main(Swarm.java:630)

2017-09-06 12:44:07,178 ERROR [stderr] (main)   ... 6 more

2017-09-06 12:44:07,178 ERROR [stderr] (main) Caused by: org.wildfly.swarm.container.DeploymentException: WFSWARM0004: Deploymen
t failed: {"WFLYCTL0412: Required services that are not installed:" => ["jboss.naming.context.java.jboss.datasources.ExampleDS"]
,"WFLYCTL0180: Services with missing/unavailable dependencies" => ["jboss.persistenceunit.\"bookStore.war#bookStore-persistence-
unit\" is missing [jboss.naming.context.java.jboss.datasources.ExampleDS]","jboss.persistenceunit.\"bookStore.war#bookStore-pers
istence-unit\".__FIRST_PHASE__ is missing [jboss.naming.context.java.jboss.datasources.ExampleDS]"]}

2017-09-06 12:44:07,179 ERROR [stderr] (main)   at org.wildfly.swarm.container.runtime.RuntimeDeployer.deploy(RuntimeDeployer.ja
va:296)

2017-09-06 12:44:07,179 ERROR [stderr] (main)   ... 11 more

[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 36.284 s
[INFO] Finished at: 2017-09-06T12:44:07+01:00
[INFO] Final Memory: 66M/193M
[INFO] ------------------------------------------------------------------------
[SEVERE] Failed to execute goal org.wildfly.swarm:wildfly-swarm-plugin:2017.8.1:run (default-cli) on project bookStore: Process
failed to start -> [Help 1]
[SEVERE]
[SEVERE] To see the full stack trace of the errors, re-run Maven with the -e switch.
[SEVERE] Re-run Maven using the -X switch to enable full debug logging.
[SEVERE]
[SEVERE] For more information about the errors and possible solutions, please read the following articles:
[SEVERE] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
***ERROR*** Error while running the build

/ 13	. 

/ we moeten,

/ datastore in wildfly-swarm

/ lees,
https://howto.wildfly-swarm.io/create-a-datasource/

https://github.com/wildfly-swarm/wildfly-swarm-examples/tree/master/datasource					/ <-

/ we add een h2 dep aan pom.xml (en de version ), 
/ dat is alles,

$ vi pom.xml

<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.bookStore</groupId>
  <artifactId>bookStore</artifactId>
  <version>1.0.0-SNAPSHOT</version>
  <packaging>war</packaging>
  <build>
    <finalName>bookStore</finalName>
    <plugins>
      <plugin>
        <groupId>org.wildfly.swarm</groupId>
        <artifactId>wildfly-swarm-plugin</artifactId>
        <version>${version.wildfly-swarm}</version>
        <executions>
          <execution>
            <goals>
              <goal>package</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
  <dependencies>
    <dependency>
      <groupId>javax</groupId>
      <artifactId>javaee-api</artifactId>
      <scope>provided</scope>
    </dependency>
    <dependency>
	  <groupId>com.h2database</groupId>
	  <artifactId>h2</artifactId>
	  <version>${version.h2}</version>
	  <scope>compile</scope>
	</dependency>
  </dependencies>
  <dependencyManagement>
    <dependencies>
      <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>7.0</version>
        <scope>provided</scope>
      </dependency>
      <dependency>
        <groupId>org.wildfly.swarm</groupId>
        <artifactId>bom-all</artifactId>
        <version>${version.wildfly-swarm}</version>
        <type>pom</type>
        <scope>import</scope>
      </dependency>
    </dependencies>
  </dependencyManagement>
  <properties>
    <failOnMissingWebXml>false</failOnMissingWebXml>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <version.wildfly-swarm>2017.8.1</version.wildfly-swarm>
    <version.h2>1.4.187</version.h2>
  </properties>
</project>

/ in forge,

[bookStore]$ wildfly-swarm-run
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building bookStore 1.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] >>> wildfly-swarm-plugin:2017.8.1:run (default-cli) > package @ bookStore >>>
[INFO]
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ bookStore ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO]
[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ bookStore ---
[INFO] Nothing to compile - all classes are up to date
[INFO]
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ bookStore ---
[INFO] Not copying test resources
[INFO]
[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ bookStore ---
[INFO] Not compiling test sources
[INFO]
[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ bookStore ---
[INFO] Tests are skipped.
[INFO]
[INFO] --- maven-war-plugin:2.2:war (default-war) @ bookStore ---
[INFO] Packaging webapp
[INFO] Assembling webapp [bookStore] in [C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\bookStore\target\bookStore]
[INFO] Processing war project
[INFO] Copying webapp resources [C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\bookStore\src\main\webapp]
[INFO] Webapp assembled in [55 msecs]
[INFO] Building war: C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\bookStore\target\bookStore.war
[INFO]
[INFO] --- wildfly-swarm-plugin:2017.8.1:package (default) @ bookStore ---
[INFO] Scanning for needed WildFly Swarm fractions with mode: when_missing
[INFO] Detected fractions: ejb:2017.8.1, jaxrs-jaxb:2017.8.1, jpa:2017.8.1, undertow:2017.8.1
[INFO] Adding fractions: container:2017.8.1, datasources:2017.8.1, ee:2017.8.1, ejb:2017.8.1, io:2017.8.1, jaxrs-jaxb:2017.8.1,
jaxrs:2017.8.1, jca:2017.8.1, jpa:2017.8.1, logging:2017.8.1, request-controller:2017.8.1, security:2017.8.1, undertow:2017.8.1
Resolving 62 out of 421 artifacts
[INFO] Repackaging .war: C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\bookStore\target\bookStore.war
[INFO] Repackaged .war: C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\bookStore\target\bookStore.war
[INFO]
[INFO] <<< wildfly-swarm-plugin:2017.8.1:run (default-cli) < package @ bookStore <<<
[INFO]
[INFO]
[INFO] --- wildfly-swarm-plugin:2017.8.1:run (default-cli) @ bookStore ---
[INFO] Starting .war
[INFO] Scanning for needed WildFly Swarm fractions with mode: when_missing
[INFO] Detected fractions: ejb:2017.8.1, jaxrs-jaxb:2017.8.1, jpa:2017.8.1, undertow:2017.8.1
[INFO] Using fractions: container:2017.8.1, datasources:2017.8.1, ee:2017.8.1, ejb:2017.8.1, io:2017.8.1, jaxrs-jaxb:2017.8.1, j
axrs:2017.8.1, jca:2017.8.1, jpa:2017.8.1, logging:2017.8.1, request-controller:2017.8.1, security:2017.8.1, undertow:2017.8.1
Wed Sep 06 13:39:19 GMT+01:00 2017 INFO [org.wildfly.swarm.bootstrap] (main) Dependencies not bundled; resolving from M2REPO.
2017-09-06 13:39:20,413 INFO  [org.wildfly.swarm] (main) WFSWARM0013: Installed fraction:                  Logging - STABLE
     org.wildfly.swarm:logging:2017.8.1
2017-09-06 13:39:20,418 INFO  [org.wildfly.swarm] (main) WFSWARM0013: Installed fraction:                      EJB - STABLE
     org.wildfly.swarm:ejb:2017.8.1
2017-09-06 13:39:20,418 INFO  [org.wildfly.swarm] (main) WFSWARM0013: Installed fraction:                   JAX-RS - STABLE
     org.wildfly.swarm:jaxrs:2017.8.1
2017-09-06 13:39:20,418 INFO  [org.wildfly.swarm] (main) WFSWARM0013: Installed fraction:         JAX-RS with JAXB - STABLE
     org.wildfly.swarm:jaxrs-jaxb:2017.8.1
2017-09-06 13:39:20,418 INFO  [org.wildfly.swarm] (main) WFSWARM0013: Installed fraction:              Datasources - STABLE
     org.wildfly.swarm:datasources:2017.8.1
2017-09-06 13:39:20,419 INFO  [org.wildfly.swarm] (main) WFSWARM0013: Installed fraction:             Transactions - STABLE
     org.wildfly.swarm:transactions:2017.8.1
2017-09-06 13:39:20,419 INFO  [org.wildfly.swarm] (main) WFSWARM0013: Installed fraction:                      JCA - STABLE
     org.wildfly.swarm:jca:2017.8.1
2017-09-06 13:39:20,419 INFO  [org.wildfly.swarm] (main) WFSWARM0013: Installed fraction:                      JPA - STABLE
     org.wildfly.swarm:jpa:2017.8.1
2017-09-06 13:39:20,419 INFO  [org.wildfly.swarm] (main) WFSWARM0013: Installed fraction:                 Undertow - STABLE
     org.wildfly.swarm:undertow:2017.8.1
2017-09-06 13:39:22,034 INFO  [org.wildfly.swarm.datasources] (main) WFSWARM1003: Auto-detected JDBC driver for h2
2017-09-06 13:39:22,693 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final
2017-09-06 13:39:22,737 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0049: WildFly Swarm 2017.8.1 (WildFly Core 2.2.1.Fi
nal) starting
2017-09-06 13:39:22,787 INFO  [org.wildfly.swarm] (MSC service thread 1-6) WFSWARM0019: Install MSC service for command line arg
s: []
2017-09-06 13:39:23,470 WARN  [org.jboss.as.txn] (ServerService Thread Pool -- 24) WFLYTX0013: Node identifier property is set t
o the default value. Please make sure it is unique.
2017-09-06 13:39:23,488 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 16) WFLYNAM0001: Activating Naming Subsystem
2017-09-06 13:39:23,488 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 26) WFLYSEC0002: Activating Security Subsyst
em
2017-09-06 13:39:23,511 INFO  [org.jboss.as.security] (MSC service thread 1-3) WFLYSEC0001: Current PicketBox version=4.9.6.Fina
l
2017-09-06 13:39:23,512 INFO  [org.wildfly.extension.io] (ServerService Thread Pool -- 20) WFLYIO001: Worker 'default' has auto-
configured to 16 core threads with 128 task threads based on your 8 available processors
2017-09-06 13:39:23,545 INFO  [org.jboss.as.connector] (MSC service thread 1-5) WFLYJCA0009: Starting JCA Subsystem (WildFly/Iro
nJacamar 1.3.4.Final)
2017-09-06 13:39:23,548 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-7) WFLYUT0003: Undertow 1.4.11.Final starti
ng
2017-09-06 13:39:23,581 INFO  [org.jboss.as.naming] (MSC service thread 1-6) WFLYNAM0003: Starting Naming Service
2017-09-06 13:39:23,599 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 19) WFLYJCA0004: Dep
loying JDBC-compliant driver class org.h2.Driver (version 1.4)
2017-09-06 13:39:23,621 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-6) WFLYJCA0018: Started Driver servi
ce with driver-name = h2
2017-09-06 13:39:23,625 INFO  [org.xnio] (MSC service thread 1-3) XNIO version 3.4.3.Final
2017-09-06 13:39:23,671 INFO  [org.xnio.nio] (MSC service thread 1-3) XNIO NIO Implementation Version 3.4.3.Final
2017-09-06 13:39:23,754 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-3) WFLYUT0012: Started server default-serve
r.
2017-09-06 13:39:23,823 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-6) WFLYUT0006: Undertow HTTP listener defau
lt listening on [0:0:0:0:0:0:0:0]:8080
2017-09-06 13:39:23,934 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-5) WFLYJCA0001: Bound data s
ource [java:jboss/datasources/ExampleDS]
2017-09-06 13:39:24,013 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Swarm 2017.8.1 (WildFly Core 2.2.1.Fi
nal) started in 1367ms - Started 141 of 152 services (26 services are lazy, passive or on-demand)
2017-09-06 13:39:24,983 INFO  [org.wildfly.swarm.runtime.deployer] (main) deploying bookStore.war
2017-09-06 13:39:25,000 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-6) WFLYSRV0027: Starting deployment of "boo
kStore.war" (runtime-name: "bookStore.war")
2017-09-06 13:39:26,090 INFO  [org.jboss.as.jpa] (MSC service thread 1-1) WFLYJPA0002: Read persistence.xml for bookStore-persis
tence-unit
2017-09-06 13:39:26,185 WARN  [org.jboss.as.dependency.private] (MSC service thread 1-2) WFLYSRV0018: Deployment "deployment.boo
kStore.war" is using a private module ("org.jboss.ironjacamar.jdbcadapters:main") which may be changed or removed in future vers
ions without notice.
2017-09-06 13:39:26,186 WARN  [org.jboss.as.dependency.private] (MSC service thread 1-2) WFLYSRV0018: Deployment "deployment.boo
kStore.war" is using a private module ("org.jboss.jts:main") which may be changed or removed in future versions without notice.
2017-09-06 13:39:26,221 INFO  [org.jboss.as.jpa] (ServerService Thread Pool -- 7) WFLYJPA0010: Starting Persistence Unit (phase
1 of 2) Service 'bookStore.war#bookStore-persistence-unit'
2017-09-06 13:39:26,242 INFO  [org.hibernate.jpa.internal.util.LogHelper] (ServerService Thread Pool -- 7) HHH000204: Processing
 PersistenceUnitInfo [
        name: bookStore-persistence-unit
        ...]
2017-09-06 13:39:26,251 INFO  [org.jboss.as.ejb3.deployment] (MSC service thread 1-6) WFLYEJB0473: JNDI bindings for session bea
n named 'BookEndpoint' in deployment unit 'deployment "bookStore.war"' are as follows:

        java:global/bookStore/BookEndpoint!org.bookStore.rest.BookEndpoint
        java:app/bookStore/BookEndpoint!org.bookStore.rest.BookEndpoint
        java:module/BookEndpoint!org.bookStore.rest.BookEndpoint
        java:global/bookStore/BookEndpoint
        java:app/bookStore/BookEndpoint
        java:module/BookEndpoint

2017-09-06 13:39:26,316 INFO  [org.hibernate.Version] (ServerService Thread Pool -- 7) HHH000412: Hibernate Core {5.0.10.Final}
2017-09-06 13:39:26,318 INFO  [org.hibernate.cfg.Environment] (ServerService Thread Pool -- 7) HHH000206: hibernate.properties n
ot found
2017-09-06 13:39:26,320 INFO  [org.hibernate.cfg.Environment] (ServerService Thread Pool -- 7) HHH000021: Bytecode provider name
 : javassist
2017-09-06 13:39:26,327 WARN  [org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl] (ServerService Thread Pool -- 7)
 HHH000059: Defining hibernate.transaction.flush_before_completion=true ignored in HEM
2017-09-06 13:39:26,369 INFO  [org.hibernate.annotations.common.Version] (ServerService Thread Pool -- 7) HCANN000001: Hibernate
 Commons Annotations {5.0.1.Final}
2017-09-06 13:39:26,497 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-8) WFLYJCA0004: Deploying JDBC-compl
iant driver class org.h2.Driver (version 1.4)
2017-09-06 13:39:26,517 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-5) WFLYUT0018: Host default-host starting
2017-09-06 13:39:26,525 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-2) WFLYJCA0018: Started Driver servi
ce with driver-name = bookStore.war_org.h2.Driver_1_4
2017-09-06 13:39:26,531 INFO  [org.jboss.as.jpa] (ServerService Thread Pool -- 7) WFLYJPA0010: Starting Persistence Unit (phase
2 of 2) Service 'bookStore.war#bookStore-persistence-unit'
2017-09-06 13:39:26,730 INFO  [org.hibernate.dialect.Dialect] (ServerService Thread Pool -- 7) HHH000400: Using dialect: org.hib
ernate.dialect.H2Dialect
2017-09-06 13:39:26,784 INFO  [org.hibernate.envers.boot.internal.EnversServiceImpl] (ServerService Thread Pool -- 7) Envers int
egration enabled? : true
2017-09-06 13:39:27,108 INFO  [org.hibernate.tool.hbm2ddl.SchemaExport] (ServerService Thread Pool -- 7) HHH000227: Running hbm2
ddl schema export
2017-09-06 13:39:27,113 INFO  [stdout] (ServerService Thread Pool -- 7) Hibernate:
2017-09-06 13:39:27,113 INFO  [stdout] (ServerService Thread Pool -- 7)     drop table Book if exists

2017-09-06 13:39:27,114 INFO  [stdout] (ServerService Thread Pool -- 7) Hibernate:
2017-09-06 13:39:27,114 INFO  [stdout] (ServerService Thread Pool -- 7)     drop sequence if exists hibernate_sequence

2017-09-06 13:39:27,114 INFO  [stdout] (ServerService Thread Pool -- 7) Hibernate:
2017-09-06 13:39:27,115 INFO  [stdout] (ServerService Thread Pool -- 7)     create sequence hibernate_sequence start with 1 incr
ement by 1

2017-09-06 13:39:27,116 INFO  [stdout] (ServerService Thread Pool -- 7) Hibernate:
2017-09-06 13:39:27,117 INFO  [stdout] (ServerService Thread Pool -- 7)     create table Book (
2017-09-06 13:39:27,117 INFO  [stdout] (ServerService Thread Pool -- 7)         id bigint not null,
2017-09-06 13:39:27,117 INFO  [stdout] (ServerService Thread Pool -- 7)         publishingDate date,
2017-09-06 13:39:27,117 INFO  [stdout] (ServerService Thread Pool -- 7)         title varchar(255),
2017-09-06 13:39:27,117 INFO  [stdout] (ServerService Thread Pool -- 7)         version integer,
2017-09-06 13:39:27,117 INFO  [stdout] (ServerService Thread Pool -- 7)         primary key (id)
2017-09-06 13:39:27,117 INFO  [stdout] (ServerService Thread Pool -- 7)     )

2017-09-06 13:39:27,122 INFO  [org.hibernate.tool.hbm2ddl.SchemaExport] (ServerService Thread Pool -- 7) HHH000230: Schema expor
t complete
2017-09-06 13:39:27,321 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 14) RESTEASY002225: Deployi
ng javax.ws.rs.core.Application: class org.bookStore.rest.RestApplication
2017-09-06 13:39:27,347 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 14) WFLYUT0021: Registered web cont
ext: /
2017-09-06 13:39:27,390 INFO  [org.jboss.as.server] (main) WFLYSRV0010: Deployed "bookStore.war" (runtime-name : "bookStore.war"
)
2017-09-06 13:39:27,390 INFO  [org.wildfly.swarm] (main) WFSWARM99999: WildFly Swarm is Ready

/ we hebben geen context path create,
/ we geven in chrome:
localhost:8080/rest/books
[]
/ we zien in forge de logging:

2017-09-06 13:45:47,801 INFO  [org.hibernate.hql.internal.QueryTranslatorFactoryInitiator] (default task-4) HHH000397: Using AST
QueryTranslatorFactory
2017-09-06 13:45:47,875 INFO  [stdout] (default task-4) Hibernate:
2017-09-06 13:45:47,875 INFO  [stdout] (default task-4)     select
2017-09-06 13:45:47,875 INFO  [stdout] (default task-4)         distinct book0_.id as id1_0_,
2017-09-06 13:45:47,875 INFO  [stdout] (default task-4)         book0_.publishingDate as publishi2_0_,
2017-09-06 13:45:47,875 INFO  [stdout] (default task-4)         book0_.title as title3_0_,
2017-09-06 13:45:47,875 INFO  [stdout] (default task-4)         book0_.version as version4_0_
2017-09-06 13:45:47,875 INFO  [stdout] (default task-4)     from
2017-09-06 13:45:47,875 INFO  [stdout] (default task-4)         Book book0_
2017-09-06 13:45:47,875 INFO  [stdout] (default task-4)     order by
2017-09-06 13:45:47,875 INFO  [stdout] (default task-4)         book0_.id

/ een get op 
localhost:8080/books 
localhost:8080/books?start=0
localhost:8080/books?start=0&max=1 
/ calls,
@Stateless
@Path("/books")
public class BookEndpoint {
	@GET
	@Produces("application/json")
	public List<Book> listAll(@QueryParam("start") Integer startPosition,
			@QueryParam("max") Integer maxResult) {
			
/ een get op 
localhost:8080/books/1
/ calls,
	@GET
	@Path("/{id:[0-9][0-9]*}")
	@Produces("application/json")
	public Response findById(@PathParam("id") Long id) {


C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X GET http://localhost:8080/rest/books
[]

C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X POST -H "Content-Type:application/json" -d "{\"version\":\"1\"}" http:
//localhost:8080/rest/books
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X GET http://localhost:8080/rest/books
[{"id":1,"version":1,"title":null,"publishingDate":null}]

C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X POST -H "Content-Type:application/json" -d "{\"version\":\"12\"}" http
://localhost:8080/rest/books
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X GET http://localhost:8080/rest/books
[{"id":1,"version":1,"title":null,"publishingDate":null},{"id":2,"version":12,"title":null,"publishingDate":null}]
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X GET http://localhost:8080/rest/books/2
{"id":2,"version":12,"title":null,"publishingDate":null}

C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X GET http://localhost:8080/rest/books?start=2
[]
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X GET http://localhost:8080/rest/books?start=1
[{"id":2,"version":12,"title":null,"publishingDate":null}]
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X GET http://localhost:8080/rest/books?start=0
[{"id":1,"version":1,"title":null,"publishingDate":null},{"id":2,"version":12,"title":null,"publishingDate":null}]
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X GET http://localhost:8080/rest/books?start=0^&max=1
[{"id":1,"version":1,"title":null,"publishingDate":null}]

/ in Window's command line moeten we & escape met ^&

/ Met REST's path variables vraag je met de id, dus 1,2,...
/ Met query parameters vraag je met een index, dus 0,1,...			/ TODO is dit wel REST ?

/ 13	. 

/ update,

C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X PUT -H "Content-Type:application/json" -d "{\"title\":\"Foo Bar\"}" ht
tp://localhost:8080/rest/books/1
Could not find MessageBodyWriter for response object of type: org.bookStore.model.Book of media type: application/octet-stream

C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X PUT -H "Content-Type:application/json" -d "{\"version\":\"11\"}" http:
//localhost:8080/rest/books/1
Could not find MessageBodyWriter for response object of type: org.bookStore.model.Book of media type: application/octet-stream

/ 13	. 

/ we veranderen in BookEndpoint.java json in xml,

C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X GET http://localhost:8080/rest/books
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><collection/>

C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X POST -H "Content-Type:application/xml" -d "<version>11</version>" http
://localhost:8080/rest/books
javax.xml.bind.UnmarshalException: unexpected element (uri:"", local:"version"). Expected elements are <{}book>
/ onze XML is niet OK, we moeten "<book>...</book>"


/ REST JAVA-SWARM GELUKT

/ we moeten -H "Content-Type:application/xml", NIET "text/xml"	,
/ "content-type:..." mag OOK,

/ Het is gelukt,

C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X GET http://localhost:8080/rest/books
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X PUT -H "Content-Type:application/xml" -d "<book><id>2</id><version>11<
/version><title>Foo Bar</title></book>" http://localhost:8080/rest/books/2
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X GET http://localhost:8080/rest/books
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><collection><book><id>1</id><version>13</version></book><book><id>2</id><
version>12</version><title>Foo Bar</title></book></collection>
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X PUT -H "Content-Type:application/xml" -d "<book><id>2</id><version>12<
/version><title>Gee Hee</title></book>" http://localhost:8080/rest/books/2
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X GET http://localhost:8080/rest/books
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><collection><book><id>1</id><version>13</version></book><book><id>2</id><
version>13</version><title>Gee Hee</title></book></collection>

/ bij iedere echte update van een boek wordt de version van het book +	,
/ de version in de -d moet de current version zijn, anders ERR,

C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X PUT -H "Content-Type:application/xml" -d "<book><id>2</id><version>13<
/version><title>Me You</title></book>" http://localhost:8080/rest/books/2
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X GET http://localhost:8080/rest/books
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><collection><book><id>1</id><version>13</version></book><book><id>2</id><
version>14</version><title>Me You</title></book></collection>

/ Hoe version?

/ MORGEN: json of xml van een LocalDate, 
/ Maak een Book in Main, en GET deze,

/ 13	. 

/ versioning gaat vanzelf	,

C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X POST -H "Content-Type:application/xml" -d "<book><title>Foo Bar</title
></book>" http://localhost:8080/rest/books
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X GET http://localhost:8080/rest/books
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><collection><book><id>1</id><version>11</version></book><book><id>2</id><
version>0</version><title>Foo Bar</title></book></collection>

C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X PUT -H "Content-Type:application/xml" -d "<book><id>2</id><title>Gee H
ee</title></book>" http://localhost:8080/rest/books/2

C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X GET http://localhost:8080/rest/books
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><collection><book><id>1</id><version>11</version></book><book><id>2</id><
version>1</version><title>Gee Hee</title></book></collection>

C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X GET http://localhost:8080/rest/books
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><collection><book><id>1</id><version>11</version></book><book><id>2</id><
version>1</version><title>Gee Hee</title></book></collection>
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X PUT -H "Content-Type:application/xml" -d "<book><id>2</id><title>Me Yo
u</title></book>" http://localhost:8080/rest/books/2
Could not find MessageBodyWriter for response object of type: org.bookStore.model.Book of media type: application/octet-stream
/ TODO
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X DELETE http://localhost:8080/rest/books/2
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X DELETE http://localhost:8080/rest/books/1
/ hoeft geen content-type bij,

/ we moeten ook de version meegeven , behalve als de version 0 is

/ 1313	. 

[Book.java]$ pwd
C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\bookStore\src\main\java\org\bookStore\model\Book.java
[Book.java]$ jpa-new-field --named print
[Book.java]$ jpa-new-field --named misc

/ hij set precies er in wat je hem geeft, dus als je geen <title> geeft, wordt deze NULL set,
/ behalve id en version; deze gaan apart: id wordt bij de POST set, als je hem niet geeft, wordt hij door Hibernate set, en bij PUTs moet je hem steeds meegeven in de data, maar ook als path variable,
/ version wordt ook bij de POST set, en moet je steeds meegeven (behalve als hij 0 is TODO)
/ als je id en version niet in de data meegeeft, dan ERR. 
/ als we bijvoorbeeld @Column(nullable=false) private String print, dan moet je print ook in data meegeven, anders ERR, 
/ maar een andere ERR dan bij id en version: 
Could not find MessageBodyWriter for response object of type: org.bookStore.model.Book of media type: application/octet-stream
RESTEASY002005


C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X POST -H "Content-Type:application/xml" -d "<book><title>Foo Bar</title
></book>" http://localhost:8080/rest/books
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X GET http://localhost:8080/rest/books
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><collection><book><id>1</id><version>0</version><title>Foo Bar</title></b
ook></collection>
/ Hij heeft id en version set,

C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X PUT -H "Content-Type:application/xml" -d "<book><id>1</id><version>0</
version><print>Hard</print></book>" http://localhost:8080/rest/books/1
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X GET http://localhost:8080/rest/books
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><collection><book><id>1</id><version>1</version><print>Hard</print></book
></collection>
/ we zien de version +1, en de title is weg!

C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X PUT -H "Content-Type:application/xml" -d "<book><id>1</id><version>1</
version><print>Hard</print><title>Foo Bar</title></book>" http://localhost:8080/rest/books/1
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X GET http://localhost:8080/rest/books
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><collection><book><id>1</id><version>2</version><title>Foo Bar</title><pr
int>Hard</print></book></collection>
/ we zien version +1, en title is er weer,	 

C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X PUT -H "Content-Type:application/xml" -d "<book><id>1</id><version>2</
version><print>Hard</print><title>Foo Bar</title></book>" http://localhost:8080/rest/books/1
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X GET http://localhost:8080/rest/books
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><collection><book><id>1</id><version>2</version><title>Foo Bar</title><pr
int>Hard</print></book></collection>
/ als we niets veranderen, wordt version +0
/ de volgorde waarin we PUT maakt niet uit; je ziet bij de GET een andere volgorde van title en print,

/ 1313	. 

/ we maken BookEndpoint een json REST endpoint,

C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X POST -H "Content-Type:application/json" -d "{\"title\":\"Foo Bar\"}" h
ttp://localhost:8080/rest/books
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X GET http://localhost:8080/rest/books
[{"id":2,"version":0,"title":"Foo Bar","publishingDate":null,"print":null,"misc":null}]

C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X PUT -H "content-type:application/json" -d "{\"id\":2,\"version\":0,\"t
itle\":\"Foo Bar\"}" http://localhost:8080/rest/books/2
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X GET http://localhost:8080/rest/books
[{"id":2,"version":0,"title":"Foo Bar","publishingDate":null,"print":null,"misc":null}]
/ Klopt, er is niets veranderd, dus version +0

C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X PUT -H "content-type:application/json" -d "{\"id\":2,\"version\":0,\"t
itle\":\"Gee Hee\"}" http://localhost:8080/rest/books/2
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X GET http://localhost:8080/rest/books
[{"id":2,"version":1,"title":"Gee Hee","publishingDate":null,"print":null,"misc":null}]
/ er is iets veranderd, dus version +1

/ 13	. 

/ init list of books,
/ Hoe ziet een LocalDate in json eruit?

$ vi BookEndpoint.java

@Stateless
@Path("/books")
public class BookEndpoint {
	@PersistenceContext(unitName = "bookStore-persistence-unit")
	private EntityManager em;
	
	@PostConstruct
	public void init() {
		Book book=new Book();
		book.setPublishingDate(LocalDate.now());
		em.persist(book);
	}

C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X GET http://localhost:8080/rest/books
[{"id":1,"version":0,"title":null,"publishingDate":{"year":2017,"month":"SEPTEMBER","dayOfMonth":7,"dayOfWeek":"THURSDAY","era":
"CE","monthValue":9,"dayOfYear":250,"leapYear":false,"chronology":{"id":"ISO","calendarType":"iso8601"}},"print":null,"misc":nul
l}]

/ we moeten de code in  @PostConstuct, in ctor is te vroeg, dan is WH em nog niet injected,

/ 13	. 

/ WILDFLY-SWARM TODOS

/ 1313	. 

/ als we wildfly-swarm.run zien we,
Custom main() usage is intended to be deprecated in a future release and is no longer supported,
please refer to http://reference.wildfly-swarm.io for YAML configuration that replaces it.

/ lees,
https://wildfly-swarm.gitbooks.io/wildfly-swarm-users-guide/content/getting-started/container.html
...
If you choose not to provide a main, org.wildfly.swarm.Swarm#main(?) will be used by default. It boots the default container (based upon your dependencies) and deploys your project artifact.

/ 1313	. 

/ @NotNull vs @Column(nullable=false)

/ lees,
https://stackoverflow.com/questions/7439504/confusion-notnull-vs-columnnullable-false

/ 1313	. 

/ versioning

/ Lees,
https://www.intertech.com/Blog/versioning-optimistic-locking-in-hibernate/

/ 1313	. 

/ resteasy-jaxrs, resteasy-rest-provider

/ lees,
https://www.mkyong.com/webservices/jax-rs/integrate-jackson-with-resteasy/

/ 1313	. 

/ logging in wildfly-swarm

https://wildfly-swarm.gitbooks.io/wildfly-swarm-users-guide/common/logging.html

/ 1313	. 

/ LocalDate json

/ lees,
http://lewandowski.io/2016/02/formatting-java-time-with-spring-boot-using-json/

/ 1313	. 

/ jdbc driver , datasource in wildfly-swarm

https://github.com/wildfly-swarm/wildfly-swarm-examples/blob/master/datasource/
/ automatically, or as in wildfly
/ wat is it/	? Hoe in eclipse?


/ 1313	. 

https://github.com/wildfly-swarm/wildfly-swarm-examples
/ heel veel voorbeelden	,


/ 1313	. 

/ swagger

/ kijk,
https://www.youtube.com/watch?v=xggucT_xl5U


/ 1313	. 

/ LocalDate in json of xml,


/ 1313	. 

/ OPEN IN CHROME

https://docs.jboss.org/author/display/WFLY8/JPA+Reference+Guide
https://docs.jboss.org/hibernate/orm/5.2/topical/html_single/wildfly/Wildfly.html

https://www.gitbook.com/@wildfly-swarm
/ Hier kunnen we kiezen,
User guide
HOWTO												/ datasource in wildfly-swarm
Reference guide
https://www.gitbook.com/book/wildfly-swarm/wildfly-swarm-users-guide/details
https://www.gitbook.com/book/wildfly-swarm/wildfly-swarm-howto/details
https://www.gitbook.com/book/wildfly-swarm/wildfly-swarm-reference-guide/details

https://github.com/wildfly-swarm/wildfly-swarm-examples

https://stackify.com/how-to-build-microservices-with-java-ee-and-jbossforge/          / bookStore

https://forge.jboss.org/documentation

http://docs.jboss.org/hibernate/orm/5.2/userguide/html_single/Hibernate_User_Guide.html#associations-many-to-one

https://github.com/gastaldi

https://www.youtube.com/watch?v=5BvJVAlZyvo   / devoxx wildfly-swarm Goncalves
https://www.youtube.com/watch?v=ebcnOopZFWs		/ andere video over wildfly-swarm

https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html
http://www.oracle.com/technetwork/articles/java/ma14-java-se-8-streams-2177646.html

https://spring.io/guides/tutorials/bookmarks/        / REST met Spring

https://www.youtube.com/watch?v=HN3OcP2f6a8       / ! video over wildfly-swarm,

https://tools.jboss.org/documentation/howto/forge.html   / Wat is dit?

https://github.com/bokeh/datashader			/ python

https://www.sitepoint.com/premium/l/monthly-membership/?ref_source=sitepoint&ref_medium=welcomemat

http://www.vogella.com/tutorials/RxJava/article.html

https://www.thoughts-on-java.org/generate-your-jaxb-classes-in-second/   / xjc       / thorben janssen
/ na activatie:
https://www.thoughts-on-java.org/library/
/ we hebben save,
Java8SupportInHibernate5-ThoughtsOnJavaLibrary.pdf
NativeQueriesWithHibernate-ThoughtsOnJavaLibrary2.pdf

https://javaee.github.io/jaxb-v2/doc/user-guide/ch04.html
http://gdpotter.com/2017/08/14/jaxb-gradle-config
https://spring.io/guides/gs/producing-web-service/
http://axis.apache.org/axis2/java/core/docs/installationguide.html
https://www.tutorialspoint.com/soap/soap_resources.htm



https://maven.apache.org/guides/mini/guide-configuring-plugins.html       / over plugins, 


/ Einde WILDFLY-SWARM TODOS

/ 13	. 








/ Einde REST JAVA-SWARM GELUKT






/ 13	. 

/ Lees over resteasy & jackson, over resteasy-jaxrs en resteasy-jackson-provider
https://www.mkyong.com/webservices/jax-rs/integrate-jackson-with-resteasy/

/ wat is verschil jaxrs en resteasy en jaxrs-jaxb en resteasy-jackson dependencies? 
/ TODO

/ 13	. 

/ versioning

/ google: hibernate id version
/ lees,
https://www.intertech.com/Blog/versioning-optimistic-locking-in-hibernate/



/ 13	. 




/ google:
/ lees,
http://docs.oracle.com/javaee/6/tutorial/doc/gkknj.html

http://www.logicbig.com/tutorials/java-ee-tutorial/jax-rs/post-example/
ClientBuilder
/ TODO

/ Intermezzo

/ Hibernate logging,

/ google: hibernate show_sql parameter values

/ Lees,

https://stackoverflow.com/questions/1710476/how-to-print-a-query-string-with-parameter-values-when-using-hibernate

You need to enable logging for the the following categories:

org.hibernate.SQL   - set to debug to log all SQL DML statements as they are executed
org.hibernate.type - set to trace to log all JDBC parameters
So a log4j configuration could look like:

# logs the SQL statements
log4j.logger.org.hibernate.SQL=debug 

# Logs the JDBC parameters passed to a query
log4j.logger.org.hibernate.type=trace 

The first is equivalent to hibernate.show_sql=true legacy property, the second prints the bound parameters among other things.

Another solution (non hibernate based) would be to use a JDBC proxy driver like P6Spy.

/ Lees,
https://www.mkyong.com/hibernate/how-to-display-hibernate-sql-parameter-values-log4j/

/ TODO In wildfly-swarm,

/ Einde Intermezzo

/ 13	. 

/ we proberen nog een keer bookStore, nu bookStore2, maar nu in wildfly, 
https://stackify.com/how-to-build-microservices-with-java-ee-and-jbossforge/

[workspace-jbosstools-jee-oxygen]$ project-new --named bookStore2 --stack JAVA_EE_7
[bookStore2]$ jpa-new-entity --named Book
[Book.java]$ jpa-new-field --named title
[Book.java]$ jpa-new-field --named publishingDate --type java.time.LocalDate
[Book.java]$ rest-generate-endpoints-from-entities --targets org.bookStore2.model.Book
[BookEndpoint.java]$ build
/ start wildfly, en deploy bookStore2.war,
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X GET http://localhost:8080/bookStore2/rest/books
[]
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X POST -H "content-type:application/json" -d "{\"version\":\"11\"}" http
://localhost:8080/bookStore2/rest/books
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X GET http://localhost:8080/bookStore2/rest/books
[{"id":1,"version":11,"title":null,"publishingDate":null}]
C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>curl -X PUT -H "content-type:application/json" -d "{\"title\":\"Foo Bar\"}" ht
tp://localhost:8080/bookStore2/rest/books/1
Could not find MessageBodyWriter for response object of type: org.bookStore2.model.Book of media type: application/octet-stream

/ 13	. 

/ wildfly-swarm

////////////////////////////////////////
/ we hebben gedaan: rest-generate-endpoints-from-entities, maar we zien geen jaxrs dependency in de wildfly-swarm-plugin,

[Main.java]$ pwd
C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\bookStore\src\main\java\org\bookStore\Main.java

[Main.java]$ wildfly-swarm-detect-fractions
***INFO*** Detected fractions: [org.wildfly.swarm:ejb:2017.8.1, org.wildfly.swarm:jaxrs-jaxb:2017.8.1, org.wildfly.swarm:jpa:20
7.8.1]
[Main.java]$ wildfly-swarm-add-fraction --fractions ejb jaxrs-jaxb jpa
***SUCCESS*** Wildfly Swarm Fractions '[ejb, jaxrs-jaxb, jpa]' were successfully added to the project descriptor

/ hoe zit het met jaxrs? Omdat we jaxrs-jaxb, hebben we jaxrs ook,


C:\Users\ervelden\.m2\repository\org\wildfly>dir swarm
 Volume in drive C is System
 Volume Serial Number is 90D0-8A5A
03-09-2017  19:13    <DIR>          bean-validation
01-09-2017  10:27    <DIR>          bom-all
01-09-2017  10:27    <DIR>          bootstrap
31-08-2017  22:24    <DIR>          build-parent
03-09-2017  19:13    <DIR>          cdi
03-09-2017  19:13    <DIR>          cdi-config
01-09-2017  10:27    <DIR>          config-api
01-09-2017  10:27    <DIR>          config-api-parent
01-09-2017  10:27    <DIR>          config-api-runtime
06-09-2017  13:43    <DIR>          connector
01-09-2017  10:27    <DIR>          container
06-09-2017  13:43    <DIR>          datasources
01-09-2017  10:27    <DIR>          ee
06-09-2017  13:43    <DIR>          ejb
31-08-2017  22:24    <DIR>          fraction-metadata
01-09-2017  10:27    <DIR>          io
01-09-2017  10:27    <DIR>          jaxrs
01-09-2017  10:27    <DIR>          jaxrs-cdi
06-09-2017  13:43    <DIR>          jaxrs-jaxb
06-09-2017  13:43    <DIR>          jca
06-09-2017  13:43    <DIR>          jpa
01-09-2017  10:27    <DIR>          logging
31-08-2017  22:24    <DIR>          meta-spi
01-09-2017  10:27    <DIR>          naming
01-09-2017  10:27    <DIR>          parent
01-09-2017  10:27    <DIR>          request-controller
01-09-2017  10:27    <DIR>          security
01-09-2017  10:27    <DIR>          spi
01-09-2017  12:49    <DIR>          tools
03-09-2017  19:13    <DIR>          transactions
01-09-2017  10:27    <DIR>          undertow
31-08-2017  22:24    <DIR>          wildfly-swarm
01-09-2017  10:27    <DIR>          wildfly-swarm-plugin

C:\Users\ervelden\.m2\repository\org\wildfly>notepad++ swarm\jaxrs-jaxb\2017.8.1\jaxrs-jaxb-2017.8.1.pom

 <dependencies>
    <!-- Fraction Dependencies -->
    <dependency>
      <groupId>org.wildfly.swarm</groupId>
      <artifactId>jaxrs</artifactId>
    </dependency>
    <dependency>
      <groupId>org.wildfly.swarm</groupId>
      <artifactId>logging</artifactId>
    </dependency>

/ Intermezzo

/ Einde Intermezzo

/ Einde FORGE

/ FORGE SOURCE

C:\Users\ervelden\forge>git clone https://github.com/forge/core.git

/ Einde FORGE SOURCE 

/ JAX-WS WILDFLY

/ in forge,
[workspace-jbosstools-jee-oxygen]$ pwd
C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen
[workspace-jbosstools-jee-oxygen]$ project-new --named bookStoreWS --type wildfly-swarm --stack JAVA_EE_7
/ er zijn 
soap-new-service
soap-setup




/ Einde JAX-WS WILDFLY

/ JAX-WS MKYONG

/ Lees,
http://www.mkyong.com/tutorials/jax-ws-tutorials/

/ lees,
http://www.mkyong.com/webservices/jax-ws/jax-ws-hello-world-example/

/ we hebben de appl downloaded en  extract, maar we use hem niet,
C:\Users\ervelden\jaxws\JAX-WS-HelloWorld-RPC-Example>

/ eclipse jbosstools-jee-oxygen,  workspace-jbosstools-jee-oxygen, project bookStoreWS2	, 

/ we maken eerst deze en daarna bookStoreWS, uit de wildfly-swarm examples,

/ in org.bookStoreWS2.soap package,

$ vi HelloWorld.java

package org.bookStoreWS2.soap;

import java.util.List;

import javax.jws.WebMethod;
import javax.jws.WebService;

@WebService()
public interface HelloWorld {

   
    @WebMethod
    public String sayHello();

    @WebMethod
    public String sayHelloToName(String name);

    @WebMethod
    public String sayHelloToNames(List<String> names);

}

$ vi HelloWorldImpl.java

package org.bookStoreWS2.soap;

import java.util.ArrayList;
import java.util.List;

import javax.jws.WebService;

@WebService(endpointInterface = "org.bookStoreWS2.soap.HelloWorld",serviceName="HelloWorld")
public class HelloWorldImpl implements HelloWorld {

    @Override
    public String sayHello() {
        return "Hello World!";
    }

    @Override
    public String sayHelloToName(final String name) {

        /* Create a list with just the one value */
        final List<String> names = new ArrayList<>();
        names.add(name);

        return sayHelloToNames(names);
    }

    @Override
    public String sayHelloToNames(final List<String> names) {
        return "Hello " + createNameListString(names);
    }

    /**
     * Creates a list of names separated by commas or an and symbol if its the last separation. This is then used to say hello to
     * the list of names.
     *
     * i.e. if the input was {John, Mary, Luke} the output would be John, Mary & Luke
     *
     * @param names A list of names
     * @return The list of names separated as described above.
     */
    private String createNameListString(final List<String> names) {

        /*
         * If the list is null or empty then assume the call was anonymous.
         */
        if (names == null || names.isEmpty()) {
            return "Anonymous!";
        }

        final StringBuilder nameBuilder = new StringBuilder();
        for (int i = 0; i < names.size(); i++) {

            /*
             * Add the separator if its not the first string or the last separator since that should be an and (&) symbol.
             */
            if (i != 0 && i != names.size() - 1)
                nameBuilder.append(", ");
            else if (i != 0 && i == names.size() - 1)
                nameBuilder.append(" & ");

            nameBuilder.append(names.get(i));
        }

        nameBuilder.append("!");

        return nameBuilder.toString();
    }

}

/ in org.bookStoreWS2.client package, 

$ vi HelloWorldAppClient.java

package org.bookStoreWS2.client;

import java.net.URL;

import javax.xml.namespace.QName;
import javax.xml.ws.Service;
import javax.xml.ws.WebServiceRef;

import org.bookStoreWS2.soap.HelloWorld;

public class HelloWorldAppClient {
	
	public static void main(String[] args) throws Exception {
		
		URL url=new URL("http://localhost:8080/HelloWorld?wsdl");
		QName qName=new QName("http://soap.bookStoreWS2.org/", "HelloWorld");
		Service service=Service.create(url,qName);
		HelloWorld helloWorld=service.getPort(HelloWorld.class);
		String s=helloWorld.sayHello();
		System.out.println(s);
		String s2=helloWorld.sayHelloToName("Foo Bar");
		System.out.println(s2);
		List<String>l=Arrays.asList("Me","You","Her");
		String s3=helloWorld.sayHelloToNames(l);
		System.out.println(s3);
		
	}
}

/ we zien in de QName dat in de namespaceURI de volgorde is omgedraaid van de package name,
/ en let op de / erachter	, want HelloWorld komt erachter,
/ dus package org.bookStoreWS2.soap wordt http://soap.bookStoreWS2.org/	, 

/ start wildfly-swarm in bookStore2,
/ run HelloWorldAppClient in eclipse	, 
/ we zien, 
Hello World!
Hello Foo Bar!
Hello Me, You & Her!

/ we kunnen GET doen op de URL http://localhost:8080/HelloWorld?wsdl	, 
/ dit is de WSDL en is een XMLSchema. 
/ we zien hier ook http://soap.bookStoreWS2.org (dus omgedraaide package name)	, 




/ 13	.

/ Hoe de SOAP messages te zien? 

/ lees	, 
https://www.mkyong.com/webservices/jax-ws/how-to-trace-soap-message-in-eclipse-ide/

/ Window, Preferences, Run/Debug, TCP/IP Monitor, 

Show the TCP/IP Monitor view when there is activity: check (is al)

/ click Add
Local monitoring port: 8888		/ monitor port
type TCP/IP
Hostname: localhost
Port: 8080					/ Server port 
OK

/ Onder de Add button zien we de Start button, 
/ click,
/ Apply and close 	/ TODO

/ we moeten in de client veranderen,

$ vi HelloWorldAppClient.java
	public static void main(String[] args) throws Exception {
		
		URL url=new URL("http://localhost:8888/HelloWorld?wsdl");				<- 8080 wordt nu 8888
		QName qName=new QName("http://soap.bookStoreWS2.org/", "HelloWorld");
		
/ we zien alleen wsld in de tcp monitor
/ TODO
/ Lees,
https://stackoverflow.com/questions/19589677/why-tcp-ip-monitor-doesnt-catch-soap-messages-in-eclipse
/ en 
http://www.codejava.net/java-ee/web-services/java-web-services-binary-data-transfer-example-base64-encoding

/ TODO

/ 7	. 

/ wsimport	, 

/ Als we een GET doen op http://localhost:8080/HelloWorld?wsdl, zien we de wsdl,

C:\Users\ervelden\jaxws\wsimport> wsimport -keep http://localhost:8080/HelloWorld?wsdl
parsing WSDL...
Generating code...
Compiling code...









/ Einde JAX-WS MKYONG

/ SOAPUI

/ Lees, 
https://www.soapui.org/getting-started.html

C:\Program Files (x86)\SmartBear\SoapUI-5.3.0
D:\Users\ervelden\SoapUI-Tutorials
SmartBear\SoapUI 5.3.0					/ start menu folder
/ desktop icon: check

/ Lees,
https://www.soapui.org/getting-started/installing-soapui/installing-on-windows.html

/ 7	. 




/ Einde SOAPUI

/ JAX-WS GLASSFISH


/ of,
https://docs.oracle.com/javaee/7/tutorial/partwebsvcs.htm#BNAYK

/ lees,
https://docs.oracle.com/javaee/7/index.html
/ we zien JavaEE7 installation instructions
http://www.oracle.com/technetwork/java/javaee/documentation/javaee7sdk-install-1957708.html

http://www.oracle.com/technetwork/java/javaee/documentation/javaee7sdk-install-1957708.html#install


/ we download van
http://www.oracle.com/technetwork/java/javaee/downloads/java-ee-sdk-7-downloads-1956236.html
/ de installer van glassfish 
java_ee_sdk-7u3.zip
/ we install in \Users\ervelden\bin

/ we zien de code van de tutorial in,
C:\Users\ervelden\bin\glassfish4\docs\javaee-tutorial\examples\jaxws
/ In github is dit javaee/tutorial-examples

/ we kunnen import in eclipse
C:\Users\ervelden\bin\glassfish4\docs\javaee-tutorial\examples
/ TODO

/ op,
https://docs.oracle.com/javaee/7/index.html
/ we zien: Java EE 7 Installation Instructions
http://www.oracle.com/technetwork/java/javaee/documentation/javaee7sdk-install-1957708.html
/ we zien Installing the Software
http://www.oracle.com/technetwork/java/javaee/documentation/javaee7sdk-install-1957708.html#install
/ we zien Quick start guide
https://javaee.github.io/glassfish/
/ we zien Sources: de github van Glassfish	/ TODO ipv wat wij deden met installer,
/ we zien: Documentation
https://javaee.github.io/glassfish/documentation
/ lees installation guide,
https://javaee.github.io/glassfish/doc/4.0/installation-guide.pdf
/ en quick-start-guide,
https://javaee.github.io/glassfish/doc/4.0/quick-start-guide.pdf
/ we hebben ze download,
glassfish-javaee7-installation-guide.pdf
glassfish-javaee7-quick-start-guide.pdf

/ 13	. 

/ lees,
https://github.com/javaee/tutorial-examples/blob/master/README.md

/ hier staat dat we $ mvn package moeten doen, op de javaeetutorial's pom	,
/ TODO

/ 13	. 

/ TODOS

/ 1313	. 

/ we moeten geven,
http://localhost:8080/helloservice-war/HelloService?Tester

/ Waar komt HelloService vandaan?
/ TODO

/ 1313	. 

/ Als we in appclient.bat, die zo wordt used:
C:\Users\ervelden\bin\glassfish4\bin>..\glassfish\bin\appclient.bat -client C:\Users\ervelden\bin\glassfish4\docs\javaee-tutoria
l\examples\jaxws\hello-appclient\target\hello-appclient.jar
/ set,
@echo on

/ dan zien we dat er wordt gedaan: java -jar hello-appclient.jar,
C:\Users\ervelden\bin\glassfish4\bin>"C:\PROGRA~1\Java\JDK18~1.0_1\bin\java.exe" -Dcom.sun.aas.installRoot="C:\Users\ervelden\bi
n\glassfish4\glassfish\bin\.." -Djava.security.policy="C:\Users\ervelden\bin\glassfish4\glassfish\bin\..\lib\appclient\client.po
licy" -Djava.system.class.loader=org.glassfish.appclient.client.acc.agent.ACCAgentClassLoader -Djava.security.auth.login.config=
"C:\Users\ervelden\bin\glassfish4\glassfish\bin\..\lib\appclient\appclientlogin.conf"  -javaagent:"C:\Users\ervelden\bin\glassfi
sh4\glassfish\bin\..\lib\gf-client.jar"=argsfile="C:\Users\ervelden\AppData\Local\Temp\acc156824574611435746.dat" -Djava.ext.dir
s="C:\Users\ervelden\bin\glassfish4\glassfish\bin\..\lib\ext";"C:\PROGRA~1\Java\JDK18~1.0_1\jre\lib\ext" -Djava.endorsed.dirs="C
:\Users\ervelden\bin\glassfish4\glassfish\bin\..\lib\endorsed";"C:\Users\ervelden\bin\glassfish4\glassfish\bin\..\modules\endors
ed";"C:\PROGRA~1\Java\JDK18~1.0_1\jre\lib\endorsed"  -jar "C:\Users\ervelden\bin\glassfish4\docs\javaee-tutorial\examples\jaxws\
hello-appclient\target\hello-appclient.jar"
Hello, world.

/ Hoe kunnen we HelloAppClient debug?
/ TODO

/ 13	. 

/ lees,
https://javaee.github.io/glassfish/doc/4.0/quick-start-guide.pdf

C:\Users\ervelden\bin\glassfish4\bin>asadmin start-domain
Waiting for domain1 to start .....
Successfully started the domain : domain1
domain  Location: C:\Users\ervelden\bin\glassfish4\glassfish\domains\domain1
Log File: C:\Users\ervelden\bin\glassfish4\glassfish\domains\domain1\logs\server.log
Admin Port: 4848
Command start-domain executed successfully.


C:\Users\ervelden\bin\glassfish4\bin>asadmin start-database --dbhome ..\javadb
Starting database in Network Server mode on host 0.0.0.0 and port 1527.
--------- Derby Network Server Information --------
Version: CSS10100/10.10.2.0 - (1582446)  Build: 1582446  DRDA Product Id: CSS10100
-- listing properties --
derby.drda.traceDirectory=..\javadb
derby.drda.maxThreads=0
derby.drda.sslMode=off
derby.drda.keepAlive=true
derby.drda.minThreads=0
derby.drda.portNumber=1527
derby.drda.logConnections=false
derby.drda.timeSlice=0
derby.drda.startNetworkServer=false
derby.drda.host=0.0.0.0
derby.drda.traceAll=false
------------------ Java Information ------------------
Java Version:    1.8.0_144
Java Vendor:     Oracle Corporation
Java home:       C:\Program Files\Java\jdk1.8.0_144\jre
Java classpath:  C:\Users\ervelden\bin\glassfish4\glassfish\lib\asadmin\cli-optional.jar;C:\Users\er
\lib\derby.jar;C:\Users\ervelden\bin\glassfish4\javadb\lib\derbytools.jar;C:\Users\ervelden\bin\glas
ar;C:\Users\ervelden\bin\glassfish4\javadb\lib\derbyclient.jar
OS name:         Windows 7
OS architecture: amd64
OS version:      6.1
Java user name:  ERVELDEN
Java user home:  C:\Users\ervelden
Java user dir:   C:\Users\ervelden\bin\glassfish4\bin
java.specification.name: Java Platform API Specification
java.specification.version: 1.8
java.runtime.version: 1.8.0_144-b01
--------- Derby Information --------
[C:\Users\ervelden\bin\glassfish4\javadb\lib\derby.jar] 10.10.2.0 - (1582446)
[C:\Users\ervelden\bin\glassfish4\javadb\lib\derbytools.jar] 10.10.2.0 - (1582446)
[C:\Users\ervelden\bin\glassfish4\javadb\lib\derbynet.jar] 10.10.2.0 - (1582446)
[C:\Users\ervelden\bin\glassfish4\javadb\lib\derbyclient.jar] 10.10.2.0 - (1582446)
------------------------------------------------------
----------------- Locale Information -----------------
Current Locale :  [English/United States [en_US]]
Found support for locale: [cs]
         version: 10.10.2.0 - (1582446)
Found support for locale: [de_DE]
         version: 10.10.2.0 - (1582446)
Found support for locale: [es]
         version: 10.10.2.0 - (1582446)
Found support for locale: [fr]
         version: 10.10.2.0 - (1582446)
Found support for locale: [hu]
         version: 10.10.2.0 - (1582446)
Found support for locale: [it]
         version: 10.10.2.0 - (1582446)
Found support for locale: [ja_JP]
         version: 10.10.2.0 - (1582446)
Found support for locale: [ko_KR]
         version: 10.10.2.0 - (1582446)
Found support for locale: [pl]
         version: 10.10.2.0 - (1582446)
Found support for locale: [pt_BR]
         version: 10.10.2.0 - (1582446)
Found support for locale: [ru]
         version: 10.10.2.0 - (1582446)
Found support for locale: [zh_CN]
         version: 10.10.2.0 - (1582446)
Found support for locale: [zh_TW]
         version: 10.10.2.0 - (1582446)
------------------------------------------------------
------------------------------------------------------

Starting database in the background.
Log redirected to ..\javadb\derby.log.
Command start-database executed successfully.

/ Geef 
localhost:8080
/ click op link 'Administration ...',
http://localhost:4848/common/index.jsf

/ 1313	. 

C:\Users\ervelden\bin\glassfish4\bin>asadmin stop-database
Sat Sep 09 21:00:21 GMT+01:00 2017 : Connection obtained for host: 0.0.0.0, port number 1527.
Sat Sep 09 21:00:22 GMT+01:00 2017 : Apache Derby Network Server - 10.10.2.0 - (1582446) shutdown
Command stop-database executed successfully.

C:\Users\ervelden\bin\glassfish4\bin>asadmin stop-domain
Waiting for the domain to stop .
Command stop-domain executed successfully.


/ 13	. 

/ we maken een andere ws, workspace-jbosstools-jee-oxygen-glassfish , met jbosstools-jee-oxygen eclipse, 
/ en we import Maven project 
C:\Users\ervelden\bin\glassfish4\docs\javaee-tutorial\examples
/ Ook weer, net als bij wildfly-swarm een hele lange lijst,

/ javaeetutorial is de parent,
/ er zijn sub modules jaxws, maar ook nog dieper liggende	,

/ we geven straks mvn in jaxws/helloworld-war en in jaxws/hello-appclient

////////////////////////////////////
/ we zullen zien dat wsimport HelloService gens	, een proxy (client) die we bij mkyong bij JAX-WS MKYONG zelf programmeerde	, 

$ vi javaeetutorial\pom.xml

        <glassfish.home>${glassfish.home.prefix}/glassfish4</glassfish.home>
        <integration.container.id>glassfish4x</integration.container.id>
    </properties>
    
    <profiles>
        <profile>
            <id>windows</id>
            <activation>
                <os>
                    <family>windows</family>
                </os>
            </activation>
            <properties>
                <glassfish.home.prefix>c:/Users/ervelden/bin</glassfish.home.prefix>			<!-- WAS c:/. -->
                <glassfish.executables.suffix>.bat</glassfish.executables.suffix>
            </properties>
        </profile>
		
/ we proberen in de windows profile:
                

/ in een pom.xml is het zo dat ${basedir} de dir is waar de pom.xml is,

/ in ws workspace-jbosstools-jee-oxygen-glassfish
/ proj jaxws

/ 13	 .

/ In jaxws/helloservice-war is er een pom.xml, doen mvn clean verify
/ er onstaat helloservice-war.war, 

C:\Users\ervelden\bin\glassfish4\bin>jar tvf C:\Users\ervelden\bin\glassfish4\docs\javaee-tutorial\examples\jaxws\helloservice-w
ar\target\helloservice-war.war
     0 Sat Sep 09 18:38:20 GMT+01:00 2017 META-INF/
   134 Sat Sep 09 18:38:18 GMT+01:00 2017 META-INF/MANIFEST.MF
     0 Sat Sep 09 18:38:20 GMT+01:00 2017 WEB-INF/
     0 Sat Sep 09 18:38:20 GMT+01:00 2017 WEB-INF/classes/
     0 Sat Sep 09 18:38:20 GMT+01:00 2017 WEB-INF/classes/javaeetutorial/
     0 Sat Sep 09 18:38:20 GMT+01:00 2017 WEB-INF/classes/javaeetutorial/helloservice/
     0 Sat Sep 09 18:38:20 GMT+01:00 2017 WEB-INF/classes/javaeetutorial/helloservice/jaxws/
     0 Sat Sep 09 18:38:20 GMT+01:00 2017 WEB-INF/wsdl/
   799 Sat Sep 09 18:38:18 GMT+01:00 2017 WEB-INF/classes/javaeetutorial/helloservice/Hello.class
   826 Sat Sep 09 18:38:20 GMT+01:00 2017 WEB-INF/classes/javaeetutorial/helloservice/jaxws/SayHello.class
   866 Sat Sep 09 18:38:20 GMT+01:00 2017 WEB-INF/classes/javaeetutorial/helloservice/jaxws/SayHelloResponse.class
   401 Tue Apr 11 12:44:16 GMT+01:00 2017 WEB-INF/web.xml
  1950 Sat Sep 09 18:38:20 GMT+01:00 2017 WEB-INF/wsdl/HelloService.wsdl
   686 Sat Sep 09 18:38:20 GMT+01:00 2017 WEB-INF/wsdl/HelloService_schema1.xsd
     0 Sat Sep 09 18:38:20 GMT+01:00 2017 META-INF/maven/
     0 Sat Sep 09 18:38:20 GMT+01:00 2017 META-INF/maven/org.glassfish.javaeetutorial/
     0 Sat Sep 09 18:38:20 GMT+01:00 2017 META-INF/maven/org.glassfish.javaeetutorial/helloservice-war/
  2018 Tue Apr 11 12:44:16 GMT+01:00 2017 META-INF/maven/org.glassfish.javaeetutorial/helloservice-war/pom.xml
   140 Sat Sep 09 18:38:20 GMT+01:00 2017 META-INF/maven/org.glassfish.javaeetutorial/helloservice-war/pom.properties
   
/ en deze deploy we in glassfish,
C:\Users\ervelden\bin\glassfish4\bin>asadmin list-applications
C:\Users\ervelden\bin\glassfish4\bin>asadmin undeploy helloservice-war
C:\Users\ervelden\bin\glassfish4\bin>asadmin deploy C:\Users\ervelden\bin\glassfish4\docs\javaee-tutorial\examples\jaxws\hellose
rvice-war\target\helloservice-war.war

/ Lees in de gewone JAVAEE7 tutorial,
https://docs.oracle.com/javaee/7/tutorial/jaxws001.htm#BNAYW

/ Geef,
http://localhost:8080/helloservice-war/HelloService?Tester
/ OK

/ we kunnen ook geven, 
http://localhost:8080/helloservice-war/HelloService
/ we zien,
Web Services

Endpoint	
Service Name:	{http://helloservice.javaeetutorial/}HelloService
Port Name:	{http://helloservice.javaeetutorial/}HelloPort

Information
Address:	http://localhost:8080/helloservice-war/HelloService
WSDL:	http://localhost:8080/helloservice-war/HelloService?wsdl
Implementation class:	javaeetutorial.helloservice.Hello


/ 13	. 

/ appl client,


It retrieves a proxy to the service, also known as a port, by invoking getHelloPort on the service:


/  we doen $ mvn clean package, 
/ OK, er onstaat een hello-appclient.jar,
/ hieronder doen we $ mvn clean verify,

/ phase verify is voorby phase package	, dus we kunnen altijd clean verify doen, 

/ wsimport generates classes,

/ we zien in hello-appclient\target\generated-sources\wsimport

/ 1313	.

$ vi javaeetutorial\helloservice\endpoint\Hello.java

package javaeetutorial.helloservice.endpoint;

import javax.jws.WebMethod;
import javax.jws.WebParam;
import javax.jws.WebResult;
import javax.jws.WebService;
import javax.xml.bind.annotation.XmlSeeAlso;
import javax.xml.ws.Action;
import javax.xml.ws.RequestWrapper;
import javax.xml.ws.ResponseWrapper;


/**
 * This class was generated by the JAX-WS RI.
 * JAX-WS RI 2.2.6b21 
 * Generated source version: 2.2
 * 
 */
@WebService(name = "Hello", targetNamespace = "http://helloservice.javaeetutorial/")
@XmlSeeAlso({
    ObjectFactory.class
})
public interface Hello {

    /**
     * 
     * @param arg0
     * @return
     *     returns java.lang.String
     */
    @WebMethod
    @WebResult(targetNamespace = "")
    @RequestWrapper(localName = "sayHello", targetNamespace = "http://helloservice.javaeetutorial/", className = "javaeetutorial.helloservice.endpoint.SayHello")
    @ResponseWrapper(localName = "sayHelloResponse", targetNamespace = "http://helloservice.javaeetutorial/", className = "javaeetutorial.helloservice.endpoint.SayHelloResponse")
    @Action(input = "http://helloservice.javaeetutorial/Hello/sayHelloRequest", output = "http://helloservice.javaeetutorial/Hello/sayHelloResponse")
    public String sayHello(
        @WebParam(name = "arg0", targetNamespace = "")
        String arg0);

}

/ 1313	. 

$ vi javaeetutorial\helloservice\endpoint\HelloService.java


package javaeetutorial.helloservice.endpoint;

import java.net.MalformedURLException;
import java.net.URL;
import javax.xml.namespace.QName;
import javax.xml.ws.Service;
import javax.xml.ws.WebEndpoint;
import javax.xml.ws.WebServiceClient;
import javax.xml.ws.WebServiceException;
import javax.xml.ws.WebServiceFeature;


/**
 * This class was generated by the JAX-WS RI.
 * JAX-WS RI 2.2.6b21 
 * Generated source version: 2.2
 * 
 */
@WebServiceClient(name = "HelloService", targetNamespace = "http://helloservice.javaeetutorial/", wsdlLocation = "http://localhost:8080/helloservice/HelloService?WSDL")
public class HelloService
    extends Service
{

    private final static URL HELLOSERVICE_WSDL_LOCATION;
    private final static WebServiceException HELLOSERVICE_EXCEPTION;
    private final static QName HELLOSERVICE_QNAME = new QName("http://helloservice.javaeetutorial/", "HelloService");

    static {
        URL url = null;
        WebServiceException e = null;
        try {
            url = new URL("http://localhost:8080/helloservice/HelloService?WSDL");
        } catch (MalformedURLException ex) {
            e = new WebServiceException(ex);
        }
        HELLOSERVICE_WSDL_LOCATION = url;
        HELLOSERVICE_EXCEPTION = e;
    }

    public HelloService() {
        super(__getWsdlLocation(), HELLOSERVICE_QNAME);
    }

    public HelloService(WebServiceFeature... features) {
        super(__getWsdlLocation(), HELLOSERVICE_QNAME, features);
    }

    public HelloService(URL wsdlLocation) {
        super(wsdlLocation, HELLOSERVICE_QNAME);
    }

    public HelloService(URL wsdlLocation, WebServiceFeature... features) {
        super(wsdlLocation, HELLOSERVICE_QNAME, features);
    }

    public HelloService(URL wsdlLocation, QName serviceName) {
        super(wsdlLocation, serviceName);
    }

    public HelloService(URL wsdlLocation, QName serviceName, WebServiceFeature... features) {
        super(wsdlLocation, serviceName, features);
    }

    /**
     * 
     * @return
     *     returns Hello
     */
    @WebEndpoint(name = "HelloPort")
    public Hello getHelloPort() {
        return super.getPort(new QName("http://helloservice.javaeetutorial/", "HelloPort"), Hello.class);
    }

    /**
     * 
     * @param features
     *     A list of {@link javax.xml.ws.WebServiceFeature} to configure on the proxy.  Supported features not in the <code>features</code> parameter will have their default values.
     * @return
     *     returns Hello
     */
    @WebEndpoint(name = "HelloPort")
    public Hello getHelloPort(WebServiceFeature... features) {
        return super.getPort(new QName("http://helloservice.javaeetutorial/", "HelloPort"), Hello.class, features);
    }

    private static URL __getWsdlLocation() {
        if (HELLOSERVICE_EXCEPTION!= null) {
            throw HELLOSERVICE_EXCEPTION;
        }
        return HELLOSERVICE_WSDL_LOCATION;
    }

}


/ 1313	. 

$ vi javaeetutorial\helloservice\endpoint\ObjectFactory.java


package javaeetutorial.helloservice.endpoint;

import javax.xml.bind.JAXBElement;
import javax.xml.bind.annotation.XmlElementDecl;
import javax.xml.bind.annotation.XmlRegistry;
import javax.xml.namespace.QName;


/**
 * This object contains factory methods for each 
 * Java content interface and Java element interface 
 * generated in the javaeetutorial.helloservice.endpoint package. 
 * <p>An ObjectFactory allows you to programatically 
 * construct new instances of the Java representation 
 * for XML content. The Java representation of XML 
 * content can consist of schema derived interfaces 
 * and classes representing the binding of schema 
 * type definitions, element declarations and model 
 * groups.  Factory methods for each of these are 
 * provided in this class.
 * 
 */
@XmlRegistry
public class ObjectFactory {

    private final static QName _SayHello_QNAME = new QName("http://helloservice.javaeetutorial/", "sayHello");
    private final static QName _SayHelloResponse_QNAME = new QName("http://helloservice.javaeetutorial/", "sayHelloResponse");

    /**
     * Create a new ObjectFactory that can be used to create new instances of schema derived classes for package: javaeetutorial.helloservice.endpoint
     * 
     */
    public ObjectFactory() {
    }

    /**
     * Create an instance of {@link SayHello }
     * 
     */
    public SayHello createSayHello() {
        return new SayHello();
    }

    /**
     * Create an instance of {@link SayHelloResponse }
     * 
     */
    public SayHelloResponse createSayHelloResponse() {
        return new SayHelloResponse();
    }

    /**
     * Create an instance of {@link JAXBElement }{@code <}{@link SayHello }{@code >}}
     * 
     */
    @XmlElementDecl(namespace = "http://helloservice.javaeetutorial/", name = "sayHello")
    public JAXBElement<SayHello> createSayHello(SayHello value) {
        return new JAXBElement<SayHello>(_SayHello_QNAME, SayHello.class, null, value);
    }

    /**
     * Create an instance of {@link JAXBElement }{@code <}{@link SayHelloResponse }{@code >}}
     * 
     */
    @XmlElementDecl(namespace = "http://helloservice.javaeetutorial/", name = "sayHelloResponse")
    public JAXBElement<SayHelloResponse> createSayHelloResponse(SayHelloResponse value) {
        return new JAXBElement<SayHelloResponse>(_SayHelloResponse_QNAME, SayHelloResponse.class, null, value);
    }

}

/ 1313	. 


$ vi javaeetutorial\helloservice\endpoint\SayHello.java


package javaeetutorial.helloservice.endpoint;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlType;


/**
 * <p>Java class for sayHello complex type.
 * 
 * <p>The following schema fragment specifies the expected content contained within this class.
 * 
 * <pre>
 * &lt;complexType name="sayHello">
 *   &lt;complexContent>
 *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
 *       &lt;sequence>
 *         &lt;element name="arg0" type="{http://www.w3.org/2001/XMLSchema}string" minOccurs="0"/>
 *       &lt;/sequence>
 *     &lt;/restriction>
 *   &lt;/complexContent>
 * &lt;/complexType>
 * </pre>
 * 
 * 
 */
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "sayHello", propOrder = {
    "arg0"
})
public class SayHello {

    protected String arg0;

    /**
     * Gets the value of the arg0 property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getArg0() {
        return arg0;
    }

    /**
     * Sets the value of the arg0 property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setArg0(String value) {
        this.arg0 = value;
    }

}

/ 1313	. 

$ vi javaeetutorial\helloservice\endpoint\HelloResponse.java


package javaeetutorial.helloservice.endpoint;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlType;


/**
 * <p>Java class for sayHelloResponse complex type.
 * 
 * <p>The following schema fragment specifies the expected content contained within this class.
 * 
 * <pre>
 * &lt;complexType name="sayHelloResponse">
 *   &lt;complexContent>
 *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
 *       &lt;sequence>
 *         &lt;element name="return" type="{http://www.w3.org/2001/XMLSchema}string" minOccurs="0"/>
 *       &lt;/sequence>
 *     &lt;/restriction>
 *   &lt;/complexContent>
 * &lt;/complexType>
 * </pre>
 * 
 * 
 */
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "sayHelloResponse", propOrder = {
    "_return"
})
public class SayHelloResponse {

    @XmlElement(name = "return")
    protected String _return;

    /**
     * Gets the value of the return property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getReturn() {
        return _return;
    }

    /**
     * Sets the value of the return property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setReturn(String value) {
        this._return = value;
    }

}

/ 13	. 

$ mvn clean verify

/ we zien in console,

[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building hello-appclient 7.0.6
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ hello-appclient ---
[INFO] Deleting C:\Users\ervelden\bin\glassfish4\docs\javaee-tutorial\examples\jaxws\hello-appclient\target
[INFO] 
[INFO] --- jaxws-maven-plugin:2.2:wsimport (default) @ hello-appclient ---
[INFO] Processing: file:/C:/Users/ervelden/bin/glassfish4/docs/javaee-tutorial/examples/jaxws/hello-appclient/../helloservice-war/target/generated-sources/wsdl/HelloService.wsdl
[INFO] jaxws:wsimport args: [-keep, -s, C:\Users\ervelden\bin\glassfish4\docs\javaee-tutorial\examples\jaxws\hello-appclient\target\generated-sources\wsimport, -encoding, UTF-8, -Xnocompile, -p, javaeetutorial.helloservice.endpoint, -wsdllocation, http://localhost:8080/helloservice/HelloService?WSDL, file:/C:/Users/ervelden/bin/glassfish4/docs/javaee-tutorial/examples/jaxws/hello-appclient/../helloservice-war/target/generated-sources/wsdl/HelloService.wsdl]
parsing WSDL...

Generating code...

[INFO] 
[INFO] --- maven-resources-plugin:2.4.3:resources (default-resources) @ hello-appclient ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory C:\Users\ervelden\bin\glassfish4\docs\javaee-tutorial\examples\jaxws\hello-appclient\src\main\resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ hello-appclient ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 7 source files to C:\Users\ervelden\bin\glassfish4\docs\javaee-tutorial\examples\jaxws\hello-appclient\target\classes
[INFO] 
[INFO] --- maven-resources-plugin:2.4.3:testResources (default-testResources) @ hello-appclient ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory C:\Users\ervelden\bin\glassfish4\docs\javaee-tutorial\examples\jaxws\hello-appclient\src\test\resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ hello-appclient ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.7.2:test (default-test) @ hello-appclient ---
[INFO] No tests to run.
[INFO] Surefire report directory: C:\Users\ervelden\bin\glassfish4\docs\javaee-tutorial\examples\jaxws\hello-appclient\target\surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
There are no tests to run.

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] --- maven-acr-plugin:1.0:acr (default-acr) @ hello-appclient ---
[INFO] Building JavaEE Application client: hello-appclient
[INFO] Building jar: C:\Users\ervelden\bin\glassfish4\docs\javaee-tutorial\examples\jaxws\hello-appclient\target\hello-appclient.jar
[INFO] 
[INFO] --- cargo-maven2-plugin:1.4.4:redeploy (deploy) @ hello-appclient ---
[INFO] There's nothing to deploy or undeploy
[INFO] 
[INFO] --- exec-maven-plugin:1.2.1:exec (run-appclient) @ hello-appclient ---
Hello, world.
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 8.930 s
[INFO] Finished at: 2017-09-09T20:29:04+01:00
[INFO] Final Memory: 21M/294M
[INFO] ------------------------------------------------------------------------

/ exec-maven-plugin doet:

C:\Users\ervelden\bin\glassfish4\bin>..\glassfish\bin\appclient.bat -client C:\Users\ervelden\bin\glassfish4\docs\javaee-tutoria
l\examples\jaxws\hello-appclient\target\hello-appclient.jar
Hello, world.




/ 13	. 

/ in app client gaat $ mvn clean package OK, maar $ mvn clean verify ERR:

com.sun.enterprise.container.common.spi.util.InjectionException: Exception attempting to inject Env-Prop: javaeetutorial.hello.appclient.HelloAppClient/service@Field-Injectable Resource. Class name = javaeetutorial.hello.appclient.HelloAppClient Field name=service@javax.jws.WebServiceRef@@@ into class javaeetutorial.hello.appclient.HelloAppClient: Lookup failed for 'java:comp/env/javaeetutorial.hello.appclient.HelloAppClient/service' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.url.pkgs=com.sun.enterprise.naming, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl}

C:\Users\ervelden\bin\glassfish4\docs\javaee-tutorial\examples\jaxws\helloservice-war\target\helloservice-war.war

C:\Users\ervelden\bin\glassfish4>findstr /s c:"..." *.*



/ WH RM
/ lees,
http://docs.oracle.com/javaee/6/tutorial/doc/bnayn.html
/ we zien JavaEE7 niet in start, all programs, see
http://docs.oracle.com/javaee/6/tutorial/doc/gexaj.html

/ Einde WH RM







/ 13	. 

https://github.com/javaee-samples/javaee7-samples

/ weer een ander serie voorbeelden , WH, 





/ 13	 

/ git glassfish
/ TODO


/ Einde JAX-WS GLASSFISH

/ SPRING 

/ lees,
https://springframework.guru/
john thompson

/ Einde SPRING

/ WILDFLY-SWARM EXAMPLES



C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen>git clone https://github.com/wildfly-swarm/wildfly-swarm-examples.git

C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen>dir
...
07-09-2017  10:45    <DIR>          wildfly-swarm-examples
               0 File(s)              0 bytes
              19 Dir(s)  46.289.575.936 bytes free

C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen>

/ we hebben ze import in workspace-jbosstools-jee-oxygen, met jbosstools-jee-oxygen eclipse,
/ we zien een hele lijst,
/ er zijn nog 1 projects van mezelf, bookStore



/ 13	. 

/ wildfly-swarm & arquillian

/ Lees,
https://wildfly-swarm.gitbooks.io/wildfly-swarm-users-guide/content/testing/arquillian.html





/ Einde WILDFLY-SWARM EXAMPLES

/ ARQUILLIAN FIRST 

public class Greeter {
    public void greet(PrintStream to, String name) {
        to.println(createGreeting(name));
    }

    public String createGreeting(String name) {
        return "Hello, " + name + "!";
    }
}

/ 13	. 

/ wildfly-swarm, arguillian, rest-assured
/ lees,
https://www.javacodegeeks.com/2017/01/develop-microservice-forge-wildfly-swarm-arquillian.html
/ --fractions microprofile

/ see 
rest-assured.io

/ lees,
https://forge.jboss.org/document/hands-on-lab
...
[cdbookstore]$ arquillian-setup --arquillian-version 1.1.10.Final --test-framework junit --test-framework-version 4.11 --container-adapter wildfly-remote --container-adapter-version 8.2.1.Final

/ lees,
http://arquillian.org/guides/getting_started/?utm_source=cta

/ 7	. 

/ Lees,
http://arquillian.org/guides/getting_started/

/ we open jbosstools-jee-oxygen eclipse op de  workspace workspace-jbosstools-jee-oxygen	,

/ we maken eerst een Maven project voor op wildfly, met forge,  en deploy met jboss-cli	, of forge? TODO
/ straks met wildfly-swarm,

/ In xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">  is 1ste de namespace en de 2de de schema van de namespace,

C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen-arquillian>forge

[workspace-jbosstools-jee-oxygen-arquillian]$ project-new --named arquillian-getting_started --topLevelPackage my.own
***SUCCESS*** Project named 'arquillian-getting_started' has been created.

/ import in eclipse,

$ vi pom.xml

<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>my.own</groupId>
  <artifactId>arquillian-getting_started</artifactId>
  <version>1.0.0-SNAPSHOT</version>
  <packaging>war</packaging>
  <build>
    <finalName>arquillian-getting_started</finalName>
  </build>
  <properties>
    <failOnMissingWebXml>false</failOnMissingWebXml>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
</project>

[arquillian-getting_started]$ project-add-dependencies javax:javaee-api:7.0:provided

[arquillian-getting_started]$  project-has-dependencies
***INFO*** Required inputs not satisfied, entering interactive mode
* Coordinates (The coordinates of the arguments to be checked [groupId :artifactId {:version :scope :packaging}]) []:
/ packaging=type

[arquillian-getting_started]$ project-has-dependencies javax:javaee-api:7.0:provided:
***SUCCESS*** All arguments found
/ or,
[arquillian-getting_started]$ project-has-dependencies javax:javaee-api:7.0:provided:jar
***SUCCESS*** All arguments found

/ Lees,
https://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html

/ Het is genoeg om te doen,
  <properties>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
  </properties>
  
/ Lees,
https://maven.apache.org/plugins/maven-war-plugin/war-mojo.html

failOnMissingWebXml
Starting with 3.1.0, this property defaults to false if the project depends on the Servlet 3.0 API or newer.

/ 13	. 

[GreeterTest.java]$ project-add-dependencies junit:junit:4.12:test

/ we zien een entry in <dependencyManagement> en in <dependencies>

$ vi pom.xml

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <scope>test</scope>
    </dependency>

  <dependencyManagement>
    <dependencies>
      <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.12</version>
        <scope>test</scope>
      </dependency>


/ 13	. 

/ we deden,

[Greeter.java]$ project-add-dependencies org.jboss.arquillian:arquillian-bom:1.1.13.Final:import:pom
/ Maar naast de <dependencyManagement> entry wordt er ook een <dependencies> entry gemaakt, en dat is niet de bedoeling,	
/ Deze laatste moeten we rm,

  <dependencyManagement>
    <dependencies>
      <dependency>
        <groupId>org.jboss.arquillian</groupId>
        <artifactId>arquillian-bom</artifactId>
        <version>1.1.13.Final</version>
        <type>pom</type>
        <scope>import</scope>
      </dependency>
	  
/ Hij zie WH door type pom dat deze dep in <dependencyManagement> moet komen, 
/ hij zet hem ook in <dependencies> TODO

	  
/ 13	. 

[Greeter.java]$ project-add-dependencies org.jboss.arquillian.junit:arquillian-junit-container::test
? Dependency [arquillian-junit-container:org.jboss.arquillian.junit] is currently managed. Reference the existing managed depend
ency [org.jboss.arquillian.junit:arquillian-junit-container:1.1.13.Final]? [Y/n]:
***SUCCESS*** Installed [1] dependency.
/ Toch heeft hij het goed gedaan, geen version 	,

  <dependencies>
    <dependency>
      <groupId>org.jboss.arquillian.junit</groupId>
      <artifactId>arquillian-junit-container</artifactId>
      <scope>test</scope>
    </dependency>
	
/ Straks,
import org.jboss.arquillian.junit.Arquillian;
/ Deze komt in 
@RunWith(Arquillian.class)
	
/ 13	. 

/ The Arquillian JUnit integration artifact also adds the Arquillian Core and ShrinkWrap APIs to the test classpath. You need all of these libraries to write and compile a JUnit Arquillian test.

/ 13	. 

/ Ook,
    <plugins>
    	<plugin>
    		<groupId>org.apache.maven.plugins</groupId>
    		<artifactId>surefire-maven-plugin</artifactId>
    		<version>2.20</version>
    	</plugin>
    </plugins>
	
/ TODO

/ 13	. 

/ Then some magic happens and each @Test method is run inside the container environment.

The @Deployment method is only mandatory for tests that run inside the container and no extension is loaded that otherwise generates the test archive. 

Client-side tests do not require a test archive, and therefore, do not require a  @Deployment method.
/ TODO

Unlike a normal unit test, Arquillian does not simply tap the entire classpath. Instead, you include only what the test needs

/ 13	. 

/ Dit is op zich OK,

@RunWith(Arquillian.class)
public class GreeterTest {
	
	@Deployment
	public static JavaArchive createDeployment() {
		JavaArchive archive=ShrinkWrap.create(JavaArchive.class);		// maar moeten meer,
		return archive;
	}
}

/ 13	. 

/ een aantal dependencies,

/ 1313	.

[GreeterTest.java]$ project-add-dependencies org.jboss.arquillian.container:arquillian-weld-se-embedded-1.1:1.0.0.Final:test

/ we zien een entry in <dependencyManagement> en in <dependencies>

 <dependencies>
   <dependency>
      <groupId>org.jboss.arquillian.container</groupId>
      <artifactId>arquillian-weld-se-embedded-1.1</artifactId>
      <scope>test</scope>
    </dependency>
  </dependencies>
  
  <dependencyManagement>
    <dependencies>
      <dependency>
        <groupId>org.jboss.arquillian.container</groupId>
        <artifactId>arquillian-weld-se-embedded-1.1</artifactId>
        <version>1.0.0.Final</version>
        <scope>test</scope>
      </dependency>
    </dependencies>
  </dependencyManagement>

/ 1313	. 

[arquillian-getting_started]$ project-add-dependencies org.jboss.weld:weld-core:2.4.5.Final:test

[arquillian-getting_started]$ project-add-dependencies org.slf4j:slf4j-simple:1.7.25:test

  <dependencies>
    <dependency>
      <groupId>org.jboss.weld</groupId>
      <artifactId>weld-core</artifactId>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-simple</artifactId>
      <scope>test</scope>
    </dependency>
  </dependencies>
  
  <dependencyManagement>
    <dependencies>
      <dependency>
        <groupId>org.jboss.weld</groupId>
        <artifactId>weld-core</artifactId>
        <version>2.4.5.Final</version>
        <scope>test</scope>
      </dependency>
      <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-simple</artifactId>
        <version>1.7.25</version>
        <scope>test</scope>
      </dependency>
    </dependencies>
  </dependencyManagement>

/ 13	. 

/ SAMENVATTING

$ vi pom.xml

<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>my.own</groupId>
  <artifactId>arquillian-getting_started</artifactId>
  <version>1.0.0-SNAPSHOT</version>
  <packaging>war</packaging>
  <build>
    <finalName>arquillian-getting_started</finalName>
    <plugins>
    	<plugin>
    		<groupId>org.apache.maven.plugins</groupId>
    		<artifactId>surefire-maven-plugin</artifactId>
    		<version>2.20</version>
    	</plugin>
    </plugins>
  </build>
  <properties>
    <failOnMissingWebXml>false</failOnMissingWebXml>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
  <dependencies>
    <dependency>
      <groupId>javax</groupId>
      <artifactId>javaee-api</artifactId>
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>org.jboss.arquillian.junit</groupId>
      <artifactId>arquillian-junit-container</artifactId>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.jboss.arquillian.container</groupId>
      <artifactId>arquillian-weld-se-embedded-1.1</artifactId>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.jboss.weld</groupId>
      <artifactId>weld-core</artifactId>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-simple</artifactId>
      <scope>test</scope>
    </dependency>

  </dependencies>
  <dependencyManagement>
    <dependencies>
      <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>7.0</version>
        <scope>provided</scope>
      </dependency>
      <dependency>
        <groupId>org.jboss.arquillian</groupId>
        <artifactId>arquillian-bom</artifactId>
        <version>1.1.13.Final</version>
        <type>pom</type>
        <scope>import</scope>
      </dependency>
      <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.12</version>
        <scope>test</scope>
      </dependency>
      <dependency>
        <groupId>org.jboss.arquillian.container</groupId>
        <artifactId>arquillian-weld-se-embedded-1.1</artifactId>
        <version>1.0.0.Final</version>
        <scope>test</scope>
      </dependency>
      <dependency>
        <groupId>org.jboss.weld</groupId>
        <artifactId>weld-core</artifactId>
        <version>2.4.5.Final</version>
        <scope>test</scope>
      </dependency>
      <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-simple</artifactId>
        <version>1.7.25</version>
        <scope>test</scope>
      </dependency>
    </dependencies>
  </dependencyManagement>
</project>

$ vi Greeter.java

package my.own;

import java.io.PrintStream;

public class Greeter {
	
	public void greet(PrintStream ps,String s) {
		ps.println(createGreeting(s));
	}

	public String createGreeting(String s) {
		return "Hello "+s+"!";
	}

}

$ vi GreeterTest.java

package my.own;

import javax.inject.Inject;

import org.jboss.arquillian.container.test.api.Deployment;
import org.jboss.arquillian.junit.Arquillian;
import org.jboss.shrinkwrap.api.ShrinkWrap;
import org.jboss.shrinkwrap.api.asset.EmptyAsset;
import org.jboss.shrinkwrap.api.spec.JavaArchive;
import org.junit.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;


@RunWith(Arquillian.class)
public class GreeterTest {
	
	@Deployment
	public static JavaArchive createDeployment() {
		JavaArchive jar=ShrinkWrap.create(JavaArchive.class)
				.addClass(Greeter.class)
				.addAsManifestResource(EmptyAsset.INSTANCE,"beans.xml");
		System.out.println(jar.toString(true));		// true is verbose
		return jar;
		
	}
	
	@Inject
	private Greeter greeter;
	
	@Test
	public void shouldCreateGreeting() {
		String s=greeter.createGreeting("Earthling");
		Assert.assertEquals("Hello Earthling!", s);
		greeter.greet(System.out, s);
	}
}

/ als we right click project, Run As, JUnit Test,

625d6bde-0517-4532-8bd1-545f7885f5d7.jar:
/my/
/my/own/
/my/own/Greeter.class
/META-INF/
/META-INF/beans.xml
sep 12, 2017 6:53:36 AM org.jboss.weld.bootstrap.WeldStartup <clinit>
INFO: WELD-000900: 2.4.5 (Final)
sep 12, 2017 6:53:36 AM org.jboss.weld.bootstrap.WeldStartup startContainer
INFO: WELD-000101: Transactional services not available. Injection of @Inject UserTransaction not available. Transactional observers will be invoked synchronously.
sep 12, 2017 6:53:36 AM org.jboss.weld.bootstrap.WeldStartup startContainer
WARN: WELD-000135: Legacy deployment metadata provided by the integrator. Certain functionality will not be available.
Hello Hello Earthling!!

/ als we right click project, run as, Maven test,
/ dan wordt de surefire-maven-plugin:test called,

[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building arquillian-getting_started 1.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ arquillian-getting_started ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 0 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ arquillian-getting_started ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ arquillian-getting_started ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 0 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ arquillian-getting_started ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ arquillian-getting_started ---
[INFO] Surefire report directory: C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running my.own.GreeterTest
2401edae-51ef-494b-8a67-57d7eaf73e95.jar:
/my/
/my/own/
/my/own/Greeter.class
/META-INF/
/META-INF/beans.xml
sep 12, 2017 6:54:46 AM org.jboss.weld.bootstrap.WeldStartup <clinit>
INFO: WELD-000900: 2.4.5 (Final)
sep 12, 2017 6:54:46 AM org.jboss.weld.bootstrap.WeldStartup startContainer
INFO: WELD-000101: Transactional services not available. Injection of @Inject UserTransaction not available. Transactional observers will be invoked synchronously.
sep 12, 2017 6:54:46 AM org.jboss.weld.bootstrap.WeldStartup startContainer
WARN: WELD-000135: Legacy deployment metadata provided by the integrator. Certain functionality will not be available.
Hello Hello Earthling!!
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.411 sec

Results :

Tests run: 1, Failures: 0, Errors: 0, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 4.115 s
[INFO] Finished at: 2017-09-12T06:54:47+01:00
[INFO] Final Memory: 11M/215M
[INFO] ------------------------------------------------------------------------

/ 7	. 

/ we inject niet alleen Greeter in de test class, maar ook PhaseBuilder in Greeter, 
/ dat overtuigd misschien meer dat we CDI doen ( de test doet dat ook, maar misschien denk je van niet).

$ vi pom.xml

<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>my.own</groupId>
  <artifactId>arquillian-getting_started</artifactId>
  <version>1.0.0-SNAPSHOT</version>
  <packaging>war</packaging>
  <build>
    <finalName>arquillian-getting_started</finalName>
    <plugins>
    	<plugin>
    		<groupId>org.apache.maven.plugins</groupId>
    		<artifactId>surefire-maven-plugin</artifactId>
    		<version>2.20</version>
    	</plugin>
    </plugins>
  </build>
  <properties>
    <failOnMissingWebXml>false</failOnMissingWebXml>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
  <dependencies>
    <dependency>
      <groupId>javax</groupId>
      <artifactId>javaee-api</artifactId>						<!-- niet: <type>pom</type>
    </dependency>
    <dependency>
      <groupId>org.jboss.arquillian.junit</groupId>
      <artifactId>arquillian-junit-container</artifactId>		<!-- is in arquillian-bom -->
      <scope>test</scope>										<!-- scope is niet in arquillian-bom -->
    </dependency>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
    </dependency>
    <dependency>
      <groupId>org.jboss.arquillian.container</groupId>
      <artifactId>arquillian-weld-se-embedded-1.1</artifactId>
    </dependency>
    <dependency>
      <groupId>org.jboss.weld</groupId>
      <artifactId>weld-core</artifactId>
    </dependency>
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-simple</artifactId>
    </dependency>
  </dependencies>
  <dependencyManagement>
    <dependencies>
      <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>7.0</version>
        <scope>provided</scope>				<!-- niet <type>pom</type>
      </dependency>
      <dependency>
        <groupId>org.jboss.arquillian</groupId>
        <artifactId>arquillian-bom</artifactId>
        <version>1.1.13.Final</version>
        <type>pom</type>
        <scope>import</scope>
      </dependency>
      <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.12</version>
        <scope>test</scope>
      </dependency>
      <dependency>
        <groupId>org.jboss.arquillian.container</groupId>
        <artifactId>arquillian-weld-se-embedded-1.1</artifactId>
        <version>1.0.0.Final</version>
        <scope>test</scope>
      </dependency>
      <dependency>
        <groupId>org.jboss.weld</groupId>
        <artifactId>weld-core</artifactId>
        <version>2.4.5.Final</version>
        <scope>test</scope>
      </dependency>
      <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-simple</artifactId>
        <version>1.7.25</version>
        <scope>test</scope>
      </dependency>
    </dependencies>
  </dependencyManagement>
</project>

$ vi PhraseBuilder.java

package my.own;

import java.text.MessageFormat;
import java.util.HashMap;
import java.util.Map;

import javax.annotation.PostConstruct;

public class PhraseBuilder {
	private Map<String, String>templates;
	
	@PostConstruct
	public void init() {
		templates=new HashMap<String,String>();
		templates.put("hello","Hello {0}!");
	}
	
	public String buildPhrase(String id,Object...arguments) {
		return MessageFormat.format(templates.get(id), arguments);
	}
}

$ vi Greeter.java

package my.own;

import java.io.PrintStream;

import javax.inject.Inject;

public class Greeter {
	
	private PhraseBuilder phraseBuilder;
	
	@Inject
	public Greeter(PhraseBuilder phraseBuilder) {
		this.phraseBuilder=phraseBuilder;
	}
	
	public void greet(PrintStream ps,String s) {
		ps.println(createGreeting(s));
	}

	public String createGreeting(String s) {
//		return "Hello "+s+"!";
		return phraseBuilder.buildPhrase("hello", s);
	}

}

$ vi GreeterTest.java

package my.own;

import javax.inject.Inject;

import org.jboss.arquillian.container.test.api.Deployment;
import org.jboss.arquillian.junit.Arquillian;
import org.jboss.shrinkwrap.api.ShrinkWrap;
import org.jboss.shrinkwrap.api.asset.EmptyAsset;
import org.jboss.shrinkwrap.api.spec.JavaArchive;
import org.junit.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;


@RunWith(Arquillian.class)
public class GreeterTest {
	
	@Deployment
	public static JavaArchive createDeployment() {
		JavaArchive jar=ShrinkWrap.create(JavaArchive.class)
//				.addClass(Greeter.class)
				.addClasses(Greeter.class,PhraseBuilder.class)
				.addAsManifestResource(EmptyAsset.INSTANCE,"beans.xml");
		System.out.println(jar.toString(true));		// true is verbose
		return jar;
		
	}
	
	@Inject
	private Greeter greeter;
	
	@Test
	public void shouldCreateGreeting() {
		String s=greeter.createGreeting("Earthling");
		Assert.assertEquals("Hello Earthling!", s);
		greeter.greet(System.out, s);
	}
}

/ Einde SAMENVATTING

/ 7	. 

/ Tot zo ver in een embedded Weld container, 

/ nu ook in Wildfly,

/ Lees,
https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Management
https://maven.apache.org/pom.html

NOTE: In two of these dependency references, we had to specify the <type/> element. This is because the minimal set of information for matching a dependency reference against a dependencyManagement section is actually {groupId, artifactId, type, classifier}. In many cases, these dependencies will refer to jar artifacts with no classifier. This allows us to shorthand the identity set to {groupId, artifactId}, since the default for the type field is jar, and the default classifier is null.

groupId:artifactId:packaging:classifier:version. / TODO classifier
/ packaging=jar (default) , war, ... = type 
  
/ Lees,
https://stackoverflow.com/questions/11778276/difference-between-scope-import-and-pom-type-dependency
https://howtodoinjava.com/maven/maven-dependency-scopes/
https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html

/ 13	. 

/ we gaan eerst de pom herschrijven, met profiles,

/ we set javax:javaee-api:7.0:provided:jar NIET in de dependencyManagement van de profile
/ TODO 

/we zien dat door org.jboss.arquillian:arquillian-bom:import:pom in dependencyManagement, alle dependencies van deze in de effective pom staat (in de dependencyManagement)	,



$ vi pom.xml

<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>my.own</groupId>
  <artifactId>arquillian-getting_started</artifactId>
  <version>1.0.0-SNAPSHOT</version>
  <packaging>war</packaging>
  <build>
    <finalName>arquillian-getting_started</finalName>
    <plugins>
    	<plugin>
    		<groupId>org.apache.maven.plugins</groupId>
    		<artifactId>surefire-maven-plugin</artifactId>
    		<version>2.20</version>
    	</plugin>
    </plugins>
  </build>
  <properties>
    <failOnMissingWebXml>false</failOnMissingWebXml>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
  <dependencies>
    <dependency>
      <groupId>javax</groupId>
      <artifactId>javaee-api</artifactId>
    </dependency>
    <dependency>
      <groupId>org.jboss.arquillian.junit</groupId>      <!-- is in arquillian-bom -->
      <artifactId>arquillian-junit-container</artifactId>
      <scope>test</scope>								<!--  scope is not in arquillian-bom -->
    </dependency>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
    </dependency>
  </dependencies>
  <dependencyManagement>
    <dependencies>
   	  <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>7.0</version>
        <scope>provided</scope>
      </dependency>
      <dependency>
        <groupId>org.jboss.arquillian</groupId>
        <artifactId>arquillian-bom</artifactId>
        <version>1.1.13.Final</version>
		<scope>import</scope>
        <type>pom</type>
      </dependency>
      <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.12</version>
        <scope>test</scope>
      </dependency>
 
    </dependencies>
  </dependencyManagement>
  <profiles>
  	<profile>
  		<id>weld-ee-embedded</id>
  		<activation>
  			<activeByDefault>true</activeByDefault>
  		</activation>
  		<dependencyManagement>
  			<dependencies>
			      <dependency>
			        <groupId>org.jboss.arquillian.container</groupId>
			        <artifactId>arquillian-weld-se-embedded-1.1</artifactId>
			        <version>1.0.0.Final</version>
			        <scope>test</scope>
			      </dependency>
			      <dependency>
			        <groupId>org.jboss.weld</groupId>
			        <artifactId>weld-core</artifactId>
			        <version>2.4.5.Final</version>
			        <scope>test</scope>
			      </dependency>
			      <dependency>
			        <groupId>org.slf4j</groupId>
			        <artifactId>slf4j-simple</artifactId>
			        <version>1.7.25</version>
			        <scope>test</scope>
			      </dependency>
			    </dependencies>
  			</dependencyManagement>
  		  <dependencies>
		    <dependency>
		      <groupId>org.jboss.arquillian.container</groupId>
		      <artifactId>arquillian-weld-se-embedded-1.1</artifactId>
		      </dependency>
		    <dependency>
		      <groupId>org.jboss.weld</groupId>
		      <artifactId>weld-core</artifactId>
		    </dependency>
		    <dependency>
		      <groupId>org.slf4j</groupId>
		      <artifactId>slf4j-simple</artifactId>
		    </dependency>
		  </dependencies>
  	</profile>
  </profiles>
</project>

/ OK

/ 7	. 

/ wildfly-standalone, 
/ wildfly wordt start door test, 

$ vi pom.xml

<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>my.own</groupId>
  <artifactId>arquillian-getting_started</artifactId>
  <version>1.0.0-SNAPSHOT</version>
  <packaging>war</packaging>
  <build>
    <finalName>arquillian-getting_started</finalName>
    <plugins>
    	<plugin>
    		<groupId>org.apache.maven.plugins</groupId>
    		<artifactId>surefire-maven-plugin</artifactId>
    		<version>2.20</version>
    	</plugin>
    </plugins>
  </build>
  <properties>
    <failOnMissingWebXml>false</failOnMissingWebXml>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
  <dependencies>
    <dependency>
      <groupId>javax</groupId>
      <artifactId>javaee-api</artifactId>
    </dependency>
    <dependency>
      <groupId>org.jboss.arquillian.junit</groupId>      <!-- is in arquillian-bom -->
      <artifactId>arquillian-junit-container</artifactId>
      <scope>test</scope>								<!--  scope is not in arquillian-bom -->
    </dependency>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
    </dependency>
  </dependencies>
  <dependencyManagement>
    <dependencies>
   	  <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>7.0</version>
        <scope>provided</scope>
      </dependency>
      <dependency>
        <groupId>org.jboss.arquillian</groupId>
        <artifactId>arquillian-bom</artifactId>
        <version>1.1.13.Final</version>
        <scope>import</scope>
        <type>pom</type>
      </dependency>
      <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.12</version>
        <scope>test</scope>
      </dependency>
 
    </dependencies>
  </dependencyManagement>
  <profiles>
  	<profile>
  		<id>weld-ee-embedded</id>
  		<activation>
  			<activeByDefault>false</activeByDefault>
  		</activation>
  		<dependencyManagement>
  			<dependencies>
			      <dependency>
			        <groupId>org.jboss.arquillian.container</groupId>
			        <artifactId>arquillian-weld-se-embedded-1.1</artifactId>
			        <version>1.0.0.Final</version>
			        <scope>test</scope>
			      </dependency>
			      <dependency>
			        <groupId>org.jboss.weld</groupId>
			        <artifactId>weld-core</artifactId>
			        <version>2.4.5.Final</version>
			        <scope>test</scope>
			      </dependency>
			      <dependency>
			        <groupId>org.slf4j</groupId>
			        <artifactId>slf4j-simple</artifactId>
			        <version>1.7.25</version>
			        <scope>test</scope>
			      </dependency>
			    </dependencies>
  			</dependencyManagement>
  		  <dependencies>
		    <dependency>
		      <groupId>org.jboss.arquillian.container</groupId>
		      <artifactId>arquillian-weld-se-embedded-1.1</artifactId>
		      </dependency>
		    <dependency>
		      <groupId>org.jboss.weld</groupId>
		      <artifactId>weld-core</artifactId>
		    </dependency>
		    <dependency>			<!--  without also works TODO -->
		      <groupId>org.slf4j</groupId>
		      <artifactId>slf4j-simple</artifactId>
		    </dependency>
		  </dependencies>
  	</profile>
  	 	<profile>
  		<id>glassfish-embedded</id>
  		<activation>
  			<activeByDefault>false</activeByDefault>
  		</activation>
  		<dependencyManagement>
  			<dependencies>
					<dependency>
					    <groupId>org.jboss.arquillian.container</groupId>
					    <artifactId>arquillian-glassfish-embedded-3.1</artifactId>
					    <version>1.0.1</version>
					    <scope>test</scope>
					</dependency>
			      <dependency>
			        <groupId>org.jboss.weld</groupId>
			        <artifactId>weld-core</artifactId>
			        <version>2.4.5.Final</version>
			        <scope>test</scope>
			      </dependency>
			      <dependency>
			        <groupId>org.slf4j</groupId>
			        <artifactId>slf4j-simple</artifactId>
			        <version>1.7.25</version>
			        <scope>test</scope>
			      </dependency>
			    </dependencies>
  			</dependencyManagement>
  		  <dependencies>
		    <dependency>
		      <groupId>org.jboss.arquillian.container</groupId>
				<artifactId>arquillian-glassfish-embedded-3.1</artifactId>
		      </dependency>
		    <dependency>
		      <groupId>org.jboss.weld</groupId>
		      <artifactId>weld-core</artifactId>
		    </dependency>
		    <dependency>			<!--  without also works TODO -->
		      <groupId>org.slf4j</groupId>
		      <artifactId>slf4j-simple</artifactId>
		    </dependency>
		  </dependencies>
  	</profile>
  	  	<profile>
  		<id>wildfly-standalone</id>
  		<activation>
  			<activeByDefault>true</activeByDefault>
  		</activation>
  		<dependencyManagement>
  			<dependencies>
				<dependency>
				    <groupId>org.wildfly.arquillian</groupId>
				    <artifactId>wildfly-arquillian-container-managed</artifactId>
				    <version>2.1.0.Final</version>
				    <scope>test</scope>
				</dependency>
				<dependency>
				    <groupId>org.jboss.arquillian.protocol</groupId>
				    <artifactId>arquillian-protocol-servlet</artifactId>
				    <version>1.1.13.Final</version>
				    <scope>test</scope>
				</dependency>			      
			    </dependencies>
  			</dependencyManagement>
  		  <dependencies>
		    <dependency>
				    <groupId>org.wildfly.arquillian</groupId>
				    <artifactId>wildfly-arquillian-container-managed</artifactId>
		      </dependency>
				<dependency>
				    <groupId>org.jboss.arquillian.protocol</groupId>
				    <artifactId>arquillian-protocol-servlet</artifactId>
				</dependency>	
		  </dependencies>
  	</profile>
  </profiles>
</project>

$ vi Greeter.java

package my.own;

import java.io.PrintStream;

import javax.inject.Inject;

public class Greeter {
	
	private PhraseBuilder phraseBuilder;
	
	@Inject
	public Greeter(PhraseBuilder phraseBuilder) {
		this.phraseBuilder=phraseBuilder;
	}
	
	public void greet(PrintStream ps,String s) {
		ps.println(createGreeting(s));
	}

	public String createGreeting(String s) {
//		return "Hello "+s+"!";
		return phraseBuilder.buildPhrase("hello", s);
	}

}

$ vi PhraseBuilder.java

package my.own;

import java.text.MessageFormat;
import java.util.HashMap;
import java.util.Map;

import javax.annotation.PostConstruct;

public class PhraseBuilder {
	private Map<String, String>templates;
	
	@PostConstruct
	public void init() {
		templates=new HashMap<String,String>();
		templates.put("hello","Hello {0}!");
	}
	
	public String buildPhrase(String id,Object...arguments) {
		return MessageFormat.format(templates.get(id), arguments);
	}
}

$ vi GreeterTest.java

package my.own;

import javax.inject.Inject;

import org.jboss.arquillian.container.test.api.Deployment;
import org.jboss.arquillian.junit.Arquillian;
import org.jboss.shrinkwrap.api.ShrinkWrap;
import org.jboss.shrinkwrap.api.asset.EmptyAsset;
import org.jboss.shrinkwrap.api.spec.JavaArchive;
import org.junit.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;


@RunWith(Arquillian.class)
public class GreeterTest {
	
	@Deployment
	public static JavaArchive createDeployment() {
		JavaArchive jar=ShrinkWrap.create(JavaArchive.class)
//				.addClass(Greeter.class)
				.addClasses(Greeter.class,PhraseBuilder.class)
				.addAsManifestResource(EmptyAsset.INSTANCE,"beans.xml");
		System.out.println(jar.toString(true));		// true is verbose
		return jar;
		
	}
	
	@Inject
	private Greeter greeter;
	
	@Test
	public void shouldCreateGreeting() {
		String s=greeter.createGreeting("Earthling");
		Assert.assertEquals("Hello Earthling!", s);
		greeter.greet(System.out, s);
	}
}





/ 7	. 

/ Als we in eclipse een nieuw XML template maken, kies Context: New XML 
/ New XML verschijnen als je een template wilt kiezen,

/ Window, Preferences, XML, XML Files, Editor, Templates, New
name: my
context: New XML

<?xml version="1.0" encoding="${encoding}"?>
< 	xmlns="default namespace"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="{namespace} {location}"

/ we moeten arquillian.xml maken in src/test/resources, 
/ kies dit template,

/ google: maven process-test-classes
/ lees,
https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html

/ lees,
https://github.com/tolis-e/arquillian-wildfly-example/blob/master/src/test/resources/arquillian.xml

/ we geven gewoon process-test-classes en ignore de error die eclipse geeft,

$ vi pom.xml


<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>my.own</groupId>
  <artifactId>arquillian-getting_started</artifactId>
  <version>1.0.0-SNAPSHOT</version>
  <packaging>war</packaging>
  <build>
    <finalName>arquillian-getting_started</finalName>
    <plugins>
    	<plugin>
    		<groupId>org.apache.maven.plugins</groupId>
    		<artifactId>surefire-maven-plugin</artifactId>
    		<version>2.20</version>
    	</plugin>
    </plugins>
  </build>
  <properties>
    <failOnMissingWebXml>false</failOnMissingWebXml>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
  <dependencies>
    <dependency>
      <groupId>javax</groupId>
      <artifactId>javaee-api</artifactId>
    </dependency>
    <dependency>
      <groupId>org.jboss.arquillian.junit</groupId>      <!-- is in arquillian-bom -->
      <artifactId>arquillian-junit-container</artifactId>
      <scope>test</scope>								<!--  scope is not in arquillian-bom -->
    </dependency>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
    </dependency>
  </dependencies>
  <dependencyManagement>
    <dependencies>
   	  <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>7.0</version>
        <scope>provided</scope>
      </dependency>
      <dependency>
        <groupId>org.jboss.arquillian</groupId>
        <artifactId>arquillian-bom</artifactId>
        <version>1.1.13.Final</version>
        <scope>import</scope>
        <type>pom</type>
      </dependency>
      <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.12</version>
        <scope>test</scope>
      </dependency>
 
    </dependencies>
  </dependencyManagement>
  <profiles>
  	<profile>
  		<id>weld-ee-embedded</id>
  		<activation>
  			<activeByDefault>false</activeByDefault>
  		</activation>
  		<dependencyManagement>
  			<dependencies>
			      <dependency>
			        <groupId>org.jboss.arquillian.container</groupId>
			        <artifactId>arquillian-weld-se-embedded-1.1</artifactId>
			        <version>1.0.0.Final</version>
			        <scope>test</scope>
			      </dependency>
			      <dependency>
			        <groupId>org.jboss.weld</groupId>
			        <artifactId>weld-core</artifactId>
			        <version>2.4.5.Final</version>
			        <scope>test</scope>
			      </dependency>
			      <dependency>
			        <groupId>org.slf4j</groupId>
			        <artifactId>slf4j-simple</artifactId>
			        <version>1.7.25</version>
			        <scope>test</scope>
			      </dependency>
			    </dependencies>
  			</dependencyManagement>
  		  <dependencies>
		    <dependency>
		      <groupId>org.jboss.arquillian.container</groupId>
		      <artifactId>arquillian-weld-se-embedded-1.1</artifactId>
		      </dependency>
		    <dependency>
		      <groupId>org.jboss.weld</groupId>
		      <artifactId>weld-core</artifactId>
		    </dependency>
		    <dependency>			<!--  without also works TODO -->
		      <groupId>org.slf4j</groupId>
		      <artifactId>slf4j-simple</artifactId>
		    </dependency>
		  </dependencies>
  	</profile>
  	 	<profile>
  		<id>glassfish-embedded</id>
  		<activation>
  			<activeByDefault>false</activeByDefault>
  		</activation>
  		<dependencyManagement>
  			<dependencies>
					<dependency>
					    <groupId>org.jboss.arquillian.container</groupId>
					    <artifactId>arquillian-glassfish-embedded-3.1</artifactId>
					    <version>1.0.1</version>
					    <scope>test</scope>
					</dependency>
			      <dependency>
			        <groupId>org.jboss.weld</groupId>
			        <artifactId>weld-core</artifactId>
			        <version>2.4.5.Final</version>
			        <scope>test</scope>
			      </dependency>
			      <dependency>
			        <groupId>org.slf4j</groupId>
			        <artifactId>slf4j-simple</artifactId>
			        <version>1.7.25</version>
			        <scope>test</scope>
			      </dependency>
			    </dependencies>
  			</dependencyManagement>
  		  <dependencies>
		    <dependency>
		      <groupId>org.jboss.arquillian.container</groupId>
				<artifactId>arquillian-glassfish-embedded-3.1</artifactId>
		      </dependency>
		    <dependency>
		      <groupId>org.jboss.weld</groupId>
		      <artifactId>weld-core</artifactId>
		    </dependency>
		    <dependency>			<!--  without also works TODO -->
		      <groupId>org.slf4j</groupId>
		      <artifactId>slf4j-simple</artifactId>
		    </dependency>
		  </dependencies>
  	</profile>
  	 <profile>
  		<id>wildfly-managed</id>						
  		<activation>
  			<activeByDefault>false</activeByDefault>
  		</activation>
  		
  		<dependencyManagement>
  			<dependencies>
				<dependency>
				    <groupId>org.wildfly.arquillian</groupId>
				    <artifactId>wildfly-arquillian-container-managed</artifactId>
				    <version>2.1.0.Final</version>
				    <scope>test</scope>
				</dependency>
				<dependency>
				    <groupId>org.jboss.arquillian.protocol</groupId>
				    <artifactId>arquillian-protocol-servlet</artifactId>
				    <version>1.1.13.Final</version>
				    <scope>test</scope>
				</dependency>			      
			    </dependencies>
  			</dependencyManagement>
  		  <dependencies>
		    <dependency>
				    <groupId>org.wildfly.arquillian</groupId>
				    <artifactId>wildfly-arquillian-container-managed</artifactId>
		      </dependency>
				<dependency>
				    <groupId>org.jboss.arquillian.protocol</groupId>
				    <artifactId>arquillian-protocol-servlet</artifactId>
				</dependency>	
		  </dependencies>
  	</profile>
  	  <profile>
  		<id>wildfly-managed-from-repo</id>
  		<activation>
  			<activeByDefault>true</activeByDefault>
  		</activation>
  		<build>
  			<plugins>
  				<plugin>
  					<groupId>org.apache.maven.plugins</groupId>
  					<artifactId>maven-dependency-plugin</artifactId>
  					<version>3.0.2</version>
  					<executions>
  						<execution>
  							<id>unpack</id>
  							<phase>process-test-classes</phase>
  							<goals>
  								<goal>unpack</goal>
  							</goals>
  							<configuration>
  								<artifactItems>
  									<artifactItem>
  										<groupId>org.wildfly</groupId>
  										<artifactId>wildfly-dist</artifactId>
  										<version>10.1.0.Final</version>
  										<type>zip</type>
  										<overWrite>false</overWrite>
  										<outputDirectory>target</outputDirectory>
  									</artifactItem>
  								</artifactItems>
  							</configuration>
  						</execution>
  					</executions>
  				</plugin>
  			</plugins>
  		</build>
  		
  		<dependencyManagement>
  			<dependencies>
				<dependency>
				    <groupId>org.wildfly.arquillian</groupId>
				    <artifactId>wildfly-arquillian-container-managed</artifactId>
				    <version>2.1.0.Final</version>
				    <scope>test</scope>
				</dependency>
				<dependency>
				    <groupId>org.jboss.arquillian.protocol</groupId>
				    <artifactId>arquillian-protocol-servlet</artifactId>
				    <version>1.1.13.Final</version>
				    <scope>test</scope>
				</dependency>			      
			    </dependencies>
  			</dependencyManagement>
  		  <dependencies>
		    <dependency>
				    <groupId>org.wildfly.arquillian</groupId>
				    <artifactId>wildfly-arquillian-container-managed</artifactId>
		      </dependency>
				<dependency>
				    <groupId>org.jboss.arquillian.protocol</groupId>
				    <artifactId>arquillian-protocol-servlet</artifactId>
				</dependency>	
		  </dependencies>
  	</profile>
  </profiles>
</project>

$ vi src/test/resources/arquillian.xml

<?xml version="1.0" encoding="UTF-8"?>
<arquillian	xmlns="http://jboss.org/schema/arquillian"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd">
	<container qualifier="wildfly-managed-from-repo" default="true">
		<configuration>
			<property name="jbossHome">target/wildfly-10.1.0.Final</property>
		</configuration>
	</container>	
</arquillian>

/////////////////////////////
/ we moeten <container ... default="true"> 
/ anders ERR: cannot build/find container TODO

/ Voor profile wildfly-managed maken we een run config, arquillian-getting_started-clean-test	, die goals: clean test, heeft, en die in Environment:
JBOSS_HOME C:\Users\ervelden\bin\wildfly-10.1.0.Final

/ voor profile wildfly-managed-from-repo maken we een run config, arquillian-getting_started-clean-test-from-repo, die geen Environment variable JBOSS_HOME heeft,

///////////////////////////////////////////
/ Lees, over stateless en stateful beans, 
https://stackoverflow.com/questions/2351220/stateless-and-stateful-enterprise-java-beans?rq=1
/ TODO stateful ejb in servlet of jsf managed bean is ERR	,

/ 7	. 

/ 	13	. 

/ als we profile wildfly-managed
/ en arquillian.xml rename tot arquillian_.xml (dus arquillian.xml feitenlijk rm) TODO of arquillian.xml aanpassen zodat target/wildfly-10.1.0.Final er niet meer is,
/ arquillian-getting_started-clean-test: clean test, en JBOSS_HOME=C:\Users\ervelden\bin\wildfly-10.1.0.Final in env,
/ dan zien we, 

[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building arquillian-getting_started 1.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ arquillian-getting_started ---
[INFO] Deleting C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ arquillian-getting_started ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 0 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ arquillian-getting_started ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 2 source files to C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\classes
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ arquillian-getting_started ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ arquillian-getting_started ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 1 source file to C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\test-classes
[INFO] 
[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ arquillian-getting_started ---
[INFO] Surefire report directory: C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running my.own.GreeterTest
sep 22, 2017 5:02:33 PM org.jboss.as.arquillian.container.managed.ManagedDeployableContainer startInternal
WARNING: Bundles path is deprecated and no longer used.
sep 22, 2017 5:02:33 PM org.jboss.as.arquillian.container.managed.ManagedDeployableContainer startInternal
INFO: Starting container with: ["C:\Program Files\Java\jdk1.8.0_144\bin\java", -D[Standalone], -Xms64m, -Xmx512m, -Djava.net.preferIPv4Stack=true, -Djava.awt.headless=true, -Djboss.modules.system.pkgs=org.jboss.byteman, -ea, -Djboss.home.dir=C:\Users\ervelden\bin\wildfly-10.1.0.Final, -Dorg.jboss.boot.log.file=C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone\log\server.log, -Dlogging.configuration=file:C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone\configuration\logging.properties, -jar, C:\Users\ervelden\bin\wildfly-10.1.0.Final\jboss-modules.jar, -mp, C:\Users\ervelden\bin\wildfly-10.1.0.Final\modules, org.jboss.as.standalone, -Djboss.home.dir=C:\Users\ervelden\bin\wildfly-10.1.0.Final, -Djboss.server.base.dir=C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone, -Djboss.server.log.dir=C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone\log, -Djboss.server.config.dir=C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone\configuration]
sep 22, 2017 5:02:33 PM org.jboss.remoting3.EndpointImpl <clinit>
INFO: JBoss Remoting version 5.0.0.Final
sep 22, 2017 5:02:33 PM org.xnio.Xnio <clinit>
INFO: XNIO version 3.5.1.Final
sep 22, 2017 5:02:33 PM org.xnio.nio.NioXnio <clinit>
INFO: XNIO NIO Implementation Version 3.5.1.Final
sep 22, 2017 5:02:34 PM org.wildfly.security.Version <clinit>
INFO: ELY00001: WildFly Elytron version 1.1.0.Final
17:02:34,104 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.2.Final
17:02:34,259 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final
17:02:34,313 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0049: WildFly Full 10.1.0.Final (WildFly Core 2.2.0.Final) starting
17:02:35,217 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0039: Creating http management service using socket-binding (management-http)
17:02:35,229 INFO  [org.xnio] (MSC service thread 1-6) XNIO version 3.4.0.Final
17:02:35,234 INFO  [org.xnio.nio] (MSC service thread 1-6) XNIO NIO Implementation Version 3.4.0.Final
17:02:35,269 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 38) WFLYCLINF0001: Activating Infinispan subsystem.
17:02:35,289 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 46) WFLYNAM0001: Activating Naming Subsystem
17:02:35,298 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 56) WFLYWS0002: Activating WebServices Extension
17:02:35,298 WARN  [org.jboss.as.txn] (ServerService Thread Pool -- 54) WFLYTX0013: Node identifier property is set to the default value. Please make sure it is unique.
17:02:35,307 INFO  [org.jboss.as.jsf] (ServerService Thread Pool -- 44) WFLYJSF0007: Activated the following JSF Implementations: [main]
17:02:35,388 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 53) WFLYSEC0002: Activating Security Subsystem
17:02:35,408 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-1) WFLYUT0003: Undertow 1.4.0.Final starting
17:02:35,409 INFO  [org.jboss.as.connector] (MSC service thread 1-3) WFLYJCA0009: Starting JCA Subsystem (WildFly/IronJacamar 1.3.4.Final)
17:02:35,415 INFO  [org.jboss.as.naming] (MSC service thread 1-1) WFLYNAM0003: Starting Naming Service
17:02:35,415 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-4) WFLYMAIL0001: Bound mail session [java:jboss/mail/Default]
17:02:35,425 INFO  [org.jboss.as.security] (MSC service thread 1-4) WFLYSEC0001: Current PicketBox version=4.9.6.Final
17:02:35,428 INFO  [org.wildfly.extension.io] (ServerService Thread Pool -- 37) WFLYIO001: Worker 'default' has auto-configured to 16 core threads with 128 task threads based on your 8 available processors
17:02:35,498 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 33) WFLYJCA0004: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
17:02:35,513 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-2) WFLYJCA0018: Started Driver service with driver-name = h2
17:02:35,587 INFO  [org.jboss.as.ejb3] (MSC service thread 1-1) WFLYEJB0482: Strict pool mdb-strict-max-pool is using a max instance size of 32 (per class), which is derived from the number of CPUs on this host.
17:02:35,587 INFO  [org.jboss.as.ejb3] (MSC service thread 1-2) WFLYEJB0481: Strict pool slsb-strict-max-pool is using a max instance size of 128 (per class), which is derived from thread worker pool sizing.
17:02:35,608 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 55) WFLYUT0014: Creating file handler for path 'C:\Users\ervelden\bin\wildfly-10.1.0.Final/welcome-content' with options [directory-listing: 'false', follow-symlink: 'false', case-sensitive: 'true', safe-symlink-paths: '[]']
17:02:36,048 INFO  [org.jboss.remoting] (MSC service thread 1-6) JBoss Remoting version 4.0.21.Final
17:02:36,053 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-5) WFLYUT0012: Started server default-server.
17:02:36,054 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-5) WFLYUT0018: Host default-host starting
17:02:36,096 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-7) WFLYUT0006: Undertow HTTP listener default listening on 127.0.0.1:8080
17:02:36,137 WARN  [org.jboss.as.domain.management.security] (MSC service thread 1-4) WFLYDM0111: Keystore C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone\configuration\application.keystore not found, it will be auto generated on first use with a self signed certificate for host localhost
17:02:36,160 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) WFLYSRV0027: Starting deployment of "bookStore2.war" (runtime-name: "bookStore2.war")
17:02:36,162 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-8) WFLYSRV0027: Starting deployment of "dvx.war" (runtime-name: "dvx.war")
17:02:36,162 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) WFLYSRV0027: Starting deployment of "rtd.war" (runtime-name: "rtd.war")
17:02:36,170 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-1) WFLYDS0013: Started FileSystemDeploymentService for directory C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone\deployments
17:02:36,278 INFO  [org.infinispan.factories.GlobalComponentRegistry] (MSC service thread 1-7) ISPN000128: Infinispan version: Infinispan 'Chakra' 8.2.4.Final
17:02:36,300 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 65) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
17:02:36,300 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 64) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
17:02:36,301 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 65) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
17:02:36,301 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 64) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
17:02:36,305 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 59) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
17:02:36,306 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 59) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
17:02:36,337 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-8) WFLYJCA0001: Bound data source [java:jboss/datasources/ExampleDS]
17:02:36,752 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-2) WFLYUT0006: Undertow HTTPS listener https listening on 127.0.0.1:8443
17:02:36,850 INFO  [org.jboss.ws.common.management] (MSC service thread 1-5) JBWS022052: Starting JBossWS 5.1.5.Final (Apache CXF 3.1.6) 
17:02:36,935 INFO  [org.jboss.as.jpa] (MSC service thread 1-5) WFLYJPA0002: Read persistence.xml for bookStore2-persistence-unit
17:02:37,249 INFO  [org.jboss.as.jpa] (ServerService Thread Pool -- 59) WFLYJPA0010: Starting Persistence Unit (phase 1 of 2) Service 'bookStore2.war#bookStore2-persistence-unit'
17:02:37,274 INFO  [org.hibernate.jpa.internal.util.LogHelper] (ServerService Thread Pool -- 59) HHH000204: Processing PersistenceUnitInfo [
	name: bookStore2-persistence-unit
	...]
17:02:37,279 INFO  [org.jboss.weld.deployer] (MSC service thread 1-6) WFLYWELD0003: Processing weld deployment bookStore2.war
17:02:37,356 INFO  [org.hibernate.validator.internal.util.Version] (MSC service thread 1-6) HV000001: Hibernate Validator 5.2.4.Final
17:02:37,362 INFO  [org.hibernate.Version] (ServerService Thread Pool -- 59) HHH000412: Hibernate Core {5.0.10.Final}
17:02:37,363 INFO  [org.hibernate.cfg.Environment] (ServerService Thread Pool -- 59) HHH000206: hibernate.properties not found
17:02:37,365 INFO  [org.hibernate.cfg.Environment] (ServerService Thread Pool -- 59) HHH000021: Bytecode provider name : javassist
17:02:37,372 WARN  [org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl] (ServerService Thread Pool -- 59) HHH000059: Defining hibernate.transaction.flush_before_completion=true ignored in HEM
17:02:37,410 INFO  [org.hibernate.annotations.common.Version] (ServerService Thread Pool -- 59) HCANN000001: Hibernate Commons Annotations {5.0.1.Final}
17:02:37,446 INFO  [org.jboss.as.ejb3.deployment] (MSC service thread 1-6) WFLYEJB0473: JNDI bindings for session bean named 'BookEndpoint' in deployment unit 'deployment "bookStore2.war"' are as follows:

	java:global/bookStore2/BookEndpoint!org.bookStore2.rest.BookEndpoint
	java:app/bookStore2/BookEndpoint!org.bookStore2.rest.BookEndpoint
	java:module/BookEndpoint!org.bookStore2.rest.BookEndpoint
	java:global/bookStore2/BookEndpoint
	java:app/bookStore2/BookEndpoint
	java:module/BookEndpoint

17:02:37,616 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 59) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
17:02:37,617 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 59) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
17:02:37,668 INFO  [org.jboss.weld.Version] (MSC service thread 1-6) WELD-000900: 2.3.5 (Final)
17:02:37,898 INFO  [org.jboss.as.jpa] (ServerService Thread Pool -- 60) WFLYJPA0010: Starting Persistence Unit (phase 2 of 2) Service 'bookStore2.war#bookStore2-persistence-unit'
17:02:37,976 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 62) RESTEASY002225: Deploying javax.ws.rs.core.Application: class org.dvx.rest.RestApplication
17:02:37,976 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 63) RESTEASY002225: Deploying javax.ws.rs.core.Application: class org.rtd.rest.RestApplication
17:02:38,032 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 63) WFLYUT0021: Registered web context: /rtd
17:02:38,032 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 62) WFLYUT0021: Registered web context: /dvx
17:02:38,060 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 59) WFLYCLINF0002: Started client-mappings cache from ejb container
17:02:38,201 INFO  [org.hibernate.dialect.Dialect] (ServerService Thread Pool -- 60) HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
17:02:38,209 WARN  [org.hibernate.dialect.H2Dialect] (ServerService Thread Pool -- 60) HHH000431: Unable to determine H2 database version, certain features may not work
17:02:38,273 INFO  [org.hibernate.envers.boot.internal.EnversServiceImpl] (ServerService Thread Pool -- 60) Envers integration enabled? : true
17:02:38,702 INFO  [org.hibernate.tool.hbm2ddl.SchemaExport] (ServerService Thread Pool -- 60) HHH000227: Running hbm2ddl schema export
17:02:38,709 INFO  [stdout] (ServerService Thread Pool -- 60) Hibernate: 
17:02:38,710 INFO  [stdout] (ServerService Thread Pool -- 60)     drop table Book if exists

17:02:38,710 INFO  [stdout] (ServerService Thread Pool -- 60) Hibernate: 
17:02:38,711 INFO  [stdout] (ServerService Thread Pool -- 60)     drop sequence if exists hibernate_sequence

17:02:38,711 INFO  [stdout] (ServerService Thread Pool -- 60) Hibernate: 
17:02:38,711 INFO  [stdout] (ServerService Thread Pool -- 60)     create sequence hibernate_sequence start with 1 increment by 1

17:02:38,712 INFO  [stdout] (ServerService Thread Pool -- 60) Hibernate: 
17:02:38,712 INFO  [stdout] (ServerService Thread Pool -- 60)     create table Book (
17:02:38,713 INFO  [stdout] (ServerService Thread Pool -- 60)         id bigint not null,
17:02:38,713 INFO  [stdout] (ServerService Thread Pool -- 60)         publishingDate date,
17:02:38,713 INFO  [stdout] (ServerService Thread Pool -- 60)         title varchar(255),
17:02:38,713 INFO  [stdout] (ServerService Thread Pool -- 60)         version integer,
17:02:38,713 INFO  [stdout] (ServerService Thread Pool -- 60)         primary key (id)
17:02:38,713 INFO  [stdout] (ServerService Thread Pool -- 60)     )

17:02:38,714 INFO  [org.hibernate.tool.hbm2ddl.SchemaExport] (ServerService Thread Pool -- 60) HHH000230: Schema export complete
17:02:39,136 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 60) RESTEASY002225: Deploying javax.ws.rs.core.Application: class org.bookStore2.rest.RestApplication
17:02:39,150 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 60) WFLYUT0021: Registered web context: /bookStore2
17:02:39,167 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0010: Deployed "bookStore2.war" (runtime-name : "bookStore2.war")
17:02:39,168 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0010: Deployed "rtd.war" (runtime-name : "rtd.war")
17:02:39,168 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0010: Deployed "dvx.war" (runtime-name : "dvx.war")
17:02:39,262 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://127.0.0.1:9990/management
17:02:39,262 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0051: Admin console listening on http://127.0.0.1:9990
17:02:39,262 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Full 10.1.0.Final (WildFly Core 2.2.0.Final) started in 5423ms - Started 594 of 842 services (426 services are lazy, passive or on-demand)
f4c16db7-5663-457d-a5bb-aa7e86ee8e3b.jar:
/my/
/my/own/
/my/own/Greeter.class
/my/own/PhraseBuilder.class
/META-INF/
/META-INF/beans.xml
sep 22, 2017 5:02:39 PM org.jboss.arquillian.core.impl.ObserverImpl resolveArguments
WARNING: Argument 2 for ArquillianServiceDeployer.doServiceDeploy is null. It won't be invoked.
17:02:39,784 INFO  [org.jboss.as.repository] (management-handler-thread - 1) WFLYDR0001: Content added at location C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone\data\content\0e\51e185fe7ccd98616af051bc491f656ccb9678\content
17:02:39,787 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) WFLYSRV0027: Starting deployment of "test.war" (runtime-name: "test.war")
17:02:39,976 INFO  [org.jboss.weld.deployer] (MSC service thread 1-4) WFLYWELD0003: Processing weld deployment test.war
17:02:40,195 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 9) WFLYUT0021: Registered web context: /test
17:02:40,375 INFO  [org.jboss.as.server] (management-handler-thread - 1) WFLYSRV0010: Deployed "test.war" (runtime-name : "test.war")
17:02:40,785 INFO  [stdout] (default task-2) Hello Hello Earthling!!

17:02:40,883 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 9) WFLYUT0022: Unregistered web context: /test
17:02:40,957 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) WFLYSRV0028: Stopped deployment test.war (runtime-name: test.war) in 83ms
17:02:40,983 WARN  [org.jboss.as.controller] (management-handler-thread - 2) WFLYCTL0357: Notification of type deployment-undeployed is not described for the resource at the address []
17:02:40,987 INFO  [org.jboss.as.repository] (management-handler-thread - 2) WFLYDR0002: Content removed from location C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone\data\content\0e\51e185fe7ccd98616af051bc491f656ccb9678\content
17:02:40,987 INFO  [org.jboss.as.server] (management-handler-thread - 2) WFLYSRV0009: Undeployed "test.war" (runtime-name: "test.war")
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 8.899 sec
sep 22, 2017 5:02:40 PM org.jboss.arquillian.core.impl.ObserverImpl resolveArguments
WARNING: Argument 2 for ArquillianServiceDeployer.undeploy is null. It won't be invoked.
17:02:41,001 INFO  [org.jboss.as.server] (management-handler-thread - 3) WFLYSRV0236: Suspending server with no timeout.
17:02:41,009 INFO  [org.jboss.as.server] (Management Triggered Shutdown) WFLYSRV0241: Shutting down in response to management operation 'shutdown'
17:02:41,026 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 10) WFLYUT0022: Unregistered web context: /rtd
17:02:41,027 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 9) WFLYUT0022: Unregistered web context: /dvx
17:02:41,027 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 60) WFLYUT0022: Unregistered web context: /bookStore2
17:02:41,034 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-7) WFLYUT0019: Host default-host stopping
17:02:41,042 INFO  [org.jboss.as.jpa] (ServerService Thread Pool -- 12) WFLYJPA0011: Stopping Persistence Unit (phase 2 of 2) Service 'bookStore2.war#bookStore2-persistence-unit'
17:02:41,043 INFO  [org.hibernate.tool.hbm2ddl.SchemaExport] (ServerService Thread Pool -- 12) HHH000227: Running hbm2ddl schema export
17:02:41,048 INFO  [stdout] (ServerService Thread Pool -- 12) Hibernate: 
17:02:41,049 INFO  [stdout] (ServerService Thread Pool -- 12)     drop table Book if exists

17:02:41,061 INFO  [stdout] (ServerService Thread Pool -- 12) Hibernate: 
17:02:41,062 INFO  [stdout] (ServerService Thread Pool -- 12)     drop sequence if exists hibernate_sequence

17:02:41,063 INFO  [org.hibernate.tool.hbm2ddl.SchemaExport] (ServerService Thread Pool -- 12) HHH000230: Schema export complete
17:02:41,065 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) WFLYSRV0028: Stopped deployment rtd.war (runtime-name: rtd.war) in 46ms
17:02:41,069 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 10) WFLYCLINF0003: Stopped client-mappings cache from ejb container
17:02:41,069 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) WFLYSRV0028: Stopped deployment dvx.war (runtime-name: dvx.war) in 54ms
17:02:41,070 INFO  [org.jboss.as.jpa] (ServerService Thread Pool -- 12) WFLYJPA0011: Stopping Persistence Unit (phase 1 of 2) Service 'bookStore2.war#bookStore2-persistence-unit'
17:02:41,071 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-6) WFLYJCA0010: Unbound data source [java:jboss/datasources/ExampleDS]
17:02:41,074 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-5) WFLYUT0008: Undertow HTTPS listener https suspending
17:02:41,075 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-8) WFLYUT0008: Undertow HTTP listener default suspending
17:02:41,076 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-8) WFLYUT0007: Undertow HTTP listener default stopped, was bound to 127.0.0.1:8080
17:02:41,077 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-5) WFLYUT0007: Undertow HTTPS listener https stopped, was bound to 127.0.0.1:8443
17:02:41,078 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-5) WFLYUT0004: Undertow 1.4.0.Final stopping
17:02:41,081 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-4) WFLYJCA0019: Stopped Driver service with driver-name = h2
17:02:41,090 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-5) WFLYSRV0028: Stopped deployment bookStore2.war (runtime-name: bookStore2.war) in 76ms
17:02:41,096 INFO  [org.jboss.as] (MSC service thread 1-1) WFLYSRV0050: WildFly Full 10.1.0.Final (WildFly Core 2.2.0.Final) stopped in 76ms

Results :

Tests run: 1, Failures: 0, Errors: 0, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 12.678 s
[INFO] Finished at: 2017-09-22T17:02:41+01:00
[INFO] Final Memory: 24M/267M
[INFO] ------------------------------------------------------------------------



/ 	13	.

/ als we profile wildfly-managed-from-repo
/ er is arquillian.xml, hierin staat target/wildfly-10.1.0.Final, deze zien we in eclipse inderdaad in target/
/ arquillian-getting_started-clean-test-from-repo: clean test, en geen JBOSS_HOME in env,
/ dan zien we, 
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building arquillian-getting_started 1.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ arquillian-getting_started ---
[INFO] Deleting C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ arquillian-getting_started ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 0 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ arquillian-getting_started ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 2 source files to C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\classes
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ arquillian-getting_started ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ arquillian-getting_started ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 1 source file to C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\test-classes
[INFO] 
[INFO] --- maven-dependency-plugin:3.0.2:unpack (unpack) @ arquillian-getting_started ---
[INFO] Configured Artifact: org.wildfly:wildfly-dist:10.1.0.Final:zip
[INFO] Unpacking C:\Users\ervelden\.m2\repository\org\wildfly\wildfly-dist\10.1.0.Final\wildfly-dist-10.1.0.Final.zip to C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target with includes "" and excludes ""
[INFO] 
[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ arquillian-getting_started ---
[INFO] Surefire report directory: C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running my.own.GreeterTest
sep 22, 2017 4:51:55 PM org.jboss.as.arquillian.container.managed.ManagedDeployableContainer startInternal
WARNING: Bundles path is deprecated and no longer used.
sep 22, 2017 4:51:55 PM org.jboss.as.arquillian.container.managed.ManagedDeployableContainer startInternal
INFO: Starting container with: ["C:\Program Files\Java\jdk1.8.0_144\bin\java", -D[Standalone], -Xms64m, -Xmx512m, -Djava.net.preferIPv4Stack=true, -Djava.awt.headless=true, -Djboss.modules.system.pkgs=org.jboss.byteman, -ea, -Djboss.home.dir=C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\wildfly-10.1.0.Final, -Dorg.jboss.boot.log.file=C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\wildfly-10.1.0.Final\standalone\log\server.log, -Dlogging.configuration=file:C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\wildfly-10.1.0.Final\standalone\configuration\logging.properties, -jar, C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\wildfly-10.1.0.Final\jboss-modules.jar, -mp, C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\wildfly-10.1.0.Final\modules, org.jboss.as.standalone, -Djboss.home.dir=C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\wildfly-10.1.0.Final, -Djboss.server.base.dir=C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\wildfly-10.1.0.Final\standalone, -Djboss.server.log.dir=C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\wildfly-10.1.0.Final\standalone\log, -Djboss.server.config.dir=C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\wildfly-10.1.0.Final\standalone\configuration]
sep 22, 2017 4:51:55 PM org.jboss.remoting3.EndpointImpl <clinit>
INFO: JBoss Remoting version 5.0.0.Final
sep 22, 2017 4:51:55 PM org.xnio.Xnio <clinit>
INFO: XNIO version 3.5.1.Final
sep 22, 2017 4:51:55 PM org.xnio.nio.NioXnio <clinit>
INFO: XNIO NIO Implementation Version 3.5.1.Final
sep 22, 2017 4:51:56 PM org.wildfly.security.Version <clinit>
INFO: ELY00001: WildFly Elytron version 1.1.0.Final
16:51:56,267 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.2.Final
16:51:56,872 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final
16:51:56,927 INFO  [org.jboss.as] (MSC service thread 1-7) WFLYSRV0049: WildFly Full 10.1.0.Final (WildFly Core 2.2.0.Final) starting
16:51:57,788 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0039: Creating http management service using socket-binding (management-http)
16:51:57,802 INFO  [org.xnio] (MSC service thread 1-7) XNIO version 3.4.0.Final
16:51:57,810 INFO  [org.xnio.nio] (MSC service thread 1-7) XNIO NIO Implementation Version 3.4.0.Final
16:51:57,852 INFO  [org.wildfly.extension.io] (ServerService Thread Pool -- 37) WFLYIO001: Worker 'default' has auto-configured to 16 core threads with 128 task threads based on your 8 available processors
16:51:57,861 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 38) WFLYCLINF0001: Activating Infinispan subsystem.
16:51:57,866 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 53) WFLYSEC0002: Activating Security Subsystem
16:51:57,868 WARN  [org.jboss.as.txn] (ServerService Thread Pool -- 54) WFLYTX0013: Node identifier property is set to the default value. Please make sure it is unique.
16:51:57,870 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 46) WFLYNAM0001: Activating Naming Subsystem
16:51:57,877 INFO  [org.jboss.as.security] (MSC service thread 1-8) WFLYSEC0001: Current PicketBox version=4.9.6.Final
16:51:57,880 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 56) WFLYWS0002: Activating WebServices Extension
16:51:57,895 INFO  [org.jboss.as.jsf] (ServerService Thread Pool -- 44) WFLYJSF0007: Activated the following JSF Implementations: [main]
16:51:57,979 INFO  [org.jboss.as.connector] (MSC service thread 1-5) WFLYJCA0009: Starting JCA Subsystem (WildFly/IronJacamar 1.3.4.Final)
16:51:57,987 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-6) WFLYUT0003: Undertow 1.4.0.Final starting
16:51:58,017 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 33) WFLYJCA0004: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
16:51:58,020 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-8) WFLYJCA0018: Started Driver service with driver-name = h2
16:51:58,038 INFO  [org.jboss.remoting] (MSC service thread 1-1) JBoss Remoting version 4.0.21.Final
16:51:58,039 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-6) WFLYMAIL0001: Bound mail session [java:jboss/mail/Default]
16:51:58,039 INFO  [org.jboss.as.naming] (MSC service thread 1-7) WFLYNAM0003: Starting Naming Service
16:51:58,123 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 55) WFLYUT0014: Creating file handler for path 'C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\wildfly-10.1.0.Final/welcome-content' with options [directory-listing: 'false', follow-symlink: 'false', case-sensitive: 'true', safe-symlink-paths: '[]']
16:51:58,135 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-7) WFLYUT0012: Started server default-server.
16:51:58,137 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-7) WFLYUT0018: Host default-host starting
16:51:58,163 INFO  [org.jboss.as.ejb3] (MSC service thread 1-8) WFLYEJB0482: Strict pool mdb-strict-max-pool is using a max instance size of 32 (per class), which is derived from the number of CPUs on this host.
16:51:58,163 INFO  [org.jboss.as.ejb3] (MSC service thread 1-6) WFLYEJB0481: Strict pool slsb-strict-max-pool is using a max instance size of 128 (per class), which is derived from thread worker pool sizing.
16:51:58,352 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-1) WFLYUT0006: Undertow HTTP listener default listening on 127.0.0.1:8080
16:51:58,381 WARN  [org.jboss.as.domain.management.security] (MSC service thread 1-1) WFLYDM0111: Keystore C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\wildfly-10.1.0.Final\standalone\configuration\application.keystore not found, it will be auto generated on first use with a self signed certificate for host localhost
16:51:58,391 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-1) WFLYDS0013: Started FileSystemDeploymentService for directory C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\wildfly-10.1.0.Final\standalone\deployments
16:51:58,500 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-1) WFLYJCA0001: Bound data source [java:jboss/datasources/ExampleDS]
16:51:58,508 INFO  [org.infinispan.factories.GlobalComponentRegistry] (MSC service thread 1-2) ISPN000128: Infinispan version: Infinispan 'Chakra' 8.2.4.Final
16:51:58,528 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 60) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
16:51:58,529 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 66) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
16:51:58,529 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 60) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
16:51:58,530 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 66) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
16:51:58,530 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 65) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
16:51:58,531 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 65) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
16:51:59,037 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-7) WFLYUT0006: Undertow HTTPS listener https listening on 127.0.0.1:8443
16:51:59,140 INFO  [org.jboss.ws.common.management] (MSC service thread 1-1) JBWS022052: Starting JBossWS 5.1.5.Final (Apache CXF 3.1.6) 
16:51:59,315 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://127.0.0.1:9990/management
16:51:59,316 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0051: Admin console listening on http://127.0.0.1:9990
16:51:59,316 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Full 10.1.0.Final (WildFly Core 2.2.0.Final) started in 3352ms - Started 331 of 577 services (393 services are lazy, passive or on-demand)
bc576218-fba0-4d6c-a778-603c9f298b32.jar:
/my/
/my/own/
/my/own/Greeter.class
/my/own/PhraseBuilder.class
/META-INF/
/META-INF/beans.xml
sep 22, 2017 4:51:59 PM org.jboss.arquillian.core.impl.ObserverImpl resolveArguments
WARNING: Argument 2 for ArquillianServiceDeployer.doServiceDeploy is null. It won't be invoked.
16:52:00,064 INFO  [org.jboss.as.repository] (management-handler-thread - 4) WFLYDR0001: Content added at location C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\wildfly-10.1.0.Final\standalone\data\content\fc\cbfa223a0f17cba473f2dd453bb858a4f0c01a\content
16:52:00,083 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) WFLYSRV0027: Starting deployment of "test.war" (runtime-name: "test.war")
16:52:00,652 INFO  [org.jboss.weld.deployer] (MSC service thread 1-8) WFLYWELD0003: Processing weld deployment test.war
16:52:00,689 INFO  [org.hibernate.validator.internal.util.Version] (MSC service thread 1-8) HV000001: Hibernate Validator 5.2.4.Final
16:52:00,804 INFO  [org.jboss.weld.Version] (MSC service thread 1-8) WELD-000900: 2.3.5 (Final)
16:52:01,412 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 3) WFLYUT0021: Registered web context: /test
16:52:01,456 INFO  [org.jboss.as.server] (management-handler-thread - 4) WFLYSRV0010: Deployed "test.war" (runtime-name : "test.war")
16:52:01,786 INFO  [stdout] (default task-1) Hello Hello Earthling!!

16:52:01,849 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 10) WFLYUT0022: Unregistered web context: /test
16:52:01,901 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) WFLYSRV0028: Stopped deployment test.war (runtime-name: test.war) in 57ms
16:52:01,918 WARN  [org.jboss.as.controller] (management-handler-thread - 1) WFLYCTL0357: Notification of type deployment-undeployed is not described for the resource at the address []
16:52:01,922 INFO  [org.jboss.as.repository] (management-handler-thread - 1) WFLYDR0002: Content removed from location C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\wildfly-10.1.0.Final\standalone\data\content\fc\cbfa223a0f17cba473f2dd453bb858a4f0c01a\content
16:52:01,922 INFO  [org.jboss.as.server] (management-handler-thread - 1) WFLYSRV0009: Undeployed "test.war" (runtime-name: "test.war")
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 7.751 sec
sep 22, 2017 4:52:01 PM org.jboss.arquillian.core.impl.ObserverImpl resolveArguments
WARNING: Argument 2 for ArquillianServiceDeployer.undeploy is null. It won't be invoked.
16:52:01,932 INFO  [org.jboss.as.server] (management-handler-thread - 2) WFLYSRV0236: Suspending server with no timeout.
16:52:01,935 INFO  [org.jboss.as.server] (Management Triggered Shutdown) WFLYSRV0241: Shutting down in response to management operation 'shutdown'
16:52:01,943 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-5) WFLYJCA0010: Unbound data source [java:jboss/datasources/ExampleDS]
16:52:01,948 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-7) WFLYUT0008: Undertow HTTPS listener https suspending
16:52:01,948 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-6) WFLYUT0019: Host default-host stopping
16:52:01,948 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-7) WFLYUT0007: Undertow HTTPS listener https stopped, was bound to 127.0.0.1:8443
16:52:01,951 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-1) WFLYUT0008: Undertow HTTP listener default suspending
16:52:01,953 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-1) WFLYUT0007: Undertow HTTP listener default stopped, was bound to 127.0.0.1:8080
16:52:01,952 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-7) WFLYJCA0019: Stopped Driver service with driver-name = h2
16:52:01,953 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-2) WFLYUT0004: Undertow 1.4.0.Final stopping
16:52:01,971 INFO  [org.jboss.as] (MSC service thread 1-7) WFLYSRV0050: WildFly Full 10.1.0.Final (WildFly Core 2.2.0.Final) stopped in 29ms

Results :

Tests run: 1, Failures: 0, Errors: 0, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 20.272 s
[INFO] Finished at: 2017-09-22T16:52:02+01:00
[INFO] Final Memory: 30M/275M
[INFO] ------------------------------------------------------------------------


/ 7	 .
/ we maken ook in project arquillian-rinse_and_repeat,

$ vi arquillian.xml
	...
	<defaultProtocol type="Servlet 3.0"></defaultProtocol>
</arquillian>

/ run config met profile wildfly-managed-with-repo en dus zonder JBOSS_HOME



/ 7	. 

/ Lees,
http://www.techpaste.com/2014/07/steps-deploy-war-file-jboss-wildfly-cli-management-console/

/ wat gebeurt er eigenlijk als je deploy in wildfly, vergl met tomcat,

/  lees,
https://docs.jboss.org/author/display/WFLY10/Application+deployment





/ Einde ARQUILLIAN FIRST

/ ARQUILLIAN SECOND


/ lees,
http://arquillian.org/guides/getting_started_rinse_and_repeat/

/ WH bedoelt hij met een CDI bean een JSF managed bean, 
/ en een EJB bean een service, 
/ maar in feite lopen CDI beans en EJB beans door elkaar, want je kunt @EJB vervangen door @Inject,	

/ Basket is @SessionScoped, een JSF managed bean, een OrderRepository is een service, maar heeft geen JPA hier, maar een  List,

/ een EJB is een service, annotatie @EJB, maar de CDI annotatie @Inject kan ook 	, 
/ Lees,
http://blog.dblevins.com/2012/11/cdi-when-to-break-out-ejbs.html


/ een CDI bean is als een JSF managed bean, annotatie @SessionScoped	, of @ApplicationScoped	, 
/ maar @Singleton (EJB annot)=@ApplicationScoped (CDI annot)
/ en @Stateful=@Any  TODO

/ we maken een Maven jar project, arquillian-rinse_and_repeat	,
/ eclipse geeft ERR in pom, web.xml is missing and <failOnMissingWebXml> is set to true

/ google: web.xml is missing and <failOnMissingWebXml> is set to true
/ lees,
https://stackoverflow.com/questions/31835033/web-xml-is-missing-and-failonmissingwebxml-is-set-to-true
/ in project, right click Deployment descriptor, Generate ...
/ we zien onder Deployed resources: 
webapp
	WEB-INF
		web.xml
/ Maar dit is een 2.5 servlet versie
/ Ook hebben appl tegenwoordig geen web.xml meer nodig, @Application TODO 
/ doe,
/ rm WEB-INF/ in webapps/ (dus die laten we staan),
/ en in pom,
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.6</version>
            <configuration>
                <failOnMissingWebXml>false</failOnMissingWebXml>
            </configuration>
        </plugin>
    </plugins>
</build>
/ of nog korter,
<properties>
    <failOnMissingWebXml>false</failOnMissingWebXml>
</properties>

/ eclipse: 
/ we hadden, 
  <packaging>jar</packaging>
  <properties>
  	<failOnMissingWebXml>false</failOnMissingWebXml>
  </properties>
/ en de fout bleef	, 
/ toen maakten we van jar -> war, en de fout verdween, en toen we de property weghaalden, bleef de fout weg, 
/ TODO 

/ voor @Local moeten we in pom javax:javaee-api:7.0:provided opnemen,

/ lees,
https://dzone.com/articles/cdi-di-p1

/ we maken een 
interface OrderService.java 
class Basket
/ de OrderService impl, met JPA, wordt door iemand anders gemaakt, en wij substitueren deze door een in memory EJB, 

/ In Basket inject we de OrderService met @javax.ejb.EJB, maar er is ook @javax.inject.Inject TODO
/ OrderServiceImpl is een @javax.ejb.Singleton, maar er is ook @javax.inject.Singleton TODO

/ Voor @Test, @RunWith moeten we junit:junit:4.12:test opnemen	,

/ Voor Arquillian.class in @RunWith(Arquillian.class) moeten we 
$ vi pom.xml
  <dependencyManagement>
  	<dependencies>
  		<dependency>
  			<groupId>org.jboss.arquillian</groupId>
  			<artifactId>arquillian-bom</artifactId>
  			<version>1.1.13.Final</version>
  			<scope>import</scope>
  			<type>pom</type>
  		</dependency>
  	</dependencies>
  </dependencyManagement>
  <dependencies>
  	<dependency>
  		<groupId>org.jboss.arquillian.junit</groupId>
  		<artifactId>arquillian-junit-container</artifactId>
  	</dependency>
  </dependencies>
  

/ 13	. 

/ je doet
	return ShrinkWrap.create(...)
/ en NIET,
	return new ShrinkWrap(...)
	
/ er is ShrinkWrap.create(Class<T>type,String archiveName) en ShrinkWrap.create(Class<T>type)	,

/ 13	. 

/ bij $ mvn clean test kregen we, 
WELD-000072: Bean declaring a passivating scope must be passivation capable Bean:  Managed Bean [class my.Basket] with qualifiers [@Any @Default]
/ we waren vergeten implements Serializable

/ 13	. 

/ project arquillian-rinse_and_repeat

/ wildfly-managed

/ OK,

$ vi pom.xml

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>my.own</groupId>
  <artifactId>arquillian-rinse_and_repeat</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>jar</packaging>
  <properties>
  	<failOnMissingWebXml>false</failOnMissingWebXml>
  </properties>
  <dependencyManagement>
  	<dependencies>
  		<dependency>
  			<groupId>javax</groupId>
  			<artifactId>javaee-api</artifactId>
  			<version>7.0</version>
  			<scope>provided</scope>
  		</dependency>
  		<dependency>
  			<groupId>junit</groupId>
  			<artifactId>junit</artifactId>
  			<version>4.12</version>
  			<scope>test</scope>
  		</dependency>
  		<dependency>
  			<groupId>org.jboss.arquillian</groupId>
  			<artifactId>arquillian-bom</artifactId>
  			<version>1.1.13.Final</version>
  			<scope>import</scope>
  			<type>pom</type>
  		</dependency>
  	</dependencies>
  </dependencyManagement>
  <dependencies>
  	<dependency>
  		<groupId>javax</groupId>
  		<artifactId>javaee-api</artifactId>
  	</dependency>
  	<dependency>
  		<groupId>junit</groupId>
  		<artifactId>junit</artifactId>
  	</dependency>
  	<dependency>
  		<groupId>org.jboss.arquillian.junit</groupId>
  		<artifactId>arquillian-junit-container</artifactId>
  	</dependency>
  </dependencies>
  <profiles>
  	<profile>
  		<id>wildfly-managed</id>
  		<activation>
  			<activeByDefault>true</activeByDefault>
  		</activation>
  		<dependencyManagement>
  			<dependencies>
  				<dependency>
  					<groupId>org.wildfly.arquillian</groupId>
  					<artifactId>wildfly-arquillian-container-managed</artifactId>
  					<version>2.1.0.Final</version>
  					<scope>test</scope>
  				</dependency>
  				<dependency>
  					<groupId>org.jboss.arquillian.protocol</groupId>
  					<artifactId>arquillian-protocol-servlet</artifactId>
  					<version>1.1.13.Final</version>
  					<scope>test</scope>
  				</dependency>
  			</dependencies>
  		</dependencyManagement>
  		<dependencies>
			<dependency>
				<groupId>org.wildfly.arquillian</groupId>
				<artifactId>wildfly-arquillian-container-managed</artifactId>
			</dependency>
			<dependency>
				<groupId>org.jboss.arquillian.protocol</groupId>
				<artifactId>arquillian-protocol-servlet</artifactId>
			</dependency>
  		</dependencies>
  	</profile>
  </profiles>
  <build>
    <plugins>
    	<plugin>
    		<groupId>org.apache.maven.plugins</groupId>
    		<artifactId>surefire-maven-plugin</artifactId>
    		<version>2.20</version>
    	</plugin>
    </plugins>
  </build>
  
</project>

/ run config arquillian-rinse_and_repeat-clean-test , 
/ met profile wildfly-managed als default en dus met JBOSS_HOME=C:\Users\ervelden\bin\wildfly-10.1.0.Final, 

/ we zien,

[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building arquillian-rinse_and_repeat 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ arquillian-rinse_and_repeat ---
[INFO] Deleting C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-rinse_and_repeat\target
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ arquillian-rinse_and_repeat ---
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 0 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ arquillian-rinse_and_repeat ---
[INFO] Changes detected - recompiling the module!
[WARNING] File encoding has not been set, using platform encoding Cp1252, i.e. build is platform dependent!
[INFO] Compiling 3 source files to C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-rinse_and_repeat\target\classes
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ arquillian-rinse_and_repeat ---
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 0 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ arquillian-rinse_and_repeat ---
[INFO] Changes detected - recompiling the module!
[WARNING] File encoding has not been set, using platform encoding Cp1252, i.e. build is platform dependent!
[INFO] Compiling 1 source file to C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-rinse_and_repeat\target\test-classes
[INFO] 
[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ arquillian-rinse_and_repeat ---
[INFO] Surefire report directory: C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-rinse_and_repeat\target\surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running my.BasketTest
sep 23, 2017 8:06:30 PM org.jboss.as.arquillian.container.managed.ManagedDeployableContainer startInternal
WARNING: Bundles path is deprecated and no longer used.
sep 23, 2017 8:06:30 PM org.jboss.as.arquillian.container.managed.ManagedDeployableContainer startInternal
INFO: Starting container with: ["C:\Program Files\Java\jdk1.8.0_144\bin\java", -D[Standalone], -Xms64m, -Xmx512m, -Djava.net.preferIPv4Stack=true, -Djava.awt.headless=true, -Djboss.modules.system.pkgs=org.jboss.byteman, -ea, -Djboss.home.dir=C:\Users\ervelden\bin\wildfly-10.1.0.Final, -Dorg.jboss.boot.log.file=C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone\log\server.log, -Dlogging.configuration=file:C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone\configuration\logging.properties, -jar, C:\Users\ervelden\bin\wildfly-10.1.0.Final\jboss-modules.jar, -mp, C:\Users\ervelden\bin\wildfly-10.1.0.Final\modules, org.jboss.as.standalone, -Djboss.home.dir=C:\Users\ervelden\bin\wildfly-10.1.0.Final, -Djboss.server.base.dir=C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone, -Djboss.server.log.dir=C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone\log, -Djboss.server.config.dir=C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone\configuration]
sep 23, 2017 8:06:30 PM org.jboss.remoting3.EndpointImpl <clinit>
INFO: JBoss Remoting version 5.0.0.Final
sep 23, 2017 8:06:30 PM org.xnio.Xnio <clinit>
INFO: XNIO version 3.5.1.Final
sep 23, 2017 8:06:30 PM org.xnio.nio.NioXnio <clinit>
INFO: XNIO NIO Implementation Version 3.5.1.Final
sep 23, 2017 8:06:30 PM org.wildfly.security.Version <clinit>
INFO: ELY00001: WildFly Elytron version 1.1.0.Final
20:06:30,877 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.2.Final
20:06:31,050 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final
20:06:31,096 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0049: WildFly Full 10.1.0.Final (WildFly Core 2.2.0.Final) starting
20:06:32,003 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0039: Creating http management service using socket-binding (management-http)
20:06:32,003 INFO  [org.xnio] (MSC service thread 1-2) XNIO version 3.4.0.Final
20:06:32,019 INFO  [org.xnio.nio] (MSC service thread 1-2) XNIO NIO Implementation Version 3.4.0.Final
20:06:32,035 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 38) WFLYCLINF0001: Activating Infinispan subsystem.
20:06:32,035 WARN  [org.jboss.as.txn] (ServerService Thread Pool -- 54) WFLYTX0013: Node identifier property is set to the default value. Please make sure it is unique.
20:06:32,051 INFO  [org.jboss.as.jsf] (ServerService Thread Pool -- 44) WFLYJSF0007: Activated the following JSF Implementations: [main]
20:06:32,051 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 56) WFLYWS0002: Activating WebServices Extension
20:06:32,051 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 46) WFLYNAM0001: Activating Naming Subsystem
20:06:32,067 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 53) WFLYSEC0002: Activating Security Subsystem
20:06:32,067 INFO  [org.wildfly.extension.io] (ServerService Thread Pool -- 37) WFLYIO001: Worker 'default' has auto-configured to 16 core threads with 128 task threads based on your 8 available processors
20:06:32,160 INFO  [org.jboss.as.security] (MSC service thread 1-1) WFLYSEC0001: Current PicketBox version=4.9.6.Final
20:06:32,160 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-5) WFLYUT0003: Undertow 1.4.0.Final starting
20:06:32,160 INFO  [org.jboss.as.connector] (MSC service thread 1-5) WFLYJCA0009: Starting JCA Subsystem (WildFly/IronJacamar 1.3.4.Final)
20:06:32,176 INFO  [org.jboss.as.naming] (MSC service thread 1-4) WFLYNAM0003: Starting Naming Service
20:06:32,191 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-5) WFLYMAIL0001: Bound mail session [java:jboss/mail/Default]
20:06:32,191 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 33) WFLYJCA0004: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
20:06:32,191 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-1) WFLYJCA0018: Started Driver service with driver-name = h2
20:06:32,301 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 55) WFLYUT0014: Creating file handler for path 'C:\Users\ervelden\bin\wildfly-10.1.0.Final/welcome-content' with options [directory-listing: 'false', follow-symlink: 'false', case-sensitive: 'true', safe-symlink-paths: '[]']
20:06:32,363 INFO  [org.jboss.as.ejb3] (MSC service thread 1-5) WFLYEJB0482: Strict pool mdb-strict-max-pool is using a max instance size of 32 (per class), which is derived from the number of CPUs on this host.
20:06:32,363 INFO  [org.jboss.as.ejb3] (MSC service thread 1-4) WFLYEJB0481: Strict pool slsb-strict-max-pool is using a max instance size of 128 (per class), which is derived from thread worker pool sizing.
20:06:32,800 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-4) WFLYUT0012: Started server default-server.
20:06:32,800 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-6) WFLYUT0018: Host default-host starting
20:06:32,800 INFO  [org.jboss.remoting] (MSC service thread 1-8) JBoss Remoting version 4.0.21.Final
20:06:32,848 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-4) WFLYUT0006: Undertow HTTP listener default listening on 127.0.0.1:8080
20:06:32,910 WARN  [org.jboss.as.domain.management.security] (MSC service thread 1-8) WFLYDM0111: Keystore C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone\configuration\application.keystore not found, it will be auto generated on first use with a self signed certificate for host localhost
20:06:32,926 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-4) WFLYDS0013: Started FileSystemDeploymentService for directory C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone\deployments
20:06:32,926 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) WFLYSRV0027: Starting deployment of "dvx.war" (runtime-name: "dvx.war")
20:06:32,926 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) WFLYSRV0027: Starting deployment of "rtd.war" (runtime-name: "rtd.war")
20:06:32,926 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-8) WFLYSRV0027: Starting deployment of "bookStore2.war" (runtime-name: "bookStore2.war")
20:06:33,066 INFO  [org.infinispan.factories.GlobalComponentRegistry] (MSC service thread 1-4) ISPN000128: Infinispan version: Infinispan 'Chakra' 8.2.4.Final
20:06:33,082 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-4) WFLYJCA0001: Bound data source [java:jboss/datasources/ExampleDS]
20:06:33,098 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 63) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
20:06:33,098 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 65) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
20:06:33,098 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 65) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
20:06:33,098 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 61) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
20:06:33,098 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 63) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
20:06:33,098 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 61) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
20:06:33,566 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-5) WFLYUT0006: Undertow HTTPS listener https listening on 127.0.0.1:8443
20:06:33,660 INFO  [org.jboss.ws.common.management] (MSC service thread 1-3) JBWS022052: Starting JBossWS 5.1.5.Final (Apache CXF 3.1.6) 
20:06:33,738 INFO  [org.jboss.as.jpa] (MSC service thread 1-7) WFLYJPA0002: Read persistence.xml for bookStore2-persistence-unit
20:06:34,081 INFO  [org.jboss.as.jpa] (ServerService Thread Pool -- 61) WFLYJPA0010: Starting Persistence Unit (phase 1 of 2) Service 'bookStore2.war#bookStore2-persistence-unit'
20:06:34,112 INFO  [org.hibernate.jpa.internal.util.LogHelper] (ServerService Thread Pool -- 61) HHH000204: Processing PersistenceUnitInfo [
	name: bookStore2-persistence-unit
	...]
20:06:34,117 INFO  [org.jboss.weld.deployer] (MSC service thread 1-6) WFLYWELD0003: Processing weld deployment bookStore2.war
20:06:34,180 INFO  [org.hibernate.validator.internal.util.Version] (MSC service thread 1-6) HV000001: Hibernate Validator 5.2.4.Final
20:06:34,195 INFO  [org.hibernate.Version] (ServerService Thread Pool -- 61) HHH000412: Hibernate Core {5.0.10.Final}
20:06:34,195 INFO  [org.hibernate.cfg.Environment] (ServerService Thread Pool -- 61) HHH000206: hibernate.properties not found
20:06:34,195 INFO  [org.hibernate.cfg.Environment] (ServerService Thread Pool -- 61) HHH000021: Bytecode provider name : javassist
20:06:34,211 WARN  [org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl] (ServerService Thread Pool -- 61) HHH000059: Defining hibernate.transaction.flush_before_completion=true ignored in HEM
20:06:34,242 INFO  [org.hibernate.annotations.common.Version] (ServerService Thread Pool -- 61) HCANN000001: Hibernate Commons Annotations {5.0.1.Final}
20:06:34,273 INFO  [org.jboss.as.ejb3.deployment] (MSC service thread 1-6) WFLYEJB0473: JNDI bindings for session bean named 'BookEndpoint' in deployment unit 'deployment "bookStore2.war"' are as follows:

	java:global/bookStore2/BookEndpoint!org.bookStore2.rest.BookEndpoint
	java:app/bookStore2/BookEndpoint!org.bookStore2.rest.BookEndpoint
	java:module/BookEndpoint!org.bookStore2.rest.BookEndpoint
	java:global/bookStore2/BookEndpoint
	java:app/bookStore2/BookEndpoint
	java:module/BookEndpoint

20:06:34,398 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 61) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
20:06:34,398 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 61) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
20:06:34,445 INFO  [org.jboss.weld.Version] (MSC service thread 1-6) WELD-000900: 2.3.5 (Final)
20:06:34,601 INFO  [org.jboss.as.jpa] (ServerService Thread Pool -- 66) WFLYJPA0010: Starting Persistence Unit (phase 2 of 2) Service 'bookStore2.war#bookStore2-persistence-unit'
20:06:34,710 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 63) RESTEASY002225: Deploying javax.ws.rs.core.Application: class org.dvx.rest.RestApplication
20:06:34,710 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 59) RESTEASY002225: Deploying javax.ws.rs.core.Application: class org.rtd.rest.RestApplication
20:06:34,741 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 61) WFLYCLINF0002: Started client-mappings cache from ejb container
20:06:34,741 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 59) WFLYUT0021: Registered web context: /rtd
20:06:34,741 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 63) WFLYUT0021: Registered web context: /dvx
20:06:34,819 INFO  [org.hibernate.dialect.Dialect] (ServerService Thread Pool -- 66) HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
20:06:34,819 WARN  [org.hibernate.dialect.H2Dialect] (ServerService Thread Pool -- 66) HHH000431: Unable to determine H2 database version, certain features may not work
20:06:34,851 INFO  [org.hibernate.envers.boot.internal.EnversServiceImpl] (ServerService Thread Pool -- 66) Envers integration enabled? : true
20:06:35,126 INFO  [org.hibernate.tool.hbm2ddl.SchemaExport] (ServerService Thread Pool -- 66) HHH000227: Running hbm2ddl schema export
20:06:35,126 INFO  [stdout] (ServerService Thread Pool -- 66) Hibernate: 
20:06:35,126 INFO  [stdout] (ServerService Thread Pool -- 66)     drop table Book if exists

20:06:35,126 INFO  [stdout] (ServerService Thread Pool -- 66) Hibernate: 
20:06:35,126 INFO  [stdout] (ServerService Thread Pool -- 66)     drop sequence if exists hibernate_sequence

20:06:35,126 INFO  [stdout] (ServerService Thread Pool -- 66) Hibernate: 
20:06:35,126 INFO  [stdout] (ServerService Thread Pool -- 66)     create sequence hibernate_sequence start with 1 increment by 1

20:06:35,126 INFO  [stdout] (ServerService Thread Pool -- 66) Hibernate: 
20:06:35,126 INFO  [stdout] (ServerService Thread Pool -- 66)     create table Book (
20:06:35,126 INFO  [stdout] (ServerService Thread Pool -- 66)         id bigint not null,
20:06:35,126 INFO  [stdout] (ServerService Thread Pool -- 66)         publishingDate date,
20:06:35,126 INFO  [stdout] (ServerService Thread Pool -- 66)         title varchar(255),
20:06:35,126 INFO  [stdout] (ServerService Thread Pool -- 66)         version integer,
20:06:35,126 INFO  [stdout] (ServerService Thread Pool -- 66)         primary key (id)
20:06:35,126 INFO  [stdout] (ServerService Thread Pool -- 66)     )

20:06:35,126 INFO  [org.hibernate.tool.hbm2ddl.SchemaExport] (ServerService Thread Pool -- 66) HHH000230: Schema export complete
20:06:35,486 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 66) RESTEASY002225: Deploying javax.ws.rs.core.Application: class org.bookStore2.rest.RestApplication
20:06:35,502 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 66) WFLYUT0021: Registered web context: /bookStore2
20:06:35,502 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0010: Deployed "bookStore2.war" (runtime-name : "bookStore2.war")
20:06:35,518 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0010: Deployed "rtd.war" (runtime-name : "rtd.war")
20:06:35,518 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0010: Deployed "dvx.war" (runtime-name : "dvx.war")
20:06:35,580 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://127.0.0.1:9990/management
20:06:35,580 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0051: Admin console listening on http://127.0.0.1:9990
20:06:35,580 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Full 10.1.0.Final (WildFly Core 2.2.0.Final) started in 4986ms - Started 594 of 842 services (426 services are lazy, passive or on-demand)
sep 23, 2017 8:06:35 PM org.jboss.arquillian.core.impl.ObserverImpl resolveArguments
WARNING: Argument 2 for ArquillianServiceDeployer.doServiceDeploy is null. It won't be invoked.
20:06:36,158 INFO  [org.jboss.as.repository] (management-handler-thread - 4) WFLYDR0001: Content added at location C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone\data\content\5a\4e184ce146de92571b27b44ef72699033b4bc0\content
20:06:36,158 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-8) WFLYSRV0027: Starting deployment of "test.war" (runtime-name: "test.war")
20:06:36,393 INFO  [org.jboss.weld.deployer] (MSC service thread 1-5) WFLYWELD0003: Processing weld deployment test.war
20:06:36,409 INFO  [org.jboss.as.ejb3.deployment] (MSC service thread 1-5) WFLYEJB0473: JNDI bindings for session bean named 'OrderServiceImpl' in deployment unit 'deployment "test.war"' are as follows:

	java:global/test/OrderServiceImpl!my.OrderService
	java:app/test/OrderServiceImpl!my.OrderService
	java:module/OrderServiceImpl!my.OrderService
	java:global/test/OrderServiceImpl
	java:app/test/OrderServiceImpl
	java:module/OrderServiceImpl

20:06:36,643 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 66) WFLYUT0021: Registered web context: /test
20:06:36,674 INFO  [org.jboss.as.server] (management-handler-thread - 4) WFLYSRV0010: Deployed "test.war" (runtime-name : "test.war")
20:06:37,257 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 66) WFLYUT0022: Unregistered web context: /test
20:06:37,288 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-6) WFLYSRV0028: Stopped deployment test.war (runtime-name: test.war) in 50ms
20:06:37,304 WARN  [org.jboss.as.controller] (management-handler-thread - 1) WFLYCTL0357: Notification of type deployment-undeployed is not described for the resource at the address []
20:06:37,321 INFO  [org.jboss.as.repository] (management-handler-thread - 1) WFLYDR0002: Content removed from location C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone\data\content\5a\4e184ce146de92571b27b44ef72699033b4bc0\content
20:06:37,321 INFO  [org.jboss.as.server] (management-handler-thread - 1) WFLYSRV0009: Undeployed "test.war" (runtime-name: "test.war")
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 8.494 sec
sep 23, 2017 8:06:37 PM org.jboss.arquillian.core.impl.ObserverImpl resolveArguments
WARNING: Argument 2 for ArquillianServiceDeployer.undeploy is null. It won't be invoked.
20:06:37,321 INFO  [org.jboss.as.server] (management-handler-thread - 2) WFLYSRV0236: Suspending server with no timeout.
20:06:37,336 INFO  [org.jboss.as.server] (Management Triggered Shutdown) WFLYSRV0241: Shutting down in response to management operation 'shutdown'
20:06:37,352 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 13) WFLYUT0022: Unregistered web context: /bookStore2
20:06:37,352 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 26) WFLYUT0022: Unregistered web context: /dvx
20:06:37,352 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 66) WFLYUT0022: Unregistered web context: /rtd
20:06:37,368 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-5) WFLYUT0019: Host default-host stopping
20:06:37,384 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) WFLYSRV0028: Stopped deployment dvx.war (runtime-name: dvx.war) in 37ms
20:06:37,384 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-5) WFLYSRV0028: Stopped deployment rtd.war (runtime-name: rtd.war) in 39ms
20:06:37,400 INFO  [org.jboss.as.jpa] (ServerService Thread Pool -- 22) WFLYJPA0011: Stopping Persistence Unit (phase 2 of 2) Service 'bookStore2.war#bookStore2-persistence-unit'
20:06:37,400 INFO  [org.hibernate.tool.hbm2ddl.SchemaExport] (ServerService Thread Pool -- 22) HHH000227: Running hbm2ddl schema export
20:06:37,400 INFO  [stdout] (ServerService Thread Pool -- 22) Hibernate: 
20:06:37,400 INFO  [stdout] (ServerService Thread Pool -- 22)     drop table Book if exists

20:06:37,400 INFO  [stdout] (ServerService Thread Pool -- 22) Hibernate: 
20:06:37,400 INFO  [stdout] (ServerService Thread Pool -- 22)     drop sequence if exists hibernate_sequence

20:06:37,400 INFO  [org.hibernate.tool.hbm2ddl.SchemaExport] (ServerService Thread Pool -- 22) HHH000230: Schema export complete
20:06:37,400 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 13) WFLYCLINF0003: Stopped client-mappings cache from ejb container
20:06:37,400 INFO  [org.jboss.as.jpa] (ServerService Thread Pool -- 22) WFLYJPA0011: Stopping Persistence Unit (phase 1 of 2) Service 'bookStore2.war#bookStore2-persistence-unit'
20:06:37,400 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-6) WFLYJCA0010: Unbound data source [java:jboss/datasources/ExampleDS]
20:06:37,415 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-8) WFLYUT0008: Undertow HTTPS listener https suspending
20:06:37,415 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-1) WFLYUT0008: Undertow HTTP listener default suspending
20:06:37,415 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-8) WFLYUT0007: Undertow HTTPS listener https stopped, was bound to 127.0.0.1:8443
20:06:37,415 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-1) WFLYUT0007: Undertow HTTP listener default stopped, was bound to 127.0.0.1:8080
20:06:37,415 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-8) WFLYJCA0019: Stopped Driver service with driver-name = h2
20:06:37,415 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-3) WFLYUT0004: Undertow 1.4.0.Final stopping
20:06:37,415 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) WFLYSRV0028: Stopped deployment bookStore2.war (runtime-name: bookStore2.war) in 81ms
20:06:37,431 INFO  [org.jboss.as] (MSC service thread 1-3) WFLYSRV0050: WildFly Full 10.1.0.Final (WildFly Core 2.2.0.Final) stopped in 82ms

Results :

Tests run: 2, Failures: 0, Errors: 0, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 12.389 s
[INFO] Finished at: 2017-09-23T20:06:38+01:00
[INFO] Final Memory: 24M/253M
[INFO] ------------------------------------------------------------------------





/ 7	 .

/ wildfly-remote

$ vi pom.xml

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>my.own</groupId>
  <artifactId>arquillian-rinse_and_repeat</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>jar</packaging>
  <properties>
  	<failOnMissingWebXml>false</failOnMissingWebXml>
  </properties>
  <dependencyManagement>
  	<dependencies>
  		<dependency>
  			<groupId>javax</groupId>
  			<artifactId>javaee-api</artifactId>
  			<version>7.0</version>
  			<scope>provided</scope>
  		</dependency>
  		<dependency>
  			<groupId>junit</groupId>
  			<artifactId>junit</artifactId>
  			<version>4.12</version>
  			<scope>test</scope>
  		</dependency>
  		<dependency>
  			<groupId>org.jboss.arquillian</groupId>
  			<artifactId>arquillian-bom</artifactId>
  			<version>1.1.13.Final</version>
  			<scope>import</scope>
  			<type>pom</type>
  		</dependency>
  	</dependencies>
  </dependencyManagement>
  <dependencies>
  	<dependency>
  		<groupId>javax</groupId>
  		<artifactId>javaee-api</artifactId>
  	</dependency>
  	<dependency>
  		<groupId>junit</groupId>
  		<artifactId>junit</artifactId>
  	</dependency>
  	<dependency>
  		<groupId>org.jboss.arquillian.junit</groupId>
  		<artifactId>arquillian-junit-container</artifactId>
  	</dependency>
  </dependencies>
  <profiles>
  	<profile>
  		<id>wildfly-managed</id>
  		<activation>
  			<activeByDefault>false</activeByDefault>
  		</activation>
  		<dependencyManagement>
  			<dependencies>
  				<dependency>
  					<groupId>org.wildfly.arquillian</groupId>
  					<artifactId>wildfly-arquillian-container-managed</artifactId>
  					<version>2.1.0.Final</version>
  					<scope>test</scope>
  				</dependency>
  				<dependency>
  					<groupId>org.jboss.arquillian.protocol</groupId>
  					<artifactId>arquillian-protocol-servlet</artifactId>
  					<version>1.1.13.Final</version>
  					<scope>test</scope>
  				</dependency>
  			</dependencies>
  		</dependencyManagement>
  		<dependencies>
			<dependency>
				<groupId>org.wildfly.arquillian</groupId>
				<artifactId>wildfly-arquillian-container-managed</artifactId>
			</dependency>
			<dependency>
				<groupId>org.jboss.arquillian.protocol</groupId>
				<artifactId>arquillian-protocol-servlet</artifactId>
			</dependency>
  		</dependencies>
  	</profile>
  	<profile>
  		<id>wildfly-remote</id>
  		<activation>
  			<activeByDefault>true</activeByDefault>
  		</activation>
  		<dependencyManagement>
  			<dependencies>
  				<dependency>
  					<groupId>org.wildfly.arquillian</groupId>
  					<artifactId>wildfly-arquillian-container-remote</artifactId>
  					<version>2.1.0.Final</version>
  					<scope>test</scope>
  				</dependency>
  				<dependency>
  					<groupId>org.jboss.arquillian.protocol</groupId>
  					<artifactId>arquillian-protocol-servlet</artifactId>
  					<version>1.1.13.Final</version>
  					<scope>test</scope>
  				</dependency>
  			</dependencies>
  		</dependencyManagement>
  		<dependencies>
			<dependency>
				<groupId>org.wildfly.arquillian</groupId>
				<artifactId>wildfly-arquillian-container-remote</artifactId>
			</dependency>
			<dependency>
				<groupId>org.jboss.arquillian.protocol</groupId>
				<artifactId>arquillian-protocol-servlet</artifactId>
			</dependency>
		</dependencies>
  	</profile>
  </profiles>
  <build>
    <plugins>
    	<plugin>
    		<groupId>org.apache.maven.plugins</groupId>
    		<artifactId>surefire-maven-plugin</artifactId>
    		<version>2.20</version>
    	</plugin>
    </plugins>
  </build>
  
</project>

/ run config arquillian-rinse_and_repeat-clean-test-remote , 
/ met profile wildfly-remote als default en dus zonder JBOSS_HOME	,

/ we start wildfly, 
C:\Users\ervelden\bin\wildfly-10.1.0.Final>bin\standalone.bat

C:\Users\ervelden\bin\wildfly-10.1.0.Final>bin\standalone.bat
Calling "C:\Users\ervelden\bin\wildfly-10.1.0.Final\bin\standalone.conf.bat"
Setting JAVA property to "C:\Program Files\Java\jdk1.8.0_144\bin\java"
===============================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: "C:\Users\ervelden\bin\wildfly-10.1.0.Final"

  JAVA: "C:\Program Files\Java\jdk1.8.0_144\bin\java"

  JAVA_OPTS: "-Dprogram.name=standalone.bat -Xms64M -Xmx512M -XX:MetaspaceSize=96M -XX:MaxMetaspaceSize=256m -Djava.net.preferIP
v4Stack=true -Djboss.modules.system.pkgs=org.jboss.byteman"

===============================================================================

12:04:21,821 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.2.Final
12:04:22,087 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final
12:04:22,165 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0049: WildFly Full 10.1.0.Final (WildFly Core 2.2.0.Final) sta
rting
12:04:23,272 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0039: Creating http management service using socket-bin
ding (management-http)
12:04:23,303 INFO  [org.xnio] (MSC service thread 1-3) XNIO version 3.4.0.Final
12:04:23,319 INFO  [org.xnio.nio] (MSC service thread 1-3) XNIO NIO Implementation Version 3.4.0.Final
12:04:23,335 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 38) WFLYCLINF0001: Activating Infinispan s
ubsystem.
12:04:23,335 WARN  [org.jboss.as.txn] (ServerService Thread Pool -- 54) WFLYTX0013: Node identifier property is set to the defau
lt value. Please make sure it is unique.
12:04:23,350 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 56) WFLYWS0002: Activating WebServices Extension
12:04:23,350 INFO  [org.jboss.as.jsf] (ServerService Thread Pool -- 44) WFLYJSF0007: Activated the following JSF Implementations
: [main]
12:04:23,350 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 46) WFLYNAM0001: Activating Naming Subsystem
12:04:23,366 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 53) WFLYSEC0002: Activating Security Subsystem
12:04:23,366 INFO  [org.jboss.as.security] (MSC service thread 1-7) WFLYSEC0001: Current PicketBox version=4.9.6.Final
12:04:23,381 INFO  [org.wildfly.extension.io] (ServerService Thread Pool -- 37) WFLYIO001: Worker 'default' has auto-configured
to 16 core threads with 128 task threads based on your 8 available processors
12:04:23,381 INFO  [org.jboss.as.connector] (MSC service thread 1-4) WFLYJCA0009: Starting JCA Subsystem (WildFly/IronJacamar 1.
3.4.Final)
12:04:23,413 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-2) WFLYUT0003: Undertow 1.4.0.Final starting
12:04:23,428 INFO  [org.jboss.as.naming] (MSC service thread 1-1) WFLYNAM0003: Starting Naming Service
12:04:23,428 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-2) WFLYMAIL0001: Bound mail session [java:jboss/mail/Defa
ult]
12:04:23,553 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 55) WFLYUT0014: Creating file handler for path
 'C:\Users\ervelden\bin\wildfly-10.1.0.Final/welcome-content' with options [directory-listing: 'false', follow-symlink: 'false',
 case-sensitive: 'true', safe-symlink-paths: '[]']
12:04:23,600 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 33) WFLYJCA0004: Deploying JDBC
-compliant driver class org.h2.Driver (version 1.3)
12:04:23,631 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-4) WFLYJCA0018: Started Driver service with dri
ver-name = h2
12:04:23,662 INFO  [org.jboss.as.ejb3] (MSC service thread 1-1) WFLYEJB0481: Strict pool slsb-strict-max-pool is using a max ins
tance size of 128 (per class), which is derived from thread worker pool sizing.
12:04:23,662 INFO  [org.jboss.as.ejb3] (MSC service thread 1-5) WFLYEJB0482: Strict pool mdb-strict-max-pool is using a max inst
ance size of 32 (per class), which is derived from the number of CPUs on this host.
12:04:24,161 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-6) WFLYUT0012: Started server default-server.
12:04:24,161 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-2) WFLYUT0018: Host default-host starting
12:04:24,161 INFO  [org.jboss.remoting] (MSC service thread 1-3) JBoss Remoting version 4.0.21.Final
12:04:24,239 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-4) WFLYUT0006: Undertow HTTP listener default listenin
g on 127.0.0.1:8080
12:04:24,380 WARN  [org.jboss.as.domain.management.security] (MSC service thread 1-2) WFLYDM0111: Keystore C:\Users\ervelden\bin
\wildfly-10.1.0.Final\standalone\configuration\application.keystore not found, it will be auto generated on first use with a sel
f signed certificate for host localhost
12:04:24,411 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-7) WFLYDS0013: Started FileSystemDeploymentSer
vice for directory C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone\deployments
12:04:24,411 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-6) WFLYSRV0027: Starting deployment of "rtd.war" (runt
ime-name: "rtd.war")
12:04:24,411 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-4) WFLYSRV0027: Starting deployment of "bookStore2.war
" (runtime-name: "bookStore2.war")
12:04:24,411 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) WFLYSRV0027: Starting deployment of "dvx.war" (runt
ime-name: "dvx.war")
12:04:24,661 INFO  [org.infinispan.factories.GlobalComponentRegistry] (MSC service thread 1-7) ISPN000128: Infinispan version: I
nfinispan 'Chakra' 8.2.4.Final
12:04:24,676 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-1) WFLYJCA0001: Bound data source [java
:jboss/datasources/ExampleDS]
12:04:24,692 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 60) ISPN00015
2: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
12:04:24,692 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 58) ISPN00015
2: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
12:04:24,707 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 60) ISPN00015
2: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
12:04:24,707 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 61) ISPN00015
2: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
12:04:24,707 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 58) ISPN00015
2: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
12:04:24,707 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 61) ISPN00015
2: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
12:04:25,129 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-1) WFLYUT0006: Undertow HTTPS listener https listening
 on 127.0.0.1:8443
12:04:25,238 INFO  [org.jboss.ws.common.management] (MSC service thread 1-5) JBWS022052: Starting JBossWS 5.1.5.Final (Apache CX
F 3.1.6)
12:04:25,285 INFO  [org.jboss.as.jpa] (MSC service thread 1-3) WFLYJPA0002: Read persistence.xml for bookStore2-persistence-unit

12:04:25,347 INFO  [org.jboss.as.jpa] (ServerService Thread Pool -- 61) WFLYJPA0010: Starting Persistence Unit (phase 1 of 2) Se
rvice 'bookStore2.war#bookStore2-persistence-unit'
12:04:25,378 INFO  [org.hibernate.jpa.internal.util.LogHelper] (ServerService Thread Pool -- 61) HHH000204: Processing Persisten
ceUnitInfo [
        name: bookStore2-persistence-unit
        ...]
12:04:25,394 INFO  [org.jboss.weld.deployer] (MSC service thread 1-4) WFLYWELD0003: Processing weld deployment bookStore2.war
12:04:25,503 INFO  [org.hibernate.validator.internal.util.Version] (MSC service thread 1-4) HV000001: Hibernate Validator 5.2.4.
Final
12:04:25,519 INFO  [org.hibernate.Version] (ServerService Thread Pool -- 61) HHH000412: Hibernate Core {5.0.10.Final}
12:04:25,519 INFO  [org.hibernate.cfg.Environment] (ServerService Thread Pool -- 61) HHH000206: hibernate.properties not found
12:04:25,519 INFO  [org.hibernate.cfg.Environment] (ServerService Thread Pool -- 61) HHH000021: Bytecode provider name : javassi
st
12:04:25,534 WARN  [org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl] (ServerService Thread Pool -- 61) HHH000059
: Defining hibernate.transaction.flush_before_completion=true ignored in HEM
12:04:25,597 INFO  [org.hibernate.annotations.common.Version] (ServerService Thread Pool -- 61) HCANN000001: Hibernate Commons A
nnotations {5.0.1.Final}
12:04:25,643 INFO  [org.jboss.as.ejb3.deployment] (MSC service thread 1-4) WFLYEJB0473: JNDI bindings for session bean named 'Bo
okEndpoint' in deployment unit 'deployment "bookStore2.war"' are as follows:

        java:global/bookStore2/BookEndpoint!org.bookStore2.rest.BookEndpoint
        java:app/bookStore2/BookEndpoint!org.bookStore2.rest.BookEndpoint
        java:module/BookEndpoint!org.bookStore2.rest.BookEndpoint
        java:global/bookStore2/BookEndpoint
        java:app/bookStore2/BookEndpoint
        java:module/BookEndpoint

12:04:25,847 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 61) ISPN00015
2: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
12:04:25,847 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 61) ISPN00015
2: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
12:04:25,894 INFO  [org.jboss.weld.Version] (MSC service thread 1-5) WELD-000900: 2.3.5 (Final)
12:04:26,144 INFO  [org.jboss.as.jpa] (ServerService Thread Pool -- 62) WFLYJPA0010: Starting Persistence Unit (phase 2 of 2) Se
rvice 'bookStore2.war#bookStore2-persistence-unit'
12:04:26,206 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 65) RESTEASY002225: Deploying javax.ws
.rs.core.Application: class org.dvx.rest.RestApplication
12:04:26,206 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 59) RESTEASY002225: Deploying javax.ws
.rs.core.Application: class org.rtd.rest.RestApplication
12:04:26,253 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 65) WFLYUT0021: Registered web context: /dvx
12:04:26,253 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 59) WFLYUT0021: Registered web context: /rtd
12:04:26,284 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 61) WFLYCLINF0002: Started client-mappings
 cache from ejb container
12:04:26,424 INFO  [org.hibernate.dialect.Dialect] (ServerService Thread Pool -- 62) HHH000400: Using dialect: org.hibernate.dia
lect.H2Dialect
12:04:26,440 WARN  [org.hibernate.dialect.H2Dialect] (ServerService Thread Pool -- 62) HHH000431: Unable to determine H2 databas
e version, certain features may not work
12:04:26,487 INFO  [org.hibernate.envers.boot.internal.EnversServiceImpl] (ServerService Thread Pool -- 62) Envers integration e
nabled? : true
12:04:26,861 INFO  [org.hibernate.tool.hbm2ddl.SchemaExport] (ServerService Thread Pool -- 62) HHH000227: Running hbm2ddl schema
 export
12:04:26,877 INFO  [stdout] (ServerService Thread Pool -- 62) Hibernate:
12:04:26,877 INFO  [stdout] (ServerService Thread Pool -- 62)     drop table Book if exists
12:04:26,877 INFO  [stdout] (ServerService Thread Pool -- 62) Hibernate:
12:04:26,877 INFO  [stdout] (ServerService Thread Pool -- 62)     drop sequence if exists hibernate_sequence
12:04:26,877 INFO  [stdout] (ServerService Thread Pool -- 62) Hibernate:
12:04:26,877 INFO  [stdout] (ServerService Thread Pool -- 62)     create sequence hibernate_sequence start with 1 increment by 1

12:04:26,877 INFO  [stdout] (ServerService Thread Pool -- 62) Hibernate:
12:04:26,877 INFO  [stdout] (ServerService Thread Pool -- 62)     create table Book (
12:04:26,877 INFO  [stdout] (ServerService Thread Pool -- 62)         id bigint not null,
12:04:26,877 INFO  [stdout] (ServerService Thread Pool -- 62)         publishingDate date,
12:04:26,877 INFO  [stdout] (ServerService Thread Pool -- 62)         title varchar(255),
12:04:26,877 INFO  [stdout] (ServerService Thread Pool -- 62)         version integer,
12:04:26,877 INFO  [stdout] (ServerService Thread Pool -- 62)         primary key (id)
12:04:26,877 INFO  [stdout] (ServerService Thread Pool -- 62)     )
12:04:26,877 INFO  [org.hibernate.tool.hbm2ddl.SchemaExport] (ServerService Thread Pool -- 62) HHH000230: Schema export complete

12:04:27,329 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 62) RESTEASY002225: Deploying javax.ws
.rs.core.Application: class org.bookStore2.rest.RestApplication
12:04:27,345 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 62) WFLYUT0021: Registered web context: /bookS
tore2
12:04:27,360 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0010: Deployed "bookStore2.war" (runtime-name : "bookSt
ore2.war")
12:04:27,360 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0010: Deployed "rtd.war" (runtime-name : "rtd.war")
12:04:27,360 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0010: Deployed "dvx.war" (runtime-name : "dvx.war")
12:04:27,423 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://127.0.0.1:
9990/management
12:04:27,423 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0051: Admin console listening on http://127.0.0.1:9990
12:04:27,423 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Full 10.1.0.Final (WildFly Core 2.2.0.Final) sta
rted in 5976ms - Started 594 of 842 services (426 services are lazy, passive or on-demand)


/ we run de run config, 

/ we zien,

19:57:29,194 INFO  [org.jboss.as.repository] (management-handler-thread - 6) WFLYDR0001: Content added at location C:\Users\erve
lden\bin\wildfly-10.1.0.Final\standalone\data\content\ff\7692b18e4ff3d043b17b32b7bf471331703edc\content
19:57:29,194 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) WFLYSRV0027: Starting deployment of "test.war" (run
time-name: "test.war")
19:57:29,340 INFO  [org.jboss.weld.deployer] (MSC service thread 1-7) WFLYWELD0003: Processing weld deployment test.war
19:57:29,348 INFO  [org.jboss.as.ejb3.deployment] (MSC service thread 1-7) WFLYEJB0473: JNDI bindings for session bean named 'Or
derServiceImpl' in deployment unit 'deployment "test.war"' are as follows:

        java:global/test/OrderServiceImpl!my.OrderService
        java:app/test/OrderServiceImpl!my.OrderService
        java:module/OrderServiceImpl!my.OrderService
        java:global/test/OrderServiceImpl
        java:app/test/OrderServiceImpl
        java:module/OrderServiceImpl

19:57:29,485 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 74) WFLYUT0021: Registered web context: /test
19:57:29,500 INFO  [org.jboss.as.server] (management-handler-thread - 6) WFLYSRV0010: Deployed "test.war" (runtime-name : "test.
war")
19:57:29,844 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 75) WFLYUT0022: Unregistered web context: /tes
t
19:57:29,890 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) WFLYSRV0028: Stopped deployment test.war (runtime-n
ame: test.war) in 59ms
19:57:29,922 WARN  [org.jboss.as.controller] (management-handler-thread - 7) WFLYCTL0357: Notification of type deployment-undepl
oyed is not described for the resource at the address []
19:57:29,922 INFO  [org.jboss.as.repository] (management-handler-thread - 7) WFLYDR0002: Content removed from location C:\Users\
ervelden\bin\wildfly-10.1.0.Final\standalone\data\content\ff\7692b18e4ff3d043b17b32b7bf471331703edc\content
19:57:29,922 INFO  [org.jboss.as.server] (management-handler-thread - 7) WFLYSRV0009: Undeployed "test.war" (runtime-name: "test
.war")

/ 1313 

/ we start wildfly vanuit eclipse,

/ lees,
http://tools.jboss.org/blog/2015-03-17-debugg

/ kijk,
https://www.youtube.com/watch?v=XhEOipR1o1M  <0 deze doet het anders, TODO
https://www.youtube.com/watch?v=atr15yiyR3o		<-

/ we volgen de defaults,
/ we fill alleen C:\Users\ervelden\bin\wildfly-10.1.0.Final in als Home dir,
/ op een gegeven moment komen we op Add and Remove,
/ van deze lijst is niets deployed en dat doen we ook niet,
/ Finish
/ double click in Server view op de server ,
/ we zien 
Server behavior
Behavior profile TODO
Server lifecycle is externally managed
Listen on all interfaces to allow remote web connections
Expose your management port as the server's hostname : checked TODO 

/ start wildfly , debugging	, 
/ OK

/ 7	. 

/ we start wildfly vanuit eclipse,
/ set b in BasketTest.testPlaceOrder

/ 13	. 

/ we start eerst wildfly op in eclipse, debugging
... TODO
/ we run de test, 

12:10:02,857 INFO  [org.jboss.as.repository] (management-handler-thread - 1) WFLYDR0001: Content added at location C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone\data\content\f5\9447f8e6bbb86160c5201ce0c356190480774a\content
12:10:02,857 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) WFLYSRV0027: Starting deployment of "test.war" (runtime-name: "test.war")
12:10:03,170 INFO  [org.jboss.weld.deployer] (MSC service thread 1-5) WFLYWELD0003: Processing weld deployment test.war
12:10:03,185 INFO  [org.jboss.as.ejb3.deployment] (MSC service thread 1-5) WFLYEJB0473: JNDI bindings for session bean named 'OrderServiceImpl' in deployment unit 'deployment "test.war"' are as follows:

	java:global/test/OrderServiceImpl!my.OrderService
	java:app/test/OrderServiceImpl!my.OrderService
	java:module/OrderServiceImpl!my.OrderService
	java:global/test/OrderServiceImpl
	java:app/test/OrderServiceImpl
	java:module/OrderServiceImpl

12:10:03,435 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 2) WFLYUT0021: Registered web context: /test
12:10:03,497 INFO  [org.jboss.as.server] (management-handler-thread - 1) WFLYSRV0010: Deployed "test.war" (runtime-name : "test.war")

/ lees, over deployments in wildfly
https://docs.jboss.org/author/display/WFLY10/Application+deployment
...
	The above examples use Unix shell commands. Windows equivalents are:
cp src dest --> xcopy /y src dest
cp -r src dest --> xcopy /e /s /y src dest
rm afile --> del afile
touch afile --> echo>> afile

Note that the behavior of 'touch' and 'echo' are different but the differences are not relevant to the usages in the examples above.

/ we vallen in eclipse in b, maar 
source not found
Edit source lookup path	, click
/ add project arquillian-rinse_and_repeat
/ OK

C:\Users\ervelden\bin\wildfly-10.1.0.Final>... standalone\data\content\f5\9447f8e6bbb86160c5201ce0c356190480774a\content
/ wat is dit voor een file, want dit is de webapp,

/ we geven continue, 
/ OK

/ we hebben wildfly start in eclipse, maar op de command line geven we,
$ bin\jboss-cli.bat
[standalone@localhost:9990 /] deployment-info
NAME           RUNTIME-NAME   PERSISTENT ENABLED STATUS
bookStore2.war bookStore2.war true       true    OK
dvx.war        dvx.war        true       true    OK
rtd.war        rtd.war        true       true    OK
/ deployed apps	

/ 13	. 

/ als we de mgn console willen use, lees	,
C:\Users\ervelden\bin\wildfly-10.1.0.Final>type standalone\configuration\mgmt-users.properties
C:\Users\ervelden\bin\wildfly-10.1.0.Final>bin\add-user.bat

What type of user do you wish to add?
 a) Management User (mgmt-users.properties)
 b) Application User (application-users.properties)
(a):

Enter the details of the new user to add.
Using realm 'ManagementRealm' as discovered from the existing property files.
Username : admin
The username 'admin' is easy to guess
Are you sure you want to add user 'admin' yes/no? yes
Password recommendations are listed below. To modify these restrictions edit the add-user.properties configuration file.
 - The password should be different from the username
 - The password should not be one of the following restricted values {root, admin, administrator}
 - The password should contain at least 8 characters, 1 alphabetic character(s), 1 digit(s), 1 non-alphanumeric symbol(s)
Password :
WFLYDM0098: The password should be different from the username
Are you sure you want to use the password entered yes/no? yes
Re-enter Password :
What groups do you want this user to belong to? (Please enter a comma separated list, or leave blank for none)[  ]:
About to add user 'admin' for realm 'ManagementRealm'
Is this correct yes/no? yes
Added user 'admin' to file 'C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone\configuration\mgmt-users.properties'
Added user 'admin' to file 'C:\Users\ervelden\bin\wildfly-10.1.0.Final\domain\configuration\mgmt-users.properties'
Added user 'admin' with groups  to file 'C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone\configuration\mgmt-groups.propert
ies'
Added user 'admin' with groups  to file 'C:\Users\ervelden\bin\wildfly-10.1.0.Final\domain\configuration\mgmt-groups.properties'

Is this new user going to be used for one AS process to connect to another AS process?
e.g. for a slave host controller connecting to the master or for a Remoting connection for server to server EJB calls.
yes/no? no
Press any key to continue . . .

/ we hadden eerder al: ericj:vi_lang17 add als user mgn, de laatste vraag hadden we met yes beantwoord	,

/ kun je ook users rm, in jboss-cli ook?
/ TODO

/ 13	. 

/ het result:

C:\Users\ervelden\bin\wildfly-10.1.0.Final>type standalone\configuration\mgmt-users.properties
#
# Properties declaration of users for the realm 'ManagementRealm' which is the default realm
# for new installations. Further authentication mechanism can be configured
# as part of the <management /> in standalone.xml.
#
# Users can be added to this properties file at any time, updates after the server has started
# will be automatically detected.
#
# By default the properties realm expects the entries to be in the format: -
# username=HEX( MD5( username ':' realm ':' password))
#
# A utility script is provided which can be executed from the bin folder to add the users: -
# - Linux
#  bin/add-user.sh
#
# - Windows
#  bin\add-user.bat
# On start-up the server will also automatically add a user $local - this user is specifically
# for local tools running against this AS installation.
#
# The following illustrates how an admin user could be defined, this
# is for illustration only and does not correspond to a usable password.
#
ericj=06f7b813232596a0f4706b0353ae8360
admin=c22052286cd5d72239a90fe193737253
#
#$REALM_NAME=ManagementRealm$ This line is used by the add-user utility to identify the realm name already used in this file.
#

/ 13	. 

http://localhost:8080/
/ click Administration console
http://localhost:9990/console/App.html#home

/ we komen op 9990	,

/ 13	. 

/ deploy in wildfly: cp naar standalone\deployments, 
/ dan verdwijnt hij hieruit, en wordt er een file in standalone\data create, 
/ TODO

/ we hebben een web app abctomcatapp3	, 
/ deze deploy we altijd in tomcat, 
/ maar nu in wildfly, 
/ run clean package, en cp de war naar standalone\deployments
/ we hadden wildfly start in eclipse,

13:17:17,041 INFO  [org.jboss.as.repository] (DeploymentScanner-threads - 1) WFLYDR0001: Content added at location C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone\data\content\d4\63b7df5e648a1f3c9a7a0040af374b927ee33a\content
13:17:17,041 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) WFLYSRV0027: Starting deployment of "abctomcatappl3-1.0.war" (runtime-name: "abctomcatappl3-1.0.war")
13:17:17,135 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 76) WFLYUT0021: Registered web context: /abctomcatappl3-1.0
13:17:17,151 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 1) WFLYSRV0010: Deployed "abctomcatappl3-1.0.war" (runtime-name : "abctomcatappl3-1.0.war")

/ geef,
http://localhost:8080/abctomcatappl3-1.0/

/ 13	 .

/ we hebben de code aangepast
$ vi Basket.java

	public void placeOrder() {
		orderService.addOrder(new ArrayList<String>(order));
		order.clear();
	}
	
/ Omdat we order.clear() moeten we een copy van de order in orderService's orders stoppen, 

/ In het totaal	,

$ vi Basket.java

package my;


import java.io.Serializable;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

import javax.annotation.PostConstruct;
import javax.ejb.EJB;
import javax.enterprise.context.SessionScoped;
import javax.inject.Inject;

@SessionScoped
public class Basket implements Serializable {

	@EJB
//	@Inject
	private OrderService orderService;
	
	private List<String>order;
	
	@PostConstruct
	private void init() {
		order=new ArrayList<String>();
	}
	
	public void addItem(String item) {
		order.add(item);
	}
	
	public int getOrderSize() {
		return order.size();
	}
	
	public void placeOrder() {
		orderService.addOrder(new ArrayList<String>(order));
		order.clear();
	}
	
}

$ vi OrderServiceImpl.java

package my;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

import javax.annotation.PostConstruct;
import javax.ejb.Lock;
import javax.ejb.LockType;
import javax.ejb.Singleton;
import javax.ejb.Stateful;
import javax.ejb.Stateless;

@Singleton
@Lock(LockType.READ)
//@Stateful
//@Stateless
public class OrderServiceImpl implements OrderService{

	List<List<String>>orders;
	
	@PostConstruct
	private void init() {
		orders=new ArrayList<List<String>>();
	}
	
	@Override
	@Lock(LockType.WRITE)
	public void addOrder(List<String>order) {
		orders.add(order);
	}

	@Override
	public int getOrdersSize() {
		return orders.size();
	}
	
}

$ vi BasketTest.java



$ vi pom.xml

package my;

import javax.ejb.EJB;
import javax.inject.Inject;

import org.jboss.arquillian.container.test.api.Deployment;
import org.jboss.arquillian.junit.Arquillian;
import org.jboss.arquillian.junit.InSequence;
import org.jboss.shrinkwrap.api.ShrinkWrap;
import org.jboss.shrinkwrap.api.asset.EmptyAsset;
import org.jboss.shrinkwrap.api.spec.JavaArchive;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;

import org.junit.Assert;

@RunWith(Arquillian.class)
public class BasketTest {
	
	@Deployment
	public static JavaArchive createJar() {
		return ShrinkWrap.create(JavaArchive.class, "test.jar")
				.addClasses(Basket.class,OrderService.class,OrderServiceImpl.class)
				.addAsManifestResource(EmptyAsset.INSTANCE,"beans.xml");
	}
	
	@Inject
	private Basket basket;
	
	@EJB
	private OrderService orderService;

	@Before
	public void init() {
		
	}
	
	@Test
	@InSequence(1)
	public void testPlaceOrder() {
		basket.addItem("apples");
		basket.addItem("bread");
		basket.placeOrder();
		Assert.assertEquals(1, orderService.getOrdersSize());
		Assert.assertEquals(0, basket.getOrderSize());
		
		basket.addItem("milk");
		basket.addItem("tissues");
		basket.placeOrder();
		Assert.assertEquals(2, orderService.getOrdersSize());
		Assert.assertEquals(0, basket.getOrderSize());
		
	}
	
	@Test
	@InSequence(2)
	public void testPersistence() {
		Assert.assertEquals(2, orderService.getOrdersSize());
	}
}

$ vi pom.xml

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>my.own</groupId>
  <artifactId>arquillian-rinse_and_repeat</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>jar</packaging>
  <properties>
  	<failOnMissingWebXml>false</failOnMissingWebXml>
  </properties>
  <dependencyManagement>
  	<dependencies>
  		<dependency>
  			<groupId>javax</groupId>
  			<artifactId>javaee-api</artifactId>
  			<version>7.0</version>
  			<scope>provided</scope>
  		</dependency>
  		<dependency>
  			<groupId>junit</groupId>
  			<artifactId>junit</artifactId>
  			<version>4.12</version>
  			<scope>test</scope>
  		</dependency>
  		<dependency>
  			<groupId>org.jboss.arquillian</groupId>
  			<artifactId>arquillian-bom</artifactId>
  			<version>1.1.13.Final</version>
  			<scope>import</scope>
  			<type>pom</type>
  		</dependency>
  	</dependencies>
  </dependencyManagement>
  <dependencies>
  	<dependency>
  		<groupId>javax</groupId>
  		<artifactId>javaee-api</artifactId>
  	</dependency>
  	<dependency>
  		<groupId>junit</groupId>
  		<artifactId>junit</artifactId>
  	</dependency>
  	<dependency>
  		<groupId>org.jboss.arquillian.junit</groupId>
  		<artifactId>arquillian-junit-container</artifactId>
  	</dependency>
  </dependencies>
  <profiles>
  	<profile>
  		<id>wildfly-managed</id>
  		<activation>
  			<activeByDefault>false</activeByDefault>
  		</activation>
  		<dependencyManagement>
  			<dependencies>
  				<dependency>
  					<groupId>org.wildfly.arquillian</groupId>
  					<artifactId>wildfly-arquillian-container-managed</artifactId>
  					<version>2.1.0.Final</version>
  					<scope>test</scope>
  				</dependency>
  				<dependency>
  					<groupId>org.jboss.arquillian.protocol</groupId>
  					<artifactId>arquillian-protocol-servlet</artifactId>
  					<version>1.1.13.Final</version>
  					<scope>test</scope>
  				</dependency>
  			</dependencies>
  		</dependencyManagement>
  		<dependencies>
			<dependency>
				<groupId>org.wildfly.arquillian</groupId>
				<artifactId>wildfly-arquillian-container-managed</artifactId>
			</dependency>
			<dependency>
				<groupId>org.jboss.arquillian.protocol</groupId>
				<artifactId>arquillian-protocol-servlet</artifactId>
			</dependency>
  		</dependencies>
  	</profile>
  	<profile>
  		<id>wildfly-remote</id>
  		<activation>
  			<activeByDefault>true</activeByDefault>
  		</activation>
  		<dependencyManagement>
  			<dependencies>
  				<dependency>
  					<groupId>org.wildfly.arquillian</groupId>
  					<artifactId>wildfly-arquillian-container-remote</artifactId>
  					<version>2.1.0.Final</version>
  					<scope>test</scope>
  				</dependency>
  				<dependency>
  					<groupId>org.jboss.arquillian.protocol</groupId>
  					<artifactId>arquillian-protocol-servlet</artifactId>
  					<version>1.1.13.Final</version>
  					<scope>test</scope>
  				</dependency>
  			</dependencies>
  		</dependencyManagement>
  		<dependencies>
			<dependency>
				<groupId>org.wildfly.arquillian</groupId>
				<artifactId>wildfly-arquillian-container-remote</artifactId>
			</dependency>
			<dependency>
				<groupId>org.jboss.arquillian.protocol</groupId>
				<artifactId>arquillian-protocol-servlet</artifactId>
			</dependency>
		</dependencies>
  	</profile>
  </profiles>
  <build>
    <plugins>
    	<plugin>
    		<groupId>org.apache.maven.plugins</groupId>
    		<artifactId>surefire-maven-plugin</artifactId>
    		<version>2.20</version>
    	</plugin>
    </plugins>
  </build>
  
</project>

/ we run met wildfly-remote profile de run config arquillian-rinse_and_repeat-clean-test-remote, die clean test doet	. Dit werkt met ports, dus er is geen JBOSS_HOME,

/ 13	. 

/ de basket krijgt een service order injected, maar de test ook, 
/ als de service order stateful is, (WH moet je denken per client) zijn deze 2 service orders verschillend,
/ dus die injected is in de basket krijgt een order, maar die in de test is injected niet, dus faalt de test, want 1 != 0	,
		Assert.assertEquals(1, orderService.getOrdersSize());

/ als de service order stateless is gaat de test OK, maar MISSCHIEN is dit toeval, we zien overal die ene service order, alsof het een singleton is, 
/ TODO

/ 13	. 

/ we kunnen de war zien die arquillian maakt,

/ voeg een src/test/resources/arquillian.xml toe:

<?xml version="1.0" encoding="UTF-8"?>
<arquillian	xmlns="http://jboss.org/schema/arquillian"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd">

	<engine>
		<property name="deploymentExportPath">target/deployments</property>
	</engine>
	
	<!-- <defaultProtocol type="Servlet 3.0"></defaultProtocol> -->
</arquillian>

/ Dit is alles, we hoeven zoals op de site geen JVM arg te geven in de run config, 
/ run clean test, 

C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen>jar tvf arquillian-rinse_and_repeat\target\deployments\_DEFAULT___DEFAULT__test.war
  3471 Mon Sep 25 06:18:18 GMT+01:00 2017 WEB-INF/lib/test.jar
     0 Mon Sep 25 06:18:18 GMT+01:00 2017 WEB-INF/
     0 Mon Sep 25 06:18:18 GMT+01:00 2017 WEB-INF/lib/
402498 Mon Sep 25 06:18:18 GMT+01:00 2017 WEB-INF/lib/arquillian-junit.jar
 22084 Mon Sep 25 06:18:18 GMT+01:00 2017 WEB-INF/lib/arquillian-testenricher-cdi.jar
 16244 Mon Sep 25 06:18:18 GMT+01:00 2017 WEB-INF/lib/arquillian-testenricher-ejb.jar
 15098 Mon Sep 25 06:18:18 GMT+01:00 2017 WEB-INF/lib/arquillian-testenricher-resource.jar
556404 Mon Sep 25 06:18:18 GMT+01:00 2017 WEB-INF/lib/arquillian-core.jar
  7681 Mon Sep 25 06:18:18 GMT+01:00 2017 WEB-INF/lib/arquillian-testenricher-msc.jar
  3051 Mon Sep 25 06:18:18 GMT+01:00 2017 WEB-INF/lib/arquillian-testenricher-initialcontext.jar
 18785 Mon Sep 25 06:18:18 GMT+01:00 2017 WEB-INF/lib/arquillian-protocol.jar
     0 Mon Sep 25 06:18:18 GMT+01:00 2017 WEB-INF/beans.xml
	 
/ Einde ARQUILLIAN SECOND

/ ARQUILLIAN THIRD 

/ we lezen op 	,
http://forge.jboss.org/addon/org.jboss.forge.addon:wildfly-swarm
/ dat we moesten doen,
addon-install-from-git --url https://github.com/forge/wildfly-swarm-addon.git

/  we install eerst arquillian-addon, maar we zien (geef tab) geen arquillian commands. Klopt, dat is alleen in een project. Dus die moeten we dan eerst maken,

[workspace-jbosstools-jee-oxygen]$ addon-install-from-git  --url https://github.com/forge/arquillian-addon.git

***INFO*** Installing Addon from Git    [1/4] ...
***INFO*** Installing Addon from Git:Cloning repository in C:\Users\ervelden\AppData\Local\Temp\tmpdir3247932210388885966       [1/4] ...
***INFO*** Installing Addon from Git:Installing project into local repository   [2/4] ...
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building Arquillian Forge Addon 1.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-source-plugin/3.0.0/maven-source-plugin-3.0.0.pom
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-source-plugin/3.0.0/maven-source-plugin-3.0.0.pom (5.7 kB at 6.9 kB/s)
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-source-plugin/3.0.0/maven-source-plugin-3.0.0.jar
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-source-plugin/3.0.0/maven-source-plugin-3.0.0.jar (31 kB at 112 kB/s)
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-jar-plugin/3.0.1/maven-jar-plugin-3.0.1.pom
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-jar-plugin/3.0.1/maven-jar-plugin-3.0.1.pom (6.2 kB at 40 kB/s)
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-jar-plugin/3.0.1/maven-jar-plugin-3.0.1.jar
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-jar-plugin/3.0.1/maven-jar-plugin-3.0.1.jar (27 kB at 133 kB/s)
[INFO]
[INFO] --- maven-clean-plugin:3.0.0:clean (default-clean) @ arquillian-addon ---
[INFO]
[INFO] --- maven-enforcer-plugin:1.4.1:enforce (enforce-java-version) @ arquillian-addon ---
[INFO]
[INFO] --- maven-enforcer-plugin:1.4.1:enforce (enforce-maven-version) @ arquillian-addon ---
[INFO]
[INFO] --- buildnumber-maven-plugin:1.4:create (get-scm-revision) @ arquillian-addon ---
[INFO] Executing: cmd.exe /X /C "git rev-parse --verify HEAD"
[INFO] Working directory: C:\Users\ervelden\AppData\Local\Temp\tmpdir3247932210388885966
[INFO] Storing buildNumber: eac26203b6f0cf8e1b6f97014d9748bccc9894fd at timestamp: 1506352569196
[INFO] Storing buildScmBranch: master
[INFO]
[INFO] --- maven-resources-plugin:3.0.1:resources (default-resources) @ arquillian-addon ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 11 resources
[INFO]
[INFO] --- maven-compiler-plugin:3.5.1:compile (default-compile) @ arquillian-addon ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 78 source files to C:\Users\ervelden\AppData\Local\Temp\tmpdir3247932210388885966\target\classes
[WARNING] /C:/Users/ervelden/AppData/Local/Temp/tmpdir3247932210388885966/src/main/java/org/jboss/forge/arquillian/command/cube/CubeSetupCommand.java:[189,60] unchecked gene
[INFO]
[INFO] --- maven-resources-plugin:3.0.1:testResources (default-testResources) @ arquillian-addon ---
[INFO] Not copying test resources
[INFO]
[INFO] --- maven-compiler-plugin:3.5.1:testCompile (default-testCompile) @ arquillian-addon ---
[INFO] Not compiling test sources
[INFO]
[INFO] --- maven-surefire-plugin:2.19.1:test (default-test) @ arquillian-addon ---
[INFO] Tests are skipped.
[INFO]
[INFO] --- maven-jar-plugin:3.0.1:jar (default-jar) @ arquillian-addon ---
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/maven-archiver/3.1.0/maven-archiver-3.1.0.pom
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/maven-archiver/3.1.0/maven-archiver-3.1.0.pom (4.3 kB at 11 kB/s)
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/maven-archiver/3.1.0/maven-archiver-3.1.0.jar
Downloading: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-archiver/3.3/plexus-archiver-3.3.jar
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/maven-archiver/3.1.0/maven-archiver-3.1.0.jar (24 kB at 108 kB/s)
Downloaded: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-archiver/3.3/plexus-archiver-3.3.jar (185 kB at 290 kB/s)
[INFO] Building jar: C:\Users\ervelden\AppData\Local\Temp\tmpdir3247932210388885966\target\arquillian-addon-1.0.0-SNAPSHOT.jar
[INFO]
[INFO] --- maven-source-plugin:3.0.0:jar-no-fork (attach-sources) @ arquillian-addon ---
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/maven-archiver/3.0.0/maven-archiver-3.0.0.pom
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/maven-archiver/3.0.0/maven-archiver-3.0.0.pom (4.1 kB at 29 kB/s)
Downloading: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-archiver/2.9.1/plexus-archiver-2.9.1.pom
Downloaded: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-archiver/2.9.1/plexus-archiver-2.9.1.pom (4.4 kB at 28 kB/s)
Downloading: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-io/2.4.1/plexus-io-2.4.1.pom
Downloaded: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-io/2.4.1/plexus-io-2.4.1.pom (0 B at 0 B/s)
Downloading: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-archiver/3.0.3/plexus-archiver-3.0.3.pom
Downloaded: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-archiver/3.0.3/plexus-archiver-3.0.3.pom (4.8 kB at 31 kB/s)
Downloading: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-io/2.7/plexus-io-2.7.pom
Downloaded: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-io/2.7/plexus-io-2.7.pom (4.9 kB at 24 kB/s)
Downloading: https://repo.maven.apache.org/maven2/org/apache/commons/commons-compress/1.10/commons-compress-1.10.pom
Downloaded: https://repo.maven.apache.org/maven2/org/apache/commons/commons-compress/1.10/commons-compress-1.10.pom (13 kB at 81 kB/s)
Downloading: https://repo.maven.apache.org/maven2/org/apache/commons/commons-parent/38/commons-parent-38.pom
Downloaded: https://repo.maven.apache.org/maven2/org/apache/commons/commons-parent/38/commons-parent-38.pom (62 kB at 333 kB/s)
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/maven-archiver/3.0.0/maven-archiver-3.0.0.jar
Downloading: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-io/2.7/plexus-io-2.7.jar
Downloading: https://repo.maven.apache.org/maven2/org/apache/commons/commons-compress/1.10/commons-compress-1.10.jar
Downloading: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-archiver/3.0.3/plexus-archiver-3.0.3.jar
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/maven-archiver/3.0.0/maven-archiver-3.0.0.jar (23 kB at 145 kB/s)
Downloaded: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-io/2.7/plexus-io-2.7.jar (86 kB at 272 kB/s)
Downloaded: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-archiver/3.0.3/plexus-archiver-3.0.3.jar (177 kB at 230 kB/s)
Downloaded: https://repo.maven.apache.org/maven2/org/apache/commons/commons-compress/1.10/commons-compress-1.10.jar (409 kB at 476 kB/s)
[INFO] Building jar: C:\Users\ervelden\AppData\Local\Temp\tmpdir3247932210388885966\target\arquillian-addon-1.0.0-SNAPSHOT-sources.jar
[INFO]
[INFO] --- maven-jar-plugin:3.0.1:jar (create-forge-addon) @ arquillian-addon ---
[INFO] Building jar: C:\Users\ervelden\AppData\Local\Temp\tmpdir3247932210388885966\target\arquillian-addon-1.0.0-SNAPSHOT-forge-addon.jar
[INFO]
[INFO] --- maven-install-plugin:2.5.2:install (default-install) @ arquillian-addon ---
[INFO] Installing C:\Users\ervelden\AppData\Local\Temp\tmpdir3247932210388885966\target\arquillian-addon-1.0.0-SNAPSHOT.jar to C:\Users\ervelden\.m2\repository\org\arquillia
[INFO] Installing C:\Users\ervelden\AppData\Local\Temp\tmpdir3247932210388885966\pom.xml to C:\Users\ervelden\.m2\repository\org\arquillian\forge\arquillian-addon\1.0.0-SNAP
[INFO] Installing C:\Users\ervelden\AppData\Local\Temp\tmpdir3247932210388885966\target\arquillian-addon-1.0.0-SNAPSHOT-sources.jar to C:\Users\ervelden\.m2\repository\org\a
[INFO] Installing C:\Users\ervelden\AppData\Local\Temp\tmpdir3247932210388885966\target\arquillian-addon-1.0.0-SNAPSHOT-forge-addon.jar to C:\Users\ervelden\.m2\repository\o
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 11.854 s
[INFO] Finished at: 2017-09-25T16:16:17+01:00
[INFO] Final Memory: 68M/890M
[INFO] ------------------------------------------------------------------------
***INFO*** Installing Addon from Git:Removing previous addon installation (org.arquillian.forge:arquillian-addon,1.0.0-SNAPSHOT)        [3/4] ...
***INFO*** Installing Addon from Git:Installing addon (org.arquillian.forge:arquillian-addon,1.0.0-SNAPSHOT)   [4/4] ...
***SUCCESS*** Addon(s) [org.arquillian.forge:arquillian-addon,1.0.0-SNAPSHOT] installed successfully.

[workspace-jbosstools-jee-oxygen]$ addon-list
Currently installed addons:
org.arquillian.forge:arquillian-addon,1.0.0-SNAPSHOT
org.jboss.forge.addon:addon-manager,3.7.2.Final
org.jboss.forge.addon:addon-manager-spi,3.7.2.Final
org.jboss.forge.addon:addons,3.7.2.Final
org.jboss.forge.addon:angularjs,2.1.7.Final
org.jboss.forge.addon:bean-validation,3.7.2.Final
org.jboss.forge.addon:configuration,3.7.2.Final
org.jboss.forge.addon:convert,3.7.2.Final
org.jboss.forge.addon:core,3.7.2.Final
org.jboss.forge.addon:database-tools,3.7.2.Final
org.jboss.forge.addon:dependencies,3.7.2.Final
org.jboss.forge.addon:dev-tools-java,3.7.2.Final
org.jboss.forge.addon:environment,3.7.2.Final
org.jboss.forge.addon:facets,3.7.2.Final
org.jboss.forge.addon:git,3.7.2.Final
org.jboss.forge.addon:javaee,3.7.2.Final
org.jboss.forge.addon:javaee-spi,3.7.2.Final
org.jboss.forge.addon:maven,3.7.2.Final
org.jboss.forge.addon:parser-java,3.7.2.Final
org.jboss.forge.addon:parser-json,3.7.2.Final
org.jboss.forge.addon:parser-xml,3.7.2.Final
org.jboss.forge.addon:parser-yaml,3.7.2.Final
org.jboss.forge.addon:projects,3.7.2.Final
org.jboss.forge.addon:projects-generic,3.7.2.Final
org.jboss.forge.addon:resources,3.7.2.Final
org.jboss.forge.addon:rest-client,3.7.2.Final
org.jboss.forge.addon:scaffold,3.7.2.Final
org.jboss.forge.addon:scaffold-faces,3.7.2.Final
org.jboss.forge.addon:scaffold-spi,3.7.2.Final
org.jboss.forge.addon:script,3.7.2.Final
org.jboss.forge.addon:shell,3.7.2.Final
org.jboss.forge.addon:shell-spi,3.7.2.Final
org.jboss.forge.addon:slf4j,1.7.13
org.jboss.forge.addon:templates,3.7.2.Final
org.jboss.forge.addon:templates-spi,3.7.2.Final
org.jboss.forge.addon:testing,3.7.2.Final
org.jboss.forge.addon:text,3.7.2.Final
org.jboss.forge.addon:ui,3.7.2.Final
org.jboss.forge.addon:ui-spi,3.7.2.Final
org.jboss.forge.addon:wildfly-swarm,2017.8.2-SNAPSHOT
org.jboss.forge.furnace.container:cdi,2.26.2.Final
org.jboss.forge.furnace.container:simple,2.26.2.Final

/ de default type bij project-new is war, we willen jar,

[workspace-jbosstools-jee-oxygen]$ project-new --named arquillian-forge --stack JAVA_EE_7 --type jar 
***SUCCESS*** Project named 'arquillian-forge' has been created.
***SUCCESS*** Stack 'Java EE 7' installed in project
[workspace-jbosstools-jee-oxygen]$ <tab>
arquillian-add
arquillian-setup
cdi-new-bean
...
ejb-new-bean
...

[arquillian-forge]$ cdi-new-bean --named MySimpleBean --scoped
APPLICATION  CONVERSATION  CUSTOM  DEPENDENT  REQUEST  SESSION
[arquillian-forge]$ cdi-new-bean --named MySimpleBean --scoped DEPENDENT
***SUCCESS*** CDI has been installed.
***SUCCESS*** CDI Bean org.arquillian.forge.beans.MySimpleBean was created

/ we import project in eclipse,

/ 13	. 

/ als we,
[arquillian-forge]$ cdi-new-bean --target-package services --named MySimpleBean --scoped SESSION
***SUCCESS*** CDI Bean services.MySimpleBean was created

$ vi services/MySimpleBean.java

package services;

import javax.enterprise.context.SessionScoped;
import java.io.Serializable;

@SessionScoped
public class MySimpleBean implements Serializable {

	private static final long serialVersionUID = 1L;
}

/ als we --scoped CONVERSATION, dan zien we 
@ConversationScoped
public class My implements Serializable {

/ als we --scoped DEPENDENT	, 

$ vi services\You.java
package services;
public class You {
}
[arquillian-forge]$ cdi-new-bean --target-package services --named MyService --scoped DEPENDENT
***SUCCESS*** CDI Bean services.MyService was created


/ 13	. 

/ rm in forge, refresh eclipse, 
[arquillian-forge]$ rm -rf src\main\java\services\

/ terug naar de root,
[MySimpleBean.java]$ cd ~~

[arquillian-forge]$ arquillian-setup --test-framework junit --container-adapter wildfly-managed
***SUCCESS*** Arquillian setup complete
***SUCCESS*** Installed Arquillian Universe 1.1.13.0
***SUCCESS*** Installed junit
***SUCCESS*** Installed Arquillian Container WildFly Managed
***SUCCESS*** Installed Arquillian Container WildFly Managed dependencies

/ Herinner: als type jar is 	, hoeven we deze niet te geven in <dependencies> , anders wel
/ <scope> hoef je niet te geven in <dependencie> behalve als hij anders is, en dat is hier zo: test ipv import 
/ wat telt in <dependencies> zijn group, artifact, type, classifier,

$ vi pom.xml 

<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.arquillian.forge</groupId>
  <artifactId>arquillian-forge</artifactId>
  <version>1.0.0-SNAPSHOT</version>
  <build>
    <finalName>arquillian-forge</finalName>
  </build>
  <dependencies>
    <dependency>
      <groupId>javax</groupId>
      <artifactId>javaee-api</artifactId>
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>org.arquillian.universe</groupId>
      <artifactId>arquillian-junit</artifactId>
      <type>pom</type>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>${version.junit}</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.arquillian.universe</groupId>
      <artifactId>arquillian-chameleon</artifactId>
      <type>pom</type>
      <scope>test</scope>
    </dependency>
  </dependencies>
  <profiles>
    <profile>
      <id>arquillian-wildfly-managed</id>
      <activation>
        <activeByDefault>true</activeByDefault>
      </activation>
      <build>
        <plugins>
          <plugin>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.14.1</version>
            <configuration>
              <systemPropertyVariables>
                <arquillian.launch>arquillian-wildfly-managed</arquillian.launch>
                <chameleon.target>wildfly:10.1.0.Final:MANAGED</chameleon.target>
              </systemPropertyVariables>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>
  </profiles>
  <dependencyManagement>
    <dependencies>
      <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>7.0</version>
        <scope>provided</scope>
      </dependency>
      <dependency>
        <groupId>org.arquillian</groupId>
        <artifactId>arquillian-universe</artifactId>
        <version>${version.arquillian_universe}</version>
        <type>pom</type>
        <scope>import</scope>
      </dependency>
    </dependencies>
  </dependencyManagement>
  <properties>
    <failOnMissingWebXml>false</failOnMissingWebXml>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <version.arquillian_universe>1.1.13.0</version.arquillian_universe>
    <version.junit>4.12</version.junit>
  </properties>
</project>

/ Wat is de container-adapter? WH chameleon	,
/ lees,
https://github.com/arquillian/arquillian-container-chameleon
/ lees over welke containers & version je met chameleon kunt use,
https://github.com/arquillian/arquillian-container-chameleon#supported-containers
/ TODO


$ vi src/main/resources/META-INF/beans.xml

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<beans xmlns="http://xmlns.jcp.org/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" bean-discovery-mode="all" version="1.1" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/beans_1_1.xsd"/>

$ vi src/test/resources/arquillian.xml

<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<arquillian xmlns="http://jboss.org/schema/arquillian" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd">
  <container default="true" qualifier="arquillian-wildfly-managed">
    <configuration>
      <property name="chameleonTarget">${chameleon.target}</property>
    </configuration>
  </container>
</arquillian>

$ vi src/main/webapp/WEB-INF/beans.xml

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<beans xmlns="http://xmlns.jcp.org/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" bean-discovery-mode="all" version="1.1" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/beans_1_1.xsd"/>

/ we zien 2 beans.xml
/ TODO

/ Intermezzo

/ Lees over find string in files,
https://superuser.com/questions/60173/how-to-search-inside-files-on-windows-7

/ In de effective pom zien we bijv, 

      <dependency>
        <groupId>org.jboss.arquillian.container</groupId>
        <artifactId>arquillian-container-test-impl-base</artifactId>
        <version>1.1.13.Final</version>
      </dependency>
	  
/ Waar komt deze vandaan?
/ Kijk in eclipse in de pom.xml , bij tab dependency hierarchy, 
/ kies rechts de dep hierboven,
/ links zien we ...
/ TODO 



/ Einde Intermezzo

/ 13	. 

/ Moet in arquillian.xml de qualifier 
  <container default="true" qualifier="arquillian-wildfly-managed">
/ gelijk zijn aan de profile 

/ google: arquillian.xml container qualifier
/ lees,
https://docs.jboss.org/author/display/ARQ/Container+config+runtime+selection

During execution of your Arquillian test-suite, you may have configured one or more containers with which you need to execute the test suite. This is usually configured with maven profiles, but in the case where individual container options need to be specified at runtime to the target container. This is where you will need to specify configurations in your arquillian.xml file, and also activate those configurations using Java system properties.

/ arquillian.xml,
   <container qualifier="jbossas_managed" default="true">
      <protocol type="Servlet 3.0">
         <property name="executionType">MANAGED</property>
      </protocol>
      <configuration>
         <property name="jbossHome">${project.baseDir}/target/jboss-as-7.1.1.Final/</property>
         <property name="allowConnectingToRunningServer">true</property>
      </configuration>
   </container>

/ In de pom van abctomcatappl3 printen we maven properties:
     <echo>[project.basedir] C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\abctomcatappl3</echo>


/ lees,
https://docs.jboss.org/author/display/ARQ/Container+configuration

/ 13	. 

/ arquillian.xml orig	,

<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<arquillian xmlns="http://jboss.org/schema/arquillian" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd">
  <container default="true" qualifier="arquillian-wildfly-managed">
    <configuration>
      <property name="chameleonTarget">${chameleon.target}</property>
    </configuration>
  </container>
</arquillian>

[arquillian-forge]$ arquillian-container-configuration --container arquillian-wildfly-managed
/ tab completion geeft 'arquillian-wildfly-managed', klopt: dat is de qualifier in de arquillian.xml,

/ we gaan verder,
[arquillian-forge]$ arquillian-container-configuration --container arquillian-wildfly-managed --container-option jbossHome --container-value foo

/ we zien,
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<arquillian xmlns="http://jboss.org/schema/arquillian" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd">
  <container default="true" qualifier="arquillian-wildfly-managed">
    <configuration>
      <property name="chameleonTarget">${chameleon.target}</property>
      <property name="jbossHome">foo</property>
    </configuration>
  </container>
</arquillian>

/ we rm jbossHome weer,

/ 13	. 

[arquillian-forge]$ arquillian-create-test --targets services.MyService

$ vi src/test/java/MyServiceTest.java

package services;

import services.MyService;

import javax.inject.Inject;

import org.jboss.arquillian.container.test.api.Deployment;
import org.jboss.arquillian.junit.Arquillian;
import org.jboss.shrinkwrap.api.ShrinkWrap;
import org.jboss.shrinkwrap.api.spec.JavaArchive;
import org.jboss.shrinkwrap.api.asset.EmptyAsset;
import org.junit.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;

import static org.junit.Assert.*;
import static org.hamcrest.core.Is.*;

@RunWith(Arquillian.class)
public class MyServiceTest {

	@Inject
	private MyService myService;

	@Deployment
	public static JavaArchive createDeployment() {
		return ShrinkWrap.create(JavaArchive.class).addClass(MyService.class)
				.addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");
	}

	@Test
	public void should_be_deployed() {
		Assert.assertNotNull(myService);
		System.out.println("FOO BAR");
	}
}

/ de test uses CDI to inject the CDI bean MyService,

/ we zien de test results pas aan het eind, behalve als we in de test een System.out.println doen,

/ Intermezzo

/ Hoe wordt deze test start?
  <profiles>
    <profile>
      <id>arquillian-wildfly-managed</id>
      <activation>
        <activeByDefault>true</activeByDefault>
      </activation>
      <build>
        <plugins>
          <plugin>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.14.1</version>
            <configuration>
              <systemPropertyVariables>
                <arquillian.launch>arquillian-wildfly-managed</arquillian.launch>
                <chameleon.target>wildfly:10.1.0.Final:MANAGED</chameleon.target>
              </systemPropertyVariables>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>
  </profiles>
  
/ Het lijkt op arquillian-getting_started-from-repo, waarbij de door maven downloaded wildfly wordt start,
/ TODO
 

/ Einde Intermezzo
 
/ 13	. 
 
/  run de test,


[MyServiceTest.java]$ build test
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building arquillian-forge 1.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ arquillian-forge ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO]
[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ arquillian-forge ---
[INFO] Nothing to compile - all classes are up to date
[INFO]
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ arquillian-forge ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO]
[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ arquillian-forge ---
[INFO] Nothing to compile - all classes are up to date
[INFO]
[INFO] --- maven-surefire-plugin:2.14.1:test (default-test) @ arquillian-forge ---
[INFO] Surefire report directory: C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-forge\target\surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running services.MyServiceTest
sep 26, 2017 3:39:35 PM org.jboss.as.arquillian.container.managed.ManagedDeployableContainer startInternal
WARNING: Bundles path is deprecated and no longer used.
sep 26, 2017 3:39:35 PM org.jboss.as.arquillian.container.managed.ManagedDeployableContainer startInternal
INFO: Starting container with: ["C:\Program Files\Java\jdk1.8.0_144\bin\java", -D[Standalone], -Xms64m, -Xmx512m, -Djava.net.preferIPv4Stack=true, -Djava.awt.headless=true, -Djboss.modules.system.pkgs=org.jboss.byteman, -ea, -Djboss.home.dir=C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-forge\target\server\wildfly-dist_10.1.0.Final\wildfly-10.1.0.Final, -Dorg.jboss.boot.log.file=C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-forge\target\server\wildfly-dist_10.1.0.Final\wildfly-10.1.0.Final\standalone\log\server.log, -Dlogging.configuration=file:C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-forge\target\server\wildfly-dist_10.1.0.Final\wildfly-10.1.0.Final\standalone\configuration\logging.properties, -jar, C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-forge\target\server\wildfly-dist_10.1.0.Final\wildfly-10.1.0.Final\jboss-modules.jar, -mp,C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-forge\target\server\wildfly-dist_10.1.0.Final\wildfly-10.1.0.Final\modules, org.jboss.as.standalone, -Djboss.home.dir=C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-forge\target\server\wildfly-dist_10.1.0.Final\wildfly-10.1.0.Final, -Djboss.server.base.dir=C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-forge\target\server\wildfly-dist_10.1.0.Final\wildfly-10.1.0.Final\standalone, -Djboss.server.log.dir=C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-forge\target\server\wildfly-dist_10.1.0.Final\wildfly-10.1.0.Final\standalone\log, -Djboss.server.config.dir=C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-forge\target\server\wildfly-dist_10.1.0.Final\wildfly-10.1.0.Final\standalone\configuration]
sep 26, 2017 3:39:35 PM org.xnio.Xnio <clinit>
INFO: XNIO version 3.3.4.Final
sep 26, 2017 3:39:35 PM org.xnio.nio.NioXnio <clinit>
INFO: XNIO NIO Implementation Version 3.3.4.Final
sep 26, 2017 3:39:35 PM org.jboss.remoting3.EndpointImpl <clinit>
INFO: JBoss Remoting version 4.0.18.Final
15:39:36,248 INFO  [org.jboss.modules] (main) JBoss Modules version 1.5.2.Final
15:39:36,904 INFO  [org.jboss.msc] (main) JBoss MSC version 1.2.6.Final
15:39:36,982 INFO  [org.jboss.as] (MSC service thread 1-6) WFLYSRV0049: WildFly Full 10.1.0.Final (WildFly Core 2.2.0.Final) starting
15:39:38,198 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0039: Creating http management service using socket-binding (management-http)
15:39:38,214 INFO  [org.xnio] (MSC service thread 1-1) XNIO version 3.4.0.Final
15:39:38,230 INFO  [org.xnio.nio] (MSC service thread 1-1) XNIO NIO Implementation Version 3.4.0.Final
15:39:38,248 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 38) WFLYCLINF0001: Activating Infinispan subsystem.
15:39:38,263 INFO  [org.wildfly.extension.io] (ServerService Thread Pool -- 37) WFLYIO001: Worker 'default' has auto-configured to 16 core threads with 128 task threads based on your 8 available processors
15:39:38,263 INFO  [org.jboss.as.jsf] (ServerService Thread Pool -- 44) WFLYJSF0007: Activated the following JSF Implementations: [main]
15:39:38,263 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 46) WFLYNAM0001: Activating Naming Subsystem
15:39:38,294 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 56) WFLYWS0002: Activating WebServices Extension
15:39:38,294 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 53) WFLYSEC0002: Activating Security Subsystem
15:39:38,294 WARN  [org.jboss.as.txn] (ServerService Thread Pool -- 54) WFLYTX0013: Node identifier property is set to the default value. Please make sure it is unique.
15:39:38,310 INFO  [org.jboss.as.connector] (MSC service thread 1-6) WFLYJCA0009: Starting JCA Subsystem (WildFly/IronJacamar 1.3.4.Final)
15:39:38,388 INFO  [org.jboss.as.security] (MSC service thread 1-4) WFLYSEC0001: Current PicketBox version=4.9.6.Final
15:39:38,435 INFO  [org.jboss.as.naming] (MSC service thread 1-8) WFLYNAM0003: Starting Naming Service
15:39:38,435 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-4) WFLYMAIL0001: Bound mail session [java:jboss/mail/Default]
15:39:38,450 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-8) WFLYUT0003: Undertow 1.4.0.Final starting
15:39:38,466 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 33) WFLYJCA0004: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
15:39:38,466 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-3) WFLYJCA0018: Started Driver service with driver-name = h2
15:39:38,544 INFO  [org.jboss.remoting] (MSC service thread 1-6) JBoss Remoting version 4.0.21.Final
15:39:38,622 INFO  [org.jboss.as.ejb3] (MSC service thread 1-8) WFLYEJB0481: Strict pool slsb-strict-max-pool is using a max instance size of 128 (per class), which is derived from thread worker pool sizing.
15:39:38,622 INFO  [org.jboss.as.ejb3] (MSC service thread 1-4) WFLYEJB0482: Strict pool mdb-strict-max-pool is using a max instance size of 32 (per class), which is derived from the number of CPUs on this host.
15:39:38,700 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 55) WFLYUT0014: Creating file handler for path 'C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-forge\target\server\wildfly-dist_10.1.0.Final\wildfly-10.1.0.Final/welcome-content' with options [directory-listing: 'false', follow-symlink: 'false', case-sensitive: 'true', safe-symlink-paths
15:39:38,700 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-8) WFLYUT0012: Started server default-server.
15:39:38,700 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-8) WFLYUT0018: Host default-host starting
15:39:38,903 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-4) WFLYUT0006: Undertow HTTP listener default listening on 127.0.0.1:8080
15:39:38,903 WARN  [org.jboss.as.domain.management.security] (MSC service thread 1-4) WFLYDM0111: Keystore C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-forge\target\server\wildfly-dist_10.1.0.Final\wildfly-10.1.0.Final\standalone\configuration\application.keystore not found, it will be auto generated on first use with a self signed certificate for host localhost
15:39:38,918 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-2) WFLYDS0013: Started FileSystemDeploymentService for directory C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-forge\target\server\wildfly-dist_10.1.0.Final\wildfly-10.1.0.Final\standalone\deployments
15:39:39,012 INFO  [org.infinispan.factories.GlobalComponentRegistry] (MSC service thread 1-8) ISPN000128: Infinispan version: Infinispan 'Chakra' 8.2.4.Final
15:39:39,043 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 65) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
15:39:39,043 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 59) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
15:39:39,043 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 65) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
15:39:39,043 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 64) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
15:39:39,043 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 59) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
15:39:39,043 INFO  [org.infinispan.configuration.cache.EvictionConfigurationBuilder] (ServerService Thread Pool -- 64) ISPN000152: Passivation configured without an eviction policy being selected. Only manually evicted entities will be passivated.
15:39:39,090 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-6) WFLYJCA0001: Bound data source [java:jboss/datasources/ExampleDS]
15:39:39,511 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-1) WFLYUT0006: Undertow HTTPS listener https listening on 127.0.0.1:8443
15:39:39,605 INFO  [org.jboss.ws.common.management] (MSC service thread 1-7) JBWS022052: Starting JBossWS 5.1.5.Final (Apache CXF 3.1.6)
15:39:39,714 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://127.0.0.1:9990/management
15:39:39,714 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0051: Admin console listening on http://127.0.0.1:9990
15:39:39,714 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Full 10.1.0.Final (WildFly Core 2.2.0.Final) started in 3811ms - Started 331 of 577 services (393 services are lazy, passive or on-demand)
15:39:40,341 INFO  [org.jboss.as.repository] (management-handler-thread - 3) WFLYDR0001: Content added at location C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-forge\target\server\wildfly-dist_10.1.0.Final\wildfly-10.1.0.Final\standalone\data\content\7b\28007161d31a780b2e9d82234bd363cf6fdb09\content
15:39:40,356 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) WFLYSRV0027: Starting deployment of "test.war" (runtime-name: "test.war")
15:39:40,980 INFO  [org.jboss.weld.deployer] (MSC service thread 1-8) WFLYWELD0003: Processing weld deployment test.war
15:39:41,043 INFO  [org.hibernate.validator.internal.util.Version] (MSC service thread 1-8) HV000001: Hibernate Validator 5.2.4.Final
15:39:41,230 INFO  [org.jboss.weld.Version] (MSC service thread 1-3) WELD-000900: 2.3.5 (Final)
15:39:41,979 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 27) WFLYUT0021: Registered web context: /test
15:39:42,025 INFO  [org.jboss.as.server] (management-handler-thread - 3) WFLYSRV0010: Deployed "test.war" (runtime-name : "test.war")
16:07:37,433 INFO  [stdout] (default task-2) FOO BAR
15:39:42,553 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 27) WFLYUT0022: Unregistered web context: /test
15:39:42,631 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) WFLYSRV0028: Stopped deployment test.war (runtime-name: test.war) in 93ms
15:39:42,646 WARN  [org.jboss.as.controller] (management-handler-thread - 4) WFLYCTL0357: Notification of type deployment-undeployed is not described for the resource at the address []
15:39:42,662 INFO  [org.jboss.as.repository] (management-handler-thread - 4) WFLYDR0002: Content removed from location C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-forge\target\server\wildfly-dist_10.1.0.Final\wildfly-10.1.0.Final\standalone\data\content\7b\28007161d31a780b2e9d82234bd363cf6fdb09\content
15:39:42,662 INFO  [org.jboss.as.server] (management-handler-thread - 4) WFLYSRV0009: Undeployed "test.war" (runtime-name: "test.war")
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 8.808 sec
15:39:42,677 INFO  [org.jboss.as.server] (management-handler-thread - 1) WFLYSRV0236: Suspending server with no timeout.
15:39:42,693 INFO  [org.jboss.as.server] (Management Triggered Shutdown) WFLYSRV0241: Shutting down in response to management operation 'shutdown'
15:39:42,709 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-6) WFLYJCA0010: Unbound data source [java:jboss/datasources/ExampleDS]
15:39:42,724 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-1) WFLYUT0019: Host default-host stopping
15:39:42,724 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-8) WFLYUT0008: Undertow HTTPS listener https suspending
15:39:42,724 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-8) WFLYUT0007: Undertow HTTPS listener https stopped, was bound to 127.0.0.1:8443
15:39:42,724 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) WFLYJCA0019: Stopped Driver service with driver-name = h2
15:39:42,740 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-5) WFLYUT0008: Undertow HTTP listener default suspending
15:39:42,740 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-5) WFLYUT0007: Undertow HTTP listener default stopped, was bound to 127.0.0.1:8080
15:39:42,740 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-3) WFLYUT0004: Undertow 1.4.0.Final stopping
15:39:42,755 INFO  [org.jboss.as] (MSC service thread 1-7) WFLYSRV0050: WildFly Full 10.1.0.Final (WildFly Core 2.2.0.Final) stopped in 48ms

Results :

Tests run: 1, Failures: 0, Errors: 0, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 9.301 s
[INFO] Finished at: 2017-09-26T16:06:05+01:00
[INFO] Final Memory: 42M/303M
[INFO] ------------------------------------------------------------------------
***SUCCESS*** Build Success

/ de 1ste keer downloade hij wildfly-10.1.0.Final,
/ TODO 

/ 13	. 

/ jpa,

[MyServiceTest.java]$  jpa-setup --jpa-provider Hibernate 4.x
***SUCCESS*** Persistence (JPA) is installed.

/ we zien 
$ vi src/main/resources/META-INF/persistence.xml

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<persistence xmlns="http://xmlns.jcp.org/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.1" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd">
  <persistence-unit name="arquillian-forge-persistence-unit" transaction-type="JTA">
    <description>Forge Persistence Unit</description>
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>java:jboss/datasources/ExampleDS</jta-data-source>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties>
      <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
      <property name="hibernate.show_sql" value="true"/>
      <property name="hibernate.format_sql" value="true"/>
      <property name="hibernate.transaction.flush_before_completion" value="true"/>
      <property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect"/>
    </properties>
  </persistence-unit>
</persistence>

///////////////////////////////////////////
/ Deze ds zit standaard in wildlfy	, en is een h2,

/ probeer ook later,
[persistence.xml]$ jpa-setup --jpa-provider
Eclipse Link  Hibernate  Hibernate 4.x  Infinispan  Java EE  OpenJPA

/ 13	. 

/ Stel we doen, 

package services;

import javax.enterprise.context.SessionScoped;

@SessionScoped
public class MyService {
}

/ in forge,
[Language.java]$ build test

Caused by: org.jboss.weld.exceptions.DeploymentException: WELD-000072: Bean declaring a passivating scope must be passivation capable.  Bean:  Managed Bean [class services.MyService] with qualifiers [@Any @Default]

/ oplossing: implements Serializable

/ lees,
https://docs.jboss.org/weld/reference/latest/en-US/html/injection.html
https://blogs.oracle.com/arungupta/totd-161:-java-ee-6-cdi-qualifiers-explained-default,-any,-new,-named
https://dzone.com/articles/cdi-di-p1
https://dzone.com/articles/cdi-di-p2
https://abhirockzz.wordpress.com/2015/09/27/native-cdi-qualifiers-any-and-default/

/ lees over scopes,
http://docs.oracle.com/javaee/6/tutorial/doc/gjbbk.html
@Dependent is de default scope, vandaar dat we in forge geen annot zagen bij MyService toen we 
[arquillian-forge]$ cdi-new-bean --target-package services --named MyService --scoped DEPENDENT

/ Intermezzo

The default scope if none is specified; it means that an object exists to serve exactly one client (bean) and has the same lifecycle as that client (bean).
 
/ scopes zijn wat anders als qualifiers,
@Default, @Any, @Named, @New
/ al is het zo dat de @New qualifier is vervangen door de @Dependent scope,

/ 13	. 

/ @New, @Dependent,
/ Lees onderaan,
https://blogs.oracle.com/arungupta/totd-161:-java-ee-6-cdi-qualifiers-explained-default,-any,-new,-named

@RequestScoped
public class SimpleGreeting implements Greeting {
}

/ In een host bean wordt:
@Inject Greeting greeting;	/ greeting heeft de request scope, wat de scope van de host bean ook is,
@Inject @New Greeting greeting;	/ greeting heeft de scope van de host bean,

/ WH moeten we doen ipv de laatste,

@Dependent													// of weglaten, niets schrijven,
public class SimpleGreeting implements Greeting {
}
@Inject Greeting greeting;

/ Heeft SimpleGreeting @Any @Default ?
/ TODO

/ 13	. 

/ heeft een bean @Any of @Default annotaties?

/ 1313	.

/ lees, 
https://stackoverflow.com/questions/259140/scanning-java-annotations-at-runtime

/ Spring: 

ClassPathScanningCandidateComponentProvider scanner =
new ClassPathScanningCandidateComponentProvider(<DO_YOU_WANT_TO_USE_DEFALT_FILTER>);

scanner.addIncludeFilter(new AnnotationTypeFilter(<TYPE_YOUR_ANNOTATION_HERE>.class));

for (BeanDefinition bd : scanner.findCandidateComponents(<TYPE_YOUR_BASE_PACKAGE_HERE>))
    System.out.println(bd.getBeanClassName());

/ 1313	.

/ lees,
https://stackoverflow.com/questions/39542001/find-all-beans-that-have-a-custom-annotation


/ 13	. 


https://stackoverflow.com/jobs/companies/VEON
https://stackoverflow.com/jobs/companies/sytac-it-consulting

/ Einde Intermezzo


/ 13	. 

[persistence.xml]$ jpa-new-entity --named Language --target-package domain
***SUCCESS*** JPA Entity domain.Language was created

$ vi src/main/java/domain/Language.java

package domain;

import javax.persistence.Entity;
import java.io.Serializable;
import javax.persistence.Id;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Column;
import javax.persistence.Version;

@Entity
public class Language implements Serializable {

	private static final long serialVersionUID = 1L;
	@Id
	@GeneratedValue(strategy = GenerationType.AUTO)
	@Column(name = "id", updatable = false, nullable = false)
	private Long id;
	@Version
	@Column(name = "version")
	private int version;

	public Long getId() {
		return this.id;
	}

	public void setId(final Long id) {
		this.id = id;
	}

	public int getVersion() {
		return this.version;
	}

	public void setVersion(final int version) {
		this.version = version;
	}

	@Override
	public String toString() {
		String result = getClass().getSimpleName() + " ";
		if (id != null)
			result += "id: " + id;
		return result;
	}

	@Override
	public boolean equals(Object obj) {
		if (this == obj) {
			return true;
		}
		if (!(obj instanceof Language)) {
			return false;
		}
		Language other = (Language) obj;
		if (id != null) {
			if (!id.equals(other.id)) {
				return false;
			}
		}
		return true;
	}

	@Override
	public int hashCode() {
		final int prime = 31;
		int result = 1;
		result = prime * result + ((id == null) ? 0 : id.hashCode());
		return result;
	}
}
[Language.java]$ jpa-new-field --named name
***SUCCESS*** Field name created

$ vi src/main/java/domain/Language.java

package domain;

import javax.persistence.Entity;
import java.io.Serializable;
import javax.persistence.Id;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Column;
import javax.persistence.Version;

@Entity
public class Language implements Serializable {

	private static final long serialVersionUID = 1L;
	@Id
	@GeneratedValue(strategy = GenerationType.AUTO)
	@Column(name = "id", updatable = false, nullable = false)
	private Long id;
	@Version
	@Column(name = "version")
	private int version;

	@Column
	private String name;

	public Long getId() {
		return this.id;
	}

	public void setId(final Long id) {
		this.id = id;
	}

	public int getVersion() {
		return this.version;
	}

	public void setVersion(final int version) {
		this.version = version;
	}

	@Override
	public boolean equals(Object obj) {
		if (this == obj) {
			return true;
		}
		if (!(obj instanceof Language)) {
			return false;
		}
		Language other = (Language) obj;
		if (id != null) {
			if (!id.equals(other.id)) {
				return false;
			}
		}
		return true;
	}

	@Override
	public int hashCode() {
		final int prime = 31;
		int result = 1;
		result = prime * result + ((id == null) ? 0 : id.hashCode());
		return result;
	}

	public String getName() {
		return name;
	}

	public void setName(String name) {
		this.name = name;
	}

	@Override
	public String toString() {
		String result = getClass().getSimpleName() + " ";
		if (name != null && !name.trim().isEmpty())
			result += "name: " + name;
		return result;
	}
}

/ 13	. 

[Language.java]$ arquillian-create-test --targets data.LanguageDao --enable-jpa
***SUCCESS*** Created test class data.LanguageDaoTest

$ vi LanguageDaoTest.java


package data;

import data.LanguageDao;

import javax.inject.Inject;

import org.jboss.arquillian.container.test.api.Deployment;
import org.jboss.arquillian.junit.Arquillian;
import org.jboss.shrinkwrap.api.ShrinkWrap;
import org.jboss.shrinkwrap.api.spec.JavaArchive;
import org.jboss.shrinkwrap.api.asset.EmptyAsset;
import org.junit.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;

import static org.junit.Assert.*;
import static org.hamcrest.core.Is.*;

@RunWith(Arquillian.class)
public class LanguageDaoTest {

	@Inject
	private LanguageDao languageDao;

	@Deployment
	public static JavaArchive createDeployment() {
		return ShrinkWrap
				.create(JavaArchive.class)
				.addClass(LanguageDao.class)
				.addAsManifestResource("META-INF/persistence.xml",
						"persistence.xml")
				.addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");
	}

	@Test
	public void should_be_deployed() {
		Assert.assertNotNull(languageDao);
	}
}

/ we zien 	, 
.addAsManifestResource("META-INF/persistence.xml",
						"persistence.xml")
/ dit is WH wat --enable-jpa doet	,

/ we maken, 
//				.addClass(LanguageDao.class)
				.addClasses(LanguageDao.class,Language.class)
				
/ en we maken,

/ 7	 

/ we hebben in proj. arquillian-rinse_and_repeat added 
src/main/java
	domain.Language
	srv.My
src/main/resources
	META-INF/beans.xml en persistence.xml
src/test/java
	srv.LanguageDaoTest.java
src/main/resources
	META-INF/beans.xml en test-persistence.xml

/ dit is voor : cannot inject ERR, later weer rm,

/ Einde ARQUILLIAN THIRD 

/ ARQUILLIAN FOURTH (JPA)

/ lees,
http://arquillian.org/guides/testing_java_persistence/
https://developer.jboss.org/en/arquillian/blog/2010/10/04/the-perfect-recipe-for-testing-jpa-2-revisited
http://www.tomitribe.com/blog/2016/01/testing-persistence-with-arquillian-on-tomee/
http://mrbool.com/integration-testing-with-cdi-jpa-ejb-and-arquillian/34453
http://in.relation.to/2016/01/14/hibernate-jpa-test-case-template/
http://www.softwarepassion.com/java
->
https://github.com/bartoszmajsak/Beer-Advisor
https://stackoverflow.com/questions/19113612/singleton-ejb-concurency-with-a-container-managed-transaction

/ google: javaee @singleton @stateless
https://stackoverflow.com/questions/37748693/same-result-from-stateful-stateless-and-singleton-ejb-beans

/ lees, 
http://arquillian.org/guides/testing_java_persistence/

/ Lees 
https://stackoverflow.com/questions/31611479/maven-import-scope
https://stackoverflow.com/questions/26993716/how-to-run-selenium-maven-tests-on-specific-browser-which-is-mentioned-in-pom?rq=1
https://stackoverflow.com/questions/11778276/what-is-the-difference-between-scope-import-and-pom-type-dependency/11779302#11779302 / hier was ik naar op zoek,
https://stackoverflow.com/questions/16894032/how-to-use-poms-as-a-dependency-in-maven / deze ook 	,
https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Transitive_Dependencies / transitive dependencies,
https://stackoverflow.com/questions/41725810/what-is-a-transitive-maven-dependency / transitive dependencies,
C:\Users\ervelden\java> git clone https://github.com/arquillian/arquillian-examples.git

/ 7	. 

/ Lees,

http://arquillian.org/guides/testing_java_persistence/
->
http://arquillian.org/guides/get_started_faster_with_forge/

[workspace-jbosstools-jee-oxygen]$ project-new --named arquillian-jpa --stack JAVA_EE_7 
***SUCCESS*** Project named 'arquillian-jpa' has been created.
***SUCCESS*** Stack 'Java EE 7' installed in project

/ we willen --type jar geven, dus rm eerst project,
[arquillian-jpa]$ cd ..
[workspace-jbosstools-jee-oxygen]$ rm -rf arquillian-jpa\
[workspace-jbosstools-jee-oxygen]$ project-new --named arquillian-jpa --stack JAVA_EE_7 --type jar
***SUCCESS*** Project named 'arquillian-jpa' has been created.
***SUCCESS*** Stack 'Java EE 7' installed in project

/ import in eclipse,

$ vi pom.xml

<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.arquillian.jpa</groupId>
  <artifactId>arquillian-jpa</artifactId>
  <version>1.0.0-SNAPSHOT</version>
  <build>
    <finalName>arquillian-jpa</finalName>
  </build>
  <properties>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
</project>

[arquillian-jpa]$ arquillian-setup --test-framework junit --container-adapter
droidium-container-depchain  jboss-eap-embedded-7         payara-remote                weld-ee-embedded-1.1
glassfish-embedded           jboss-eap-managed-7          tomcat-embedded-6            weld-se-embedded-1
glassfish-managed            jboss-eap-remote-7           tomcat-embedded-7            weld-se-embedded-1.1
glassfish-remote             jetty-embedded-6.1           tomcat-managed               wildfly-domain-managed
jboss-as-domain-managed-7    jetty-embedded-7             tomcat-managed-5.5           wildfly-domain-remote
jboss-as-domain-remote-7     openejb-embedded-3.1         tomcat-remote                wildfly-embedded
jboss-as-embedded-7          openejb-embedded-4           tomee-embedded               wildfly-managed
jboss-as-managed-7           openshift-express            tomee-remote                 wildfly-remote
jboss-as-remote-7            openwebbeans-embedded-1      was-embedded-8               wls-remote-10.3
jboss-eap-domain-managed-7   payara-embedded              was-remote-7
jboss-eap-domain-remote-7    payara-managed               was-remote-8

[arquillian-jpa]$ arquillian-setup --test-framework junit --container-adapter  wildfly-managed
***SUCCESS*** Arquillian setup complete
***SUCCESS*** Installed Arquillian Universe 1.1.13.0
***SUCCESS*** Installed junit
***SUCCESS*** Installed Arquillian Container WildFly Managed
***SUCCESS*** Installed Arquillian Container WildFly Managed dependencies

/ Er veranderen 2 dingen: de pom verandert en er is een arquillian.xml,

$ vi pom.xml

<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.arquillian.jpa</groupId>
  <artifactId>arquillian-jpa</artifactId>
  <version>1.0.0-SNAPSHOT</version>
  <build>
    <finalName>arquillian-jpa</finalName>
  </build>
  <properties>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <version.arquillian_universe>1.1.13.0</version.arquillian_universe>
    <version.junit>4.12</version.junit>
  </properties>
  <profiles>
    <profile>
      <id>arquillian-wildfly-managed</id>
      <activation>
        <activeByDefault>true</activeByDefault>
      </activation>
      <build>
        <plugins>
          <plugin>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.14.1</version>
            <configuration>
              <systemPropertyVariables>
                <arquillian.launch>arquillian-wildfly-managed</arquillian.launch>
                <chameleon.target>wildfly:10.1.0.Final:MANAGED</chameleon.target>	// ! 
              </systemPropertyVariables>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>
  </profiles>
  <dependencies>
    <dependency>
      <groupId>org.arquillian.universe</groupId>
      <artifactId>arquillian-junit</artifactId>
      <type>pom</type>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>${version.junit}</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.arquillian.universe</groupId>
      <artifactId>arquillian-chameleon</artifactId>
      <type>pom</type>
      <scope>test</scope>
    </dependency>
  </dependencies>
  <dependencyManagement>
    <dependencies>
      <dependency>
        <groupId>org.arquillian</groupId>
        <artifactId>arquillian-universe</artifactId>
        <version>${version.arquillian_universe}</version>
        <type>pom</type>
        <scope>import</scope>
      </dependency>
    </dependencies>
  </dependencyManagement>
</project>

$ vi arquillian.xml

<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<arquillian xmlns="http://jboss.org/schema/arquillian" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd">
  <container default="true" qualifier="arquillian-wildfly-managed">
    <configuration>
      <property name="chameleonTarget">${chameleon.target}</property>
    </configuration>
  </container>
</arquillian>


/ in forge,
$ rm -rf arquillian-jpa
/ en maken opnieuw project arquillian-jpa,

/ we kunnen arquillian-setup maar 1 keer use, daarna is het command weg,

[arquillian-jpa]$ arquillian-setup --test-framework junit --container-adapter wildfly-remote
***SUCCESS*** Arquillian setup complete
***SUCCESS*** Installed Arquillian Universe 1.1.13.0
***SUCCESS*** Installed junit
***SUCCESS*** Installed Arquillian Container WildFly Remote
***SUCCESS*** Installed Arquillian Container WildFly Remote dependencies

/ Het enigste verschil in de pom is REMOTE ipv MANAGED:

      <build>
        <plugins>
          <plugin>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.14.1</version>
            <configuration>
              <systemPropertyVariables>
                <arquillian.launch>arquillian-wildfly-remote</arquillian.launch>
                <chameleon.target>wildfly:10.1.0.Final:REMOTE</chameleon.target>	// !
              </systemPropertyVariables>
            </configuration>
          </plugin>
        </plugins>
      </build>
	  
$ vi arquillian.xml

<arquillian xmlns="http://jboss.org/schema/arquillian" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd">
  <container default="true" qualifier="arquillian-wildfly-remote">
    <configuration>
      <property name="chameleonTarget">${chameleon.target}</property>
    </configuration>
  </container>
</arquillian>

/ qualifier is WH een naam, 
/ het gaat erom dat default="true"	,

/ arquillian-container-configuration schrijft arquillian.xml
/ we hebben in arquillian-forge in src/test/resources 
$ vi arquillian.xml:
<arquillian xmlns="http://jboss.org/schema/arquillian" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd">
  <container default="true" qualifier="arquillian-wildfly-managed">
    <configuration>
      <property name="chameleonTarget">${chameleon.target}</property>
      <property name="javaVmArguments">-Xrunjdwp:transport=dt_socket,address=8787,server=y,suspend=y</property>
    </configuration>
  </container>
</arquillian>
/ we hebben met de hand javaVmArguments add, maar dat kan dus ook met 
> arquillian-container-configuration -o ... -v ...
/ Maar dit kan alleen bij wildfly-managed, niet bij wildfly-remote, maar dat hoeft ook niet, dan met wildfly-remote start je wildfly in debugging mode op,
 


/ 13	. 

/ we maken een CDI bean en een test,

[arquillian-jpa]$  cdi-new-bean --named MyService --scoped REQUEST
***SUCCESS*** CDI has been installed.
***SUCCESS*** CDI Bean org.arquillian.jpa.beans.MyService was created

/ we zien src/main/java/ org.arquillian.jpa.beans/MyService.java
/ we zien de MyService en in src/main/resources: META-INF/beans.xml

[MyService.java]$ arquillian-create-test --targets org.arquillian.jpa.beans.MyService
***SUCCESS*** Created test class org.arquillian.jpa.beans.MyServiceTest

$ vi src/test/java/MyServiceTest.java

package org.arquillian.jpa.beans;

import org.arquillian.jpa.beans.MyService;

import javax.inject.Inject;

import org.jboss.arquillian.container.test.api.Deployment;
import org.jboss.arquillian.junit.Arquillian;
import org.jboss.shrinkwrap.api.ShrinkWrap;
import org.jboss.shrinkwrap.api.spec.JavaArchive;
import org.jboss.shrinkwrap.api.asset.EmptyAsset;
import org.junit.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;

import static org.junit.Assert.*;
import static org.hamcrest.core.Is.*;

@RunWith(Arquillian.class)
public class MyServiceTest {

	@Inject
	private MyService myService;

	@Deployment
	public static JavaArchive createDeployment() {
		return ShrinkWrap.create(JavaArchive.class).addClass(MyService.class)
				.addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");
	}

	@Test
	public void should_be_deployed() {
		Assert.assertNotNull(myService);
	}
}
[MyServiceTest.java]$  arquillian-container-configuration --container arquillian-wildfly-remote 

/ Lees,
https://github.com/arquillian/continuous-enterprise-development/blob/master/ch03.asciidoc

> arquillian-container-setup ...
  -a, --container-adapter
    Container Adapter -  [Container] (required) Valid choices: ["droidium-container-depchain" "glassfish-embedded"
    "glassfish-managed" "glassfish-remote" "jboss-as-domain-managed-7" "jboss-as-domain-remote-7" "jboss-as-embedded-7"
    "jboss-as-managed-7" "jboss-as-remote-7" "jboss-eap-domain-managed-7" "jboss-eap-domain-remote-7" "jboss-eap-embedded-7"
    "jboss-eap-managed-7" "jboss-eap-remote-7" "jetty-embedded-6.1" "jetty-embedded-7" "openejb-embedded-3.1"
    "openejb-embedded-4" "openshift-express" "openwebbeans-embedded-1" "payara-embedded" "payara-managed" "payara-remote"
    "tomcat-embedded-6" "tomcat-embedded-7" "tomcat-managed" "tomcat-managed-5.5" "tomcat-remote" "tomee-embedded"
    "tomee-remote" "was-embedded-8" "was-remote-7" "was-remote-8" "weld-ee-embedded-1.1" "weld-se-embedded-1"
    "weld-se-embedded-1.1" "wildfly-domain-managed" "wildfly-domain-remote" "wildfly-embedded" "wildfly-managed"
    "wildfly-remote" "wls-remote-10.3" 
/
/ Als je wildfly-managed kiest, zien we in de pom en arquillian.xml arquillian-wildfly-managed,

/ container arquillian-wildfly-remote heeft veel minder configuratie params dan container arquillian-wildfly-managed,
/ als we in forge,
[MyServiceTest.java]$ arquillian-container-configuration --container arquillian-wildfly-remote --container-option
managementAddress managementPort
/
[MyServiceTest.java]$ arquillian-container-configuration --container arquillian-wildfly-managed --container-option
javaHome                 jbossHome                managementPort           outputToConsole          startupTimeoutInSeconds
javaVmArguments          managementAddress        modulePath               serverConfig
/
/ Het enigste wat we (hiervoor) moeten veranderen is de profile id in de pom, dus set tot arquillian-wildfly-managed,
/
/ we kunnen in de maven surefire plugin laten,
           <configuration>
              <systemPropertyVariables>
                <arquillian.launch>arquillian-wildfly-remote</arquillian.launch>
                <chameleon.target>wildfly:10.1.0.Final:REMOTE</chameleon.target>
              </systemPropertyVariables>
            </configuration>
/ en in arquillian.xml
  <container default="true" qualifier="arquillian-wildfly-remote">
/ forge kijkt naar de <profile><id>...</id>...</profile>

/ 7	.

/ we veranderen alles naar managed,

$ vi pom.xml

  <profiles>
    <profile>
      <id>arquillian-wildfly-managed</id>
      <activation>
        <activeByDefault>true</activeByDefault>
      </activation>
      <build>
        <plugins>
          <plugin>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.14.1</version>
            <configuration>
              <systemPropertyVariables>
                <arquillian.launch>arquillian-wildfly-managed</arquillian.launch>
                <chameleon.target>wildfly:10.1.0.Final:MANAGED</chameleon.target>
              </systemPropertyVariables>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>
  </profiles>

$ vi arquillian.xml

<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<arquillian xmlns="http://jboss.org/schema/arquillian" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd">
  <container default="true" qualifier="arquillian-wildfly-managed">
    <configuration>
      <property name="chameleonTarget">${chameleon.target}</property>
    </configuration>
  </container>
</arquillian>


[MyServiceTest.java]$ arquillian-container-configuration --container arquillian-wildfly-managed --container-option jbossHome --c
ontainer-value C:\Users\ervelden\bin\wildfly-10.1.0.Final

/ ARQUILLIAN.XML VOOR WILDFLY-MANAGED

$ vi arquillian.xml

<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<arquillian xmlns="http://jboss.org/schema/arquillian" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd">
  <container default="true" qualifier="arquillian-wildfly-managed">
    <configuration>
      <property name="chameleonTarget">${chameleon.target}</property>
      <property name="jbossHome">C:\Users\ervelden\bin\wildfly-10.1.0.Final</property>
    </configuration>
  </container>
</arquillian>

///////////////////////////////////////////////////////////////////////////
$ build test
/ OK
/ En we kunnen een run config maken in eclipse ZONDER JBOSS_HOME, net als voor remote! We hoeven alleen $ mvn clean test

/ 7	. 

/ we lezen nog op forge guide van arquillian,

[arquillian-jpa]$ jpa-setup --jpa-provider Hibernate
***SUCCESS*** Persistence (JPA) is installed.

$ vi src/main/resources/META-INF/persistence.xml

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<persistence xmlns="http://xmlns.jcp.org/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.1" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd">
  <persistence-unit name="arquillian-jpa-persistence-unit" transaction-type="JTA">
    <description>Forge Persistence Unit</description>
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>java:jboss/datasources/ExampleDS</jta-data-source>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties>
      <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
      <property name="hibernate.show_sql" value="true"/>
      <property name="hibernate.format_sql" value="true"/>
      <property name="hibernate.transaction.flush_before_completion" value="true"/>
      <property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect"/>
    </properties>
  </persistence-unit>
</persistence>

[persistence.xml]$ jpa-new-entity --named Language
***SUCCESS*** JPA Entity org.arquillian.jpa.model.Language was created
[Language.java]$ jpa-new-field --named name
***SUCCESS*** Field name created

/ generate dao,

[Language.java]$ jpa-generate-daos-from-entities --generator JPA_ENTITY --persistence-unit arquillian-jpa-persistence-unit --tar
gets org.arquillian.jpa.model.Language
***SUCCESS*** Dao created
/ je kunt ook --package-name geven, maar defaults to org.arquillian.jpa.dao,

/ Intermezzo

$ man jpa-generate-daos-from-entities

SYNOPSIS
  jpa-generate-daos-from-entities [-] [--generator] DaoResourceGenerator [--package-name] String [--persistence-unit] String [--
targets] JavaClassSource


DESCRIPTION
  Generate DAOs from JPA entities
     --generator
    Generator -  [DaoResourceGenerator] (required) Valid choices: ["JPA_ENTITY" ]

     --overwrite
    Overwrite existing classes? -  [Boolean] defaults to: [false]

     --package-name
    Target Package Name -  [String] (required) defaults to: [org.arquillian.jpa.dao]

     --persistence-unit
    Persistence Unit -  [String] (required) Valid choices: ["arquillian-jpa-persistence-unit" ]

     --targets
    Targets -  [JavaClassSource] (required) Valid choices: ["org.arquillian.jpa.model.Language" ]

/ Einde Intermezzo



$ vi LanguageDao.java

package org.arquillian.jpa.dao;

import java.util.List;

import javax.ejb.Stateless;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.TypedQuery;
import org.arquillian.jpa.model.Language;

/**
 * DAO for Language
 */
@Stateless
public class LanguageDao {
	@PersistenceContext(unitName = "arquillian-jpa-persistence-unit")
	private EntityManager em;

	public void create(Language entity) {
		em.persist(entity);
	}

	public void deleteById(Long id) {
		Language entity = em.find(Language.class, id);
		if (entity != null) {
			em.remove(entity);
		}
	}

	public Language findById(Long id) {
		return em.find(Language.class, id);
	}

	public Language update(Language entity) {
		return em.merge(entity);
	}

	public List<Language> listAll(Integer startPosition, Integer maxResult) {
		TypedQuery<Language> findAllQuery = em.createQuery(
				"SELECT DISTINCT l FROM Language l ORDER BY l.id",
				Language.class);
		if (startPosition != null) {
			findAllQuery.setFirstResult(startPosition);
		}
		if (maxResult != null) {
			findAllQuery.setMaxResults(maxResult);
		}
		return findAllQuery.getResultList();
	}
}

/ Intermezzo

/ in forge,
$ man arquillian-create-test

SYNOPSIS
  arquillian-create-test [-e] [-t --targets] JavaClassSource

DESCRIPTION
  This addon will help you create a test skeleton based on a given class
     --as-client
    Deployment and tests in client mode - Defines if this deployment should be wrapped up based on the protocol so the test case

    can be executed in-container. [Boolean] defaults to: [false]

  -a, --archive-type
    Archive Type -  [ArchiveType] Valid choices: ["JAR" "WAR" ]

  -e, --enable-jpa
    Enable JPA -  [Boolean] defaults to: [false]

  -n, --named
    Test Name -  [String]

  -p, --target-package
    Target Package -  [String]

  -t, --targets
    Targets -  [JavaClassSource] (required) Valid choices: ["org.arquillian.jpa.beans.MyService"
    "org.arquillian.jpa.dao.LanguageDao" "org.arquillian.jpa.model.Language" ]

/ Einde Intermezzo

[LanguageDao.java]$ arquillian-create-test --targets org.arquillian.jpa.dao.LanguageDao --enable-jpa
***SUCCESS*** Created test class org.arquillian.jpa.dao.LanguageDaoTest

/ --enable-jpa geeft de META-INF/persistence.xml in de jar, als je NIET --enable-jpa, dan komt deze niet in de jar,
/ de default is --archive JAR, als we --archive WAR, dan zien we 
		return ShrinkWrap
				.create(WebArchive.class)
				...

$ vi src/test/java/org.arquillian.jpa.dao.LanguageDaoTest.java

package org.arquillian.jpa.dao;

import org.arquillian.jpa.dao.LanguageDao;

import javax.inject.Inject;

import org.jboss.arquillian.container.test.api.Deployment;
import org.jboss.arquillian.junit.Arquillian;
import org.jboss.shrinkwrap.api.ShrinkWrap;
import org.jboss.shrinkwrap.api.spec.JavaArchive;
import org.jboss.shrinkwrap.api.asset.EmptyAsset;
import org.junit.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;

import static org.junit.Assert.*;
import static org.hamcrest.core.Is.*;

@RunWith(Arquillian.class)
public class LanguageDaoTest {

	@Inject
	private LanguageDao languageDao;

	@Deployment
	public static JavaArchive createDeployment() {
		return ShrinkWrap
				.create(JavaArchive.class)
				.addClass(LanguageDao.class)
				.addAsManifestResource("META-INF/persistence.xml",
						"persistence.xml")
				.addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");
	}

	@Test
	public void should_be_deployed() {
		Assert.assertNotNull(languageDao);
	}
}

/ we kunnen ook,
[jpa]$ arquillian-create-test --targets org.arquillian.jpa.dao.LanguageDao org.arquillian.jpa.model.Language --enable-jpa
/ er worden 2 tests create, 

/ SAMENVATTING FORGE ARQUILLIAN CREATE JPA PROJECT

workspace-jbosstools-jee-oxygen]$ project-new --named arquillian-jpa-study --stack JAVA_EE_7 --type jar
[MyServiceTest.java]$ arquillian-setup --test-framework junit --container-adapter wildfly-managed 
[MyServiceTest.java]$ cdi-new-bean --named MyService --scoped REQUEST
[MyServiceTest.java]$ arquillian-create-test --targets org.arquillian.jpa.study.beans.MyService
[MyServiceTest.java]$ arquillian-container-configuration --container arquillian-wildfly-managed --container-option jbossHome --c
ontainer-value C:\Users\ervelden\bin\wildfly-10.1.0.Final
[arquillian-jpa]$ jpa-setup --jpa-provider Hibernate
[persistence.xml]$ jpa-new-entity --named Language
[Language.java]$ jpa-new-field --named name
[Language.java]$ jpa-generate-daos-from-entities --generator JPA_ENTITY --persistence-unit arquillian-jpa-persistence-unit --tar
gets org.arquillian.jpa.model.Language
[LanguageDao.java]$ arquillian-create-test --targets org.arquillian.jpa.dao.LanguageDao --enable-jpa
/ pas @Deployment method aan: addClasses(...,Language.class)
$ build test


/ 7	. 

/ ARQUILLIAN TODO

https://blogs.oracle.com/developers/testing-java-ee-7-applications-in-docker-with-arquillian-cube
https://github.com/arquillian
https://github.com/arquillian/arquillian-universe-bom
Arquillian REST Warp CXF
https://github.com/arquillian/arquillian-container-chameleon	/ lees, en ga transitive deps na in arquillian-jpa-study
https://forge.jboss.org/document/jboss-forge-2,-java-ee-easily,-so-easily
http://forge.jboss.org/addon/org.jboss.forge.addon:wildfly-swarm

/ 7	 .

/ STATEFULL

/ lees, 
http://docs.oracle.com/javaee/6/tutorial/doc/bnciy.html

In a stateless session bean with bean-managed transactions, a business method must commit or roll back a transaction before returning. However, a stateful session bean does not have this restriction.

In a stateful session bean with a JTA transaction, the association between the bean instance and the transaction is retained across multiple client calls. Even if each business method called by the client opens and closes the database connection, the association is retained until the instance completes the transaction.

In a stateful session bean with a JDBC transaction, the JDBC connection retains the association between the bean instance and the transaction across multiple calls. If the connection is closed, the association is not retained.

/ Einde STATEFUL


/ 7	. 

/ Voor http://arquillian.org/guides/testing_java_persistence/ maken we een ander project,	


[workspace-jbosstools-jee-oxygen]$ project-new --named arquillian-jpa-final --stack JAVA_EE_7 --type jar

/ we zien stack JAVA_EE_7 terug in de pom,
/ er is GEEN arquillian.xml,

$ vi pom.xml

<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.arquillian.jpa.final</groupId>
  <artifactId>arquillian-jpa-final</artifactId>
  <version>1.0.0-SNAPSHOT</version>
  <build>
    <finalName>arquillian-jpa-final</finalName>
  </build>
  <dependencies>
    <dependency>
      <groupId>javax</groupId>
      <artifactId>javaee-api</artifactId>
      <scope>provided</scope>
    </dependency>
  </dependencies>
  <dependencyManagement>
    <dependencies>
      <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>7.0</version>
        <scope>provided</scope>
      </dependency>
    </dependencies>
  </dependencyManagement>
  <properties>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
</project>

[arquillian-jpa-final]$ arquillian-setup --test-framework junit --container-adapter wildfly-managed
***SUCCESS*** Arquillian setup complete
***SUCCESS*** Installed Arquillian Universe 1.1.13.0
***SUCCESS*** Installed junit
***SUCCESS*** Installed Arquillian Container WildFly Managed
***SUCCESS*** Installed Arquillian Container WildFly Managed dependencies
/ Now arquillian.xml is there,

[arquillian-jpa-final]$ jpa-setup --jpa-provider Hibernate
***SUCCESS*** Persistence (JPA) is installed.
/ er is in src/main/resources META-INF/persistence.xml	, met de persistence-unit	,

[persistence.xml]$ jpa-new-entity --named Game
***SUCCESS*** JPA Entity org.arquillian.jpa.final_.model.Game was created
/ heeft een id, version property,

[Game.java]$ jpa-new-field --named title
***SUCCESS*** Field title created
/ en we add met de hand,
	@NotNull
	@Size(min=3,max=50)
	private String title;
	

/ Intermezzo

[Game.java]$ jpa-new-field --named title --
--column-name     --lob             --not-nullable    --target-entity   --type
--length          --not-insertable  --not-updatable   --transient
[Game.java]$ jpa-new-field --named title --type													/ String is default, voor ons OK,
String                                double                                long
boolean                               float                                 org.arquillian.jpa.final_.model.Game
byte                                  int                                   short
char                                  java.util.Date

[Game.java]$ jpa-new-field --named title --target-entity  org.arquillian.jpa.final_.model.Game 	/ enigste mogelijkheid	,

[Game.java]$ jpa-new-field --named title --not-nullable --length 5
@Column(length=5, nullable=false)
private String title;
/ Maar in de tutorial,
@NotNull @Size(min = 3, max = 50)
/ Lees,
https://stackoverflow.com/questions/7439504/confusion-notnull-vs-columnnullable-false
/ @Column(nullable=false) is een constraint op de column in table in de db, @NotNull doet meer, ... TODO, maar doet ook @Column 	,
/ TODO bekijk het met een niet embedded h2 db,

/ Einde Intermezzo

[Game.java]$ jpa-generate-daos-from-entities --generator JPA_ENTITY --persistence-unit arquillian-jpa-final-persistence-unit --t
argets org.arquillian.jpa.final_.model.Game
***SUCCESS*** Dao created
/ alle opties hadden maar 1 value, 

[arquillian-jpa-final]$ arquillian-create-test --targets org.arquillian.jpa.final_.dao.GameDao --enable-jpa
***SUCCESS*** Created test class org.arquillian.jpa.final_.dao.GameDaoTest

[GameDaoTest.java]$ arquillian-container-configuration --container arquillian-wildfly-managed  --container-option jbossHome --co
ntainer-value C:\Users\ervelden\bin\wildfly-10.1.0.Final

/ Pas GameDaoTest.java aan,
				.addClasses(GameDao.class,Game.class)

/ Pas persistence.xml aan, of we h2 mem of tcp hebben , en of we postgresql hebben, 

    <!-- <jta-data-source>java:jboss/datasources/ExampleDS</jta-data-source> -->
    <!-- <jta-data-source>java:jboss/datasources/RemoteExampleDS</jta-data-source> -->
    <jta-data-source>java:jboss/datasources/PostgreSQLDS</jta-data-source>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties>
      <property name="hibernate.hbm2ddl.auto" value="create"/>	<!--  create-drop -->
      <property name="hibernate.show_sql" value="true"/>
      <property name="hibernate.format_sql" value="true"/>
      <property name="hibernate.transaction.flush_before_completion" value="true"/>
      <!-- <property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect"/> -->
      <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect"/>
    

sql> show columns from game;
FIELD   | TYPE        | NULL | KEY | DEFAULT
ID      | BIGINT(19)  | NO   | PRI | NULL
TITLE   | VARCHAR(50) | NO   |     | NULL
VERSION | INTEGER(10) | YES  |     | NULL

test=> \d game
             Table "public.game"
 Column  |         Type          | Modifiers
---------+-----------------------+-----------
 id      | bigint                | not null
 title   | character varying(50) | not null
 version | integer               |
Indexes:
    "game_pkey" PRIMARY KEY, btree (id)
	
/ in psql moeten we soms rollback, anders loopt de test niet door,

/ 7	. 

@Stateless
public class GameDao {
	
	@PersistenceContext(unitName = "arquillian-jpa-final-persistence-unit-postgresql")
	private EntityManager empg;
	
	@PersistenceContext(unitName="arquillian-jpa-final-persistence-unit-remoteexampleds")
	private EntityManager emh2;
	
	@Inject
	UserTransaction ut;
	...

$ build test
Caused by: org.jboss.weld.exceptions.DefinitionException: WELD-001451: javax.transaction.UserTransaction cannot be injected into
 an enterprise bean with container-managed transactions: [BackedAnnotatedField] @Inject org.arquillian.jpa.final_.dao.GameDao.ut
	
/ Doe daarom, 

@Stateless
@TransactionManagement(TransactionManagementType.BEAN)
public class GameDao {
	
	@PersistenceContext(unitName = "arquillian-jpa-final-persistence-unit-postgresql")
	private EntityManager empg;
	
	@PersistenceContext(unitName="arquillian-jpa-final-persistence-unit-remoteexampleds")
	private EntityManager emh2;

	@Inject
	UserTransaction ut;

/ 7	. 

16:20:11,067 ERROR [org.jboss.as.ejb3.invocation] (default task-4) WFLYEJB0034: EJB Invocation failed on component GameDao for m
ethod public void org.arquillian.jpa.final_.dao.GameDao.inserts() throws java.lang.Exception: javax.ejb.EJBException: WFLYEJB044
3: EJB 3.1 FR 13.3.3: BMT bean GameDao should complete transaction before returning.

org.hibernate.PersistentObjectException: detached entity passed to persist

/ 7	. 

$ vi postgresql.conf
max_prepared_transactions = 0 #1600	# zero disables the feature

16:47:44,167 WARN  [com.arjuna.ats.jta] (default task-4) ARJUNA016041: prepare on < formatId=131077, gtrid_length=29, bqual_leng
th=36, tx_uid=0:ffffc0a82b5e:49c64e8:59dceb9a:10, node_name=1, branch_uid=0:ffffc0a82b5e:49c64e8:59dceb9a:14, subordinatenodenam
e=null, eis_name=java:jboss/datasources/PostgreSQLDS > (XAResourceWrapperImpl@36d4acb9[xaResource=org.jboss.jca.adapters.jdbc.xa
.XAManagedConnection@6c79e938 pad=false overrideRmValue=null productName=PostgreSQL productVersion=9.6.5 jndiName=java:jboss/dat
asources/PostgreSQLDS]) failed with exception XAException.XAER_RMERR: org.postgresql.xa.PGXAException: Error preparing transacti
on
        at org.postgresql.xa.PGXAConnection.prepare(PGXAConnection.java:338)
        at org.jboss.jca.adapters.jdbc.xa.XAManagedConnection.prepare(XAManagedConnection.java:330)
        at org.jboss.jca.core.tx.jbossts.XAResourceWrapperImpl.prepare(XAResourceWrapperImpl.java:177)
        at com.arjuna.ats.internal.jta.resources.arjunacore.XAResourceRecord.topLevelPrepare(XAResourceRecord.java:218)
        at com.arjuna.ats.arjuna.coordinator.BasicAction.doPrepare(BasicAction.java:2662)
        at com.arjuna.ats.arjuna.coordinator.BasicAction.doPrepare(BasicAction.java:2612)
        at com.arjuna.ats.arjuna.coordinator.BasicAction.prepare(BasicAction.java:2155)
        at com.arjuna.ats.arjuna.coordinator.BasicAction.End(BasicAction.java:1501)
        at com.arjuna.ats.arjuna.coordinator.TwoPhaseCoordinator.end(TwoPhaseCoordinator.java:96)
        at com.arjuna.ats.arjuna.AtomicAction.commit(AtomicAction.java:162)
        at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1200)

        at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:126)
        at com.arjuna.ats.jbossatx.BaseTransactionManagerDelegate.commit(BaseTransactionManagerDelegate.java:89)
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.endTransaction(CMTTxInterceptor.java:91)
		...
Caused by: org.postgresql.util.PSQLException: ERROR: prepared transactions are disabled
  Hint: Set max_prepared_transactions to a nonzero value.
        at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2182)
        at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1911)
        at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:173)
        at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:615)
        at org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:451)
        at org.postgresql.jdbc2.AbstractJdbc2Statement.executeUpdate(AbstractJdbc2Statement.java:379)
        at org.postgresql.xa.PGXAConnection.prepare(PGXAConnection.java:326)
		
16:47:44,167 WARN  [com.arjuna.ats.arjuna] (default task-4) ARJUNA012073: BasicAction.End() - prepare phase of action-id 0:ffffc
0a82b5e:49c64e8:59dceb9a:10 failed.
16:47:44,167 WARN  [com.arjuna.ats.arjuna] (default task-4) ARJUNA012075: Action Aborting
16:47:44,167 WARN  [com.arjuna.ats.jta] (default task-4) ARJUNA016045: attempted rollback of < formatId=131077, gtrid_length=29,
 bqual_length=36, tx_uid=0:ffffc0a82b5e:49c64e8:59dceb9a:10, node_name=1, branch_uid=0:ffffc0a82b5e:49c64e8:59dceb9a:14, subordi
natenodename=null, eis_name=java:jboss/datasources/PostgreSQLDS > (XAResourceWrapperImpl@36d4acb9[xaResource=org.jboss.jca.adapt
ers.jdbc.xa.XAManagedConnection@6c79e938 pad=false overrideRmValue=null productName=PostgreSQL productVersion=9.6.5 jndiName=jav
a:jboss/datasources/PostgreSQLDS]) failed with exception code XAException.XAER_NOTA: org.postgresql.xa.PGXAException: Error roll
ing back prepared transaction
        at org.postgresql.xa.PGXAConnection.rollback(PGXAConnection.java:443)
        at org.jboss.jca.adapters.jdbc.xa.XAManagedConnection.rollback(XAManagedConnection.java:346)
        at org.jboss.jca.core.tx.jbossts.XAResourceWrapperImpl.rollback(XAResourceWrapperImpl.java:196)
        at com.arjuna.ats.internal.jta.resources.arjunacore.XAResourceRecord.topLevelAbort(XAResourceRecord.java:369)
        at com.arjuna.ats.arjuna.coordinator.BasicAction.doAbort(BasicAction.java:3017)
		...
Caused by: org.postgresql.util.PSQLException: ERROR: prepared transaction with identifier "131077_AAAAAAAAAAAAAP//wKgrXgScZOhZ3O
uaAAAAEDE=_AAAAAAAAAAAAAP//wKgrXgScZOhZ3OuaAAAAFAAAAAIAAAAA" does not exist
        at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2182)
        at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1911)
        at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:173)
        at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:615)
        at org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:451)
        at org.postgresql.jdbc2.AbstractJdbc2Statement.executeUpdate(AbstractJdbc2Statement.java:379)
        at org.postgresql.xa.PGXAConnection.rollback(PGXAConnection.java:431)

		
16:47:44,182 ERROR [org.jboss.as.ejb3.invocation] (default task-4) WFLYEJB0034: EJB Invocation failed on component GameDao for m
ethod public void org.arquillian.jpa.final_.dao.GameDao.clear() throws java.lang.Exception: javax.ejb.EJBTransactionRolledbackEx
ception: Transaction rolled back
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.handleEndTransactionException(CMTTxInterceptor.java:137)
		...
Caused by: javax.transaction.RollbackException: ARJUNA016053: Could not commit transaction.
        at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1212)

        at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:126)
        at com.arjuna.ats.jbossatx.BaseTransactionManagerDelegate.commit(BaseTransactionManagerDelegate.java:89)
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.endTransaction(CMTTxInterceptor.java:91)
        ... 196 more

Tests run: 2, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 9.775 sec <<< FAILURE!
test(org.arquillian.jpa.final_.dao.GameDaoTest)  Time elapsed: 0.47 sec  <<< ERROR!
javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
        at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1212)

        at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:126)
        at com.arjuna.ats.jbossatx.BaseTransactionManagerDelegate.commit(BaseTransactionManagerDelegate.java:89)
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.endTransaction(CMTTxInterceptor.java:91)
		...
		
/ we hebben een nieuwe ws workspace-jbosstools-jee-oxygen-self
/ hier moeten de arquillian projects in , en tomcat projects, die nu in workspace-jbosstools-jee-oxygen staan, 
/ in workspace-jbosstools-jee-oxygen staan nu wildfly-swarm voorbeelden,

/ 7	 .

/ we hebben een b set in 
XAManagedConnection.prepare	, maar de debugger: source lookup, 
/ we hebben added in de debug config, sources: ironjacamar-sources.jar (1.3.4.Final)	, org\jboss\ironjacamar-jdbc\1.3.4.Final\	, nu valt de debugger in de source code,
/ ironjacamar-jdbc is onderdeel van wildfly, dus niet niet van ons project, en komt dus ook niet voor in de dependency hierarchy of effective pom, 
/ we zien in de pom dat org.jboss.ironjacamar:ironjacamar-jdbc:1.3.4.Final geen dependency (provided) is, 
/ TODO

/ de 




/ Einde ARQUILLIAN FOURTH (JPA)

/ JPA

/ 7	. 

/ @JoinColumn

https://stackoverflow.com/questions/11938253/jpa-joincolumn-vs-mappedby

@Entity
public class Company {
    @OneToMany(fetch = FetchType.LAZY, mappedBy = "company")
    private List<Branch> branches;
}

@Entity
public class Branch {
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "companyId")
    private Company company;
}

/ 7	.

/ Lees,
https://stackoverflow.com/questions/15413434/typedquery-instead-of-normal-query-in-jpa

Query q = entityManager.createQuery("SELECT NEW com.example.DTO( c.id, COUNT(t.id)) FROM ...");
List<DTO> dtos = q.getResultList();

TypedQuery<CommUsed> q = em.createQuery(
        "SELECT new CommUsed(c.id,COUNT(t.id)) " +
        "FROM PubText t " +
        "JOIN t.comm c " +
        "WHERE c.element = ?1 " +
        "GROUP BY c.id", CommUsed.class);
    q.setParameter(1, e);
    HashMap<Long, Long> res = new HashMap<Long, Long>();
    for (CommUsed u : q.getResultList())
        res.put(u.commID, u.cnt);
		
/ lees,
https://stackoverflow.com/questions/28439141/update-delete-queries-cannot-be-typed-jpa		
"Update/delete queries cannot be typed."

/ Lees,
https://stackoverflow.com/questions/16805224/inserting-in-my-jpa-using-entity-manager-native-query
String query = "insert into Employee values(1,?)";
em.createNativeQuery(query)
   .setParameter(1, "Tom")
   .executeUpdate();
   
 / Lees,
 https://stackoverflow.com/questions/1069992/jpa-entitymanager-why-use-persist-over-merge
 
 / Lees,
 https://stackoverflow.com/questions/4967852/how-to-insert-values-into-database-using-queries-using-entity-manager-persisten
 / In JPAQL kun je niet insert, doe EntityManager.persist 
 
 / Lees,
 https://stackoverflow.com/questions/43347602/how-to-construct-an-insert-query-in-jpa
 Query query = em.createQuery("INSERT INTO TestDataEntity (NAME, VALUE) VALUES (?, ?)");
query.setParameter(1, name);
query.setParameter(2, value);
query.executeUpdate();

/ lees,
https://www.codemiles.com/jpa/insert-using-native-query-t6205.html
 Query query = entityManager.createNativeQuery("INSERT INTO topic (ID, TITLE,CREATION_DATE) " +
            " VALUES(?,?,?)");
        query.setParameter(1, id);
        query.setParameter(2, title);
        query.setParameter(3, creationDate);
        query.executeUpdate();
		

/ HIER HIER HIER
/ Einde JPA

/ WILDFLY DATASOURCES 

C:\Users\ervelden\bin\wildfly-10.1.0.Final>bin\standalone.bat
...
C:\Users\ervelden\bin\wildfly-10.1.0.Final>bin\jboss-cli.bat
[disconnected /] connect

/ 7	 .

/ drivers	,


[standalone@localhost:9990 /] module add --name=com.postgresql --resources=C:\Users\ervelden\postgresql\postgresql-9.4-1202.jdbc
42.jar --dependencies=javax.api,javax.transaction.api

C:\Users\ervelden\bin\wildfly-10.1.0.Final>dir modules\com\postgresql\main\
07-10-2017  21:38               330 module.xml
07-10-2017  21:38           657.841 postgresql-9.4-1202.jdbc42.jar

/ er is al, 
C:\Users\ervelden\bin\wildfly-10.1.0.Final>dir modules\system\layers\base\com\h2database\h2\main
18-08-2016  19:12         1.574.733 h2-1.3.173.jar
18-08-2016  19:12             1.421 module.xml

/ Ook in wildfly is de h2 driver er al,

[standalone@localhost:9990 /] /subsystem=datasources/jdbc-driver=h2:read-resource(recursive=true)
{
    "outcome" => "success",
    "result" => {
        "deployment-name" => undefined,
        "driver-class-name" => undefined,
        "driver-datasource-class-name" => undefined,
        "driver-major-version" => undefined,
        "driver-minor-version" => undefined,
        "driver-module-name" => "com.h2database.h2",
        "driver-name" => "h2",
        "driver-xa-datasource-class-name" => "org.h2.jdbcx.JdbcDataSource",
        "jdbc-compliant" => undefined,
        "module-slot" => undefined,
        "profile" => undefined,
        "xa-datasource-class" => undefined
    }
}

[standalone@localhost:9990 /] /subsystem=datasources/jdbc-driver=postgresql:add(driver-name=postgresql,driver-module-name=com.po
stgresql,driver-xa-datasource-class-name=org.postgresql.xa.PGXADataSource)
{"outcome" => "success"}[standalone@localhost:9990 /] /subsystem=datasources/jdbc-driver=postgresql:read-resource(recursive=true)
{
    "outcome" => "success",
    "result" => {
        "deployment-name" => undefined,
        "driver-class-name" => undefined,
        "driver-datasource-class-name" => undefined,
        "driver-major-version" => undefined,
        "driver-minor-version" => undefined,
        "driver-module-name" => "com.postgresql",
        "driver-name" => "postgresql",
        "driver-xa-datasource-class-name" => "org.postgresql.xa.PGXADataSource",
        "jdbc-compliant" => undefined,
        "module-slot" => undefined,
        "profile" => undefined,
        "xa-datasource-class" => undefined
    }
}

/ jboss-cli loopt met xa-datasource-class niet helemaal gelijk met standalone.xml

C:\Users\ervelden\bin\wildfly-10.1.0.Final>type standalone\configuration\standalone.xml
       <subsystem xmlns="urn:jboss:domain:datasources:4.0">
           <datasources>
               <datasource jndi-name="java:jboss/datasources/ExampleDS" pool-name="ExampleDS" enabled="true" use-java-context="true">
                   <connection-url>jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE</connection-url>
                   <driver>h2</driver>
                   <security>
                       <user-name>sa</user-name>
                       <password>sa</password>
                   </security>
               </datasource>
               <drivers>
                   <driver name="h2" module="com.h2database.h2">
                       <xa-datasource-class>org.h2.jdbcx.JdbcDataSource</xa-datasource-class>
                   </driver>
                   <driver name="postgresql" module="com.postgresql">
                       <xa-datasource-class>org.postgresql.xa.PGXADataSource</xa-datasource-class>
                   </driver>
               </drivers>
           </datasources>

/ we moeten een datasource maken voor niet embedded h2, en voor postgresql,

/ lees,
http://www.h2database.com/html/features.html?highlight=DB_CLOSE_DELAY&search=DB_CLOSE#firstFound
/ over DB_CLOSE_DELAY en DB_CLOSE_ON_EXIT
/ TODO

C:\Users\ervelden\h2>java -classpath ..\bin\wildfly-10.1.0.Final\modules\system\layers\base\com\h2database\h2\main\h2-1.3.173.jar org.h2.tools.Shell -url jdbc:h2:tcp://localhost/~/h2/test -user sa -password ""

/ start server,	
C:\Users\ervelden\bin\wildfly-10.1.0.Final>java -classpath modules\system\layers\base\com\h2database\h2\main\h2-1.3.173.jar org.h2.tools.Server -tcp
TCP server running at tcp://192.168.123.115:9092 (only local connections)

/ er is nog geen test.h2.db in ~/h2	,

[standalone@localhost:9990 /] xa-data-source add --name=PostgreSQLDS --jndi-name=java:jboss/datasources/PostgreSQLDS --driver-na
me=postgresql --xa-datasource-properties=[ServerName=localhost,DatabaseName=test,User=eric,Password=vi_lang17]

[standalone@localhost:9990 /] xa-data-source test-connection-in-pool --name=PostgreSQLDS
true

[standalone@localhost:9990 /] xa-data-source test-connection-in-pool --name=RemoteExampleDS
true

/ nu is er test.h2.db en test.lock.db,

/ we kunnen een cli start,
C:\Users\ervelden\h2>java -classpath ..\bin\wildfly-10.1.0.Final\modules\system\layers\base\com\h2database\h2\main\h2-1.3.173.jar org.h2.tools.Shell -url jdbc:h2:tcp://localhost/~/h2/test -user sa -password sa
sql> autocommit false

[standalone@localhost:9990 /] xa-data-source add --name=PostgreSQLDS --jndi-name=java:jboss/datasources/PostgreSQLDS --driver-na
me=postgresql --xa-datasource-properties=[ServerName=localhost,DatabaseName=test,User=eric,Password=vi_lang17]

[standalone@localhost:9990 /] xa-data-source test-connection-in-pool --name=PostgreSQLDS
true

/ Intermezzo

/ 7	. 

/ we kunnen in jboss-cli met --password geen leeg password geven,
[standalone@localhost:9990 /] xa-data-source add --name=RemoteExampleDS --jndi-name=java:jboss/datasources/RemoteExample --drive
r-name=h2 --user-name=sa --password=sa --xa-datasource-properties=[URL=jdbc:h2:tcp://localhost/~/h2/test;USER=sa;PASSWORD=;DB_CL
OSE_DELAY=-1;DB_CLOSE_ON_EXIT=false]
/ OK, 
/ we kunnen de h2 client,
C:\Users\ervelden\h2>java -classpath ..\bin\wildfly-10.1.0.Final\modules\system\layers\base\com\h2database\h2\main\h2-1.3.173.jar org.h2.tools.Shell -url jdbc:h2:tcp://localhost/~/h2/test -user sa -password ""
/ maar we kunnen weer niet:
C:\Users\ervelden\h2>java -classpath ..\bin\wildfly-10.1.0.Final\modules\system\layers\base\com\h2database\h2\main\h2-1.3.173.jar org.h2.tools.Shell -url jdbc:h2:tcp://localhost/~/h2/test;USER=sa;PASSWORD=
/ TODO

/ 7	. 

/ als we de h2 server stop, en we test-connection in jboss-cli opnieuw, dan nog steeds true; als we reload geven, en opnieuw test, dan false (zoals het moet),
/ TODO

/ Einde Intermezzo






/ Einde WILDFLY DATASOURCES

/ WILDFLY SOURCE 

C:\Users\ervelden\java>git clone https://github.com/wildfly/wildfly.git

/ Einde WILDFLY SOURCE 


/ ARQUILLIAN VIDEOS

https://www.youtube.com/watch?v=UYhJoMD1TdM
https://www.youtube.com/watch?v=pfoJAshalx4
https://www.youtube.com/watch?v=LrK-lI64nro
https://www.youtube.com/watch?v=zeLvvwD-6tk

https://www.youtube.com/watch?v=a6lZWaqKSmY 	/ arun gupta
https://www.youtube.com/watch?v=9xb6GIZ1gjs 	/ forge, 

https://www.youtube.com/watch?v=S1z50UbEdZw&t=42s	/ Goncalves, Docker, microservices angular,
https://blogs.oracle.com/developers/testing-java-ee-7-applications-in-docker-with-arquillian-cube



/ Einde ARQUILLIAN VIDEOS


/ ARQUILLIAN FOURTH STUDY (JPA)

/ we oefenen met 
arquillian-container-setup 

[workspace-jbosstools-jee-oxygen]$ project-new --named arquillian-jpa-study --stack JAVA_EE_7 --type jar
[MyServiceTest.java]$ arquillian-setup --test-framework junit --container-adapter wildfly-managed
[MyServiceTest.java]$ cdi-new-bean --named MyService --scoped REQUEST
[MyServiceTest.java]$ arquillian-create-test --targets org.arquillian.jpa.study.beans.MyService
[MyServiceTest.java]$ arquillian-container-configuration --container arquillian-wildfly-managed --container-option jbossHome --c
ontainer-value C:\Users\ervelden\bin\wildfly-10.1.0.Final
[MyServiceTest.java]$ build test
/ OK,
[MyServiceTest.java]$ arquillian-container-setup --container-adapter wildfly-remote --container-adapter-version 10.1.0.Final
***SUCCESS*** Installed Arquillian Container WildFly Remote
***SUCCESS*** Installed Arquillian Container WildFly Remote dependencies
/ we zien in pom.xml een remote profile en in arquillian.xml de remote container,

/ we kunnen dus maar 1 keer arquillian-setup, maar daarna kunnen we arquillian-container-setup, beide maken of passen aan pom.xml en arquillian.xml,
/ arquillian-container-configuration past arquillian.xml aan,

$ vi pom.xml

<profiles>
    <profile>
      <id>arquillian-wildfly-managed</id>
      <activation>
        <activeByDefault>true</activeByDefault>
      </activation>
      <build>
        <plugins>
          <plugin>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.14.1</version>
            <configuration>
              <systemPropertyVariables>
                <arquillian.launch>arquillian-wildfly-managed</arquillian.launch>
                <chameleon.target>wildfly:10.1.0.Final:MANAGED</chameleon.target>
              </systemPropertyVariables>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>
    <profile>
      <id>arquillian-wildfly-remote</id>
      <build>
        <plugins>
          <plugin>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.14.1</version>
            <configuration>
              <systemPropertyVariables>
                <arquillian.launch>arquillian-wildfly-remote</arquillian.launch>
                <chameleon.target>wildfly:10.1.0.Final:REMOTE</chameleon.target>
              </systemPropertyVariables>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>
  </profiles>
  
$ vi arquillian.xml

<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<arquillian xmlns="http://jboss.org/schema/arquillian" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd">
  <container default="true" qualifier="arquillian-wildfly-managed">
    <configuration>
      <property name="chameleonTarget">${chameleon.target}</property>
      <property name="jbossHome">C:\Users\ervelden\bin\wildfly-10.1.0.Final</property>
    </configuration>
  </container>
  <container qualifier="arquillian-wildfly-remote">
    <configuration>
      <property name="chameleonTarget">${chameleon.target}</property>
    </configuration>
  </container>
</arquillian>


/ 7	.

/ lees,
https://stackoverflow.com/questions/5356152/two-persistence-unit-in-one-persistence-xml
/ multiple persistence-unit's 	, 
/ wat is <jar-file> in <persistence-unit>?
/ TODO

/ 7	. 

"C:\Program Files\PostgreSQL\9.6\bin\pg_ctl.exe" runservice -N "postgresql-x64-9.6" -D "C:\Program Files\PostgreSQL\9.6\data" -w
Dit is de PostgreSQL service, 

$ vi postgresql.conf
max_connections = 100			# (change requires restart)
max_prepared_transactions = 1600	# zero disables the feature		# 16* max_connections kan NIET,

/ we hebben in My Notes\Wildfly Logs\server_two_phase_commit.log de ERRs die we krijgen als max_prepared_transactions=0 in postgresql.conf, 
/ we zien XA calls,

/ 7	 .

/ google: wildfly two phase commit example

http://www.hhutzler.de/blog/a-deep-dive-into-2-phase-commit-with-wildfly-and-oracle-rac/#Java_Code_to_run_the_2-Phase-Commit_operation
/ Wat is @Resource?
http://www.mastertheboss.com/jboss-server/jboss-datasource/demystifying-datasource-jta-and-xa-settings-on-jboss-wildfly
/ ook @Resource ,	 bij datasource,
http://jbossts.blogspot.nl/
14 june 2017
Sagas and how they differ from two-phase commit

/ 7	.

/ lees,
https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/4.2/html-single/JBoss_Transactions_JTA_Programmers_Guide/index.html
/ lees,
https://docs.jboss.org/author/display/WFLY8/JBoss+remoting+transaction+propagation
/ lees,
https://github.com/xcoulon/wildfly-quickstart/blob/master/jts-distributed-crash-rec/README.md

/ SAMENVATTING USE ARQUILLIAN-JPA-FINAL

/ start NIET zelf wildfly, 

/ start h2 server,
C:\Users\ervelden\h2>java -classpath ..\bin\wildfly-10.1.0.Final\modules\system\layers\base\com\h2database\h2\main\h2-1.3.173.jar org.h2.tools.Server -tcp
TCP server running at tcp://192.168.123.115:9092 (only local connections)

/ je kunt ook een client start,
C:\Users\ervelden\h2>java -classpath ..\bin\wildfly-10.1.0.Final\modules\system\layers\base\com\h2database\h2\main\h2-1.3.173.jar org.h2.tools.Shell -url jdbc:h2:tcp://localhost/~/h2/test -user sa -password sa

/ start forge in workspace-jbosstools-jee-oxygen en cd in arquillian-jpa-final,
[arquillian-jpa-final]$ build test
Listening for transport dt_socket at address: 8787

/ run nu in eclipse de remote config GameDaoTest-remote,

/ nu loopt in forge de test door, en vallen we in eclipse vanzelf in de b's

/ build test stopt, want
$ vi arquillian.xml
<arquillian xmlns="http://jboss.org/schema/arquillian" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd">
  <container default="true" qualifier="arquillian-wildfly-managed">
    <configuration>
      <property name="chameleonTarget">${chameleon.target}</property>
      <property name="jbossHome">C:\Users\ervelden\bin\wildfly-10.1.0.Final</property>
      <property name="javaVmArguments">-Xrunjdwp:transport=dt_socket,address=8787,server=y,suspend=y</property>
    </configuration>
  </container>
</arquillian>

/ HIER HIER HIER


/ SAMENVATTING USE ARQUILLIAN-JPA-FINAL


/ Einde ARQUILLIAN FOURTH STUDY (JPA)

/ ARQUILLIAN MISC

/ lees,
https://blogs.oracle.com/arungupta/whats-new-in-ejb-32-java-ee-7-chugging-along

/ Lees,
https://github.com/junit-team/junit4/wiki/Aggregating-tests-in-suites

/ lees,
http://maven.apache.org/surefire/maven-surefire-plugin/examples/debugging.html
https://stackoverflow.com/questions/31451553/run-maven-tests-with-dmaven-surefire-debug-and-dforkmode-never
https://www.youtube.com/watch?v=qi85sddYsUk
https://maven.apache.org/surefire/maven-surefire-plugin/examples/fork-options-and-parallel-execution.html

/ 7	 .

/ als we dit doen bij !, dan zien we geen attachment, maar de debugger loopt direct door, maar hij stopt niet in de tests.
/ we moesten onderweg de project arquillian-forge add, anders vindt hij de src niet , maar na add vindt hij ze nog steeds niet; stop debugging en start opnieuw, dan vindt hij de src wel,

$ vi arquillian-forge\pom.xml
  <profiles>
    <profile>
      <id>arquillian-wildfly-managed</id>
      <activation>
        <activeByDefault>true</activeByDefault>
      </activation>
      <build>
        <plugins>
          <plugin>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.20</version> <!--  2.14.1 -->
            <configuration>
				<forkCount>0</forkCount>				/ !
				<reuseForks>false</reuseForks>			/ !
              <systemPropertyVariables>
                <arquillian.launch>arquillian-wildfly-managed</arquillian.launch>
                <chameleon.target>wildfly:10.1.0.Final:MANAGED</chameleon.target>
              </systemPropertyVariables>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>
	
/ 7	.

/ JBOSS_HOME kunnen we add in welke plugin, ipv in eclipse's run config,
/ TODO

/ 7	. 

/ DEBUG ARQUILLIAN TESTS IN WILDFLY REMOTE

/ debug tests in wildfly-remote,

/ Lees rinse_and_repeat, 
/ start wildfly in debugging mode, in eclipse, 
/ set b in een test in BasketTest, 
/ maak in rinse_and_repeat's pom wildfly-remote profile als default,
/ run (niet eens debug) de remote run config: arquillian-rinse_and_repeat-clean-test-remote

/ lees getting started,
If youre using a remote container, Debug As does not cause breakpoints to be activated. Instead, you need to start the container in debug mode and attach the debugger. Thats because the test is run in a different JVM than the original test runner.

/ 7	. 

"C:\Program Files\Java\jdk1.8.0_144\bin\javaw.exe" -agentlib:jdwp=transport=dt_socket,suspend=y,address=localhost:53159 "-Dprogram.name=JBossTools: WildFly 10.x" -server -Xms64m -Xmx512m -Dorg.jboss.resolver.warning=true -Djava.net.preferIPv4Stack=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Dorg.jboss.boot.log.file=C:/Users/ervelden/bin/wildfly-10.1.0.Final/standalone/log/boot.log -Dlogging.configuration=file:/C:/Users/ervelden/bin/wildfly-10.1.0.Final/standalone/configuration/logging.properties -Djboss.home.dir=C:/Users/ervelden/bin/wildfly-10.1.0.Final -Dorg.jboss.logmanager.nocolor=true -Djboss.bind.address.management=localhost -Dfile.encoding=Cp1252 -classpath "C:\Users\ervelden\bin\wildfly-10.1.0.Final\jboss-modules.jar" org.jboss.modules.Main -mp C:/Users/ervelden/bin/wildfly-10.1.0.Final/modules org.jboss.as.standalone -b localhost --server-config=standalone.xml "-Djboss.server.base.dir=C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone"

"C:\Program Files\Java\jdk1.8.0_144\bin\javaw.exe" -agentlib:jdwp=transport=dt_socket,suspend=y,address=localhost:53292 "-Dprogram.name=JBossTools: WildFly 10.x" -server -Xms64m -Xmx512m -Dorg.jboss.resolver.warning=true -Djava.net.preferIPv4Stack=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Dorg.jboss.boot.log.file=C:/Users/ervelden/bin/wildfly-10.1.0.Final/standalone/log/boot.log -Dlogging.configuration=file:/C:/Users/ervelden/bin/wildfly-10.1.0.Final/standalone/configuration/logging.properties -Djboss.home.dir=C:/Users/ervelden/bin/wildfly-10.1.0.Final -Dorg.jboss.logmanager.nocolor=true -Djboss.bind.address.management=localhost -Dfile.encoding=Cp1252 -classpath "C:\Users\ervelden\bin\wildfly-10.1.0.Final\jboss-modules.jar" org.jboss.modules.Main -mp C:/Users/ervelden/bin/wildfly-10.1.0.Final/modules org.jboss.as.standalone -b localhost --server-config=standalone.xml "-Djboss.server.base.dir=C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone"

"C:\Program Files\Java\jdk1.8.0_144\bin\javaw.exe" "-Dprogram.name=JBossTools: WildFly 10.x" -server -Xms64m -Xmx512m -Dorg.jboss.resolver.warning=true -Djava.net.preferIPv4Stack=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Dorg.jboss.boot.log.file=C:/Users/ervelden/bin/wildfly-10.1.0.Final/standalone/log/boot.log -Dlogging.configuration=file:/C:/Users/ervelden/bin/wildfly-10.1.0.Final/standalone/configuration/logging.properties -Djboss.home.dir=C:/Users/ervelden/bin/wildfly-10.1.0.Final -Dorg.jboss.logmanager.nocolor=true -Djboss.bind.address.management=localhost -Dfile.encoding=Cp1252 -classpath "C:\Users\ervelden\bin\wildfly-10.1.0.Final\jboss-modules.jar" org.jboss.modules.Main -mp C:/Users/ervelden/bin/wildfly-10.1.0.Final/modules org.jboss.as.standalone -b localhost --server-config=standalone.xml "-Djboss.server.base.dir=C:\Users\ervelden\bin\wildfly-10.1.0.Final\standalone"



/ 7	 ,

/ debug tests in wildfly-managed-with-repo


/ lees, 
/ getting started,

/ Lees,
https://stackoverflow.com/questions/37200349/arquillian-how-to-debug-managed-wildfly-container

/ Lees 
http://arquillian.org/guides/getting_started_rinse_and_repeat/#debug_a_managed_server

/ DEBUG ARQUILLIAN TESTS IN WILDFLY MANAGED

/ TODO eigen wildfly & JBOSS_HOME of wilfly uit repo


/ in getting_started
$ vi arquillian.xml
	<container qualifier="wildfly-managed-from-repo" default="true">
		<configuration>
			<property name="jbossHome">target/wildfly-10.1.0.Final</property>
			<property name="javaVmArguments">-Xrunjdwp:transport=dt_socket,address=8787,server=y,suspend=y</property>
		</configuration>
	</container>	
	
	<defaultProtocol type="Servlet 3.0"></defaultProtocol>
</arquillian>

/ NB. 
/ javaVmArguments en niet javaVMArguments
/ -Xrunjdwp:transport=dt_socket,address=8787,server=y,suspend=y en 
 /NIET -agentlib:jdwp=transport=dt_socket,suspend=y,address=localhost:8787

/ maak wildfly-managed-from-repo als default profile in getting_started's pom, 
/ RUN (niet debug) arquillian-getting_started-clean-from-repo

/ of in forge,
$ build test

/ Maak een debug config
GreeterTest-remote
/ project: arquillian-getting_started
localhost
8787
Debug

/ Hij valt in b in een test,

/ Welke processes zien we?
/ Als we RUN arquillian-getting_started-clean-from-repo	, dan zien we 3 processes:

"C:\Program Files\Java\jdk1.8.0_144\jre\bin\java"  -jar C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\surefire\surefirebooter7731977752730127863.jar C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\surefire\surefire155077827267301288tmp C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\surefire\surefire_03800009798293174160tmp

"C:\Program Files\Java\jdk1.8.0_144\bin\java" -D[Standalone] -Xrunjdwp:transport=dt_socket,address=8787,server=y,suspend=y -ea -Djboss.home.dir=C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\wildfly-10.1.0.Final -Dorg.jboss.boot.log.file=C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\wildfly-10.1.0.Final\standalone\log\server.log -Dlogging.configuration=file:C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\wildfly-10.1.0.Final\standalone\configuration\logging.properties -jar C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\wildfly-10.1.0.Final\jboss-modules.jar -mp C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\wildfly-10.1.0.Final\modules org.jboss.as.standalone -Djboss.home.dir=C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\wildfly-10.1.0.Final -Djboss.server.base.dir=C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\wildfly-10.1.0.Final\standalone -Djboss.server.log.dir=C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\wildfly-10.1.0.Final\standalone\log -Djboss.server.config.dir=C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started\target\wildfly-10.1.0.Final\standalone\configuration

"C:\Program Files\Java\jdk1.8.0_144\bin\javaw.exe" -Dmaven.home=EMBEDDED "-Dclassworlds.conf=C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\.metadata\.plugins\org.eclipse.m2e.launching\launches\m2conf3504095940121850127.tmp" "-Dmaven.multiModuleProjectDirectory=C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\arquillian-getting_started" -Dfile.encoding=Cp1252 -classpath /C:/Users/ervelden/eclipse/jbosstools-jee-oxygen/eclipse/../../../.p2/pool/plugins/org.eclipse.m2e.maven.runtime_1.8.0.20170516-2042/jars/plexus-classworlds-2.5.2.jar org.codehaus.plexus.classworlds.launcher.Launcher -Dexec.mainClass=org.demo.Main -B clean test

/ als we de attach doen met GreeterTest-remote, zien we geen extra process,
/ TODO 





/ 7	. 

/ debug tests in  wildfly-managed

/ in getting_started's pom set default profile wildfly-managed,

$ vi arquillian.xml

	<container qualifier="wildfly-managed-from-repo" default="false">

	<container qualifier="wildfly-managed" default="true">
		<configuration>
			<property name="javaVmArguments">-Xrunjdwp:transport=dt_socket,address=8787,server=y,suspend=y</property>
		</configuration>
	</container>	
	
	<defaultProtocol type="Servlet 3.0"></defaultProtocol>
	
/ dus set deze container config als default="true", en de andere false, net als de profiles in pom.xml,
/ RUN (niet debug) arquillian-getting_started-clean-test (met JBOSS_HOME in env), hij stopt en listens op 8787	,
/ DEBUG GreeterTester-remote, op 8787

/ in wildfly-managed mag GEEN jbossHome staan,

/ 7	. 

/ Dus in arquillian-forge, wildfly-managed, 

$ vi arquillian.xml

<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<arquillian xmlns="http://jboss.org/schema/arquillian" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd">
  <container default="true" qualifier="arquillian-wildfly-managed">
    <configuration>
      <property name="chameleonTarget">${chameleon.target}</property>
      <property name="javaVmArguments">-Xrunjdwp:transport=dt_socket,address=8787,server=y,suspend=y</property>
    </configuration>
  </container>
</arquillian>

/ in arquillian-forge's pom.xml hebben we arquillian-wildfly-managed profile default, 
/ RUN (niet debug) arquillian-forge-clean-test, hij stopt en listens to 8787
/ DEBUG MyServiceTester-remote, hij valt in b testStateless	,




/ 7	. 

/ de @PostConstruct  method is een @Stateful session bean is not exec in a CMT tx	, maar die in een @Stateful bean wel,

/ project arquillian-forge
/ run config arquillian-forge-clean-test
/ debug config MyServiceTest-remote

$ vi MyServiceTest.java

package service;

import javax.inject.Inject;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;

import org.jboss.arquillian.container.test.api.Deployment;
import org.jboss.arquillian.junit.Arquillian;
import org.jboss.shrinkwrap.api.ShrinkWrap;
import org.jboss.shrinkwrap.api.asset.EmptyAsset;
import org.jboss.shrinkwrap.api.spec.JavaArchive;
import org.junit.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;

import client.MyClient;
import client.MyClientWithSf;
import data.LanguageDao;
import domain.Language;

@RunWith(Arquillian.class)
public class MyServiceTest {
	
	@Inject 
	private LanguageDao languageDao;

	@Inject 
	private MyClient myClient;
	
	@Inject
	private MyClient myClienta;
	
	@Inject
	private MyClientWithSf myClientWithSf;
	
	@Inject
	private MyClientWithSf myClientWithSfa;
	
	
	@Deployment
	public static JavaArchive createDeployment() {
		return ShrinkWrap
				.create(JavaArchive.class)
				.addClasses(MyClient.class,MyService.class,Language.class,LanguageDao.class,MyClientWithSf.class,MySfService.class)
				.addAsManifestResource("META-INF/persistence.xml",
						"persistence.xml")
				.addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");
	}
	
	@Test
	public void testNumberOfLanguages() {
		Assert.assertEquals(3, languageDao.listLanguages().size());
		
	}

	@Test
	public void testStateless() {
		
		Assert.assertEquals(myClient, myClienta);
		
		MyService myService=myClient.getMyService();
		MyService myService2=myClient.getMyService2();
		Assert.assertNotEquals(myService, myService2);

		myService.setName("myClient");
		Assert.assertEquals("myClient", myService.getName());
		Assert.assertEquals("myClient", myService2.getName());

	}
	
	@Test
	public void testStateful() {
		
		Assert.assertEquals(myClientWithSf, myClientWithSfa);
		
		MySfService mySfService=myClientWithSf.getMySfService();
		MySfService mySfService2=myClientWithSf.getMySfService2();
		Assert.assertNotEquals(mySfService, mySfService2);
		
		EntityManager entityManager=mySfService.getEntityManager();
		EntityManager entityManager2=mySfService2.getEntityManager();
		Assert.assertNotEquals(entityManager, entityManager2);
		
		mySfService.init();
		mySfService2.init();
		
		mySfService.setName("myClientWithSf");
		Assert.assertEquals("myClientWithSf", mySfService.getName()); 
		Assert.assertNotEquals("myClientWithSf", mySfService2.getName());
		
		
		
	}
}

$ vi MyClient.java

package client;

import java.io.Serializable;

import javax.enterprise.context.RequestScoped;
import javax.enterprise.context.SessionScoped;
import javax.inject.Inject;

import service.MyService;


@RequestScoped
public class MyClient implements Serializable {

	private static final long serialVersionUID = 5971070511004775811L;
	
	@Inject
	private MyService myService;
	
	@Inject
	private MyService myService2;

	public MyService getMyService() {
		return myService;
	}

	public void setMyService(MyService myService) {
		this.myService = myService;
	}

	public MyService getMyService2() {
		return myService2;
	}

	public void setMyService2(MyService myService2) {
		this.myService2 = myService2;
	}
	
}

$ vi MyClientWithSf.java

package client;

import java.io.Serializable;

import javax.enterprise.context.RequestScoped;
import javax.enterprise.context.SessionScoped;
import javax.inject.Inject;

import service.MySfService;

@SessionScoped
public class MyClientWithSf implements Serializable{
	
	private static final long serialVersionUID = -5064925015578120304L;

	@Inject
	private MySfService mySfService;
	
	@Inject 
	private MySfService mySfService2;

	public MySfService getMySfService() {
		return mySfService;
	}

	public void setMySfService(MySfService mySfService) {
		this.mySfService = mySfService;
	}

	public MySfService getMySfService2() {
		return mySfService2;
	}

	public void setMySfService2(MySfService mySfService2) {
		this.mySfService2 = mySfService2;
	}
	
	
	

}


$ vi MyService.java

package service;

import javax.annotation.PostConstruct;
import javax.ejb.ConcurrencyManagement;
import javax.ejb.ConcurrencyManagementType;
import javax.ejb.Lock;
import javax.ejb.LockType;
import javax.ejb.Stateful;
import javax.ejb.Stateless;
import javax.inject.Singleton;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;

import domain.Language;

@Stateless
//@Stateful
//@Singleton
//@ConcurrencyManagement(ConcurrencyManagementType.CONTAINER)
public class MyService {
	
	@PersistenceContext
	private EntityManager entityManager;
	
	@PostConstruct
//	@Lock(LockType.WRITE)
	public void init() {
		Language  language=new Language();
		language.setName("Foo");
		entityManager.persist(language);
	}
	
	private String name;

	public String getName() {
		return name;
	}

	public void setName(String name) {
		this.name = name;
	}
}

$ vi MySfService.java

package service;

import javax.annotation.PostConstruct;
import javax.ejb.Stateful;
import javax.ejb.TransactionAttribute;
import javax.ejb.TransactionAttributeType;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;

import domain.Language;

@Stateful
public class MySfService {
	
	@PersistenceContext
	private EntityManager entityManager;
	
	@PostConstruct
//	@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
	public void ini() {
		Language  language=new Language();
		language.setName("Foo");
	}
	public void init() {
		Language  language=new Language();
		language.setName("Foo");
		entityManager.persist(language);
	}
	
	public EntityManager getEntityManager() {
		return entityManager;
	}


	private String name;

	public String getName() {
		return name;
	}

	public void setName(String name) {
		this.name = name;
	}

}

/ 7	. 

/ dingen die misgaan, TODO

/ in arquillian-rinse_and_repeat-clean-test

Environment
JBOSS_HOME C:\Users\ervelden\bin\wildfly-10.1.0.Final
/ MOET,

JRE
VM arguments
-Xrunjdwp=transport=dt_socket,address=8787,server=y,suspend=y	
/ ERR 	
/ Could not find agent library jdwp=transport=dt_socket,address=8787,server=y,suspend=y on the library path, with error: Can't find dependent libraries

-agentlib:jdwp=transport=dt_socket,suspend=y,address=localhost:8787
/ ERR 
ERROR: transport error 202: connect failed: Connection refused
ERROR: JDWP Transport dt_socket failed to initialize, TRANSPORT_INIT(510)
JDWP exit error AGENT_ERROR_TRANSPORT_INIT(197): No transports initialized [debugInit.c:750]



/ Einde ARQUILLIAN MISC

/ STATEFUL STATELESS THEORY

/ 7	. 

/ google: javaee @singleton @stateless

https://stackoverflow.com/questions/37748693/same-result-from-stateful-stateless-and-singleton-ejb-beans

@Stateful - Stateful session beans have timeouts, so you should never inject a stateful session bean into a long-lived object such as a servlet. Instead, you should only look them up and use them (possibly by inserting the reference into an HttpSession). The expected result is the bean instance and its counter will be shared by all requests, and if you make concurrent requests, each one will block waiting for access to the stateful session bean (try adding a sleep to the getCounter method, and then make requests from multiple browser tabs/windows). If you do not make a request for some amount of time, the bean will be removed, which will cause all subsequent requests to fail; you can use @StatefulTimeout(value=1, unit=TimeUnit.SECONDS) to easily observe this.
@Singleton - The bean instance and its counter will be shared by all requests. By default, singletons use container-managed concurrency, so only one request at a time will be allowed in a method. Again, you can add a sleep to the getCounter method to observe this.
@Stateless - Depending on your application server's pooling configuration, multiple bean instances might be created as needed for concurrent requests and bean instances might be reused across requests. Again, you can add a sleep to the getCounter method and make requests from multiple browser tabs/windows to observe this. Stateless session beans are intended to be used to encapsulate other EJB services (e.g., transactions, security, scheduling, etc.), so member variables should only be used to cache state that can be used regardless of the client (e.g., caching references to DataSource, UserTransaction, etc.), not to store state.

/ 7	. 

/ google: stateful sessionscoped
/ Lees,
http://adambien.blog/roller/abien/entry/stateful_vs_sessionscoped
https://stackoverflow.com/questions/26265281/stateful-and-sessionscoped-difference-and-when-to-use-them-correctly
->
https://stackoverflow.com/questions/24105807/differences-sessionscoped-vs-stateful-and-applicationscoped-vs-singleton
https://stackoverflow.com/questions/7946589/ejb-example-for-stateless-and-stateful-beans-difference?rq=1

	
Just to add a rationale behind 'SFSB should not be injected into a servlet' - because the servlet instance is created only once for all requests, you will end with only one SFSB injected into the servlet. If you want 1 SFSB per user you should do JNDI lookup for every new user and store a reference to it in the user session. Doing the JNDI lookup for SFSB is guaranteed to return a fresh instance each time. 

https://stackoverflow.com/questions/18000431/when-to-use-stateful-session-bean-over-stateless-session-bean
https://stackoverflow.com/questions/8887140/jsf-request-scoped-bean-keeps-recreating-new-stateful-session-beans-on-every-req / (*)
-> (1)
https://stackoverflow.com/questions/5809855/why-stateless-session-beans/31639830#31639830

/ (*)
Stateful session beans (SFSB) are not exactly what you think they are. You seem to think that they behave somehow like session scoped JSF managed beans. This is untrue. The term "session" in EJBs has an entirely different meaning than the HTTP session which you've had in mind.

The "session" in EJBs must be interpreted in transactional context. The transaction (basically, the DB session) lives in case of SFSB as long as the client lives. The SFSB's client is in your particular example not the webbrowser, but the JSF managed bean instance itself, exactly the one where the SFSB is been injected. Since you have put the JSF managed bean in the request scope, the SFSB will be recreated on every HTTP request together with the JSF managed bean.

As an example, try to put the JSF managed bean in the view scope. The view scope is useful for a multi-step form on the same page, for example. Everytime when the view postbacks to itself, then the same JSF managed bean instance will be reused and this instance gives you access to the same instance of the SFSB as it is when the bean was created, which is not shared elsewhere. The SFSB transaction lives as long as the client (the view scoped JSF managed bean) lives.

A stateless session bean (SLSB) can be shared elsewhere, but that shouldn't matter as it's intented to be treated as stateless anyway. This "feature" saves the container time and memory to create and store them. The container can just have a pool of them. Even more, the SLSB instance which is been injected in a view, session or application scoped JSF managed bean does not necessarily need to refer exactly the same instance on every HTTP request as it was during JSF managed bean's creation. It can even be a completely different instance, depending on the available instances in the container's pool. The transaction lives (by default) as long as a single method call on the SLSB.

That said, a SFSB is unsuitable for your particular case of "remembering a logged-in user". That it's "more secure" makes really no sense. Just put the JSF managed bean in the session scope and let it remember the logged-in user by itself and make use of a SLSB to do any business actions (such as interacting with the DB) and use SFSB only when you want a real stateful session bean (I assume that you now understand what exactly they are :) ).
/ (*) de scope van een sfsb is die van de injector, dus als dat een request scoped cdi bean is , heeft de sfsb de request scope, en leeft de tx zo lang, TODO
/ de slsb's tx leeft zo lang als de method, 
/ verschil servlet en jsf (of cdi) managed bean TODO
/ Einde STATEFUL STATELESS 

/ google: 
/ lees	,
https://stackoverflow.com/questions/10872273/servlet-vs-beans
With JSF, you're basically already using a servlet, the FacesServlet which you've most likely already registered in the web.xml yourself in order to get JSF to run. It's exactly that servlet which removes the need to write a bunch of servlets to perform repeated tasks such as gathering the request parameters, converting/validating them, updating javabean properties, invoking actions and navigating to the right view.

In JSF you do not need to create additional servlets to perform those tasks. You just create and declare a managed bean as a controller which in turn holds a simple javabean class as model which get bound to UI components in the view.

But sometimes JSF is overkill or too hard whenever one has never learnt JSF before and just want two, three or four web pages with only a contact form. JSF has a relatively steep learning curve, which requires a solid understanding of HTTP servlets as well. With "plain vanilla" servlets and JSP it's then easier to develop. But whenever the site grows out of its borders and you start copypasting/refactoring the common tasks, you'd be happy if you had chosen a MVC framework beforehand.

/ dus jsf managed beans of cdi beans zijn de controllers van de components,	 er is 1 servlet die de hoofdcontroller is, daar komt alles binnen,
/ je kunt ook verschillende @WebServlet(<path>) maken (verschillende paden), dan gaan de requests direct naar die servlets, die dan WH controllers zijn van forms of buttons	, en de view is dan een page met dat path,

/ TODO we set @SessionScoped op een jsf (cdi) bean. We kunnen als we met Servlets program ook @SessionScoped op de Servlet set, de FacesServlet wordt 1 keer create, heeft @ApplicationScope in feite, en hij geeft alles door 	,

/ in een jsf bean doe je @ManagedBean @SessionScoped	, maar in een CDI bean alleen @SessionScoped	, 
/ TODO

-> (2)
/ lees,
https://stackoverflow.com/questions/13011392/jsf-service-layer/13012973#13012973

The service layer (the business model) should be designed around the main entity (the data model). E.g. UserService for User, ProductService for Product, OrderService for Order, etc. You should absolutely not have one huge service class or so. That's extreme tight coupling.

As to the service layer API itself, Java EE 6 offers EJB 3.1 as service layer API. In the dark J2EE ages, long time ago when EJB 2.0 was terrible to develop with, Spring was more often been used as service layer API. Some still use it nowadays, but since Java EE 6 has incorporated all the nice lessons learnt from Spring, it has become superfluous. Note that EJB (and JPA) is not available in barebones servletcontainers such as Tomcat. You'd need to install for example OpenEJB on top of it (or just upgrade to TomEE).

Regardless of the service layer API choice, best would be to keep your JSF backing bean (action)listener methods as slick as possible by performing the business job entirely in the service layer. Note that the service layer should by itself not have any JSF dependencies. So any (in)direct imports of javax.faces.* in the service layer code indicates bad design. You should keep the particular code lines in the backing bean (it's usually code which adds a faces message depending on the service call result). This way the service layer is reuseable for other front ends, such as JAX-RS or even plain servlets.

You should understand that the main advantage of the service layer in a Java EE application is the availability of container managed transactions. One service method call on a @Stateless EJB counts effectively as a single DB transaction. So if an exception occurs during one of any DAO operations using @PersistenceContext EntityManager which is invoked by the service method call, then a complete rollback will be triggered. This way you end up with a clean DB state instead of a dirty DB state because for example the first DB manipulation query succeeded, but the second not.

/ de jsf managed bean (cdi bean) is controller en part of mvc, de service bean is back-end , en dan is er ook de dao,

->
https://stackoverflow.com/questions/8459903/creating-master-detail-pages-for-entities-how-to-link-them-and-which-bean-scope
->
https://stackoverflow.com/questions/30639785/jsf-controller-service-and-dao

https://stackoverflow.com/questions/9384368/access-existing-instance-stateful-inside-stateless-java-ee-6

http://www.baeldung.com/ejb-session-beans

https://blogs.oracle.com/developers/testing-java-ee-7-applications-in-docker-with-arquillian-cube

/ Einde STATEFUL STATELESS THEORY

/ STATEFUL STATELESS CODING

/ 7	. 

/ workspace-jbosstools-jee-oxygen
/ project arquillian-forge,
/ arquillian-wildfly-managed default profile
/ run config arquillian-forge clean test
/ debug config GreeterTester-remote

$ vi src/test/resources/arquillian.xml

<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<arquillian xmlns="http://jboss.org/schema/arquillian" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd">
  <container default="true" qualifier="arquillian-wildfly-managed">
    <configuration>
      <property name="chameleonTarget">${chameleon.target}</property>
      <property name="javaVmArguments">-Xrunjdwp:transport=dt_socket,address=8787,server=y,suspend=y</property>
    </configuration>
  </container>
</arquillian>

/ InvocationTargetException,




/ Einde STATEFUL STATELESS CODING

/ QUICKSTARTS

/ we hebben in workspace-jbosstools-jee-oxygen wildfly-swarm examples, 
/ maar er zijn ook de wildfly quickstarts,
C:\Users\ervelden\java>git clone https://github.com/wildfly/quickstart.git
 
/ Einde QUICKSTARTS

/ TOMCAT 7 WINDOWS DEBUG

/ google:
tomcat 7 windows debug mode
/ Lees,
https://bowerstudios.com/node/983



/ Einde TOMCAT 7 WINDOWS DEBUG

/ APACHE CXF

/ we extract,
C:\Users\ervelden\java\apache-cxf-3.2.0-src>

/ we maken workspace
workspace-jbosstools-jee-oxygen-cxf	,

/ we hebben C:\Users\ervelden\java\apache-cxf-3.2.0-src
/ met C:\Users\ervelden\java\apache-cxf-3.2.0-src\distribution\src\main\release\samples

/ we copy deze in de workspace-jbosstools-jee-oxygen-cxf en we import in eclipse,

/ we probeerden cxf source te build in eclipse, maar ERR met {maven.home} in maven-invoker-plugin
/ TODO
/ Lees,
https://bugs.eclipse.org/bugs/show_bug.cgi?id=341120

/ we installed mvn , 
C:\Users\ervelden\bin\apache-maven-3.5.0
/ In eclipse, helemaal onderin de run configs staat Maven runtime; voor bestaande run configs moeten we deze veranderen. 

/ we probeerden
$ mvn
[INFO] Apache CXF Command Line Tools CORBA ................ FAILURE [ 15.739 s]
/ open in eclipse, 
cxf
	tools
		corba
			target
				surefire-reports
					TEST-org.apache.cxf.tools.corba.WSDLToIDLTest.xml
/ in eclipse kun je click op al deze tests,
je ziet dan in JUnit view een groene of rode balk, met daaronder de tests, je ziet welke test failed: testMissingBindingName

/ we install binary cxf	,
C:\Users\ervelden\bin\apache-cxf-3.2.0



/ 	7 .

/ cxf source heeft dezelfde opzet als jaxb source, 

cxf
	distribution
		src/main/release/samples
			java_first_jaxws
				pom.xml

/ er is ook,
C:\Users\ervelden\java\apache-cxf-3.2.0-src\maven-plugins\archetypes\cxf-jaxws-javafirst
/ TODO

/ 7	 .

/ lees,
http://cxf.apache.org/docs/overview.html

/ we zien de link 'How do I develop a service?'
http://cxf.apache.org/docs/how-do-i-develop-a-service.html

/ we zien links,
A simple JAX-WS service
Developing a JAX-WS service
http://cxf.apache.org/docs/developing-a-service.html

/ in samples\README.txt lezen we dat $ mvn clean install een WAR creates, die we kunnen deploy in tomcat, 

/ we zijn in samples\wsdl-first, en lezen de README.txt

/ we maken run config $ mvn -Pserver	, 
/ we zien in eclipse in wsdl_first\target\generated-sources 
/ want in pom.xml zien we dat server profile goal test heeft, en generate-sources is daar ver voor,

/ 7	. 

/ verschil primitive en class -> minOccurs,
int i
/ maps naar <xs:element name="i" type="xs:int"/> 
Integer i
/ maps naar 
<xs:element minOccurs="0" name="i" type="xs:int"/>

/ een List -> maxOccurs="unbounded"

$ vi CustomerService.wsdl
/ TODO 

/ 7	. 

/ in wsdl_first, 

$ mvn -Pserver

[INFO] Scanning for projects...
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building WSDL first demo using Document/Literal Style 3.2.0
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- cxf-codegen-plugin:3.2.0:wsdl2java (generate-sources) @ wsdl_first ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ wsdl_first ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 5 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.6.2:compile (default-compile) @ wsdl_first ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ wsdl_first ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory C:\Users\ervelden\java\apache-cxf-3.2.0-src\distribution\src\main\release\samples\wsdl_first\src\test\resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.6.2:testCompile (default-testCompile) @ wsdl_first ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ wsdl_first ---
[INFO] No tests to run.
[INFO] 
[INFO] >>> exec-maven-plugin:1.2:java (default) > validate @ wsdl_first >>>
[INFO] 
[INFO] <<< exec-maven-plugin:1.2:java (default) < validate @ wsdl_first <<<
[INFO] 
[INFO] 
[INFO] --- exec-maven-plugin:1.2:java (default) @ wsdl_first ---
Starting Server
okt 18, 2017 12:04:41 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing org.apache.cxf.bus.spring.BusApplicationContext@79d19294: startup date [Wed Oct 18 12:04:41 GMT+01:00 2017]; root of context hierarchy
okt 18, 2017 12:04:41 PM org.apache.cxf.bus.spring.BusApplicationContext getConfigResources
INFO: Loaded configuration file cxf.xml.
okt 18, 2017 12:04:41 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [META-INF/cxf/cxf.xml]
okt 18, 2017 12:04:41 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [cxf.xml]
okt 18, 2017 12:04:41 PM org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean buildServiceFromClass
INFO: Creating Service {http://server.customerservice.example.com/}CustomerServiceImplService from class com.example.customerservice.CustomerService
okt 18, 2017 12:04:41 PM org.apache.cxf.endpoint.ServerImpl initDestination
INFO: Setting the server's publish address to be http://localhost:9090/CustomerServicePort
okt 18, 2017 12:04:41 PM org.eclipse.jetty.util.log.Log initialized
INFO: Logging initialized @3558ms to org.eclipse.jetty.util.log.Slf4jLog
okt 18, 2017 12:04:42 PM org.eclipse.jetty.server.Server doStart
INFO: jetty-9.4.6.v20170531
okt 18, 2017 12:04:42 PM org.eclipse.jetty.server.handler.AbstractHandler doStart
WARNING: No Server set for org.apache.cxf.transport.http_jetty.JettyHTTPServerEngine$1@56d7dcb5
okt 18, 2017 12:04:42 PM org.eclipse.jetty.server.AbstractConnector doStart
INFO: Started ServerConnector@3b1a61e3{HTTP/1.1,[http/1.1]}{localhost:9090}
okt 18, 2017 12:04:42 PM org.eclipse.jetty.server.Server doStart
INFO: Started @3896ms
okt 18, 2017 12:04:42 PM org.eclipse.jetty.server.handler.ContextHandler setContextPath
WARNING: Empty contextPath
okt 18, 2017 12:04:42 PM org.eclipse.jetty.server.handler.ContextHandler doStart
INFO: Started o.e.j.s.h.ContextHandler@402e6c04{/,null,AVAILABLE}
Server ready...

$ mvn -Pclient

okt 18, 2017 12:04:52 PM org.apache.cxf.services.CustomerServiceImplService.CustomerServiceImplPort.CustomerService
INFO: Inbound Message
----------------------------
ID: 1
Address: http://localhost:9090/CustomerServicePort
Encoding: UTF-8
Http-Method: POST
Content-Type: text/xml; charset=UTF-8
Headers: {Accept=[*/*], Cache-Control=[no-cache], connection=[keep-alive], Content-Length=[224], content-type=[text/xml; charset=UTF-8], Host=[localhost:9090], Pragma=[no-cache], SOAPAction=[""], User-Agent=[Apache-CXF/3.2.0]}
Payload: 
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
	<soap:Body>
		<ns2:getCustomersByName xmlns:ns2="http://customerservice.example.co">
			<name>Smith</name>
		</ns2:getCustomersByName>
	</soap:Body>
</soap:Envelope>
--------------------------------------
okt 18, 2017 12:04:52 PM org.apache.cxf.services.CustomerServiceImplService.CustomerServiceImplPort.CustomerService
INFO: Outbound Message
---------------------------
ID: 1
Response-Code: 200
Encoding: UTF-8
Content-Type: text/xml
Headers: {}
Payload: 
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
	<soap:Body>
		<ns2:getCustomersByNameResponse xmlns:ns2="http://customerservice.example.com/">
			<return>
				<customerId>0</customerId>
				<name>Smith</name>
				<address>Pine Street 200</address>
				<numOrders>1</numOrders>
				<revenue>10000.0</revenue>
				<test>1.5</test>
				<birthDate>2009-02-01+01:00</birthDate>
				<type>BUSINESS</type>
			</return>
			<return>
				<customerId>0</customerId>
				<name>Smith</name>
				<address>Pine Street 200</address>
				<numOrders>1</numOrders>
				<revenue>10000.0</revenue>
				<test>1.5</test>
				<birthDate>2009-02-01+01:00</birthDate>
				<type>BUSINESS</type>
			</return>
		</ns2:getCustomersByNameResponse>
	</soap:Body>
</soap:Envelope>
--------------------------------------
okt 18, 2017 12:04:52 PM org.apache.cxf.services.CustomerServiceImplService.CustomerServiceImplPort.CustomerService
INFO: Inbound Message
----------------------------
ID: 2
Address: http://localhost:9090/CustomerServicePort
Encoding: UTF-8
Http-Method: POST
Content-Type: text/xml; charset=UTF-8
Headers: {Accept=[*/*], Cache-Control=[no-cache], connection=[keep-alive], Content-Length=[223], content-type=[text/xml; charset=UTF-8], Host=[localhost:9090], Pragma=[no-cache], SOAPAction=[""], User-Agent=[Apache-CXF/3.2.0]}
Payload: 
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
	<soap:Body>
		<ns2:getCustomersByName xmlns:ns2="http://customerservice.example.com/">
			<name>None</name>
		</ns2:getCustomersByName>
	</soap:Body>
</soap:Envelope>
--------------------------------------
okt 18, 2017 12:04:52 PM org.apache.cxf.phase.PhaseInterceptorChain doDefaultLogging
INFO: Application {http://server.customerservice.example.com/}CustomerServiceImplService#{http://customerservice.example.com/}getCustomersByName has thrown exception, unwinding now: com.example.customerservice.NoSuchCustomerException: Did not find any matching customer for name=None
okt 18, 2017 12:04:52 PM org.apache.cxf.services.CustomerServiceImplService.CustomerServiceImplPort.CustomerService
INFO: Inbound Message
----------------------------
ID: 3
Address: http://localhost:9090/CustomerServicePort
Encoding: UTF-8
Http-Method: POST
Content-Type: text/xml; charset=UTF-8
Headers: {Accept=[*/*], Cache-Control=[no-cache], connection=[keep-alive], Content-Length=[285], content-type=[text/xml; charset=UTF-8], Host=[localhost:9090], Pragma=[no-cache], SOAPAction=[""], User-Agent=[Apache-CXF/3.2.0]}
Payload: 
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
	<soap:Body>
		<ns2:updateCustomer xmlns:ns2="http://customerservice.example.com/">
			<customer>
				<customerId>0</customerId>
				<name>Smith</name>
				<revenue>0.0</revenue>
			</customer>
		</ns2:updateCustomer>
	</soap:Body>
</soap:Envelope>
--------------------------------------
update request was received
Customer was 

/ we zien in SOAP UI in de requests:
http://localhost:9090/CustomerServicePort



/ 7	. 

$ mvn -Pserver
$ mvn -Pclient
/ we kunnen ook in SOAP UI,
File, new SOAP project		/ of click SOAP button,
Project name: wsdl_first
Initial WSDL: C:\Users\ervelden\java\apache-cxf-3.2.0-src\distribution\src\main\release\samples\wsdl_first\src\main\resources\CustomerService.wsdl
/ in eclipse, right click CustomerService.wsdl, properties
/ dan zien we,
wsdl_first
	CustomerServiceServiceSoapBinding
		getCustomersByName	
			Request 1
		updateCustomer
			Request 1
		
/ de 1ste Request 1	,		
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:cus="http://customerservice.example.com/">
   <soapenv:Header/>
   <soapenv:Body>
      <cus:getCustomersByName>
         <!--Optional:-->
         <name>?</name>
      </cus:getCustomersByName>
   </soapenv:Body>
</soapenv:Envelope>

/ de 2de Request 1,
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:cus="http://customerservice.example.com/">
   <soapenv:Header/>
   <soapenv:Body>
      <cus:updateCustomer>
         <!--Optional:-->
         <customer>
            <customerId>?</customerId>
            <!--Optional:-->
            <name>?</name>
            <!--Zero or more repetitions:-->
            <address>?</address>
            <!--Optional:-->
            <numOrders>?</numOrders>
            <revenue>?</revenue>
            <!--Optional:-->
            <test>?</test>
            <!--Optional:-->
            <birthDate>?</birthDate>
            <!--Optional:-->
            <type>?</type>
         </customer>
      </cus:updateCustomer>
   </soapenv:Body>
</soapenv:Envelope>

/ we maken de 1ste 'embedded jetty' request,
URL: http://localhost:9090/CustomerServicePort

<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:cus="http://customerservice.example.com/">
   <soapenv:Header/>
   <soapenv:Body>
      <cus:getCustomersByName>
         <!--Optional:-->
         <name>Smith</name>
      </cus:getCustomersByName>
   </soapenv:Body>
</soapenv:Envelope>

/ response,

<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns2:getCustomersByNameResponse xmlns:ns2="http://customerservice.example.com/">
         <return>
            <customerId>0</customerId>
            <name>Smith</name>
            <address>Pine Street 200</address>
            <numOrders>1</numOrders>
            <revenue>10000.0</revenue>
            <test>1.5</test>
            <birthDate>2009-02-01+01:00</birthDate>
            <type>BUSINESS</type>
         </return>
         <return>
            <customerId>0</customerId>
            <name>Smith</name>
            <address>Pine Street 200</address>
            <numOrders>1</numOrders>
            <revenue>10000.0</revenue>
            <test>1.5</test>
            <birthDate>2009-02-01+01:00</birthDate>
            <type>BUSINESS</type>
         </return>
      </ns2:getCustomersByNameResponse>
   </soap:Body>
</soap:Envelope>

/ we maken de 2de 'embedded jetty' request,
/ URL: http://localhost:9090/CustomerServicePort

<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:cus="http://customerservice.example.com/">
   <soapenv:Header/>
   <soapenv:Body>
      <cus:updateCustomer>
         <!--Optional:-->
         <customer>
            <customerId>0</customerId>
            <!--Optional:-->
            <name>Smith</name>
           
            <revenue>0</revenue>
            
         </customer>
      </cus:updateCustomer>
   </soapenv:Body>
</soapenv:Envelope>

/ we zien geen antwoord in SOAP UI, maar aan de server kant in eclipse's console zien we,
...
update request was received
Customer was updated

/ 7	. 

/ wsdl_first

/ war

/ lees,
https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html
...
package
...

/ Omdat in de pom.xml <package>war</package>	, zien we hieronder:
[INFO] --- maven-war-plugin:2.1:war (default-war) @ wsdl_first ---

$ mvn clean install

/ we zien, 

[INFO] Scanning for projects...
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Building WSDL first demo using Document/Literal Style 3.2.0
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ wsdl_first ---
[INFO] Deleting C:\Users\ervelden\java\apache-cxf-3.2.0-src\distribution\src\main\release\samples\wsdl_first\target
[INFO] 
[INFO] --- cxf-codegen-plugin:3.2.0:wsdl2java (generate-sources) @ wsdl_first ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ wsdl_first ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 5 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.6.2:compile (default-compile) @ wsdl_first ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 19 source files to C:\Users\ervelden\java\apache-cxf-3.2.0-src\distribution\src\main\release\samples\wsdl_first\target\classes
[INFO] /C:/Users/ervelden/java/apache-cxf-3.2.0-src/distribution/src/main/release/samples/wsdl_first/src/main/java/com/example/customerservice/server/CustomerServiceServer.java: Some input files use or override a deprecated API.
[INFO] /C:/Users/ervelden/java/apache-cxf-3.2.0-src/distribution/src/main/release/samples/wsdl_first/src/main/java/com/example/customerservice/server/CustomerServiceServer.java: Recompile with -Xlint:deprecation for details.
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ wsdl_first ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory C:\Users\ervelden\java\apache-cxf-3.2.0-src\distribution\src\main\release\samples\wsdl_first\src\test\resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.6.2:testCompile (default-testCompile) @ wsdl_first ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ wsdl_first ---
[INFO] No tests to run.
[INFO] 
[INFO] --- maven-war-plugin:2.1:war (default-war) @ wsdl_first ---
[INFO] Packaging webapp
[INFO] Assembling webapp [wsdl_first] in [C:\Users\ervelden\java\apache-cxf-3.2.0-src\distribution\src\main\release\samples\wsdl_first\target\wsdl_first]
[INFO] Processing war project
[INFO] Copying webapp webResources [C:\Users\ervelden\java\apache-cxf-3.2.0-src\distribution\src\main\release\samples\wsdl_first\src/main/resources] to [C:\Users\ervelden\java\apache-cxf-3.2.0-src\distribution\src\main\release\samples\wsdl_first\target\wsdl_first]
[INFO] Copying webapp resources [C:\Users\ervelden\java\apache-cxf-3.2.0-src\distribution\src\main\release\samples\wsdl_first\src\main\webapp]
[INFO] Webapp assembled in [207 msecs]
[INFO] Building war: C:\Users\ervelden\java\apache-cxf-3.2.0-src\distribution\src\main\release\samples\wsdl_first\target\wsdl_first.war
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ wsdl_first ---
[INFO] Installing C:\Users\ervelden\java\apache-cxf-3.2.0-src\distribution\src\main\release\samples\wsdl_first\target\wsdl_first.war to C:\Users\ervelden\.m2\repository\org\apache\cxf\samples\wsdl_first\3.2.0\wsdl_first-3.2.0.war
[INFO] Installing C:\Users\ervelden\java\apache-cxf-3.2.0-src\distribution\src\main\release\samples\wsdl_first\pom.xml to C:\Users\ervelden\.m2\repository\org\apache\cxf\samples\wsdl_first\3.2.0\wsdl_first-3.2.0.pom
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 4.707 s
[INFO] Finished at: 2017-10-18T13:27:25+01:00
[INFO] Final Memory: 29M/178M
[INFO] ------------------------------------------------------------------------

/ 7	. 

/ we zien de war in target\, 

C:\Users\ervelden>jar tvf C:\Users\ervelden\java\apache-cxf-3.2.0-src\distribution\src\main\release\samples\wsdl_first\target\ws
dl_first.war
   128 Wed Oct 18 13:27:24 GMT+01:00 2017 META-INF/MANIFEST.MF
   908 Wed Oct 18 13:27:24 GMT+01:00 2017 WEB-INF/classes/binding.xml
  2599 Wed Oct 18 13:27:24 GMT+01:00 2017 WEB-INF/classes/client-applicationContext.xml
  1718 Wed Oct 18 13:27:26 GMT+01:00 2017 WEB-INF/classes/com/example/customerservice/client/CustomerServiceClient.class
  1130 Wed Oct 18 13:27:26 GMT+01:00 2017 WEB-INF/classes/com/example/customerservice/client/CustomerServiceSpringClient.class
  2580 Wed Oct 18 13:27:26 GMT+01:00 2017 WEB-INF/classes/com/example/customerservice/client/CustomerServiceTester.class
  2954 Wed Oct 18 13:27:24 GMT+01:00 2017 WEB-INF/classes/com/example/customerservice/Customer.class
  1284 Wed Oct 18 13:27:24 GMT+01:00 2017 WEB-INF/classes/com/example/customerservice/CustomerService.class
  3037 Wed Oct 18 13:27:26 GMT+01:00 2017 WEB-INF/classes/com/example/customerservice/CustomerServiceService.class
  1394 Wed Oct 18 13:27:24 GMT+01:00 2017 WEB-INF/classes/com/example/customerservice/CustomerType.class
   826 Wed Oct 18 13:27:26 GMT+01:00 2017 WEB-INF/classes/com/example/customerservice/GetCustomersByName.class
  1052 Wed Oct 18 13:27:26 GMT+01:00 2017 WEB-INF/classes/com/example/customerservice/GetCustomersByNameResponse.class
   931 Wed Oct 18 13:27:24 GMT+01:00 2017 WEB-INF/classes/com/example/customerservice/NoSuchCustomer.class
  1457 Wed Oct 18 13:27:24 GMT+01:00 2017 WEB-INF/classes/com/example/customerservice/NoSuchCustomerException.class
  3640 Wed Oct 18 13:27:26 GMT+01:00 2017 WEB-INF/classes/com/example/customerservice/ObjectFactory.class
   268 Wed Oct 18 13:27:24 GMT+01:00 2017 WEB-INF/classes/com/example/customerservice/package-info.class
  3159 Wed Oct 18 13:27:26 GMT+01:00 2017 WEB-INF/classes/com/example/customerservice/server/CustomerServiceImpl.class
  1816 Wed Oct 18 13:27:26 GMT+01:00 2017 WEB-INF/classes/com/example/customerservice/server/CustomerServiceServer.class
   821 Wed Oct 18 13:27:26 GMT+01:00 2017 WEB-INF/classes/com/example/customerservice/server/CustomerServiceSpringServer.class
   889 Wed Oct 18 13:27:26 GMT+01:00 2017 WEB-INF/classes/com/example/customerservice/UpdateCustomer.class
  6359 Wed Oct 18 13:27:24 GMT+01:00 2017 WEB-INF/classes/CustomerService.wsdl
  1891 Wed Oct 18 13:27:24 GMT+01:00 2017 WEB-INF/classes/cxf.xml
  1111 Wed Oct 18 13:27:26 GMT+01:00 2017 WEB-INF/classes/org/w3/_2001/xmlschema/Adapter1.class
  1103 Wed Oct 18 13:27:24 GMT+01:00 2017 WEB-INF/classes/org/w3/_2001/xmlschema/Adapter2.class
  2788 Wed Oct 18 13:27:24 GMT+01:00 2017 WEB-INF/classes/server-applicationContext.xml
  6359 Wed Sep 06 11:19:56 GMT+01:00 2017 WEB-INF/CustomerService.wsdl
  1767 Wed Sep 06 11:19:56 GMT+01:00 2017 WEB-INF/cxf-servlet.xml
 53259 Tue Oct 10 20:22:52 GMT+01:00 2017 WEB-INF/lib/asm-5.2.jar
1379614 Tue Oct 17 13:33:40 GMT+01:00 2017 WEB-INF/lib/cxf-core-3.2.0.jar
181600 Tue Oct 17 13:33:54 GMT+01:00 2017 WEB-INF/lib/cxf-rt-bindings-soap-3.2.0.jar
 38238 Tue Oct 17 12:00:32 GMT+01:00 2017 WEB-INF/lib/cxf-rt-bindings-xml-3.2.0.jar
104124 Tue Oct 17 13:33:50 GMT+01:00 2017 WEB-INF/lib/cxf-rt-databinding-jaxb-3.2.0.jar
 31632 Tue Oct 10 20:26:04 GMT+01:00 2017 WEB-INF/lib/cxf-rt-features-metrics-3.2.0.jar
343908 Tue Oct 17 12:02:38 GMT+01:00 2017 WEB-INF/lib/cxf-rt-frontend-jaxws-3.2.0.jar
103824 Tue Oct 17 12:02:04 GMT+01:00 2017 WEB-INF/lib/cxf-rt-frontend-simple-3.2.0.jar
 75598 Tue Oct 17 11:59:52 GMT+01:00 2017 WEB-INF/lib/cxf-rt-management-3.2.0.jar
355875 Tue Oct 17 12:01:02 GMT+01:00 2017 WEB-INF/lib/cxf-rt-transports-http-3.2.0.jar
 75372 Tue Oct 17 12:02:16 GMT+01:00 2017 WEB-INF/lib/cxf-rt-ws-addr-3.2.0.jar
214001 Tue Oct 17 12:00:42 GMT+01:00 2017 WEB-INF/lib/cxf-rt-ws-policy-3.2.0.jar
173334 Tue Oct 17 13:33:44 GMT+01:00 2017 WEB-INF/lib/cxf-rt-wsdl-3.2.0.jar
 11573 Tue Oct 10 20:26:04 GMT+01:00 2017 WEB-INF/lib/cxf-xjc-runtime-2.6.0.jar
 45024 Tue Aug 08 15:37:58 GMT+01:00 2017 WEB-INF/lib/hamcrest-core-1.3.jar
 16515 Thu Aug 10 13:57:00 GMT+01:00 2017 WEB-INF/lib/jcl-over-slf4j-1.7.25.jar
314932 Tue Aug 08 15:37:58 GMT+01:00 2017 WEB-INF/lib/junit-4.12.jar
128577 Tue Oct 10 20:26:04 GMT+01:00 2017 WEB-INF/lib/metrics-core-3.2.0.jar
 74510 Tue Oct 10 20:22:56 GMT+01:00 2017 WEB-INF/lib/neethi-3.1.0.jar
 41203 Thu Aug 10 13:57:00 GMT+01:00 2017 WEB-INF/lib/slf4j-api-1.7.25.jar
  8460 Tue Oct 10 20:22:48 GMT+01:00 2017 WEB-INF/lib/slf4j-jdk14-1.7.25.jar
380667 Thu Aug 10 13:56:56 GMT+01:00 2017 WEB-INF/lib/spring-aop-4.3.10.RELEASE.jar
763052 Thu Aug 10 13:57:00 GMT+01:00 2017 WEB-INF/lib/spring-beans-4.3.10.RELEASE.jar
1140861 Thu Aug 10 13:56:56 GMT+01:00 2017 WEB-INF/lib/spring-context-4.3.10.RELEASE.jar
1122794 Thu Aug 10 13:57:04 GMT+01:00 2017 WEB-INF/lib/spring-core-4.3.10.RELEASE.jar
263371 Thu Aug 10 13:57:02 GMT+01:00 2017 WEB-INF/lib/spring-expression-4.3.10.RELEASE.jar
822491 Wed Aug 09 11:48:16 GMT+01:00 2017 WEB-INF/lib/spring-web-4.3.10.RELEASE.jar
161867 Fri Sep 01 11:51:30 GMT+01:00 2017 WEB-INF/lib/stax2-api-3.1.4.jar
512742 Tue Oct 10 20:22:54 GMT+01:00 2017 WEB-INF/lib/woodstox-core-5.0.3.jar
186758 Fri Sep 01 13:58:48 GMT+01:00 2017 WEB-INF/lib/wsdl4j-1.6.3.jar
 84091 Sun Sep 03 19:02:02 GMT+01:00 2017 WEB-INF/lib/xml-resolver-1.2.jar
172962 Tue Oct 10 20:22:54 GMT+01:00 2017 WEB-INF/lib/xmlschema-core-2.2.2.jar
  1624 Wed Sep 06 11:19:56 GMT+01:00 2017 WEB-INF/web.xml
 12154 Wed Sep 06 11:19:56 GMT+01:00 2017 META-INF/maven/org.apache.cxf.samples/wsdl_first/pom.xml
   128 Wed Oct 18 13:27:26 GMT+01:00 2017 META-INF/maven/org.apache.cxf.samples/wsdl_first/pom.properties
   
/ omdat <package>war</package>	, is de maven-war-plugin er altijd, 
/ hij is configured in <pluginManagement>	, en in eclipse in 'Effective pom' zien we het resultaat	,

     <plugin>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.1</version>
        <executions>
          <execution>
            <id>default-war</id>
            <phase>package</phase>
            <goals>
              <goal>war</goal>
            </goals>
            <configuration>
              <webXml>src/main/webapp/WEB-INF/web.xml</webXml>
              <webResources>
                <resource>
                  <directory>src/main/resources</directory>
                  <targetPath>WEB-INF</targetPath>
                  <includes>
                    <include>*.wsdl</include>
                  </includes>
                </resource>
              </webResources>
            </configuration>
          </execution>
        </executions>
        <configuration>
          <webXml>src/main/webapp/WEB-INF/web.xml</webXml>
          <webResources>
            <resource>
              <directory>src/main/resources</directory>
              <targetPath>WEB-INF</targetPath>
              <includes>
                <include>*.wsdl</include>
              </includes>
            </resource>
          </webResources>
        </configuration>
      </plugin>
/ Waarom zien we <configuration/> 2 keer? 
/ TODO 

/ waar moet CustomerService.wsdl staan? 
/ want ze cp hem naar WEB-INF
/ TODO 

/ 7	. 

/ tomcat, external,

/ we nemen de maven-war-plugin zoals configured, dus met de wsdl in WEB-INF/, 
/ maar we moeten hem ook update,
$ vi CustomerService.wsdl
    <wsdl:service name="CustomerServiceService">
        <wsdl:port name="CustomerServicePort" binding="tns:CustomerServiceServiceSoapBinding">
            <!-- embedded deployment -->
            <!-- <soap:address location="http://localhost:9090/CustomerServicePort"/> -->			<!-- deze hadden we voor mvn - Pserver en mvn -Pclient	-->
            <!-- Tomcat deployment, embedded or standalone -->
            <soap:address location="http://localhost:8080/wsdl_first/services/CustomerServicePort"/>	<!-- nu -->
        </wsdl:port>
    </wsdl:service>
	
/ start tomcat 8.5	, 
$ mvn clean install
/ copy wsdl_first.war naar tomcat's webapps/
/ Geef 
http://localhost:8080/wsdl_first/services/CustomerServicePort?wsdl
? OK

/ In SOAP UI:

/ 1ste request, 'external tomcat'	,
/ URL: http://localhost:8080/wsdl_first/services/CustomerServicePort

<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:cus="http://customerservice.example.com/">
   <soapenv:Header/>
   <soapenv:Body>
      <cus:getCustomersByName>
         <!--Optional:-->
         <name>Smith</name>
      </cus:getCustomersByName>
   </soapenv:Body>
</soapenv:Envelope>

<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns2:getCustomersByNameResponse xmlns:ns2="http://customerservice.example.com/">
         <return>
            <customerId>0</customerId>
            <name>Smith</name>
            <address>Pine Street 200</address>
            <numOrders>1</numOrders>
            <revenue>10000.0</revenue>
            <test>1.5</test>
            <birthDate>2009-02-01+01:00</birthDate>
            <type>BUSINESS</type>
         </return>
         <return>
            <customerId>0</customerId>
            <name>Smith</name>
            <address>Pine Street 200</address>
            <numOrders>1</numOrders>
            <revenue>10000.0</revenue>
            <test>1.5</test>
            <birthDate>2009-02-01+01:00</birthDate>
            <type>BUSINESS</type>
         </return>
      </ns2:getCustomersByNameResponse>
   </soap:Body>
</soap:Envelope>


/ 2de request, 'external tomcat'
/ URL: http://localhost:8080/wsdl_first/services/CustomerServicePort

<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:cus="http://customerservice.example.com/">
   <soapenv:Header/>
   <soapenv:Body>
      <cus:updateCustomer>
         <!--Optional:-->
         <customer>
            <customerId>0</customerId>
            <!--Optional:-->
            <name>Smith</name>
           
            <revenue>0</revenue>
            
         </customer>
      </cus:updateCustomer>
   </soapenv:Body>
</soapenv:Envelope>

/ we zien op de command line in de tomcat server,

update request was received
Customer was updated


/ 7	. 

C:\Users\ervelden\bin\apache-cxf-3.2.0\samples>findstr /s  wsdl2java pom.xml
callback\pom.xml:                            <goal>wsdl2java</goal>
configuration_interceptor\pom.xml:                            <goal>wsdl2java</goal>
corba\bank\pom.xml:                            <goal>wsdl2java</goal>
corba\bank_ws_addressing\pom.xml:                            <goal>wsdl2java</goal>
corba\hello_world\pom.xml:                            <goal>wsdl2java</goal>
in_jvm_transport\pom.xml:                            <goal>wsdl2java</goal>
jaxws_async\pom.xml:                            <goal>wsdl2java</goal>
jaxws_dispatch_provider\pom.xml:                            <goal>wsdl2java</goal>
jaxws_handlers\pom.xml:                            <goal>wsdl2java</goal>
jms_pubsub\pom.xml:                            <goal>wsdl2java</goal>
jms_queue\pom.xml:                            <goal>wsdl2java</goal>
jms_spec_demo\pom.xml:                            <goal>wsdl2java</goal>
jms_spring_config\pom.xml:                            <goal>wsdl2java</goal>
js_browser_client_simple\pom.xml:                            <goal>wsdl2java</goal>
js_client\pom.xml:                            <goal>wsdl2java</goal>
js_provider\pom.xml:                            <goal>wsdl2java</goal>
mtom\pom.xml:                            <goal>wsdl2java</goal>
soap_header\pom.xml:                            <goal>wsdl2java</goal>
sts\pom.xml:                            <goal>wsdl2java</goal>
throttling\pom.xml:                            <goal>wsdl2java</goal>
wsdl_first\pom.xml:                            <goal>wsdl2java</goal>
wsdl_first_dynamic_client\pom.xml:                            <goal>wsdl2java</goal>
wsdl_first_https\pom.xml:                            <goal>wsdl2java</goal>
wsdl_first_pure_xml\pom.xml:                            <goal>wsdl2java</goal>
wsdl_first_rpclit\pom.xml:                            <goal>wsdl2java</goal>
wsdl_first_soap12\pom.xml:                            <goal>wsdl2java</goal>
wsdl_first_xml_wrapped\pom.xml:                            <goal>wsdl2java</goal>
ws_addressing\pom.xml:                            <goal>wsdl2java</goal>
ws_discovery\pom.xml:                            <goal>wsdl2java</goal>
ws_policy\pom.xml:                            <goal>wsdl2java</goal>
ws_rm\pom.xml:                            <goal>wsdl2java</goal>
ws_security\sign_enc\pom.xml:                            <goal>wsdl2java</goal>
ws_security\sign_enc_policy\pom.xml:                            <goal>wsdl2java</goal>
ws_security\ut\pom.xml:                            <goal>wsdl2java</goal>
ws_security\ut_policy\pom.xml:                            <goal>wsdl2java</goal>

/ 7	. 

/ proj wsdl_first

/ we doen zelf wsdl2java

/ lees,
http://cxf.apache.org/docs/wsdl-to-java.html

/ we zijn in \Users\ervelden\temp 

$ vi pom.xml

            <plugin>
                <groupId>org.apache.cxf</groupId>
                <artifactId>cxf-codegen-plugin</artifactId>
                <version>${project.version}</version>
                <executions>
                    <execution>
                        <id>generate-sources</id>
                        <phase>generate-sources</phase>
                        <configuration>
                            <wsdlOptions>
                                <wsdlOption>
                                    <wsdl>src/main/resources/CustomerService.wsdl</wsdl>
                                    <faultSerialVersionUID>1</faultSerialVersionUID>
                                    <bindingFiles>
                                        <bindingFile>src/main/resources/binding.xml</bindingFile>
                                    </bindingFiles>
                                </wsdlOption>
                            </wsdlOptions>
                        </configuration>
                        <goals>
                            <goal>wsdl2java</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
			
$ vi src/main/resources/binding.xml

<?xml version="1.0"?>
<jaxws:bindings xmlns:jaxws="http://java.sun.com/xml/ns/jaxws" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:jxb="http://java.sun.com/xml/ns/jaxb" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" wsdlLocation="CustomerService.wsdl">
    <!-- <jaxws:enableAsyncMapping>true</jaxws:enableAsyncMapping> -->
    <jaxws:bindings node="wsdl:definitions/wsdl:types/xs:schema">
        <jxb:globalBindings>
            <jxb:javaType name="java.util.Date" xmlType="xs:dateTime" parseMethod="org.apache.cxf.xjc.runtime.DataTypeAdapter.parseDateTime" printMethod="org.apache.cxf.xjc.runtime.DataTypeAdapter.printDateTime"/>
            <jxb:javaType name="java.util.Date" xmlType="xs:date" parseMethod="org.apache.cxf.xjc.runtime.DataTypeAdapter.parseDate" printMethod="org.apache.cxf.xjc.runtime.DataTypeAdapter.printDate"/>
        </jxb:globalBindings>
    </jaxws:bindings>
</jaxws:bindings>

/ 13	. 

/ we moeten zelf doen,

C:\Users\ervelden\temp>wsdl2java -b binding.xml -faultSerialVersionUID 0 CustomerService.wsdl

C:\Users\ervelden\temp>dir /s

06-09-2017  12:19               908 binding.xml
19-10-2017  08:08    <DIR>          com
18-10-2017  17:28             6.363 CustomerService.wsdl
19-10-2017  08:12    <DIR>          org

 Directory of C:\Users\ervelden\temp\com\example\customerservice

19-10-2017  08:30    <DIR>          .
19-10-2017  08:30    <DIR>          ..
19-10-2017  08:30             6.356 Customer.java
19-10-2017  08:30             1.612 CustomerService.java
19-10-2017  08:30             2.954 CustomerServiceService.java
19-10-2017  08:30               833 CustomerType.java
19-10-2017  08:30             1.432 GetCustomersByName.java
19-10-2017  08:30             1.996 GetCustomersByNameResponse.java
19-10-2017  08:30             1.571 NoSuchCustomer.java
19-10-2017  08:30             1.298 NoSuchCustomerException.java
19-10-2017  08:30             4.326 ObjectFactory.java
19-10-2017  08:30               127 package-info.java
19-10-2017  08:30             1.467 UpdateCustomer.java
              11 File(s)         23.972 bytes



 Directory of C:\Users\ervelden\temp\org\w3\_2001\xmlschema

19-10-2017  08:30    <DIR>          .
19-10-2017  08:30    <DIR>          ..
19-10-2017  08:30               457 Adapter1.java
19-10-2017  08:30               449 Adapter2.java
               2 File(s)            906 bytes

     Total Files Listed:
              15 File(s)         32.149 bytes
              23 Dir(s)  36.137.693.184 bytes free

/ 13	. 

/ java2ws

/ java2ws werkt met .class files, niet met .java files,

/ we copy de classes/ uit wsld_first naar temp/ 
/ maar we hebben alleen CustomerService.class nodig,

C:\Users\ervelden\temp>java2ws -wsdl -classpath classes -o _CustomerService.wsdl com.example.customerservice.CustomerService

/ we noemen de wsdl file _CustomerService.wsdl, want anders overschrijft hij CustomerService.wsdl die we gebruikten bij wsdl2java

/ 13	. 

/ wsdl_first

/ lees,
http://cxf.apache.org/docs/developing-a-service.html#DevelopingaService-WSDLFirstDevelopment

JAX-WS specifies a detailed mapping from a service defined in WSDL to the Java classes that will implement that service. The logical interface, defined by the wsdl:portType element, is mapped to a service endpoint interface (SEI). Any complex types defined in the WSDL are mapped into Java classes following the mapping defined by the Java Architecture for XML Binding (JAXB) specification. The endpoint defined by the wsdl:service element is also generated into a Java class that is used by consumers to access endpoints implementing the service.

\Users\ervelden\temp>mkdir gen
\Users\ervelden\temp>wsdl2java -b src\main\resources\binding.xml -faultSerialVersionUID 1 -ant -impl -server -d gen src\main\resources\CustomerService.wsdl

/ -impl : creates CustomerServicePortImpl.java
/ -server: CustomerService_CustomerServicePort_Server.java

/ com.example.customerservice.CustomerServicePortImpl is net als com.example.customerservice.server.CustomerServiceImpl,
/ com.example.customerservice.CustomerService_CustomerServicePort_Server is net als com.example.customerservice.server.CustomerServiceServer

/ 1313	.

/ we zijn in \Users\ervelden\temp,
/ we copy CustomerService.wsdl naar CustomerService2.wsdl, en gaan van onderuit getCustomersByName en getCustomersByNameResponse weglaten,

/ 131313	. 

/ als we in <binding/> getCustomersByName weglaten, dan lijkt er niet iets te veranderen in de gen files,
/ maar als we in <portType/> getCustomersByName weglaten, dan wel,

$ vi CustomerService2.wsdl

   <wsdl:binding name="CustomerServiceServiceSoapBinding" type="tns:CustomerService">
        <wsdl:operation name="updateCustomer">
        <wsdl:operation name="getCustomersByName">		<!-- rm -->

   <wsdl:portType name="CustomerService">
        <wsdl:operation name="updateCustomer">
        <wsdl:operation name="getCustomersByName">		<!-- rm -->
           
		

C:\Users\ervelden\temp>wsdl2java -b binding.xml -faultSerialVersionUID 1 -ant -impl -server -d gen CustomerService2.wsdl

/ we zien nog steeds alle gen classes, zoals Customer, CustomerService, en ook nog GetCustomersByName en GetCustomersByNameResponse	, maar in CustomerService zien we alleen nog updateCustomer,

$ vi CustomerService.java

@WebService(targetNamespace = "http://customerservice.example.com/", name = "CustomerService")
@XmlSeeAlso({ObjectFactory.class})
public interface CustomerService {

    @WebMethod
    @Oneway
    @RequestWrapper(localName = "updateCustomer", targetNamespace = "http://customerservice.example.com/", className = "com.example.customerservice.UpdateCustomer")
    public void updateCustomer(
        @WebParam(name = "customer", targetNamespace = "")
        com.example.customerservice.Customer customer
    );
}

/ 131313	. 

/ we verwijderen,

    <wsdl:message name="getCustomersByNameResponse">								<!-- rm -->

    <wsdl:message name="getCustomersByName">										<!-- rm -->
      
    <wsdl:message name="updateCustomer">
      
    <wsdl:message name="NoSuchCustomerException">									<!-- rm -->
       
/ dit lijkt weinig verschil te maken in de gen files,

/ 131313	. 

    <wsdl:types>
        <xs:schema ...>
            <xs:element name="getCustomersByName" type="tns:getCustomersByName"/>						<!-- rm -->
            <xs:element name="getCustomersByNameResponse" type="tns:getCustomersByNameResponse"/>		<!-- rm -->
            <xs:element name="updateCustomer" type="tns:updateCustomer"/>
            <xs:complexType name="updateCustomer">
            <xs:complexType name="customer">
            <xs:complexType name="getCustomersByName">								<!-- rm -->
            <xs:complexType name="getCustomersByNameResponse">						<!-- rm -->
                
/ we zien in de gen types zoals CustomerService geen verschil, want daar stond toch alleen nog maar updateCustomer in, 
/ maar er zijn nu een aantal types verdwenen,
GetCustomersByName
GetCustomersByNameResponse

/ 13	.

/ wsdl_first,


/ als we kijken naar de webapp
WEB-INF
	classes
		com
			example	
				customerservice	
					server
						CustomerServiceImpl
					CustomerService
	lib
	cxf-servlet.xml
	web.xml
	
$ vi cxf-servlet.xml

<beans ...>
    <jaxws:endpoint xmlns:customer="http://customerservice.example.com/" id="CustomerServiceHTTP" address="/CustomerServicePort" serviceName="customer:CustomerServiceService" endpointName="customer:CustomerServicePort" implementor="com.example.customerservice.server.CustomerServiceImpl">
        <!--jaxws:properties>
            <entry key="schema-validation-enabled" value="true" />
        </jaxws:properties-->
    </jaxws:endpoint>
</beans>

/ dus zo wordt 	CustomerServiceImpl gevonden als impl van CustomerService,

/ 13	. 

/ we zien in wsdl_first dat target\generated-sources\cxf een source file is, see build path, sources, 
/ TODO 
/ vandaar dat deze types in target\classes komen 	, ook GetCustomersByName en GetCustomersByNameResponse	,


/ in java_first_jaxws zien we geen SayHi en SayHiResponse	, 

C:\Users\ervelden\java\apache-cxf-3.2.0\samples\java_first_jaxws> java2ws -wsdl -classpath target\classes -address http://localh
ost:8080/java_first_jaxws/services/hello_world -d src\main\resources demo.hw.server.HelloWorld

/ we krijgen src\main\resources\HelloWorldService.wsdl, 
/ cp naar \Users\ervelden\temp, en doen,
C:\Users\ervelden\temp>wsdl2java -b binding.xml -faultSerialVersionUID 1 -ant -impl -server -d gen HelloWorldService.wsdl
/ we zien nu wel SayHi, SayHiResponse,

/ Als we wsdl_first debug, dan zien we dat de debugger in GetCustomersByName.getName valt, 
/ dit komt WH omdat in SOAP UI de request, en deze wordt serialize, en weer deserialize	,
<soapenv:Envelope ...>
   <soapenv:Header/>
   <soapenv:Body>
      <cus:getCustomersByName>
         <!--Optional:-->
         <name>Smith</name>
      </cus:getCustomersByName>
   </soapenv:Body>
</soapenv:Envelope>

/ 13	 .

/ lees over targetNamespace,
https://www.liquid-technologies.com/xml-schema-tutorial/xsd-namespaces

     <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://customerservice.example.com/" attributeFormDefault="unqualified" elementFormDefault="unqualified" targetNamespace="http://customerservice.example.com/">
            <xs:element name="getCustomersByName" type="tns:getCustomersByName"/>
            <xs:element name="getCustomersByNameResponse" type="tns:getCustomersByNameResponse"/>
            <xs:element name="updateCustomer" type="tns:updateCustomer"/>
            <xs:complexType name="updateCustomer">
    <wsdl:message name="NoSuchCustomerException">
        <wsdl:part name="NoSuchCustomerException" element="tns:NoSuchCustomer"/>
    </wsdl:message>
	
/ targetNamespace op de schema betekent dat de types die er in worden def deze namespace krijgen, en dat zie je meteen in de <xs:elements/> erboven, maar ook in de <wsdl:message/> eronder, of overal in de schema,
<xs:schema targetNamespace="http://customerservice.example.com/">
	<xs:complexType name="updateCustomer">
	
/ lees over elementFormDefault, attributeFormDefault	,
https://stackoverflow.com/questions/1463138/what-does-elementformdefault-do-for-xml-when-is-it-used

/ als we in het schema doen,
<element name="name" type="string" form="qualified"></element>
<element name="page" type="target:TypePage"></element>

/ dan moet in de XML <$tns:name .../> en <page/>, waarbij $tns de targetNamespace is	,
/ om te verhinderen dat je steeds form="qualified" moet schrijven, kun je <xs:schema elementFormDefault="qualified"/> set en bij <element name="page"/> deze ontkennen	,

/ 13	. 

/ lees,
http://cxf.apache.org/docs/configuration.html

<beans ...>
21	    <jaxws:endpoint id="greeter1" address="/greeter" implementor="org.apache.hello_world_soap_http.GreeterImpl"
 			wsdlLocation="/org/apache/cxf/systest/servlet/hello_world.wsdl"/>
22	    <jaxws:endpoint id="greeter2" address="/greeter2" implementor="org.apache.hello_world_xml_http.wrapped.GreeterImpl"
			wsdlLocation="/org/apache/cxf/systest/servlet/hello_world_xml_wrapped.wsdl"/>
23	    <jaxws:endpoint id="greeter3" address="/greeter3" implementor="org.apache.cxf.systest.servlet.CXFServletTest$NoWsdlGreeter">
24	        <jaxws:schemaLocations>
25	            <jaxws:schemaLocation>/org/apache/cxf/systest/servlet/hello_world_includes.xsd</jaxws:schemaLocation>
26	        </jaxws:schemaLocations>
27	    </jaxws:endpoint>
28	    <jaxws:endpoint id="greeter4" address="/greeter4" implementor="org.apache.cxf.systest.servlet.CXFServletTest$NoWsdlGreeter">
29	        <jaxws:schemaLocations>
30	            <jaxws:schemaLocation>/org/apache/cxf/systest/servlet/hello_world_includes.xsd</jaxws:schemaLocation>
31	        </jaxws:schemaLocations>
32	        <jaxws:properties>
33	            <entry key="publishedEndpointUrl" value="http://cxf.apache.org/MyGreeter"/>
34	        </jaxws:properties>
35	    </jaxws:endpoint>
36	    <jaxws:endpoint xmlns:e="http://apache.org/hello_world_soap_http" id="greeter5" address="/greeter5" 
			publishedEndpointUrl="http://cxf.apache.org/publishedEndpointUrl1" implementor="org.apache.hello_world_soap_http.GreeterImpl" wsdlLocation="/org/apache/cxf/systest/servlet/hello_world.wsdl" serviceName="e:SOAPService" endpointName="e:SoapPort"/>
37	    <jaxws:endpoint xmlns:e="http://apache.org/hello_world_soap_http" id="greeter6" address="/greeter6" 
			publishedEndpointUrl="http://cxf.apache.org/publishedEndpointUrl2" implementor="org.apache.hello_world_soap_http.GreeterImpl" wsdlLocation="/org/apache/cxf/systest/servlet/hello_world.wsdl" serviceName="e:SOAPService" endpointName="e:SoapPort1"/>
38	</beans>

/ wsdl_first,

/ de service pakt de naam, print deze en print ook adresgegevens, maar die zijn constant,	

$ vi cxf-servlet.xml
<beans ...>
    <jaxws:endpoint  implementor="com.example.customerservice.server.CustomerServiceImpl">
				<!--address="/CustomerServicePort"-->
        <!--jaxws:properties>
            <entry key="schema-validation-enabled" value="true" />
        </jaxws:properties-->
    </jaxws:endpoint>
</beans>
/ is OK,

/ we kunnen in SOAP UI geven:
http://localhost:8080/wsdl_first/services
http://localhost:8080/wsdl_first/services/CustomerServicePort
http://localhost:8080/wsdl_first/services/foo
/ als er wel een address attr, dan restrictie tot alleen dat address,


/ java_first_jaxws

$ cxf-servlet.xml

<beans ...>
    <jaxws:server   >
		<!-- address="/hello_world" -->
        <jaxws:serviceBean>
            <bean class="demo.hw.server.HelloWorldImpl"/>
        </jaxws:serviceBean>
    </jaxws:server>
</beans>

/ als <jaxws:server/> geen address attr heeft, zijn alle addresses OK, dus
http://localhost:8080/java_first_jaxws/services
http://localhost:8080/java_first_jaxws/services/foo
http://localhost:8080/java_first_jaxws/services/hello_world
/ zijn OK, 
/ als er wel een address attr, dan restrictie tot alleen dat address,

/ 13	. 

/ we wisselen <server/> en <endpoint/>	,

/ wsdl_first

$ vi cxf-servlet.xml

<beans ...>
	<jaxws:server   >
		<!-- address="/hello_world" -->
        <jaxws:serviceBean>
            <bean class="com.example.customerservice.server.CustomerServiceImpl"/>
        </jaxws:serviceBean>
    </jaxws:server>
/ OK

	
/ java_first_jaxws

$ vi cxf-servlet.xml

	<jaxws:endpoint  implementor="demo.hw.server.HelloWorldImpl">
				<!--address="/CustomerServicePort"-->
    </jaxws:endpoint>
/ OK

/ 13	. 

/ Ook als we in wsdl_first <jaxws:server/> use , geldt dat als we GetCustomersByName.class rm, en Tomcat opnieuw start, 

</pre><p><b>Root Cause</b></p><pre>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.apache.cxf.jaxws.spring.NamespaceHandler$SpringServerFactoryBean---1249908697': Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: com/example/customerservice/GetCustomersByName
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1628)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)
	org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)
	org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)
	org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)
	org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
	org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:761)
	org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:867)
	org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:543)
	org.apache.cxf.transport.servlet.CXFServlet.createSpringContext(CXFServlet.java:151)
	org.apache.cxf.transport.servlet.CXFServlet.loadBus(CXFServlet.java:74)
	org.apache.cxf.transport.servlet.CXFNonSpringServlet.init(CXFNonSpringServlet.java:80)
	org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:478)
	org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:80)
	org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:650)
	org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:799)
	org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1457)
	org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	java.lang.Thread.run(Thread.java:748)


/ 13	. 

/ we copy java_first_jaxws naar java_first_jaxws2	, 

C:\Users\ervelden\java\apache-cxf-3.2.0\samples\java_first_jaxws2>java2ws -wsdl -classpath target\classes -d src\main\resources -address http://localhost:8080/java_first_jaxws2/services/hello_world demo.hw.server.HelloWorld
-> src\main\resources\HelloWorldService.wsdl
/ -address is voor in:
 <wsdl:service name="HelloWorldService">
    <wsdl:port name="HelloWorldPort" binding="tns:HelloWorldServiceSoapBinding">
      <soap:address location="http://localhost:8080/java_first_jaxws2/services/hello_world"/>
	  
/ dan hebben we in src/main/java de packages client -> client2 en server-> server2, en in de java files de imports aangepast,

/ dan,

C:\Users\ervelden\java\apache-cxf-3.2.0\samples\java_first_jaxws2>wsdl2java -d target\generated-sources\cxf src\main\resources\HelloWorldService.wsdl

/ we hebben deze import in SoapUI, we zien op de requests,
http://localhost:8080/java_first_jaxws2/services/hello_world

/ als we 	,

<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ser="http://server.hw.demo/">
   <soapenv:Header/>
   <soapenv:Body>
      <ser:sayHi>
         <!--Optional:-->
         <arg0>Foo</arg0>
      </ser:sayHi>
   </soapenv:Body>
</soapenv:Envelope>

/ dan,

<!doctype html><html lang="en"><head><title>HTTP Status 500  Internal Server Error</title><style type="text/css">h1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} h2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} h3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} body {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} b {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} p {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;} a {color:black;} a.name {color:black;} .line {height:1px;background-color:#525D76;border:none;}</style></head><body><h1>HTTP Status 500  Internal Server Error</h1><hr class="line" /><p><b>Type</b> Exception Report</p><p><b>Message</b> Servlet.init() for servlet [cxf] threw exception</p><p><b>Description</b> The server encountered an unexpected condition that prevented it from fulfilling the request.</p><p><b>Exception</b></p><pre>javax.servlet.ServletException: Servlet.init() for servlet [cxf] threw exception
	org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:478)
	org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:80)
	org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:650)
	org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:799)
	org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1457)
	org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	java.lang.Thread.run(Thread.java:748)
</pre><p><b>Root Cause</b></p><pre>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.apache.cxf.jaxws.EndpointImpl--657577158': Invocation of init method failed; nested exception is javax.xml.ws.WebServiceException: org.apache.cxf.service.factory.ServiceConstructionException: Failed to create service.
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1628)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)
	org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)
	org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)
	org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)
	org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
	org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:761)
	org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:867)
	org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:543)
	org.apache.cxf.transport.servlet.CXFServlet.createSpringContext(CXFServlet.java:151)
	org.apache.cxf.transport.servlet.CXFServlet.loadBus(CXFServlet.java:74)
	org.apache.cxf.transport.servlet.CXFNonSpringServlet.init(CXFNonSpringServlet.java:80)
	org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:478)
	org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:80)
	org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:650)
	org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:799)
	org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1457)
	org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	java.lang.Thread.run(Thread.java:748)
</pre><p><b>Root Cause</b></p><pre>javax.xml.ws.WebServiceException: org.apache.cxf.service.factory.ServiceConstructionException: Failed to create service.
	org.apache.cxf.jaxws.EndpointImpl.doPublish(EndpointImpl.java:375)
	org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:255)
	org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:543)
	sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	java.lang.reflect.Method.invoke(Method.java:498)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1758)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1695)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1624)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)
	org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)
	org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)
	org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)
	org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
	org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:761)
	org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:867)
	org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:543)
	org.apache.cxf.transport.servlet.CXFServlet.createSpringContext(CXFServlet.java:151)
	org.apache.cxf.transport.servlet.CXFServlet.loadBus(CXFServlet.java:74)
	org.apache.cxf.transport.servlet.CXFNonSpringServlet.init(CXFNonSpringServlet.java:80)
	org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:478)
	org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:80)
	org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:650)
	org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:799)
	org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1457)
	org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	java.lang.Thread.run(Thread.java:748)
</pre><p><b>Root Cause</b></p><pre>org.apache.cxf.service.factory.ServiceConstructionException: Failed to create service.
	org.apache.cxf.wsdl11.WSDLServiceFactory.&lt;init&gt;(WSDLServiceFactory.java:87)
	org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean.buildServiceFromWSDL(ReflectionServiceFactoryBean.java:394)
	org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean.initializeServiceModel(ReflectionServiceFactoryBean.java:528)
	org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean.create(ReflectionServiceFactoryBean.java:263)
	org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean.create(JaxWsServiceFactoryBean.java:199)
	org.apache.cxf.frontend.AbstractWSDLBasedEndpointFactory.createEndpoint(AbstractWSDLBasedEndpointFactory.java:103)
	org.apache.cxf.frontend.ServerFactoryBean.create(ServerFactoryBean.java:168)
	org.apache.cxf.jaxws.JaxWsServerFactoryBean.create(JaxWsServerFactoryBean.java:211)
	org.apache.cxf.jaxws.EndpointImpl.getServer(EndpointImpl.java:460)
	org.apache.cxf.jaxws.EndpointImpl.doPublish(EndpointImpl.java:338)
	org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:255)
	org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:543)
	sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	java.lang.reflect.Method.invoke(Method.java:498)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1758)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1695)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1624)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)
	org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)
	org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)
	org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)
	org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
	org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:761)
	org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:867)
	org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:543)
	org.apache.cxf.transport.servlet.CXFServlet.createSpringContext(CXFServlet.java:151)
	org.apache.cxf.transport.servlet.CXFServlet.loadBus(CXFServlet.java:74)
	org.apache.cxf.transport.servlet.CXFNonSpringServlet.init(CXFNonSpringServlet.java:80)
	org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:478)
	org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:80)
	org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:650)
	org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:799)
	org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1457)
	org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	java.lang.Thread.run(Thread.java:748)
</pre><p><b>Root Cause</b></p><pre>javax.wsdl.WSDLException: WSDLException: faultCode=PARSER_ERROR: Problem parsing 'file:src/main/resources/HelloWorldService.wsdl'.: java.io.FileNotFoundException: src\main\resources\HelloWorldService.wsdl (The system cannot find the path specified)
	com.ibm.wsdl.xml.WSDLReaderImpl.getDocument(WSDLReaderImpl.java:2198)
	com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(WSDLReaderImpl.java:2390)
	com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(WSDLReaderImpl.java:2422)
	org.apache.cxf.wsdl11.WSDLManagerImpl.loadDefinition(WSDLManagerImpl.java:265)
	org.apache.cxf.wsdl11.WSDLManagerImpl.getDefinition(WSDLManagerImpl.java:164)
	org.apache.cxf.wsdl11.WSDLServiceFactory.&lt;init&gt;(WSDLServiceFactory.java:85)
	org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean.buildServiceFromWSDL(ReflectionServiceFactoryBean.java:394)
	org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean.initializeServiceModel(ReflectionServiceFactoryBean.java:528)
	org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean.create(ReflectionServiceFactoryBean.java:263)
	org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean.create(JaxWsServiceFactoryBean.java:199)
	org.apache.cxf.frontend.AbstractWSDLBasedEndpointFactory.createEndpoint(AbstractWSDLBasedEndpointFactory.java:103)
	org.apache.cxf.frontend.ServerFactoryBean.create(ServerFactoryBean.java:168)
	org.apache.cxf.jaxws.JaxWsServerFactoryBean.create(JaxWsServerFactoryBean.java:211)
	org.apache.cxf.jaxws.EndpointImpl.getServer(EndpointImpl.java:460)
	org.apache.cxf.jaxws.EndpointImpl.doPublish(EndpointImpl.java:338)
	org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:255)
	org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:543)
	sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	java.lang.reflect.Method.invoke(Method.java:498)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1758)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1695)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1624)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)
	org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)
	org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)
	org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)
	org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
	org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:761)
	org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:867)
	org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:543)
	org.apache.cxf.transport.servlet.CXFServlet.createSpringContext(CXFServlet.java:151)
	org.apache.cxf.transport.servlet.CXFServlet.loadBus(CXFServlet.java:74)
	org.apache.cxf.transport.servlet.CXFNonSpringServlet.init(CXFNonSpringServlet.java:80)
	org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:478)
	org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:80)
	org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:650)
	org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:799)
	org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1457)
	org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	java.lang.Thread.run(Thread.java:748)
</pre><p><b>Root Cause</b></p><pre>java.io.FileNotFoundException: src\main\resources\HelloWorldService.wsdl (The system cannot find the path specified)
	java.io.FileInputStream.open0(Native Method)
	java.io.FileInputStream.open(FileInputStream.java:195)
	java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:138)
	java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:93)
	sun.net.www.protocol.file.FileURLConnection.connect(FileURLConnection.java:90)
	sun.net.www.protocol.file.FileURLConnection.getInputStream(FileURLConnection.java:188)
	com.sun.org.apache.xerces.internal.impl.XMLEntityManager.setupCurrentEntity(XMLEntityManager.java:623)
	com.sun.org.apache.xerces.internal.impl.XMLVersionDetector.determineDocVersion(XMLVersionDetector.java:148)
	com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:805)
	com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:770)
	com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:141)
	com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:243)
	com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:339)
	com.ibm.wsdl.xml.WSDLReaderImpl.getDocument(WSDLReaderImpl.java:2188)
	com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(WSDLReaderImpl.java:2390)
	com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(WSDLReaderImpl.java:2422)
	org.apache.cxf.wsdl11.WSDLManagerImpl.loadDefinition(WSDLManagerImpl.java:265)
	org.apache.cxf.wsdl11.WSDLManagerImpl.getDefinition(WSDLManagerImpl.java:164)
	org.apache.cxf.wsdl11.WSDLServiceFactory.&lt;init&gt;(WSDLServiceFactory.java:85)
	org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean.buildServiceFromWSDL(ReflectionServiceFactoryBean.java:394)
	org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean.initializeServiceModel(ReflectionServiceFactoryBean.java:528)
	org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean.create(ReflectionServiceFactoryBean.java:263)
	org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean.create(JaxWsServiceFactoryBean.java:199)
	org.apache.cxf.frontend.AbstractWSDLBasedEndpointFactory.createEndpoint(AbstractWSDLBasedEndpointFactory.java:103)
	org.apache.cxf.frontend.ServerFactoryBean.create(ServerFactoryBean.java:168)
	org.apache.cxf.jaxws.JaxWsServerFactoryBean.create(JaxWsServerFactoryBean.java:211)
	org.apache.cxf.jaxws.EndpointImpl.getServer(EndpointImpl.java:460)
	org.apache.cxf.jaxws.EndpointImpl.doPublish(EndpointImpl.java:338)
	org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:255)
	org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:543)
	sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	java.lang.reflect.Method.invoke(Method.java:498)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1758)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1695)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1624)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)
	org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)
	org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)
	org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)
	org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
	org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:761)
	org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:867)
	org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:543)
	org.apache.cxf.transport.servlet.CXFServlet.createSpringContext(CXFServlet.java:151)
	org.apache.cxf.transport.servlet.CXFServlet.loadBus(CXFServlet.java:74)
	org.apache.cxf.transport.servlet.CXFNonSpringServlet.init(CXFNonSpringServlet.java:80)
	org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:478)
	org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:80)
	org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:650)
	org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:799)
	org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1457)
	org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	java.lang.Thread.run(Thread.java:748)
</pre><p><b>Note</b> The full stack trace of the root cause is available in the server logs.</p><hr class="line" /><h3>Apache Tomcat/8.5.20</h3></body></html>




	
/ 13	. 

/ java_first_jaxws

/ we waren vergeten de implementor aan te passen,
$ vi cxf-servlet.xml

	<jaxws:endpoint  implementor="com.example.customerservice.server.CustomerServiceImpl">
				<!--address="/CustomerServicePort"-->
    </jaxws:endpoint>

</pre><p><b>Root Cause</b></p><pre>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.apache.cxf.jaxws.EndpointImpl--1054365277': Cannot create inner bean '(inner bean)#2b1685' of type [com.example.customerservice.server.CustomerServiceImpl] while setting constructor argument; nested exception is org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [com.example.customerservice.server.CustomerServiceImpl] for bean with name '(inner bean)#2b1685' defined in null; nested exception is java.lang.ClassNotFoundException: com.example.customerservice.server.CustomerServiceImpl
	org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:313)
	org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:129)
	org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:634)
	org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:145)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1193)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1095)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:513)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)
	org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)
	org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)
	org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)
	org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
	org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:761)
	org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:867)
	org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:543)
	org.apache.cxf.transport.servlet.CXFServlet.createSpringContext(CXFServlet.java:151)
	org.apache.cxf.transport.servlet.CXFServlet.loadBus(CXFServlet.java:74)
	org.apache.cxf.transport.servlet.CXFNonSpringServlet.init(CXFNonSpringServlet.java:80)
	org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:478)
	org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:80)
	org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:650)
	org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:799)
	org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1457)
	org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	java.lang.Thread.run(Thread.java:748)

/ google
wsdl2java wsdllocation
/ lees,

https://stackoverflow.com/questions/4455195/how-to-avoid-the-need-to-specify-the-wsdl-location-in-a-cxf-or-jax-ws-generated
https://stackoverflow.com/questions/9734040/maven-wsdl2java-wsdllocation-tag

/ 1313	. 

/ in WEB-INF/classes is HelloWorldService.wsdl,
/ maar ....

/ we doen eerst een workaround, 
/ we copy de gen target/generated-sources/cxf/HelloWorldPortImpl naar src/main/resources/ demo.hw.server.server.HelloWorldPortImpl, 
/ dus in de package name een extra 'server', net als bij wsdl_first 

/ en we passen aan, we comment out de @WebService arguments,
$ vi demo.hw.server.server.HelloWorldPortImpl

@javax.jws.WebService(
//                      serviceName = "HelloWorldService",
//                      portName = "HelloWorldPort",
//                      targetNamespace = "http://server.hw.demo/",
//                      wsdlLocation = "file:src/main/resources/HelloWorldService.wsdl",
//                      endpointInterface = "demo.hw.server.HelloWorld"
                      ) 
public class HelloWorldPortImpl implements HelloWorld {

en we passen cxf-servlet.xml aan ( demo.hw.server.server.HelloWorldPortImpl en NIET de generated demo.hw.server.HelloWorldPortImpl),

<beans ...>
    <!-- <jaxws:server id="jaxwsService" serviceClass="demo.hw.server.HelloWorld" address="/hello_world">
        <jaxws:serviceBean>
            <bean class="demo.hw.server.server.HelloWorldPortImpl"/>
        </jaxws:serviceBean>
    </jaxws:server> -->
    
    <jaxws:endpoint  implementor="demo.hw.server.server.HelloWorldPortImpl" address="/hello_world">
				<!--address="/CustomerServicePort"-->
    </jaxws:endpoint>
</beans>

/ run $ mvn install (GEEN clean, anders generated files kwijt, we hadden gen met wsdl2java, niet in pom.xml)	,

/ Deze is OK in SOAP UI,

/ 1313	. 

/ Maar we kunnen ook,	

@javax.jws.WebService(
                      serviceName = "HelloWorldService",
                      portName = "HelloWorldPort",
                      targetNamespace = "http://server.hw.demo/",
                      wsdlLocation="classpath:HelloWorldService.wsdl", <!-- of zonder classpath: wsdlLocation="HelloWorldService.wsdl"
                      endpointInterface = "demo.hw.server.HelloWorld"
                      )  
public class HelloWorldPortImpl implements HelloWorld {

/ want omdat HelloWorldService.wsdl in src/main/resources is, is die ook in WEB-INF/classes,

/ 13	. 

/ zonder de workaround,

/ we geven aan java2ws -wsdlLocation classpath:HelloWorldService.wsdl , of zonder classpath:

C:\Users\ervelden\java\apache-cxf-3.2.0\samples\java_first_jaxws2>wsdl2java -d target\generated-sources\cxf  -impl -wsdlLocation HelloWorldService.wsdl src\main\resources\HelloWorldService.wsdl

$ vi target/generated-sources/cxf/HelloWorldPortImpl.java

@javax.jws.WebService(
                      serviceName = "HelloWorldService",
                      portName = "HelloWorldPort",
                      targetNamespace = "http://server.hw.demo/",
                      wsdlLocation = "HelloWorldService.wsdl",
                      endpointInterface = "demo.hw.server.HelloWorld")
public class HelloWorldPortImpl implements HelloWorld {
    public java.lang.String sayHi(java.lang.String arg0) { 
        LOG.info("Executing operation sayHi");
        System.out.println(arg0);
        try {
            java.lang.String _return = "";
            return _return;
        } catch (java.lang.Exception ex) {
            ex.printStackTrace();
            throw new RuntimeException(ex);
        }
    }
/ deze kunnen we aanpassen:
            java.lang.String _return = "Hello "+arg0;
			
/ 13	. 

vi src/main/resources/logging.properties

handlers = org.apache.juli.FileHandler, java.util.logging.ConsoleHandler

############################################################
# Handler specific properties.
# Describes specific configuration info for Handlers.
############################################################

org.apache.juli.FileHandler.level = FINE
org.apache.juli.FileHandler.directory = ${catalina.base}/logs
org.apache.juli.FileHandler.prefix = java_first_jaxws2.

java.util.logging.ConsoleHandler.level = FINE
java.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter

/ we deploy , we zien op command line van tomcat,

28-Oct-2017 15:49:43.295 INFO [ContainerBackgroundProcessor[StandardEngine[Catalina]]] org.apache.catalina.startup.HostConfig.un
deploy Undeploying context [/java_first_jaxws2]
okt 28, 2017 3:49:43 PM org.springframework.context.support.AbstractApplicationContext doClose
INFO: Closing Root WebApplicationContext: startup date [Sat Oct 28 11:11:42 GMT+01:00 2017]; root of context hierarchy
28-Oct-2017 15:49:43.414 INFO [localhost-startStop-14] org.apache.catalina.startup.HostConfig.deployWAR Deploying web applicatio
n archive [C:\Program Files\Apache Software Foundation\Tomcat 8.5\webapps\java_first_jaxws2.war]
28-Oct-2017 15:49:44.434 INFO [localhost-startStop-14] org.apache.jasper.servlet.TldScanner.scanJars At least one JAR was scanne
d for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs
 were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.
okt 28, 2017 3:49:44 PM org.apache.catalina.core.ApplicationContext log
INFO: No Spring WebApplicationInitializer types detected on classpath
okt 28, 2017 3:49:44 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing Root WebApplicationContext: startup date [Sat Oct 28 15:49:44 GMT+01:00 2017]; root of context hierarchy
okt 28, 2017 3:49:44 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [META-INF/cxf/cxf.xml]
okt 28, 2017 3:49:44 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from URL [file:/C:/Program%20Files/Apache%20Software%20Foundation/Tomcat%208.5/webapps/java_f
irst_jaxws2/WEB-INF/cxf-servlet.xml]
okt 28, 2017 3:49:45 PM org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean buildServiceFromWSDL
INFO: Creating Service {http://server.hw.demo/}HelloWorldService from WSDL: HelloWorldService.wsdl
okt 28, 2017 3:49:45 PM org.apache.cxf.endpoint.ServerImpl initDestination
INFO: Setting the server's publish address to be /hello_world
28-Oct-2017 15:49:45.690 INFO [localhost-startStop-14] org.apache.catalina.startup.HostConfig.deployWAR Deployment of web applic
ation archive [C:\Program Files\Apache Software Foundation\Tomcat 8.5\webapps\java_first_jaxws2.war] has finished in [2,276] ms

/ we zien in tomcat's log/java_first_jaxws2.2017-10-28.log


28-Oct-2017 15:49:43.301 INFO [ContainerBackgroundProcessor[StandardEngine[Catalina]]] org.springframework.context.support.AbstractApplicationContext.doClose Closing Root WebApplicationContext: startup date [Sat Oct 28 11:11:42 GMT+01:00 2017]; root of context hierarchy
28-Oct-2017 15:49:44.434 INFO [localhost-startStop-14] org.apache.catalina.core.ApplicationContext.log No Spring WebApplicationInitializer types detected on classpath
28-Oct-2017 15:49:44.535 INFO [localhost-startStop-14] org.springframework.context.support.AbstractApplicationContext.prepareRefresh Refreshing Root WebApplicationContext: startup date [Sat Oct 28 15:49:44 GMT+01:00 2017]; root of context hierarchy
28-Oct-2017 15:49:44.615 INFO [localhost-startStop-14] org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions Loading XML bean definitions from class path resource [META-INF/cxf/cxf.xml]
28-Oct-2017 15:49:44.651 INFO [localhost-startStop-14] org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions Loading XML bean definitions from URL [file:/C:/Program%20Files/Apache%20Software%20Foundation/Tomcat%208.5/webapps/java_first_jaxws2/WEB-INF/cxf-servlet.xml]
28-Oct-2017 15:49:45.089 INFO [localhost-startStop-14] org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean.buildServiceFromWSDL Creating Service {http://server.hw.demo/}HelloWorldService from WSDL: HelloWorldService.wsdl
28-Oct-2017 15:49:45.656 INFO [localhost-startStop-14] org.apache.cxf.endpoint.ServerImpl.initDestination Setting the server's publish address to be /hello_world
	
/ we zien op de command line iets meer, nl HostConfig logs,
/ TODO

/ 1313	. 

/ we doen met SOAP UI een soap request & response,

/ we zien op command line,

okt 28, 2017 3:56:00 PM demo.hw.server.HelloWorldPortImpl sayHi
INFO: Executing operation sayHi
Foo

/ we zien in de log file,
28-Oct-2017 15:58:03.466 INFO [http-nio-8080-exec-88] demo.hw.server.HelloWorldPortImpl.sayHi Executing operation sayHi

/ als we in de webapp's logging.properties,
org.apache.juli.FileHandler.formatter = java.util.logging.SimpleFormatter

/ dan zien we in de log file hetzelfde op de command line,  want in logging.properties stond al,
java.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter

/ 1313	. 

$ vi AbstractBeanDefinitionReader.java

package org.springframework.beans.factory.support;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;

public abstract class AbstractBeanDefinitionReader implements EnvironmentCapable, BeanDefinitionReader {
	/** Logger available to subclasses */
	protected final Log logger = LogFactory.getLog(getClass());
	
$ vi XmlBeanDefinitionReader.java

package org.springframework.beans.factory.xml;
public class XmlBeanDefinitionReader extends AbstractBeanDefinitionReader {

	public int loadBeanDefinitions(EncodedResource encodedResource) throws BeanDefinitionStoreException {
		Assert.notNull(encodedResource, "EncodedResource must not be null");
		if (logger.isInfoEnabled()) {
			logger.info("Loading XML bean definitions from " + encodedResource.getResource());
		}
		
/ Dus de tomcat logger logs de spring loggings ook,
/ TODO 

/ 1313	. 

/ omdat we niet de pom de sources gen, maar met wsdl2java, moeten we steeds $ mvn install en NIET $ mvn clean install

/ 1313	. 

/ Dit hieronder gebeurt allemaal tijdens deployment,

/ we set b's in 
XmlBeanDefinitionReader.loadBeanDefinitions 
ReflectionServiceFactoryBean. buildServiceFromWSDL

/ we deploy in tomcat 	, en de debugger valt in 	,

Daemon Thread [localhost-startStop-17] (Suspended (breakpoint at line 315 in XmlBeanDefinitionReader))	
	owns: Object  (id=4522)	
	owns: StandardWrapper  (id=4523)	
	owns: StandardContext  (id=4524)	
	XmlBeanDefinitionReader.loadBeanDefinitions(EncodedResource) line: 315	
	XmlBeanDefinitionReader.loadBeanDefinitions(Resource) line: 304	
	XmlBeanDefinitionReader(AbstractBeanDefinitionReader).loadBeanDefinitions(Resource...) line: 181	
	XmlBeanDefinitionReader(AbstractBeanDefinitionReader).loadBeanDefinitions(String, Set<Resource>) line: 217	
	XmlBeanDefinitionReader(AbstractBeanDefinitionReader).loadBeanDefinitions(String) line: 188	
	XmlWebApplicationContext.loadBeanDefinitions(XmlBeanDefinitionReader) line: 125	
	XmlWebApplicationContext.loadBeanDefinitions(DefaultListableBeanFactory) line: 94	
	XmlWebApplicationContext(AbstractRefreshableApplicationContext).refreshBeanFactory() line: 129	
	XmlWebApplicationContext(AbstractApplicationContext).obtainFreshBeanFactory() line: 614	
	XmlWebApplicationContext(AbstractApplicationContext).refresh() line: 515	
	CXFServlet.createSpringContext(ApplicationContext, ServletConfig, String) line: 151	
	CXFServlet.loadBus(ServletConfig) line: 74	
	CXFServlet(CXFNonSpringServlet).init(ServletConfig) line: 80	
	StandardWrapper.initServlet(Servlet) line: 1183	
	StandardWrapper.loadServlet() line: 1099	
	StandardWrapper.load() line: 989	
	StandardContext.loadOnStartup(Container[]) line: 4931	
	StandardContext.startInternal() line: 5241	
	StandardContext(LifecycleBase).start() line: 150	
	StandardHost(ContainerBase).addChildInternal(Container) line: 752	
	StandardHost(ContainerBase).addChild(Container) line: 728	
	StandardHost.addChild(Container) line: 734	
	HostConfig.deployWAR(ContextName, File) line: 988	
	HostConfig$DeployWar.run() line: 1860	
	Executors$RunnableAdapter<T>.call() line: 511	
	FutureTask<V>.run() line: 266	
	ThreadPoolExecutor.runWorker(ThreadPoolExecutor$Worker) line: 1149	
	ThreadPoolExecutor$Worker.run() line: 624	
	Thread.run() line: 748	

/ StandardContext=webapp java_first_jaxws2
/ StandardWrapper=servlet cxf,
StandardEngine[Catalina].StandardHost[localhost].StandardContext[/java_first_jaxws2].StandardWrapper[cxf]

/ lees,
https://l-webx.gitbooks.io/how_tomcat_works/content/
https://stackoverflow.com/questions/23642670/web-xmltomcat-vs-applicationcontext-xmlspring-which-loads-first

/ we komen in,	
Daemon Thread [localhost-startStop-17] (Suspended)	
	owns: Object  (id=4522)	
	owns: StandardWrapper  (id=4523)	
	owns: StandardContext  (id=4524)	
	DefaultListableBeanFactory.getBeanDefinitionCount() line: 369	
	XmlBeanDefinitionReader.registerBeanDefinitions(Document, Resource) line: 509	
	XmlBeanDefinitionReader.doLoadBeanDefinitions(InputSource, Resource) line: 392	
	XmlBeanDefinitionReader.loadBeanDefinitions(EncodedResource) line: 336	
	XmlBeanDefinitionReader.loadBeanDefinitions(Resource) line: 304	
	XmlBeanDefinitionReader(AbstractBeanDefinitionReader).loadBeanDefinitions(Resource...) line: 181	
	XmlBeanDefinitionReader(AbstractBeanDefinitionReader).loadBeanDefinitions(String, Set<Resource>) line: 217	
	XmlBeanDefinitionReader(AbstractBeanDefinitionReader).loadBeanDefinitions(String) line: 188	
	XmlWebApplicationContext.loadBeanDefinitions(XmlBeanDefinitionReader) line: 125	
	XmlWebApplicationContext.loadBeanDefinitions(DefaultListableBeanFactory) line: 94	
	XmlWebApplicationContext(AbstractRefreshableApplicationContext).refreshBeanFactory() line: 129	
	XmlWebApplicationContext(AbstractApplicationContext).obtainFreshBeanFactory() line: 614	
	XmlWebApplicationContext(AbstractApplicationContext).refresh() line: 515	
	CXFServlet.createSpringContext(ApplicationContext, ServletConfig, String) line: 151	
	CXFServlet.loadBus(ServletConfig) line: 74	
	CXFServlet(CXFNonSpringServlet).init(ServletConfig) line: 80	
	StandardWrapper.initServlet(Servlet) line: 1183	
	StandardWrapper.loadServlet() line: 1099	
	StandardWrapper.load() line: 989	
	StandardContext.loadOnStartup(Container[]) line: 4931	
	StandardContext.startInternal() line: 5241	
	StandardContext(LifecycleBase).start() line: 150	
	StandardHost(ContainerBase).addChildInternal(Container) line: 752	
	StandardHost(ContainerBase).addChild(Container) line: 728	
	StandardHost.addChild(Container) line: 734	
	HostConfig.deployWAR(ContextName, File) line: 988	
	HostConfig$DeployWar.run() line: 1860	
	Executors$RunnableAdapter<T>.call() line: 511	
	FutureTask<V>.run() line: 266	
	ThreadPoolExecutor.runWorker(ThreadPoolExecutor$Worker) line: 1149	
	ThreadPoolExecutor$Worker.run() line: 624	
	Thread.run() line: 748	

this	DefaultListableBeanFactory  (id=5258)	
	beanDefinitionMap	ConcurrentHashMap<K,V>  (id=5408)
	
	{org.apache.cxf.jaxws.EndpointImpl---715115450=Generic bean: class [org.apache.cxf.jaxws.spring.EndpointDefinitionParser$SpringEndpointImpl]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=publish; destroyMethodName=stop, 
	
	cxf=Generic bean: class [org.apache.cxf.bus.spring.SpringBus]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=shutdown; defined in class path resource [META-INF/cxf/cxf.xml],

	org.apache.cxf.bus.spring.BusWiringBeanFactoryPostProcessor=Generic bean: class [org.apache.cxf.bus.spring.BusWiringBeanFactoryPostProcessor]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/cxf/cxf.xml],

	org.apache.cxf.bus.spring.BusExtensionPostProcessor=Generic bean: class [org.apache.cxf.bus.spring.BusExtensionPostProcessor]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/cxf/cxf.xml], 
	
	org.apache.cxf.bus.spring.Jsr250BeanPostProcessor=Generic bean: class [org.apache.cxf.bus.spring.Jsr250BeanPostProcessor]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [META-INF/cxf/cxf.xml]}
	
	beanDefinitionNames	ArrayList<E>  (id=5409)	
[cxf, 
org.apache.cxf.bus.spring.BusWiringBeanFactoryPostProcessor, 
org.apache.cxf.bus.spring.Jsr250BeanPostProcessor, 
org.apache.cxf.bus.spring.BusExtensionPostProcessor, 
org.apache.cxf.jaxws.EndpointImpl---715115450]
	
/ we zoemen dieper in ,

this	DefaultListableBeanFactory  (id=5258)	
	beanDefinitionMap	ConcurrentHashMap<K,V>  (id=5408)	
		[0]	ConcurrentHashMap$MapEntry<K,V>  (id=5481)	
			key	"org.apache.cxf.jaxws.EndpointImpl---715115450" (id=5395)	
			value	GenericBeanDefinition  (id=5394)	
				beanClass	Class<T> (org.apache.cxf.jaxws.spring.EndpointDefinitionParser$SpringEndpointImpl) (id=5392)	
				constructorArgumentValues	ConstructorArgumentValues  (id=5491)	
					indexedArgumentValues	LinkedHashMap<K,V>  (id=5497)	
						[0]	LinkedHashMap$Entry<K,V>  (id=5503)	
							key	Integer  (id=5507)	
							value	ConstructorArgumentValues$ValueHolder  (id=5508)	
								value	GenericBeanDefinition  (id=5514)	
Generic bean: class [demo.hw.server.HelloWorldPortImpl]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null

/ we geven continue,
/s
Daemon Thread [localhost-startStop-17] (Suspended (breakpoint at line 388 in ReflectionServiceFactoryBean))	
	JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).buildServiceFromWSDL(String) line: 388	
	JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).initializeServiceModel() line: 528
            buildServiceFromWSDL(getWsdlURL());
/			
	JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).create() line: 263	
	JaxWsServiceFactoryBean.create() line: 199	
	JaxWsServerFactoryBean(AbstractWSDLBasedEndpointFactory).createEndpoint() line: 103	
	JaxWsServerFactoryBean(ServerFactoryBean).create() line: 168	
	JaxWsServerFactoryBean.create() line: 211	
	EndpointDefinitionParser$SpringEndpointImpl(EndpointImpl).getServer(String) line: 460	
	EndpointDefinitionParser$SpringEndpointImpl(EndpointImpl).doPublish(String) line: 338
            serv = getServer(addr);	
serv	ServerImpl  (id=7045)	
	destination	ServletDestination  (id=7039)	
		endpointInfo	SoapTransportFactory$SoapEndpointInfo  (id=6329)
BindingQName={http://server.hw.demo/}HelloWorldServiceSoapBinding, ServiceQName={http://server.hw.demo/}HelloWorldService, QName={http://server.hw.demo/}HelloWorldPort		
/
	EndpointDefinitionParser$SpringEndpointImpl(EndpointImpl).publish(String) line: 255
        doPublish(addr);	/ addr="/hello_world"	
/
	EndpointDefinitionParser$SpringEndpointImpl(EndpointImpl).publish() line: 543	
	NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]	
	NativeMethodAccessorImpl.invoke(Object, Object[]) line: 62	
	DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 43	
	Method.invoke(Object, Object...) line: 498	
	DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).invokeCustomInitMethod(String, Object, RootBeanDefinition) line: 1758	
	DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).invokeInitMethods(String, Object, RootBeanDefinition) line: 1695	
	DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).initializeBean(String, Object, RootBeanDefinition) line: 1624	
	DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).doCreateBean(String, RootBeanDefinition, Object[]) line: 555	
	DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).createBean(String, RootBeanDefinition, Object[]) line: 483	
	AbstractBeanFactory$1.getObject() line: 306	
	DefaultListableBeanFactory(DefaultSingletonBeanRegistry).getSingleton(String, ObjectFactory<?>) line: 230	
	DefaultListableBeanFactory(AbstractBeanFactory).doGetBean(String, Class<T>, Object[], boolean) line: 302	
						sharedInstance = getSingleton(beanName, new ObjectFactory<Object>() {
sharedInstance	EndpointDefinitionParser$SpringEndpointImpl  (id=5696)	
	endpointName	QName  (id=7184)			/ {http://server.hw.demo/}HelloWorldPort
	implementor	HelloWorldPortImpl  (id=7065)	
	server	ServerImpl  (id=7045)				/ hierboven
/
	DefaultListableBeanFactory(AbstractBeanFactory).getBean(String) line: 197	
	DefaultListableBeanFactory.preInstantiateSingletons() line: 761
					getBean(beanName);		/ beanName=	org.apache.cxf.jaxws.EndpointImpl---715115450
	XmlWebApplicationContext(AbstractApplicationContext).finishBeanFactoryInitialization(ConfigurableListableBeanFactory) line: 867	
	XmlWebApplicationContext(AbstractApplicationContext).refresh() line: 543				/ zonet op 515	,
	CXFServlet.createSpringContext(ApplicationContext, ServletConfig, String) line: 151	
	CXFServlet.loadBus(ServletConfig) line: 74	
	CXFServlet(CXFNonSpringServlet).init(ServletConfig) line: 80	
	StandardWrapper.initServlet(Servlet) line: 1183	
	StandardWrapper.loadServlet() line: 1099	
	StandardWrapper.load() line: 989	
	StandardContext.loadOnStartup(Container[]) line: 4931	
	StandardContext.startInternal() line: 5241	
	StandardContext(LifecycleBase).start() line: 150	
	StandardHost(ContainerBase).addChildInternal(Container) line: 752	
	StandardHost(ContainerBase).addChild(Container) line: 728	
	StandardHost.addChild(Container) line: 734	
	HostConfig.deployWAR(ContextName, File) line: 988	
	HostConfig$DeployWar.run() line: 1860	
	Executors$RunnableAdapter<T>.call() line: 511	
	FutureTask<V>.run() line: 266	
	ThreadPoolExecutor.runWorker(ThreadPoolExecutor$Worker) line: 1149	
	ThreadPoolExecutor$Worker.run() line: 624	
	Thread.run() line: 748	

/ 1313	.

/ We doen een SOAP request,
Daemon Thread [http-nio-8080-exec-113] (Suspended (breakpoint at line 45 in SayHi$JaxbAccessorF_arg0)) (out of synch)	
	SayHi.getArg0() line: 45 (out of synch)	
	SayHi_WrapperTypeHelper1.getWrapperParts(Object) line: 250	
	WrapperClassInInterceptor.handleMessage(Message) line: 130	
	PhaseInterceptorChain.doIntercept(Message) line: 308	
	ChainInitiationObserver.onMessage(Message) line: 121	
	ServletDestination(AbstractHTTPDestination).invoke(ServletConfig, ServletContext, HttpServletRequest, HttpServletResponse) line: 267	
	ServletController.invokeDestination(HttpServletRequest, HttpServletResponse, AbstractHTTPDestination) line: 234	
	ServletController.invoke(HttpServletRequest, HttpServletResponse, boolean) line: 208	
	ServletController.invoke(HttpServletRequest, HttpServletResponse) line: 160	
	CXFServlet(CXFNonSpringServlet).invoke(HttpServletRequest, HttpServletResponse) line: 191	
	            controller.invoke(request, response);
/
	CXFServlet(AbstractHTTPServlet).handleRequest(HttpServletRequest, HttpServletResponse) line: 301	
	CXFServlet(AbstractHTTPServlet).doPost(HttpServletRequest, HttpServletResponse) line: 220	
	CXFServlet(HttpServlet).service(HttpServletRequest, HttpServletResponse) line: 661	
	CXFServlet(AbstractHTTPServlet).service(ServletRequest, ServletResponse) line: 276	
	ApplicationFilterChain.internalDoFilter(ServletRequest, ServletResponse) line: 231	
	ApplicationFilterChain.doFilter(ServletRequest, ServletResponse) line: 166	
	WsFilter.doFilter(ServletRequest, ServletResponse, FilterChain) line: 52	
	ApplicationFilterChain.internalDoFilter(ServletRequest, ServletResponse) line: 193	
	ApplicationFilterChain.doFilter(ServletRequest, ServletResponse) line: 166	
	StandardWrapperValve.invoke(Request, Response) line: 198	
	StandardContextValve.invoke(Request, Response) line: 96	
	NonLoginAuthenticator(AuthenticatorBase).invoke(Request, Response) line: 478	
	StandardHostValve.invoke(Request, Response) line: 140	
	ErrorReportValve.invoke(Request, Response) line: 80	
	AccessLogValve(AbstractAccessLogValve).invoke(Request, Response) line: 650	
	StandardEngineValve.invoke(Request, Response) line: 87	
	CoyoteAdapter.service(Request, Response) line: 342	
	Http11Processor.service(SocketWrapperBase<?>) line: 799	
	Http11Processor(AbstractProcessorLight).process(SocketWrapperBase<?>, SocketEvent) line: 66	
	AbstractProtocol$ConnectionHandler<S>.process(SocketWrapperBase<S>, SocketEvent) line: 868	
	NioEndpoint$SocketProcessor.doRun() line: 1457	
	NioEndpoint$SocketProcessor(SocketProcessorBase<S>).run() line: 49	
	ThreadPoolExecutor(ThreadPoolExecutor).runWorker(ThreadPoolExecutor$Worker) line: 1149	
	ThreadPoolExecutor$Worker.run() line: 624	
	TaskThread$WrappingRunnable.run() line: 61	
	TaskThread(Thread).run() line: 748	


/ 1313	. 

/ CXF ASM GENERATED TYPES SAYHI SAYHIRESPONSE

/ SAMENVATTING

/ java_first_jaxws
$ mvn clean install
/ deploy in tomcat 
/ remote debug met debug config java_first_jaxws-remote

/ we zien dat ASM een SayHi type heeft create, 
/ Geef met SOAP UI een request, naar http://localhost:8080/java_first_jaxws/services/hello_world
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ser="http://server.hw.demo/">
   <soapenv:Header/>
   <soapenv:Body>
      <ser:sayHi>
         <!--Optional:-->
         <arg0>Foo Bar</arg0>
      </ser:sayHi>
   </soapenv:Body>
</soapenv:Envelope>

/ we set b's in

Daemon Thread [http-nio-8080-exec-113] (Suspended (breakpoint at line 290 in PhaseInterceptorChain))	
	PhaseInterceptorChain.doIntercept(Message) line: 290	
	ChainInitiationObserver.onMessage(Message) line: 121	
	ServletDestination(AbstractHTTPDestination).invoke(ServletConfig, ServletContext, HttpServletRequest, HttpServletResponse) line: 267	
	ServletController.invokeDestination(HttpServletRequest, HttpServletResponse, AbstractHTTPDestination) line: 234	
	ServletController.invoke(HttpServletRequest, HttpServletResponse, boolean) line: 208	
	ServletController.invoke(HttpServletRequest, HttpServletResponse) line: 160	
	CXFServlet(CXFNonSpringServlet).invoke(HttpServletRequest, HttpServletResponse) line: 191	
	CXFServlet(AbstractHTTPServlet).handleRequest(HttpServletRequest, HttpServletResponse) line: 301	
	CXFServlet(AbstractHTTPServlet).doPost(HttpServletRequest, HttpServletResponse) line: 220	
	CXFServlet(HttpServlet).service(HttpServletRequest, HttpServletResponse) line: 661	
	CXFServlet(AbstractHTTPServlet).service(ServletRequest, ServletResponse) line: 276	
	ApplicationFilterChain.internalDoFilter(ServletRequest, ServletResponse) line: 231	
	ApplicationFilterChain.doFilter(ServletRequest, ServletResponse) line: 166	
	WsFilter.doFilter(ServletRequest, ServletResponse, FilterChain) line: 52	
	ApplicationFilterChain.internalDoFilter(ServletRequest, ServletResponse) line: 193	
	ApplicationFilterChain.doFilter(ServletRequest, ServletResponse) line: 166	
	StandardWrapperValve.invoke(Request, Response) line: 198	
	StandardContextValve.invoke(Request, Response) line: 96	
	NonLoginAuthenticator(AuthenticatorBase).invoke(Request, Response) line: 478	
	StandardHostValve.invoke(Request, Response) line: 140	
	ErrorReportValve.invoke(Request, Response) line: 80	
	AccessLogValve(AbstractAccessLogValve).invoke(Request, Response) line: 650	
	StandardEngineValve.invoke(Request, Response) line: 87	
	CoyoteAdapter.service(Request, Response) line: 342	
	Http11Processor.service(SocketWrapperBase<?>) line: 799	
	Http11Processor(AbstractProcessorLight).process(SocketWrapperBase<?>, SocketEvent) line: 66	
	AbstractProtocol$ConnectionHandler<S>.process(SocketWrapperBase<S>, SocketEvent) line: 868	
	NioEndpoint$SocketProcessor.doRun() line: 1457	
	NioEndpoint$SocketProcessor(SocketProcessorBase<S>).run() line: 49	
	ThreadPoolExecutor(ThreadPoolExecutor).runWorker(ThreadPoolExecutor$Worker) line: 1149	
	ThreadPoolExecutor$Worker.run() line: 624	
	TaskThread$WrappingRunnable.run() line: 61	
	TaskThread(Thread).run() line: 748	

this		/ we zien alle interceptors, 	
Chain org.apache.cxf.phase.PhaseInterceptorChain@77136a46. Current flow:
  receive [PolicyInInterceptor, AttachmentInInterceptor]
  pre-stream [CertConstraintsInterceptor]
  post-stream [StaxInInterceptor]
  read [WSDLGetInterceptor, ReadHeadersInterceptor, SoapActionInInterceptor, StartBodyInterceptor]
  pre-protocol [MustUnderstandInterceptor]
  post-protocol [CheckFaultInterceptor, JAXBAttachmentSchemaValidationHack]
  unmarshal [DocLiteralInInterceptor, SoapHeaderInterceptor]							<- DocLiteralInInterceptor
  pre-logical [OneWayProcessorInterceptor]
  post-logical [WrapperClassInInterceptor]												<- WrapperClassInInterceptor
  pre-invoke [SwAInInterceptor, HolderInInterceptor]
  invoke [ServiceInvokerInterceptor]
  post-invoke [OutgoingChainInterceptor]

              while (state == State.EXECUTING && iterator.hasNext()) {
                try {
                    Interceptor<Message> currentInterceptor = (Interceptor<Message>)iterator.next();
                    if (isFineLogging) {
                        LOG.fine("Invoking handleMessage on interceptor " + currentInterceptor);
                    }
                    //System.out.println("-----------" + currentInterceptor);
                    currentInterceptor.handleMessage(message);									
/s
DocLiteralInInterceptor.handleMessage(Message) line: 66	
                    Object wrappedObject = dr.read(mpi, xmlReader);
wrappedObject	SayHi  (id=10320)	
	arg0	"Foo Bar" (id=10322)	




 

/ Einde SAMENVATTING




/ we keren terug naar java_first_jaxws, waar we niet in SayHi.getArg0 vallen,
/ wat dan wel?
/s
CXFServlet(CXFNonSpringServlet).invoke(HttpServletRequest, HttpServletResponse) line: 191	
            controller.invoke(request, response);
/s 
ServletController.invoke(HttpServletRequest, HttpServletResponse) line: 160	
        invoke(request, res, true);
/s 
ServletController.invoke(HttpServletRequest, HttpServletResponse, boolean) line: 165	
            String pathInfo = request.getPathInfo() == null ? "" : request.getPathInfo();
			...
                    invokeDestination(request, res, d);
/s 
ServletController.invokeDestination(HttpServletRequest, HttpServletResponse, AbstractHTTPDestination) line: 234	
        if (LOG.isLoggable(Level.FINE)) {
/n 
/ TODO 
            d.invoke(servletConfig, servletConfig.getServletContext(), request, response);
/s 
ServletDestination(AbstractHTTPDestination).invoke(ServletConfig, ServletContext, HttpServletRequest, HttpServletResponse) line: 246	
        Message inMessage = retrieveFromContinuation(req);
        if (inMessage == null) {
/j 
            LOG.fine("Create a new message for processing");
/ TODO 
            inMessage = new MessageImpl();
            ExchangeImpl exchange = new ExchangeImpl();
            exchange.setInMessage(inMessage);
            setupMessage(inMessage,
                     config,
                     context,
                     req,
                     resp);
/s 
ServletDestination(AbstractHTTPDestination).setupMessage(Message, ServletConfig, ServletContext, HttpServletRequest, HttpServletResponse) line: 341	
        inMessage.put(Message.HTTP_REQUEST_METHOD, req.getMethod());
POST 
        String requestURI = req.getRequestURI();
/java_first_jaxws/services/hello_world
        inMessage.put(Message.REQUEST_URI, requestURI);
        String requestURL = req.getRequestURL().toString();
http://localhost:8080/java_first_jaxws/services/hello_world
        inMessage.put(Message.REQUEST_URL, requestURL);
        String contextPath = req.getContextPath();
/java_first_jaxws
        String servletPath = req.getServletPath();
/services
...
/t
ServletDestination(AbstractHTTPDestination).invoke(ServletConfig, ServletContext, HttpServletRequest, HttpServletResponse) line: 258	
            setupMessage(inMessage,
                     config,
                     context,
                     req,
                     resp);
/d 
            exchange.setSession(new HTTPSession(req));
            ((MessageImpl)inMessage).setDestination(this);
...
            incomingObserver.onMessage(inMessage);		/ ook bij java_first_jaxws2 
/s 
ChainInitiationObserver.onMessage(Message) line: 64
/=	
	    public void onMessage(Message m) {
m={org.apache.cxf.security.SecurityContext=org.apache.cxf.transport.http.AbstractHTTPDestination$2@4b0f4150, org.apache.cxf.message.Message.PROTOCOL_HEADERS={accept-encoding=[gzip,deflate], connection=[Keep-Alive], Content-Length=[282], content-type=[text/xml;charset=UTF-8], host=[localhost:8080], SOAPAction=[""], user-agent=[Apache-HttpClient/4.1.1 (java 1.5)]}, org.apache.cxf.request.url=http://localhost:8080/java_first_jaxws/services/hello_world, http.base.path=http://localhost:8080/java_first_jaxws, HTTP.REQUEST=org.apache.catalina.connector.RequestFacade@7e8a7469, Accept=null, org.apache.cxf.request.uri=/java_first_jaxws/services/hello_world, org.apache.cxf.transport.Destination=org.apache.cxf.transport.servlet.ServletDestination@625572f, HTTP.CONFIG=org.apache.catalina.core.StandardWrapperFacade@37e9934c, org.apache.cxf.message.Message.PATH_INFO=/java_first_jaxws/services/hello_world, org.apache.cxf.transport.https.CertConstraints=null, org.apache.cxf.message.Message.QUERY_STRING=null, HTTP.RESPONSE=org.apache.catalina.connector.ResponseFacade@660aa860, org.apache.cxf.request.method=POST, org.apache.cxf.async.post.response.dispatch=true, org.apache.cxf.message.Message.IN_INTERCEPTORS=[org.apache.cxf.transport.https.CertConstraintsInterceptor@513e492c], HTTP_CONTEXT_MATCH_STRATEGY=stem, http.service.redirection=null, org.apache.cxf.message.Message.BASE_PATH=/java_first_jaxws/services/hello_world, org.apache.cxf.configuration.security.AuthorizationPolicy=null, org.apache.cxf.message.Message.ENCODING=UTF-8, HTTP.CONTEXT=org.apache.catalina.core.ApplicationContextFacade@4a3a0227, org.apache.cxf.message.Message.FIXED_PARAMETER_ORDER=false, Content-Type=text/xml;charset=UTF-8}

            } else {
                phaseChain = chainCache.get(bus.getExtension(PhaseManager.class).getInPhases(),
                                            bus.getInInterceptors(),
                                            endpoint.getService().getInInterceptors(),
                                            endpoint.getInInterceptors(),
                                            getBinding().getInInterceptors(),
                                            dbp.getInInterceptors());
            }
Chain org.apache.cxf.phase.PhaseInterceptorChain@7e923569. Current flow:
  receive [PolicyInInterceptor, AttachmentInInterceptor]
  post-stream [StaxInInterceptor]
  read [WSDLGetInterceptor, ReadHeadersInterceptor, SoapActionInInterceptor, StartBodyInterceptor]
  pre-protocol [MustUnderstandInterceptor]
  post-protocol [CheckFaultInterceptor, JAXBAttachmentSchemaValidationHack]
  unmarshal [DocLiteralInInterceptor, SoapHeaderInterceptor]
  pre-logical [OneWayProcessorInterceptor]
  post-logical [WrapperClassInInterceptor]
  pre-invoke [SwAInInterceptor, HolderInInterceptor]
  invoke [ServiceInvokerInterceptor]
  post-invoke [OutgoingChainInterceptor]
  
 / er is een hele chain van interceptors	, 

            phaseChain.doIntercept(message);
/s 
public class PhaseInterceptorChain implements InterceptorChain {
    private PhaseInterceptorChain(PhaseInterceptorChain src) {
        isFineLogging = LOG.isLoggable(Level.FINE);
/false
/TODO 
PhaseInterceptorChain.doIntercept(Message) line: 308	

            while (state == State.EXECUTING && iterator.hasNext()) {
                try {
                    Interceptor<Message> currentInterceptor = (Interceptor<Message>)iterator.next();
                    if (isFineLogging) {
                        LOG.fine("Invoking handleMessage on interceptor " + currentInterceptor);
                    }
                    //System.out.println("-----------" + currentInterceptor);
                    currentInterceptor.handleMessage(message);
/s
DocLiteralInInterceptor.handleMessage(Message) line: 110

message	SoapMessage  (id=9978)	
{http.base.path=http://localhost:8080/java_first_jaxws, HTTP.REQUEST=org.apache.catalina.connector.RequestFacade@7e8a7469, org.apache.cxf.transport.Destination=org.apache.cxf.transport.servlet.ServletDestination@625572f, HTTP.CONFIG=org.apache.catalina.core.StandardWrapperFacade@37e9934c, org.apache.cxf.binding.soap.SoapVersion=org.apache.cxf.binding.soap.Soap11@6c72b9cb, org.apache.cxf.message.Message.QUERY_STRING=null, org.apache.cxf.message.Message.ENCODING=UTF-8, HTTP.CONTEXT=org.apache.catalina.core.ApplicationContextFacade@4a3a0227, Content-Type=text/xml;charset=UTF-8, org.apache.cxf.security.SecurityContext=org.apache.cxf.transport.http.AbstractHTTPDestination$2@2cbbc369, org.apache.cxf.message.Message.PROTOCOL_HEADERS={accept-encoding=[gzip,deflate], connection=[Keep-Alive], Content-Length=[282], content-type=[text/xml;charset=UTF-8], host=[localhost:8080], SOAPAction=[""], user-agent=[Apache-HttpClient/4.1.1 (java 1.5)]}, org.apache.cxf.request.url=http://localhost:8080/java_first_jaxws/services/hello_world, Accept=null, org.apache.cxf.request.uri=/java_first_jaxws/services/hello_world, org.apache.cxf.message.Message.PATH_INFO=/java_first_jaxws/services/hello_world, org.apache.cxf.transport.https.CertConstraints=null, HTTP.RESPONSE=org.apache.catalina.connector.ResponseFacade@660aa860, org.apache.cxf.headers.Header.list=[], org.apache.cxf.request.method=POST, org.apache.cxf.async.post.response.dispatch=true, org.apache.cxf.message.Message.IN_INTERCEPTORS=[org.apache.cxf.transport.https.CertConstraintsInterceptor@513e492c], HTTP_CONTEXT_MATCH_STRATEGY=stem, http.service.redirection=null, org.apache.cxf.message.Message.BASE_PATH=/java_first_jaxws/services/hello_world, org.apache.cxf.configuration.security.AuthorizationPolicy=null, org.apache.cxf.message.Message.FIXED_PARAMETER_ORDER=false}

        Service service = ServiceModelUtil.getService(message.getExchange());
[ServiceImpl {http://server.hw.demo/}HelloWorldService]
        bop = getBindingOperationInfo(xmlReader, exchange, bop, client);
[BindingOperationInfo: {http://server.hw.demo/}sayHi]

        DataReader<XMLStreamReader> dr = getDataReader(message);
/s 
DocLiteralInInterceptor(AbstractInDatabindingInterceptor).getDataReader(Message) line: 95	
        return getDataReader(message, XMLStreamReader.class);
/s
DocLiteralInInterceptor(AbstractInDatabindingInterceptor).getDataReader(Message, Class<T>) line: 91	
/=
    protected <T> DataReader<T> getDataReader(Message message, Class<T> input) {
        Service service = ServiceModelUtil.getService(message.getExchange());
        DataReader<T> dataReader = service.getDataBinding().createReader(input);
dataReader	DataReaderImpl<T>  (id=10041)	
	context	JAXBContextImpl  (id=10040)	
	databinding	JAXBDataBinding  (id=9686)	
jar:file:/C:/Program%20Files/Java/jdk1.8.0_144/jre/lib/rt.jar!/com/sun/xml/internal/bind/v2/runtime/JAXBContextImpl.class Build-Id: 1.8.0_144
Classes known to this context:
  [B
  boolean
  byte
  char
  com.sun.xml.internal.bind.api.CompositeStructure
  demo.hw.server.IntegerUserMap
  demo.hw.server.IntegerUserMap$IntegerUserEntry
  demo.hw.server.UserImpl
  demo.hw.server.jaxws_asm.GetUsers
  demo.hw.server.jaxws_asm.GetUsersResponse
  demo.hw.server.jaxws_asm.SayHi
  demo.hw.server.jaxws_asm.SayHi2
  demo.hw.server.jaxws_asm.SayHi2Response
  demo.hw.server.jaxws_asm.SayHiResponse
  demo.hw.server.jaxws_asm.SayHiToUser
  demo.hw.server.jaxws_asm.SayHiToUserResponse
  double
  ...
/t 
DocLiteralInInterceptor.handleMessage(Message) line: 95	
        DataReader<XMLStreamReader> dr = getDataReader(message);
/d 

                // Determine if we should keep the parameters wrapper
                if (shouldWrapParameters(msgInfo, message)) {
                    QName startQName = xmlReader.getName();
                    MessagePartInfo mpi = msgInfo.getFirstMessagePart();
[MessagePartInfo name={http://server.hw.demo/}parameters, ConcreteName={http://server.hw.demo/}sayHi

                    Object wrappedObject = dr.read(mpi, xmlReader);
demo.hw.server.jaxws_asm.SayHi@551f5537 						/ alvast antwoord,
/=
wrappedObject	SayHi  (id=9935)	
	arg0	"Foo Bar" (id=9940)	
/ we zien dat de wrapped object created is met ASM	,
/s
DataReaderImpl<T>.read(MessagePartInfo, T) line: 147	
        Unmarshaller um = createUnmarshaller();
        try {
            Object obj = JAXBEncoderDecoder.unmarshall(um, reader, part,
                                                 unwrapJAXBElement);
demo.hw.server.jaxws_asm.SayHi@da9361d
/t
DocLiteralInInterceptor.handleMessage(Message) line: 110	
                    Object wrappedObject = dr.read(mpi, xmlReader);
/d 
                    parameters.put(mpi, wrappedObject);
            message.setContent(List.class, parameters);
			
{http.base.path=http://localhost:8080/java_first_jaxws, HTTP.REQUEST=org.apache.catalina.connector.RequestFacade@7e8a7469, org.apache.cxf.transport.Destination=org.apache.cxf.transport.servlet.ServletDestination@625572f, HTTP.CONFIG=org.apache.catalina.core.StandardWrapperFacade@37e9934c, org.apache.cxf.binding.soap.SoapVersion=org.apache.cxf.binding.soap.Soap11@6c72b9cb, org.apache.cxf.message.Message.QUERY_STRING=null, javax.xml.ws.wsdl.operation={http://server.hw.demo/}sayHi, javax.xml.ws.wsdl.service={http://server.hw.demo/}HelloWorldService, org.apache.cxf.message.Message.ENCODING=UTF-8, HTTP.CONTEXT=org.apache.catalina.core.ApplicationContextFacade@4a3a0227, Content-Type=text/xml;charset=UTF-8, org.apache.cxf.security.SecurityContext=org.apache.cxf.transport.http.AbstractHTTPDestination$2@2cbbc369, org.apache.cxf.message.Message.PROTOCOL_HEADERS={accept-encoding=[gzip,deflate], connection=[Keep-Alive], Content-Length=[282], content-type=[text/xml;charset=UTF-8], host=[localhost:8080], SOAPAction=[""], user-agent=[Apache-HttpClient/4.1.1 (java 1.5)]}, org.apache.cxf.request.url=http://localhost:8080/java_first_jaxws/services/hello_world, Accept=null, org.apache.cxf.request.uri=/java_first_jaxws/services/hello_world, org.apache.cxf.service.model.MessageInfo=[MessageInfo INPUT: {http://server.hw.demo/}sayHi], org.apache.cxf.message.Message.PATH_INFO=/java_first_jaxws/services/hello_world, org.apache.cxf.transport.https.CertConstraints=null, HTTP.RESPONSE=org.apache.catalina.connector.ResponseFacade@660aa860, org.apache.cxf.headers.Header.list=[], schema-validation-enabled=NONE, org.apache.cxf.request.method=POST, org.apache.cxf.async.post.response.dispatch=true, org.apache.cxf.message.Message.IN_INTERCEPTORS=[org.apache.cxf.transport.https.CertConstraintsInterceptor@513e492c], HTTP_CONTEXT_MATCH_STRATEGY=stem, http.service.redirection=null, org.apache.cxf.message.Message.BASE_PATH=/java_first_jaxws/services/hello_world, javax.xml.ws.wsdl.port={http://server.hw.demo/}HelloWorldPort, org.apache.cxf.configuration.security.AuthorizationPolicy=null, javax.xml.ws.wsdl.interface={http://server.hw.demo/}HelloWorld, javax.xml.ws.wsdl.description=/hello_world?wsdl, org.apache.cxf.message.Message.FIXED_PARAMETER_ORDER=false}




		
/ Intermezzo

/ 131313.
/ google
cxf asm
/ lees,
http://cxf.apache.org/docs/21-migration-guide.html

The JAX-WS frontend now "requires" asm 2.x or 3.x to be able to process some of the JAXB annotations on the SEI interface. If you don't use those annotations on the SEI, or if you have generated wrapper classes (either via wsdl2java or java2ws with -wrapperbean flag), you can remove the asm jar. If you leave asm jar, there can be conflicts with other apps that use asm. The predominant one is Hibernate. The "workaround" for Hibernate is to remove the asm 1.x jar they use and replace the cglib jar with the cglib-nodeps jar that includes a special internal version of asm that would not conflict with the 2.x/3.x version we need.

/ 131313	. 

/ we geven 	,

C:\Users\ervelden\java\apache-cxf-3.2.0-src>findstr /s asm *.java
core\src\main\java\org\apache\cxf\common\util\ASMHelper.java:        return org.objectweb.asm.ClassWriter.class;
core\src\main\java\org\apache\cxf\common\util\ASMHelper.java:            //try the "real" asm first, then the others
core\src\main\java\org\apache\cxf\common\util\ASMHelper.java:            tryClass("org.objectweb.asm.ClassWriter");
core\src\main\java\org\apache\cxf\common\util\ASMHelper.java:            tryClass("org.apache.xbean.asm5.ClassWriter");
core\src\main\java\org\apache\cxf\common\util\ASMHelper.java:            tryClass("org.apache.xbean.asm6.ClassWriter");
core\src\main\java\org\apache\cxf\common\util\ASMHelper.java:            tryClass("org.apache.xbean.asm4.ClassWriter");
core\src\main\java\org\apache\cxf\common\util\ASMHelper.java:            tryClass("org.apache.xbean.asm.ClassWriter");
core\src\main\java\org\apache\cxf\common\util\ASMHelper.java:            tryClass("org.springframework.asm.ClassWriter");
rt\databinding\aegis\src\main\java\org\apache\cxf\aegis\type\SimpleParameterizedType.java: * wanted the entire apparatus, asm would be more appropriate. This is good enough
rt\databinding\jaxb\src\test\java\org\apache\cxf\jaxb\JAXBDataBindingTest.java:    void doNamespaceMappingTest(boolean internal, boolean asm) throws Exception {
rt\databinding\jaxb\src\test\java\org\apache\cxf\jaxb\JAXBDataBindingTest.java:            if (!asm) {
rt\databinding\jaxb\src\test\java\org\apache\cxf\jaxb\JAXBDataBindingTest.java:            if (!asm) {
rt\frontend\jaxws\src\main\java\org\apache\cxf\jaxws\WrapperClassGenerator.java:        String pkg = getPackageName(method) + ".jaxws_asm" + (anonymous ? "_an" : "");
rt\frontend\simple\src\main\java\org\apache\cxf\endpoint\dynamic\TypeClassInitializer.java:                //ignore - probably no asm

/ inderdaad,
public final class WrapperClassGenerator extends ASMHelper {
    public Set<Class<?>> generate() {
    private void createWrapperClass(MessagePartInfo wrapperPart,

public class ASMHelper {
    public ClassWriter createClassWriter() {


/ 131313 .

/ lees,
http://download.oracle.com/otn-pub/jcp/jaxws-2.2-mrel3-evalu-oth-JSpec/jaxws-2_2-mrel3-spec.pdf?AuthParam=1509273918_5597ec26fe18773bbeaf018306c5cbbc

 javax.xml.ws.RequestWrapper
The RequestWrapper annotation is applied to the methods of an SEI. It is used to capture the JAXB generated
request wrapper bean and the element name and namespace for marshalling / unmarshalling the bean.
The default value of localName element is the operationName as defined in WebMethod annotation and
the default value for the targetNamespace element is the target namespace of the SEI. When starting from
Java, this annotation is used to resolve overloading conflicts in document literal mode. Only the className <- document literal mode
element is required in this case.

/ Document literal interceptor hier we hierboven,

/ 131313	. 

/ Bij wsdl_first of java_first_jaxws2 vallen we in, maar hier straks ook,
	WrapperClassInInterceptor.handleMessage(Message) line: 130	
	

/ In java_first_jaxws2, waar we de sources laten gen vanuit wsdl, zien we

$ vi HelloWorld.java 

@WebService(targetNamespace = "http://server.hw.demo/", name = "HelloWorld")
@XmlSeeAlso({ObjectFactory.class})
public interface HelloWorld {

    @WebMethod
    @RequestWrapper(localName = "sayHi2", targetNamespace = "http://server.hw.demo/", className = "demo.hw.server.SayHi2")
    @ResponseWrapper(localName = "sayHi2Response", targetNamespace = "http://server.hw.demo/", className = "demo.hw.server.SayHi2Response")
    @WebResult(name = "return", targetNamespace = "")
    public java.lang.String sayHi2(
        @WebParam(name = "arg0", targetNamespace = "")
        java.lang.String arg0,
        @WebParam(name = "arg1", targetNamespace = "")
        int arg1,
        @WebParam(name = "arg2", targetNamespace = "")
        java.lang.String arg2,
        @WebParam(name = "arg3", targetNamespace = "")
        java.lang.Integer arg3,
        @WebParam(name = "arg4", targetNamespace = "")
        boolean arg4
    ); 
	
/ die @RequestWrapper en @ResponseWrapper geven de SayHi.java en SayHiResponse.java,


/ Einde Intermezzo

/ Intermezzo

/ google,
wsimport wsgen java2ws wsdl2java
/ lees,
https://stackoverflow.com/questions/1667022/wsgen-vs-java2wsdl
https://www.mkyong.com/webservices/jax-ws/jax-ws-wsgen-tool-example/

/ stackoverflow: use java2ws ipv wsgen, want die Java wrapper beans en fault beans worden aut. gen door ASM	,
/ mkyong: wsgen generated die Java files,

/ lees,
http://java.globinch.com/enterprise-java/web-services/jax-ws/java-jax-ws-tutorial-develop-web-services-clients-consumers/#top-down-web-service


/ Einde Intermezzo

/c 
/ volgende interceptor,
PhaseInterceptorChain.doIntercept(Message) line: 308	
            while (state == State.EXECUTING && iterator.hasNext()) {
                try {
                    Interceptor<Message> currentInterceptor = (Interceptor<Message>)iterator.next();
                    if (isFineLogging) {
                        LOG.fine("Invoking handleMessage on interceptor " + currentInterceptor);
                    }
                    //System.out.println("-----------" + currentInterceptor);
                    currentInterceptorhandleMessage(message);
/s 
	WrapperClassInInterceptor.handleMessage(Message) line: 58	
	
            MessageContentsList lst = MessageContentsList.getContentsList(message);
lst	MessageContentsList  (id=10003)	
	[0]	SayHi  (id=10132)					/ demo.hw.server.jaxws_asm.SayHi
		arg0	"Foo Bar" (id=10139)
		
/ Waar is het type demo.hw.server.jaxws_asm.SayHi precies voor nodig?
/ TODO 

/ we zijn hier, 

	Daemon Thread [http-nio-8080-exec-120] (Suspended)	
	owns: PhaseInterceptorChain  (id=9975)	
	owns: NioEndpoint$NioSocketWrapper  (id=9973)	
	WrapperClassInInterceptor.handleMessage(Message) line: 110	
	PhaseInterceptorChain.doIntercept(Message) line: 308	
	ChainInitiationObserver.onMessage(Message) line: 121	
	ServletDestination(AbstractHTTPDestination).invoke(ServletConfig, ServletContext, HttpServletRequest, HttpServletResponse) line: 267	
	ServletController.invokeDestination(HttpServletRequest, HttpServletResponse, AbstractHTTPDestination) line: 234	
	ServletController.invoke(HttpServletRequest, HttpServletResponse, boolean) line: 208	
	ServletController.invoke(HttpServletRequest, HttpServletResponse) line: 160	
	CXFServlet(CXFNonSpringServlet).invoke(HttpServletRequest, HttpServletResponse) line: 191	
	CXFServlet(AbstractHTTPServlet).handleRequest(HttpServletRequest, HttpServletResponse) line: 301	
	CXFServlet(AbstractHTTPServlet).doPost(HttpServletRequest, HttpServletResponse) line: 220	
	CXFServlet(HttpServlet).service(HttpServletRequest, HttpServletResponse) line: 661	
	CXFServlet(AbstractHTTPServlet).service(ServletRequest, ServletResponse) line: 276	
	ApplicationFilterChain.internalDoFilter(ServletRequest, ServletResponse) line: 231	
	ApplicationFilterChain.doFilter(ServletRequest, ServletResponse) line: 166	
	WsFilter.doFilter(ServletRequest, ServletResponse, FilterChain) line: 52	
	ApplicationFilterChain.internalDoFilter(ServletRequest, ServletResponse) line: 193	
	ApplicationFilterChain.doFilter(ServletRequest, ServletResponse) line: 166	
	StandardWrapperValve.invoke(Request, Response) line: 198	
	StandardContextValve.invoke(Request, Response) line: 96	
	NonLoginAuthenticator(AuthenticatorBase).invoke(Request, Response) line: 478	
	StandardHostValve.invoke(Request, Response) line: 140	
	ErrorReportValve.invoke(Request, Response) line: 80	
	AccessLogValve(AbstractAccessLogValve).invoke(Request, Response) line: 650	
	StandardEngineValve.invoke(Request, Response) line: 87	
	CoyoteAdapter.service(Request, Response) line: 342	
	Http11Processor.service(SocketWrapperBase<?>) line: 799	
	Http11Processor(AbstractProcessorLight).process(SocketWrapperBase<?>, SocketEvent) line: 66	
	AbstractProtocol$ConnectionHandler<S>.process(SocketWrapperBase<S>, SocketEvent) line: 868	
	NioEndpoint$SocketProcessor.doRun() line: 1457	
	NioEndpoint$SocketProcessor(SocketProcessorBase<S>).run() line: 49	
	ThreadPoolExecutor(ThreadPoolExecutor).runWorker(ThreadPoolExecutor$Worker) line: 1149	
	ThreadPoolExecutor$Worker.run() line: 624	
	TaskThread$WrappingRunnable.run() line: 61	
	TaskThread(Thread).run() line: 748	
	
/ TODO 
/ Later afmaken,

/ Einde CXF ASM GENERATED TYPES SAYHI SAYHIRESPONSE

/ 1313	. 

/ CXF WRAPPER GENERATED TYPES SAYHI SAYHIRESPONSE

/ java_first_jaxws2

/ we hadden in java_first_jaxws met java2ws een HelloWorldService.wsdl gen, en met deze hebben we in java_first_jaxws2 met wsdl2java de types HelloWorld, HelloWorldImpl, SayHi, SayHiResponse, ... gen,
/ we hebben in cxf-servlet.xml deze HelloWorldImpl als impl set,

$ vi HelloWorld.java

@WebService(targetNamespace = "http://server.hw.demo/", name = "HelloWorld")
@XmlSeeAlso({ObjectFactory.class})
public interface HelloWorld {
    @WebMethod
    @RequestWrapper(localName = "sayHi", targetNamespace = "http://server.hw.demo/", className = "demo.hw.server.SayHi")
    @ResponseWrapper(localName = "sayHiResponse", targetNamespace = "http://server.hw.demo/", className = "demo.hw.server.SayHiResponse")
    @WebResult(name = "return", targetNamespace = "")
    public java.lang.String sayHi(
        @WebParam(name = "arg0", targetNamespace = "")
        java.lang.String arg0
    );
	
/ Zie de @RequestWrapper en @ResponseWrapper,
/ Daardoor worden NIET door ASM de types zoals SayHi gen, 

/s
DocLiteralInInterceptor.handleMessage(Message) line: 110
        DataReader<XMLStreamReader> dr = getDataReader(message);
dr	DataReaderImpl<T>  (id=439)
	context	JAXBContextImpl  (id=507)
jar:file:/C:/Program%20Files/Java/jdk1.8.0_144/jre/lib/rt.jar!/com/sun/xml/internal/bind/v2/runtime/JAXBContextImpl.class Build-Id: 1.8.0_144
Classes known to this context:
  [B
  boolean
  byte
  char
  com.sun.xml.internal.bind.api.CompositeStructure
  demo.hw.server.GetUsers
  demo.hw.server.GetUsersResponse
  demo.hw.server.IdentifiedUser
  demo.hw.server.IntegerUserMap
  demo.hw.server.SayHi
  demo.hw.server.SayHi2
  demo.hw.server.SayHi2Response
  demo.hw.server.SayHiResponse
  demo.hw.server.SayHiToUser
  demo.hw.server.SayHiToUserResponse
  demo.hw.server.User
  double
/ we zien de door wsdl2java types SayHi, ... en ASM heeft ze niet gen,


/ Einde CXF WRAPPER GENERATED TYPES SAYHI SAYHIRESPONSE


/ 13	. 

/ we cp java_first_jaxws2 naar java_first_jaxws3	, 
/ java_first_jaxws3 komt in ws, 
/ maar dan met $ mvn install,
Could not find artifact org.apache.cxf.samples:cxf-samples:pom:3.2.0 in central (https://repo.maven.apache.org/maven2) and 'parent.relativePath' points at wrong local POM @ line 26, column 13 -> [Help 2]
/ want pom.xml
    <parent>
        <groupId>org.apache.cxf.samples</groupId>
        <artifactId>cxf-samples</artifactId>
        <version>3.2.0</version>
    </parent>
/ move naar samples\,
/ pas de pom van java_first_jaxws3 aan,
    <artifactId>java_first_jaxws3</artifactId>
/ we moeten project java_first_jaxws3 delete (niet op disk) , en opnieuw import als maven project,

/ we zien nog steeds de source folders
src/main/java
target/generated-sources/cxf


/ we rm de @'s van HelloWorld, net als in java_first_jaxws, dus alleen @WebService op public class HelloWorld,
/ we passen HelloWorldService.wsdl aan,
  <wsdl:service name="HelloWorldService">
    <wsdl:port name="HelloWorldPort" binding="tns:HelloWorldServiceSoapBinding">
      <soap:address location="http://localhost:8080/java_first_jaxws3/services/hello_world"/>
    </wsdl:port>
  </wsdl:service>
/ TODO Hoe speelt deze wsdl een rol op de server? WH deze <soap:address/> niet,
/ In SOAP UI -> url,
/ we run $ mvn install (NIET clean install)	,
/ we import in SOAP UIT de src/main/resources/HelloWorld.wsdl

/ we geven ,
http://localhost:8080/java_first_jaxws3/services/hello_world
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ser="http://server.hw.demo/">
   <soapenv:Header/>
   <soapenv:Body>
      <ser:sayHi>
         <!--Optional:-->
         <arg0>Foo</arg0>
      </ser:sayHi>
   </soapenv:Body>
</soapenv:Envelope>

/ ERRs
/ we zien dat ASM classes worden gen, en dat ze er al zijn,

/ WSDL2JAVA JAVA2WS
C:\Users\ervelden\java\apache-cxf-3.2.0\samples\java_first_jaxws2>wsdl2java -d target\generated-sources\cxf  -impl -wsdlLocation HelloWorldService.wsdl src\main\resources\HelloWorldService.wsdl
C:\Users\ervelden\java\apache-cxf-3.2.0\samples\java_first_jaxws> java2ws -wsdl -classpath target\classes -address http://localh
ost:8080/java_first_jaxws/services/hello_world -d src\main\resources demo.hw.server.HelloWorld
\Users\ervelden\temp>wsdl2java -b src\main\resources\binding.xml -faultSerialVersionUID 1 -ant -impl -server -d gen src\main\resources\CustomerService.wsdl

</pre><p><b>Root Cause</b></p><pre>com.sun.xml.internal.bind.v2.runtime.IllegalAnnotationsException: 8 counts of IllegalAnnotationExceptions
Two classes have the same XML type name &quot;{http://server.hw.demo/}getUsers&quot;. Use @XmlType.name and @XmlType.namespace to assign different names to them.
	this problem is related to the following location:
		at demo.hw.server.jaxws_asm.GetUsers
	this problem is related to the following location:
		at demo.hw.server.GetUsers
		at public javax.xml.bind.JAXBElement demo.hw.server.ObjectFactory.createGetUsers(demo.hw.server.GetUsers)
		at demo.hw.server.ObjectFactory
Two classes have the same XML type name &quot;{http://server.hw.demo/}sayHi&quot;. Use @XmlType.name and @XmlType.namespace to assign different names to them.
	this problem is related to the following location:
		at demo.hw.server.jaxws_asm.SayHi
	this problem is related to the following location:
		at demo.hw.server.SayHi
		at public javax.xml.bind.JAXBElement demo.hw.server.ObjectFactory.createSayHi(demo.hw.server.SayHi)
		at demo.hw.server.ObjectFactory
Two classes have the same XML type name &quot;{http://server.hw.demo/}sayHi2&quot;. Use @XmlType.name and @XmlType.namespace to assign different names to them.
	this problem is related to the following location:
		at demo.hw.server.jaxws_asm.SayHi2
	this problem is related to the following location:
		at demo.hw.server.SayHi2
		at public javax.xml.bind.JAXBElement demo.hw.server.ObjectFactory.createSayHi2(demo.hw.server.SayHi2)
		at demo.hw.server.ObjectFactory
Two classes have the same XML type name &quot;{http://server.hw.demo/}getUsersResponse&quot;. Use @XmlType.name and @XmlType.namespace to assign different names to them.
	this problem is related to the following location:
		at demo.hw.server.jaxws_asm.GetUsersResponse
	this problem is related to the following location:
		at demo.hw.server.GetUsersResponse
		at public demo.hw.server.GetUsersResponse demo.hw.server.ObjectFactory.createGetUsersResponse()
		at demo.hw.server.ObjectFactory
Two classes have the same XML type name &quot;{http://server.hw.demo/}sayHi2Response&quot;. Use @XmlType.name and @XmlType.namespace to assign different names to them.
	this problem is related to the following location:
		at demo.hw.server.jaxws_asm.SayHi2Response
	this problem is related to the following location:
		at demo.hw.server.SayHi2Response
		at public javax.xml.bind.JAXBElement demo.hw.server.ObjectFactory.createSayHi2Response(demo.hw.server.SayHi2Response)
		at demo.hw.server.ObjectFactory
Two classes have the same XML type name &quot;{http://server.hw.demo/}sayHiResponse&quot;. Use @XmlType.name and @XmlType.namespace to assign different names to them.
	this problem is related to the following location:
		at demo.hw.server.jaxws_asm.SayHiResponse
	this problem is related to the following location:
		at demo.hw.server.SayHiResponse
		at public demo.hw.server.SayHiResponse demo.hw.server.ObjectFactory.createSayHiResponse()
		at demo.hw.server.ObjectFactory
Two classes have the same XML type name &quot;{http://server.hw.demo/}sayHiToUser&quot;. Use @XmlType.name and @XmlType.namespace to assign different names to them.
	this problem is related to the following location:
		at demo.hw.server.jaxws_asm.SayHiToUser
	this problem is related to the following location:
		at demo.hw.server.SayHiToUser
		at public javax.xml.bind.JAXBElement demo.hw.server.ObjectFactory.createSayHiToUser(demo.hw.server.SayHiToUser)
		at demo.hw.server.ObjectFactory
Two classes have the same XML type name &quot;{http://server.hw.demo/}sayHiToUserResponse&quot;. Use @XmlType.name and @XmlType.namespace to assign different names to them.
	this problem is related to the following location:
		at demo.hw.server.jaxws_asm.SayHiToUserResponse
	this problem is related to the following location:
		at demo.hw.server.SayHiToUserResponse
		at public javax.xml.bind.JAXBElement demo.hw.server.ObjectFactory.createSayHiToUserResponse(demo.hw.server.SayHiToUserResponse)
		at demo.hw.server.ObjectFactory

	com.sun.xml.internal.bind.v2.runtime.IllegalAnnotationsException$Builder.check(IllegalAnnotationsException.java:91)
	com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getTypeInfoSet(JAXBContextImpl.java:445)
	com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.&lt;init&gt;(JAXBContextImpl.java:277)
	com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.&lt;init&gt;(JAXBContextImpl.java:124)
	com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImpl.java:1123)
	com.sun.xml.internal.bind.v2.ContextFactory.createContext(ContextFactory.java:147)
	sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	java.lang.reflect.Method.invoke(Method.java:498)
	javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:247)
	javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:234)
	javax.xml.bind.ContextFinder.find(ContextFinder.java:462)
	javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:641)
	org.apache.cxf.common.jaxb.JAXBContextCache.createContext(JAXBContextCache.java:358)
	org.apache.cxf.common.jaxb.JAXBContextCache.getCachedContextAndSchemas(JAXBContextCache.java:246)
	org.apache.cxf.jaxb.JAXBDataBinding.createJAXBContextAndSchemas(JAXBDataBinding.java:472)
	org.apache.cxf.jaxb.JAXBDataBinding.initialize(JAXBDataBinding.java:327)
	org.apache.cxf.service.factory.AbstractServiceFactoryBean.initializeDataBindings(AbstractServiceFactoryBean.java:86)
	org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean.buildServiceFromWSDL(ReflectionServiceFactoryBean.java:426)
	org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean.initializeServiceModel(ReflectionServiceFactoryBean.java:528)
	org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean.create(ReflectionServiceFactoryBean.java:263)
	org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean.create(JaxWsServiceFactoryBean.java:199)
	org.apache.cxf.frontend.AbstractWSDLBasedEndpointFactory.createEndpoint(AbstractWSDLBasedEndpointFactory.java:103)
	org.apache.cxf.frontend.ServerFactoryBean.create(ServerFactoryBean.java:168)
	org.apache.cxf.jaxws.JaxWsServerFactoryBean.create(JaxWsServerFactoryBean.java:211)
	org.apache.cxf.jaxws.EndpointImpl.getServer(EndpointImpl.java:460)
	org.apache.cxf.jaxws.EndpointImpl.doPublish(EndpointImpl.java:338)
	org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:255)
	org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:543)
	sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	java.lang.reflect.Method.invoke(Method.java:498)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1758)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1695)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1624)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555)
	org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)
	org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)
	org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)
	org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)
	org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
	org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:761)
	org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:867)
	org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:543)
	org.apache.cxf.transport.servlet.CXFServlet.createSpringContext(CXFServlet.java:151)
	org.apache.cxf.transport.servlet.CXFServlet.loadBus(CXFServlet.java:74)
	org.apache.cxf.transport.servlet.CXFNonSpringServlet.init(CXFNonSpringServlet.java:80)
	org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:478)
	org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:80)
	org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:650)
	org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:799)
	org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1457)
	org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)

/ 1313	. 

/ we gaan debug, 
/ java_first_jaxws3, 

/ deploy time

/ create WAR, deploy in tomcat, tijdens deploy gaat hij de beans create, 
$ vi cxf-servlet.xml
<beans ...>
   <jaxws:endpoint  implementor="demo.hw.server.HelloWorldPortImpl" address="/hello_world">
    </jaxws:endpoint>
</beans>
/s
Daemon Thread [localhost-startStop-24] (Suspended (breakpoint at line 388 in ReflectionServiceFactoryBean))	
	JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).buildServiceFromWSDL(String) line: 388	
	JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).initializeServiceModel() line: 528	
	JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).create() line: 263	
	JaxWsServiceFactoryBean.create() line: 199	
	JaxWsServerFactoryBean(AbstractWSDLBasedEndpointFactory).createEndpoint() line: 103	
	JaxWsServerFactoryBean(ServerFactoryBean).create() line: 168	
	                Endpoint ep = createEndpoint();
	JaxWsServerFactoryBean.create() line: 211	
	EndpointDefinitionParser$SpringEndpointImpl(EndpointImpl).getServer(String) line: 460	
	EndpointDefinitionParser$SpringEndpointImpl(EndpointImpl).doPublish(String) line: 338	
	EndpointDefinitionParser$SpringEndpointImpl(EndpointImpl).publish(String) line: 255	
	EndpointDefinitionParser$SpringEndpointImpl(EndpointImpl).publish() line: 543	
	NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]	
	NativeMethodAccessorImpl.invoke(Object, Object[]) line: 62	
	DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 43	
	Method.invoke(Object, Object...) line: 498	
	DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).invokeCustomInitMethod(String, Object, RootBeanDefinition) line: 1758	
	DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).invokeInitMethods(String, Object, RootBeanDefinition) line: 1695	
	DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).initializeBean(String, Object, RootBeanDefinition) line: 1624	
	DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).doCreateBean(String, RootBeanDefinition, Object[]) line: 555	
	DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).createBean(String, RootBeanDefinition, Object[]) line: 483	
	AbstractBeanFactory$1.getObject() line: 306	
	DefaultListableBeanFactory(DefaultSingletonBeanRegistry).getSingleton(String, ObjectFactory<?>) line: 230	
	DefaultListableBeanFactory(AbstractBeanFactory).doGetBean(String, Class<T>, Object[], boolean) line: 302	
	DefaultListableBeanFactory(AbstractBeanFactory).getBean(String) line: 197	
	DefaultListableBeanFactory.preInstantiateSingletons() line: 761	
	XmlWebApplicationContext(AbstractApplicationContext).finishBeanFactoryInitialization(ConfigurableListableBeanFactory) line: 867	
	XmlWebApplicationContext(AbstractApplicationContext).refresh() line: 543	
	CXFServlet.createSpringContext(ApplicationContext, ServletConfig, String) line: 151	
	CXFServlet.loadBus(ServletConfig) line: 74	
	CXFServlet(CXFNonSpringServlet).init(ServletConfig) line: 80	
	StandardWrapper.initServlet(Servlet) line: 1183	
	StandardWrapper.loadServlet() line: 1099	
	StandardWrapper.load() line: 989	
	StandardContext.loadOnStartup(Container[]) line: 4931	
	StandardContext.startInternal() line: 5241	
	StandardContext(LifecycleBase).start() line: 150	
	StandardHost(ContainerBase).addChildInternal(Container) line: 752	
	StandardHost(ContainerBase).addChild(Container) line: 728	
	StandardHost.addChild(Container) line: 734	
	HostConfig.deployWAR(ContextName, File) line: 988	
	HostConfig$DeployWar.run() line: 1860	
	Executors$RunnableAdapter<T>.call() line: 511	
	FutureTask<V>.run() line: 266	
	ThreadPoolExecutor.runWorker(ThreadPoolExecutor$Worker) line: 1149	
	ThreadPoolExecutor$Worker.run() line: 624	
	Thread.run() line: 748	

/ als er geen wsdl is zoals in java_first_jaxws, 
/ TODO 

/ Intermezzo



JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).initializeServiceModel() line: 528	

    protected boolean isFromWsdl() {
        return !populateFromClass && !StringUtils.isEmpty(getWsdlURL()); / populateFromClass is WH default false, 
    }

    protected void initializeServiceModel() {		/ we zijn hier,
        if (isFromWsdl()) {
/j in java_first_jaxws3,
            buildServiceFromWSDL(getWsdlURL());
			
    protected void buildServiceFromWSDL(String url) {
        populateFromClass = false;
		...

/ Einde Intermezzo


/c
/s 
Daemon Thread [localhost-startStop-24] (Suspended)	
	WrapperClassGenerator.generate() line: 120	
	JaxWsServiceFactoryBean.generatedWrapperBeanClass() line: 675	
	JaxWsServiceFactoryBean.getExtraClass() line: 645	
	JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).buildServiceFromWSDL(String) line: 420	
	JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).initializeServiceModel() line: 528	
	JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).create() line: 263	
	JaxWsServiceFactoryBean.create() line: 199	
	JaxWsServerFactoryBean(AbstractWSDLBasedEndpointFactory).createEndpoint() line: 103	
	JaxWsServerFactoryBean(ServerFactoryBean).create() line: 168	
	JaxWsServerFactoryBean.create() line: 211	
	EndpointDefinitionParser$SpringEndpointImpl(EndpointImpl).getServer(String) line: 460	
	EndpointDefinitionParser$SpringEndpointImpl(EndpointImpl).doPublish(String) line: 338	
	EndpointDefinitionParser$SpringEndpointImpl(EndpointImpl).publish(String) line: 255	
	EndpointDefinitionParser$SpringEndpointImpl(EndpointImpl).publish() line: 543	
	NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]	
	NativeMethodAccessorImpl.invoke(Object, Object[]) line: 62	
	DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 43	
	Method.invoke(Object, Object...) line: 498	
	DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).invokeCustomInitMethod(String, Object, RootBeanDefinition) line: 1758	
	DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).invokeInitMethods(String, Object, RootBeanDefinition) line: 1695	
	DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).initializeBean(String, Object, RootBeanDefinition) line: 1624	
	DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).doCreateBean(String, RootBeanDefinition, Object[]) line: 555	
	DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).createBean(String, RootBeanDefinition, Object[]) line: 483	
	AbstractBeanFactory$1.getObject() line: 306	
	DefaultListableBeanFactory(DefaultSingletonBeanRegistry).getSingleton(String, ObjectFactory<?>) line: 230	
	DefaultListableBeanFactory(AbstractBeanFactory).doGetBean(String, Class<T>, Object[], boolean) line: 302	
	DefaultListableBeanFactory(AbstractBeanFactory).getBean(String) line: 197	
	DefaultListableBeanFactory.preInstantiateSingletons() line: 761	
	XmlWebApplicationContext(AbstractApplicationContext).finishBeanFactoryInitialization(ConfigurableListableBeanFactory) line: 867	
	XmlWebApplicationContext(AbstractApplicationContext).refresh() line: 543	
	CXFServlet.createSpringContext(ApplicationContext, ServletConfig, String) line: 151	
	CXFServlet.loadBus(ServletConfig) line: 74	
	CXFServlet(CXFNonSpringServlet).init(ServletConfig) line: 80	
	StandardWrapper.initServlet(Servlet) line: 1183	
	StandardWrapper.loadServlet() line: 1099	
	StandardWrapper.load() line: 989	
	StandardContext.loadOnStartup(Container[]) line: 4931	
	StandardContext.startInternal() line: 5241	
	StandardContext(LifecycleBase).start() line: 150	
	StandardHost(ContainerBase).addChildInternal(Container) line: 752	
	StandardHost(ContainerBase).addChild(Container) line: 728	
	StandardHost.addChild(Container) line: 734	
	HostConfig.deployWAR(ContextName, File) line: 988	
	HostConfig$DeployWar.run() line: 1860	
	Executors$RunnableAdapter<T>.call() line: 511	
	FutureTask<V>.run() line: 266	
	ThreadPoolExecutor.runWorker(ThreadPoolExecutor$Worker) line: 1149	
	ThreadPoolExecutor$Worker.run() line: 624	
	Thread.run() line: 748	
/ in meer detail,
/s
	WrapperClassGenerator.generate() line: 120	
	        for (OperationInfo opInfo : interfaceInfo.getOperations()) { / opInfo=[OperationInfo: {http://server.hw.demo/}sayHi2]
            if (opInfo.isUnwrappedCapable()) {
                Method method = (Method)opInfo.getProperty(ReflectionServiceFactoryBean.METHOD);
                if (method == null) {
                    continue;
                }
                MessagePartInfo inf = opInfo.getInput().getFirstMessagePart(); / 
                if (inf.getTypeClass() == null) {
                    MessageInfo messageInfo = opInfo.getUnwrappedOperation().getInput(); 
																			/ [MessageInfo INPUT: {http://server.hw.demo/}sayHi2]
                    createWrapperClass(inf,		
                                       messageInfo,
                                       opInfo,
                                       method,
                                       true);	 / (*)
                }
                MessageInfo messageInfo = opInfo.getUnwrappedOperation().getOutput();
                if (messageInfo != null) {
                    inf = opInfo.getOutput().getFirstMessagePart();
                    if (inf.getTypeClass() == null) {
                        createWrapperClass(inf,
                                           messageInfo,
                                           opInfo,
                                           method,
                                           false);
                    }
                }
            }
        }
        return wrapperBeans;
    }
/= (*)
/s
WrapperClassGenerator.createWrapperClass(MessagePartInfo, MessageInfo, OperationInfo, Method, boolean) line: 163	
        QName wrapperElement = messageInfo.getName();	
        boolean anonymous = factory.getAnonymousWrapperTypes();	/ false

        String pkg = getPackageName(method) + ".jaxws_asm" + (anonymous ? "_an" : "");
        String className = pkg + "."
            + StringUtils.capitalize(op.getName().getLocalPart());	/ demo.hw.server.jaxws_asm.SayHi2
op	OperationInfo  (id=1615)	
	opName	QName  (id=1650)	
		localPart	"sayHi2" (id=1681)	
		namespaceURI	"http://server.hw.demo/" (id=1687)	
		prefix	"" (id=1453)	

        if (!isRequest) {
/n 
            className = className + "Response";
/n
        String classFileName = periodToSlashes(className);				/ demo/hw/server/jaxws_asm/SayHi2
        cw.visit(Opcodes.V1_5, Opcodes.ACC_PUBLIC + Opcodes.ACC_SUPER, classFileName, null,
                 "java/lang/Object", null);

        AnnotationVisitor av0 = cw.visitAnnotation("Ljavax/xml/bind/annotation/XmlRootElement;", true);
        av0.visit("name", wrapperElement.getLocalPart());
        av0.visit("namespace", wrapperElement.getNamespaceURI());
        av0.visitEnd();

        av0 = cw.visitAnnotation("Ljavax/xml/bind/annotation/XmlAccessorType;", true);
        av0.visitEnum("value", "Ljavax/xml/bind/annotation/XmlAccessType;", "FIELD");
        av0.visitEnd();

        av0 = cw.visitAnnotation("Ljavax/xml/bind/annotation/XmlType;", true);
        if (!anonymous) {
            av0.visit("name", wrapperElement.getLocalPart());
            av0.visit("namespace", wrapperElement.getNamespaceURI());
        } else {
            av0.visit("name", "");
        }
        av0.visitEnd();
...
        for (MessagePartInfo mpi : messageInfo.getMessageParts()) { 
												/mpi=[MessagePartInfo name={http://server.hw.demo/}arg0, ConcreteName=arg0
            generateMessagePart(cw, mpi, method, classFileName);
        }
        Class<?> clz = loadClass(className, method.getDeclaringClass(), cw.toByteArray()); / class demo.hw.server.jaxws_asm.SayHi2
        wrapperPart.setTypeClass(clz);
        wrapperBeans.add(clz); 
[class demo.hw.server.jaxws_asm.SayHi2]

/ Intermezzo

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "sayHi", propOrder = {
    "arg0"
})
public class SayHi {
    protected String arg0;
+ getter/setter

/ Einde Intermezzo

\t
WrapperClassGenerator.generate() line: 128	
                    MessageInfo messageInfo = opInfo.getUnwrappedOperation().getInput();
                    createWrapperClass(inf,
                                       messageInfo,
                                       opInfo,
                                       method,
                                       true);
                }
\d 
this	WrapperClassGenerator  (id=1549)	
	wrapperBeans	LinkedHashSet<E>  (id=1604)	
[class demo.hw.server.jaxws_asm.SayHi2]

                MessageInfo messageInfo = opInfo.getUnwrappedOperation().getOutput();
[MessagePartInfo name={http://server.hw.demo/}parameters, ConcreteName={http://server.hw.demo/}sayHi2Response
                if (messageInfo != null) {
                    inf = opInfo.getOutput().getFirstMessagePart();
                    if (inf.getTypeClass() == null) {
                        createWrapperClass(inf,
                                           messageInfo,
                                           opInfo,
                                           method,
                                           false);
                    }
                }
/s 
WrapperClassGenerator.createWrapperClass(MessagePartInfo, MessageInfo, OperationInfo, Method, boolean) line: 160	
	    QName wrapperElement = messageInfo.getName();	/ {http://server.hw.demo/}sayHi2Response
        boolean anonymous = factory.getAnonymousWrapperTypes();

        String pkg = getPackageName(method) + ".jaxws_asm" + (anonymous ? "_an" : "");
        String className = pkg + "."
            + StringUtils.capitalize(op.getName().getLocalPart());
        if (!isRequest) {
            className = className + "Response";/ demo.hw.server.jaxws_asm.SayHi2Response

		String classFileName = periodToSlashes(className);/ demo/hw/server/jaxws_asm/SayHi2Response
        cw.visit(Opcodes.V1_5, Opcodes.ACC_PUBLIC + Opcodes.ACC_SUPER, classFileName, null,
                 "java/lang/Object", null);

        AnnotationVisitor av0 = cw.visitAnnotation("Ljavax/xml/bind/annotation/XmlRootElement;", true);
        av0.visit("name", wrapperElement.getLocalPart());
        av0.visit("namespace", wrapperElement.getNamespaceURI());
        av0.visitEnd();

        av0 = cw.visitAnnotation("Ljavax/xml/bind/annotation/XmlAccessorType;", true);
        av0.visitEnum("value", "Ljavax/xml/bind/annotation/XmlAccessType;", "FIELD");
        av0.visitEnd();

        av0 = cw.visitAnnotation("Ljavax/xml/bind/annotation/XmlType;", true);
        if (!anonymous) {
            av0.visit("name", wrapperElement.getLocalPart());
            av0.visit("namespace", wrapperElement.getNamespaceURI());
        } else {
            av0.visit("name", "");
        }
        av0.visitEnd();
...
/t 
WrapperClassGenerator.generate() line: 140	
               MessageInfo messageInfo = opInfo.getUnwrappedOperation().getOutput();
                if (messageInfo != null) {
                    inf = opInfo.getOutput().getFirstMessagePart();
                    if (inf.getTypeClass() == null) {
                        createWrapperClass(inf,
                                           messageInfo,
                                           opInfo,
                                           method,
                                           false);
                    }
                }
            }
        }
/d 
[class demo.hw.server.jaxws_asm.SayHi2, class demo.hw.server.jaxws_asm.SayHi2Response]

/ volgende,
        for (OperationInfo opInfo : interfaceInfo.getOperations()) {
[OperationInfo: {http://server.hw.demo/}sayHiToUser]
[OperationInfo: {http://server.hw.demo/}getUsers]
[OperationInfo: {http://server.hw.demo/}sayHi]

        return wrapperBeans;
this	WrapperClassGenerator  (id=1549)	
	wrapperBeans	LinkedHashSet<E>  (id=1604)	
[class demo.hw.server.jaxws_asm.SayHi2, class demo.hw.server.jaxws_asm.SayHi2Response, class demo.hw.server.jaxws_asm.SayHiToUser, class demo.hw.server.jaxws_asm.SayHiToUserResponse, class demo.hw.server.jaxws_asm.GetUsers, class demo.hw.server.jaxws_asm.GetUsersResponse, class demo.hw.server.jaxws_asm.SayHi, class demo.hw.server.jaxws_asm.SayHiResponse]

/ 13	. 

/ send soap request,

@WebService
public interface HelloWorld {

@javax.jws.WebService(serviceName = "HelloWorldService",
                      portName = "HelloWorldPort",
                      targetNamespace = "http://server.hw.demo/",
                      wsdlLocation = "HelloWorldService.wsdl",
                      endpointInterface = "demo.hw.server.HelloWorld")                     
public class HelloWorldPortImpl implements HelloWorld {

/ we send,

<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ser="http://server.hw.demo/">
   <soapenv:Header/>
   <soapenv:Body>
      <ser:sayHi>
         <!--Optional:-->
         <arg0>Foo</arg0>
      </ser:sayHi>
   </soapenv:Body>
</soapenv:Envelope>

/s 
JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).getWsdlURL() line: 2455	
        if (wsdlURL == null) {
            for (AbstractServiceConfiguration c : serviceConfigurations) {
                wsdlURL = c.getWsdlURL();c	JaxWsServiceConfiguration  (id=4512)	
implInfo	JaxWsImplementorInfo  (id=4529)	
	implementorClass	Class<T> (demo.hw.server.HelloWorldPortImpl) (id=4558)	
	seiClass	Class<T> (demo.hw.server.HelloWorld) (id=4545)	
	seiType	null	
	wsAnnotations	ArrayList<E>  (id=4559)	
[@javax.jws.WebService(name=, wsdlLocation=HelloWorldService.wsdl, endpointInterface=demo.hw.server.HelloWorld, portName=HelloWorldPort, serviceName=HelloWorldService, targetNamespace=http://server.hw.demo/), @javax.jws.WebService(name=, wsdlLocation=, endpointInterface=, portName=, serviceName=, targetNamespace=)]
	wsProviderAnnotation	null	
                if (wsdlURL != null) {
                    break;
                }
/c 
/s 
WrapperClassGenerator.<init>(JaxWsServiceFactoryBean, InterfaceInfo, boolean) line: 69	
    public WrapperClassGenerator(JaxWsServiceFactoryBean fact, InterfaceInfo inf, boolean q) {
inf	InterfaceInfo  (id=4719)	
	name	QName  (id=4723)
{http://server.hw.demo/}HelloWorld
	operations	ConcurrentHashMap<K,V>  (id=4724)
{{http://server.hw.demo/}sayHi2=[OperationInfo: {http://server.hw.demo/}sayHi2], {http://server.hw.demo/}sayHiToUser=[OperationInfo: {http://server.hw.demo/}sayHiToUser], {http://server.hw.demo/}getUsers=[OperationInfo: {http://server.hw.demo/}getUsers], {http://server.hw.demo/}sayHi=[OperationInfo: {http://server.hw.demo/}sayHi]}	
	propertyMap	AtomicReference<V>  (id=4725)	
{org.apache.cxf.wsdl11.WSDLServiceBuilder.WSDL_PORTTYPE=PortType: name={http://server.hw.demo/}HelloWorld
Operation: name=sayHi2
style=REQUEST_RESPONSE,1
Input: name=sayHi2
Message: name={http://server.hw.demo/}sayHi2
Part: name=parameters
elementName={http://server.hw.demo/}sayHi2
Output: name=sayHi2Response
Message: name={http://server.hw.demo/}sayHi2Response
Part: name=parameters
elementName={http://server.hw.demo/}sayHi2Response
Operation: name=sayHiToUser
style=REQUEST_RESPONSE,1
Input: name=sayHiToUser
Message: name={http://server.hw.demo/}sayHiToUser
Part: name=parameters
elementName={http://server.hw.demo/}sayHiToUser
Output: name=sayHiToUserResponse
Message: name={http://server.hw.demo/}sayHiToUserResponse
Part: name=parameters
elementName={http://server.hw.demo/}sayHiToUserResponse
Operation: name=getUsers
style=REQUEST_RESPONSE,1
Input: name=getUsers
Message: name={http://server.hw.demo/}getUsers
Part: name=parameters
elementName={http://server.hw.demo/}getUsers
Output: name=getUsersResponse
Message: name={http://server.hw.demo/}getUsersResponse
Part: name=parameters
elementName={http://server.hw.demo/}getUsersResponse
Operation: name=sayHi
style=REQUEST_RESPONSE,1
Input: name=sayHi
Message: name={http://server.hw.demo/}sayHi
Part: name=parameters
elementName={http://server.hw.demo/}sayHi
Output: name=sayHiResponse
Message: name={http://server.hw.demo/}sayHiResponse
Part: name=parameters
elementName={http://server.hw.demo/}sayHiResponse}
	service	ServiceInfo  (id=4726)	

/c 
/s 
WrapperClassGenerator.generate() line: 113	
        for (OperationInfo opInfo : interfaceInfo.getOperations()) {
            if (opInfo.isUnwrappedCapable()) {
                Method method = (Method)opInfo.getProperty(ReflectionServiceFactoryBean.METHOD);
                if (method == null) {
                    continue;
                }
                MessagePartInfo inf = opInfo.getInput().getFirstMessagePart();
                if (inf.getTypeClass() == null) {
                    MessageInfo messageInfo = opInfo.getUnwrappedOperation().getInput();
                    createWrapperClass(inf,
                                       messageInfo,
                                       opInfo,
                                       method,
                                       true);
                }
                MessageInfo messageInfo = opInfo.getUnwrappedOperation().getOutput();
                if (messageInfo != null) {
                    inf = opInfo.getOutput().getFirstMessagePart();
                    if (inf.getTypeClass() == null) {
                        createWrapperClass(inf,
                                           messageInfo,
                                           opInfo,
                                           method,
                                           false);
                    }
                }
            }
        }
        return wrapperBeans;
    }
		
		
/ 13	. 

/ java_first_jaxws3= mvn clean; wsdl2java; mvn install

/ java_first_jaxws3 is OK, TODO
/ we copy naar java_first_jaxws4, en rm gen files (behalve HelloWorld en HelloWorldPortImpl),
/ we rm classes die we in wsdl zien als <element/>,
	
	<xs:element name="getUsers" type="tns:getUsers"/>

	<xs:element name="getUsersResponse" type="tns:getUsersResponse"/>

	<xs:element name="sayHi" type="tns:sayHi"/>

	<xs:element name="sayHi2" type="tns:sayHi2"/>

	<xs:element name="sayHi2Response" type="tns:sayHi2Response"/>

	<xs:element name="sayHiResponse" type="tns:sayHiResponse"/>

	<xs:element name="sayHiToUser" type="tns:sayHiToUser"/>

	<xs:element name="sayHiToUserResponse" type="tns:sayHiToUserResponse"/>

/ Er is een wsdl, OK,

/ als we in eclipse niet mvn clean doen, moeten we met de hand target\java_first_jaxws4 rm, en/of target\java_first_jaxws4.war,
/ anders wordt WH classes , als er meer in stonden, deze niet update; ze staan er nog,

//////////////////////////////////
/ java_first_jaxws3, 
/ we hebben alle SOAP classes gen, OK, 
/ maar als we comment out de Wrapper @'s 	,
$ vi HelloWorld.java
    @WebMethod
//    @RequestWrapper(localName = "sayHi", targetNamespace = "http://server.hw.demo/", className = "demo.hw.server.SayHi")
//    @ResponseWrapper(localName = "sayHiResponse", targetNamespace = "http://server.hw.demo/", className = "demo.hw.server.SayHiResponse")
    @WebResult(name = "return", targetNamespace = "")
    public java.lang.String sayHi(
        @WebParam(name = "arg0", targetNamespace = "")
        java.lang.String arg0
    );
/ dan ERR	,
Two classes have the same XML type name &quot;{http://server.hw.demo/}sayHi&quot;. Use @XmlType.name and @XmlType.namespace to assign different names to them.
	this problem is related to the following location:
		at demo.hw.server.jaxws_asm.SayHi
	this problem is related to the following location:
		at demo.hw.server.SayHi
		at public javax.xml.bind.JAXBElement demo.hw.server.ObjectFactory.createSayHi(demo.hw.server.SayHi)
		at demo.hw.server.ObjectFactory
Two classes have the same XML type name &quot;{http://server.hw.demo/}sayHiResponse&quot;. Use @XmlType.name and @XmlType.namespace to assign different names to them.
	this problem is related to the following location:
		at demo.hw.server.jaxws_asm.SayHiResponse
	this problem is related to the following location:
		at demo.hw.server.SayHiResponse
		at public demo.hw.server.SayHiResponse demo.hw.server.ObjectFactory.createSayHiResponse()
		at demo.hw.server.ObjectFactory

/ 13	. 

/ case 

$ vi HelloWorld.java
    @WebMethod
    @RequestWrapper(localName = "sayHi2", targetNamespace = "http://server.hw.demo/", className = "demo.hw.server.SayHi2")
    @ResponseWrapper(localName = "sayHi2Response", targetNamespace = "http://server.hw.demo/", className = "demo.hw.server.SayHi2Response")
    @WebResult(name = "return", targetNamespace = "")
    public java.lang.String sayHi2(

/ en de generated  SayHi2 en SayHi2Response zijn in het classpath,

/ als de gen. SayHi2 en SayHi2Response in het classpath zijn, moet je @RequestWrapper's use op de sayHi2 method,

/ b's 

> findstr /s RequestWrapper *.java

/ we willen @RequestWrapper en @ResponseWrapper study,
/ we set b's in 

package org.apache.cxf.jaxws.support;
public class JaxWsServiceConfiguration extends AbstractServiceConfiguration {
    @Override
    public Class<?> getResponseWrapper(Method selected) {
    @Override
    public Class<?> getRequestWrapper(Method selected) {
...

public class DefaultServiceConfiguration extends AbstractServiceConfiguration {


@NoJSR250Annotations
public class JaxWsServiceFactoryBean extends ReflectionServiceFactoryBean {
	void initializeWrapping(OperationInfo o, Method selected) {
    @Override
    protected Set<Class<?>> getExtraClass() {
    private Set<Class<?>> generatedWrapperBeanClass() {

public final class WrapperClassGenerator extends ASMHelper {

/ debug,

/ we deploy java_first_jaxws2

/s
Daemon Thread [localhost-startStop-3] (Suspended (breakpoint at line 428 in JaxWsServiceFactoryBean))	
	JaxWsServiceFactoryBean.initializeWrapping(OperationInfo, Method) line: 428	
	JaxWsServiceFactoryBean.initializeWSDLOperation(InterfaceInfo, OperationInfo, Method) line: 243	
	JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).initializeWSDLOperations() line: 668	
        initializeWrapping(o, method);
/cb,
	JaxWsServiceFactoryBean.initializeWSDLOperations() line: 287	
        for (OperationInfo o : intf.getOperations()) {
			...
                initializeWSDLOperation(intf, o, selected);
/cb,
	JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).buildServiceFromWSDL(String) line: 418	
	JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).initializeServiceModel() line: 528	
	JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).create() line: 263	
	JaxWsServiceFactoryBean.create() line: 199	
	JaxWsServerFactoryBean(AbstractWSDLBasedEndpointFactory).createEndpoint() line: 103	
	JaxWsServerFactoryBean(ServerFactoryBean).create() line: 168	
	JaxWsServerFactoryBean.create() line: 211	
	EndpointDefinitionParser$SpringEndpointImpl(EndpointImpl).getServer(String) line: 460	
	EndpointDefinitionParser$SpringEndpointImpl(EndpointImpl).doPublish(String) line: 338	
	EndpointDefinitionParser$SpringEndpointImpl(EndpointImpl).publish(String) line: 255	
	EndpointDefinitionParser$SpringEndpointImpl(EndpointImpl).publish() line: 543	
	NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]	
	NativeMethodAccessorImpl.invoke(Object, Object[]) line: 62	
	DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 43	
	Method.invoke(Object, Object...) line: 498	
	DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).invokeCustomInitMethod(String, Object, RootBeanDefinition) line: 1758	
	DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).invokeInitMethods(String, Object, RootBeanDefinition) line: 1695	
	DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).initializeBean(String, Object, RootBeanDefinition) line: 1624	
	DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).doCreateBean(String, RootBeanDefinition, Object[]) line: 555	
	DefaultListableBeanFactory(AbstractAutowireCapableBeanFactory).createBean(String, RootBeanDefinition, Object[]) line: 483	
	AbstractBeanFactory$1.getObject() line: 306	
	DefaultListableBeanFactory(DefaultSingletonBeanRegistry).getSingleton(String, ObjectFactory<?>) line: 230	
	DefaultListableBeanFactory(AbstractBeanFactory).doGetBean(String, Class<T>, Object[], boolean) line: 302	
	DefaultListableBeanFactory(AbstractBeanFactory).getBean(String) line: 197	
	DefaultListableBeanFactory.preInstantiateSingletons() line: 761	
	XmlWebApplicationContext(AbstractApplicationContext).finishBeanFactoryInitialization(ConfigurableListableBeanFactory) line: 867	
	XmlWebApplicationContext(AbstractApplicationContext).refresh() line: 543	
	CXFServlet.createSpringContext(ApplicationContext, ServletConfig, String) line: 151	
	CXFServlet.loadBus(ServletConfig) line: 74	
	CXFServlet(CXFNonSpringServlet).init(ServletConfig) line: 80	
	StandardWrapper.initServlet(Servlet) line: 1183	
	StandardWrapper.loadServlet() line: 1099	
	StandardWrapper.load() line: 989	
	StandardContext.loadOnStartup(Container[]) line: 4931	
	StandardContext.startInternal() line: 5241	
	StandardContext(LifecycleBase).start() line: 150	
	StandardHost(ContainerBase).addChildInternal(Container) line: 752	
	StandardHost(ContainerBase).addChild(Container) line: 728	
	StandardHost.addChild(Container) line: 734	
	HostConfig.deployWAR(ContextName, File) line: 988	
	HostConfig$DeployWar.run() line: 1860	
	Executors$RunnableAdapter<T>.call() line: 511	
	FutureTask<V>.run() line: 266	
	ThreadPoolExecutor.runWorker(ThreadPoolExecutor$Worker) line: 1149	
	ThreadPoolExecutor$Worker.run() line: 624	
	Thread.run() line: 748	
/ in meer detail
        Class<?> responseWrapper = getResponseWrapper(selected);
selected=
public abstract java.lang.String demo.hw.server.HelloWorld.sayHi2(java.lang.String,int,java.lang.String,java.lang.Integer,boolean)
/s
JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).getResponseWrapper(Method) line: 2291	
        for (AbstractServiceConfiguration c : serviceConfigurations) {
            Class<?> cls = c.getResponseWrapper(selected);
/s 
JaxWsServiceConfiguration.getResponseWrapper(Method) line: 614	
        Method m = getDeclaredMethod(selected);
        ResponseWrapper rw = m.getAnnotation(ResponseWrapper.class);
@javax.xml.ws.ResponseWrapper(localName=sayHi2Response, className=demo.hw.server.SayHi2Response, targetNamespace=http://server.hw.demo/, partName=)
        String clsName = "";
        if (rw == null) {
/n 
            clsName = getPackageName(selected) + ".jaxws." + StringUtils.capitalize(selected.getName())
                      + "Response";
        } else {
/j 
            clsName = rw.className();
        }
      try {
                Class<?> r = ClassLoaderUtils.loadClass(clsName, implInfo.getEndpointClass());
implInfo.getEndpointClass()=interface demo.hw.server.HelloWorld
r	Class<T> (demo.hw.server.SayHi2Response) (id=444)	
                return r;
/t,
JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).getResponseWrapper(Method) line: 2294	
        for (AbstractServiceConfiguration c : serviceConfigurations) {
            Class<?> cls = c.getResponseWrapper(selected);
            if (cls != null) {
/j,
                return cls;
/t,
JaxWsServiceFactoryBean.initializeWrapping(OperationInfo, Method) line: 429	
        Class<?> responseWrapper = getResponseWrapper(selected);
/d,
class demo.hw.server.SayHi2Response
/ dit is dus de reponse wrapper, want je kunt geen string over de line sturen,

        if (responseWrapper != null) {
            o.getOutput().getFirstMessagePart().setTypeClass(responseWrapper);
o	OperationInfo  (id=516)	
	outputMessage	MessageInfo  (id=517)	
		messageParts	LinkedHashMap<K,V>  (id=520)	
			[0]	LinkedHashMap$Entry<K,V>  (id=601)	
				key	QName  (id=535)	
				value	MessagePartInfo  (id=526)	
					elementName	QName  (id=531)	{http://server.hw.demo/}sayHi2Response
					typeClass	Class<T> (demo.hw.server.SayHi2Response) (id=509)	
					
        if (getResponseWrapperClassName(selected) != null) {
            o.getOutput().getFirstMessagePart().setProperty("RESPONSE.WRAPPER.CLASSNAME",
                                                           getResponseWrapperClassName(selected));
				propertyMap	AtomicReference<V>  (id=536)	
					value	ConcurrentHashMap<K,V>  (id=675)	
						[0]	ConcurrentHashMap$MapEntry<K,V>  (id=681)	
							key	"RESPONSE.WRAPPER.CLASSNAME" (id=683)	
							value	"demo.hw.server.SayHi2Response" (id=503)

        Class<?> requestWrapper = getRequestWrapper(selected);
        if (requestWrapper != null) {
            o.getInput().getFirstMessagePart().setTypeClass(requestWrapper);
        }
        if (getRequestWrapperClassName(selected) != null) {
            o.getInput().getFirstMessagePart().setProperty("REQUEST.WRAPPER.CLASSNAME",
                                                           getRequestWrapperClassName(selected));
        }
							

							


/ Intermezzo

/ Einde Intermezzo

/ Intermezzo

/ google
soap porttype binding java
/ lees,
http://java.globinch.com/enterprise-java/web-services/soap-binding-document-rpc-style-web-services-difference/
https://www.ibm.com/support/knowledgecenter/en/SSFPJS_8.5.5/com.ibm.wbpm.wid.integ.doc/access/topics/rwsdlstyle.html
/ lees,
http://cxf.apache.org/docs/developing-a-service.html#DevelopingaService-WSDLFirstDevelopment

<portType/> <-> SEI, hier HelloWorld.java

<xs:schema xmlns:tns="http://server.hw.demo/"

  <wsdl:portType name="HelloWorld">
    <wsdl:operation name="sayHi2">
      <wsdl:input name="sayHi2" message="tns:sayHi2">
    </wsdl:input>
      <wsdl:output name="sayHi2Response" message="tns:sayHi2Response">
    </wsdl:output>
    </wsdl:operation>
	
  <wsdl:message name="sayHi2Response">
    <wsdl:part name="parameters" element="tns:sayHi2Response">	<!-- element= refs aan <xs:element/> -->
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="sayHi2">
    <wsdl:part name="parameters" element="tns:sayHi2">
    </wsdl:part>
  </wsdl:message>
  
   <xs:element name="sayHi2" type="tns:sayHi2"/>

  <xs:element name="sayHi2Response" type="tns:sayHi2Response"/>	<!-- type= refs aan <complexType/> --> <!-- WH de wrapper -->
  
   <xs:complexType name="sayHi2">
    <xs:sequence>
      <xs:element minOccurs="0" name="arg0" type="xs:string"/>
      <xs:element name="arg1" type="xs:int"/>
      <xs:element minOccurs="0" name="arg2" type="xs:string"/>
      <xs:element minOccurs="0" name="arg3" type="xs:int"/>
      <xs:element name="arg4" type="xs:boolean"/>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="sayHi2Response">		
    <xs:sequence>
      <xs:element minOccurs="0" name="return" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  
  <wsdl:binding name="HelloWorldServiceSoapBinding" type="tns:HelloWorld">				<!-- type= klopt, want <portType/> -->
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="sayHi2">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="sayHi2">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="sayHi2Response">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
	
  <wsdl:service name="HelloWorldService">
    <wsdl:port name="HelloWorldPort" binding="tns:HelloWorldServiceSoapBinding"> <!-- binding= refs aan <wsdl:binding/> -->	
  
/ Einde Intermezzo

/c,
Daemon Thread [localhost-startStop-4] (Suspended (breakpoint at line 239 in DefaultServiceConfiguration))	
	DefaultServiceConfiguration.isWrapped(Method) line: 239	
        return getServiceFactory().isWrapped();

	JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).isWrapped(Method) line: 1999	
            for (AbstractServiceConfiguration c : serviceConfigurations) {
                b = c.isWrapped(method);

	JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).initializeClassInfo(OperationInfo, Method, List<String>) line: 717	
        if (isWrapped(method)) {

	JaxWsServiceFactoryBean.initializeWSDLOperation(InterfaceInfo, OperationInfo, Method) line: 248
        initializeWrapping(o, method);
/d,
        // rpc out-message-part-info class mapping
        Operation op = (Operation)o.getProperty(WSDLServiceBuilder.WSDL_OPERATION);

        initializeClassInfo(o, method, op == null ? null
            : CastUtils.cast(op.getParameterOrdering(), String.class));
/ debug
/s,
JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).isWrapped(Method) line: 1999	
            for (AbstractServiceConfiguration c : serviceConfigurations) {
this	JaxWsServiceFactoryBean  (id=424)	
	serviceConfigurations	ArrayList<E>  (id=481)	
		[0]	JaxWsServiceConfiguration  (id=484)	
		[1]	DefaultServiceConfiguration  (id=717)											/ geeft true
		[2]	AbstractWSDLBasedEndpointFactory$SoapBindingServiceConfiguration  (id=716)	
		[3]	WSDLBasedServiceConfiguration  (id=2322)	

                b = c.isWrapped(method);
/s,
JaxWsServiceConfiguration.isWrapped() line: 773	
    this	JaxWsServiceConfiguration  (id=484)	
	implInfo	JaxWsImplementorInfo  (id=506)	
		implementorClass	Class<T> (demo.hw.server.HelloWorldPortImpl) (id=1060)	
		seiClass	Class<T> (demo.hw.server.HelloWorld) (id=507)					/= implInfo.getEndpointClass()
		wsAnnotations	ArrayList<E>  (id=2332)	
    SOAPBinding ann = implInfo.getEndpointClass().getAnnotation(SOAPBinding.class); 
null
/t,
/s,
DefaultServiceConfiguration.isWrapped(Method) line: 239	
        return getServiceFactory().isWrapped();				/ return true TODO
/t,
JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).isWrapped(Method) line: 2001	

			for (AbstractServiceConfiguration c : serviceConfigurations) {
                b = c.isWrapped(method);
/d,
                if (b != null) {
                    wrappedCache.put(method, b);
                    return b.booleanValue();
/t,
JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).initializeClassInfo(OperationInfo, Method, List<String>) line: 754	
        if (isWrapped(method)) {
/d,
            if (o.getUnwrappedOperation() != null) {
                if (o.hasInput()) {
                    MessageInfo input = o.getInput();
                    MessagePartInfo part = input.getFirstMessagePart();
                    part.setTypeClass(getRequestWrapper(method));			/ sayHi2
                    part.setProperty("REQUEST.WRAPPER.CLASSNAME", getRequestWrapperClassName(method));
                    part.setIndex(0);
                }

                if (o.hasOutput()) {
                    MessageInfo input = o.getOutput();
                    MessagePartInfo part = input.getFirstMessagePart();
                    part.setTypeClass(getResponseWrapper(method));
                    part.setProperty("RESPONSE.WRAPPER.CLASSNAME", getResponseWrapperClassName(method));
                    part.setIndex(0);
                }
                setFaultClassInfo(o, method);
                o = o.getUnwrappedOperation();		/ !

	getUnwrappedOperation() returned	UnwrappedOperationInfo  (id=585)	
this	JaxWsServiceFactoryBean  (id=424)	
o	UnwrappedOperationInfo  (id=585)	
	inName	"sayHi2" (id=575)	
	inputMessage	MessageInfo  (id=2528)	
		messageParts	LinkedHashMap<K,V>  (id=2532)	
			[0]	LinkedHashMap$Entry<K,V>  (id=2538)
{http://server.hw.demo/}arg0=[MessagePartInfo name={http://server.hw.demo/}arg0, ConcreteName=arg0			
			[1]	LinkedHashMap$Entry<K,V>  (id=2539)	
{http://server.hw.demo/}arg1=[MessagePartInfo name={http://server.hw.demo/}arg1, ConcreteName=arg1
			[2]	LinkedHashMap$Entry<K,V>  (id=2540)	
{http://server.hw.demo/}arg2=[MessagePartInfo name={http://server.hw.demo/}arg2, ConcreteName=arg2
			[3]	LinkedHashMap$Entry<K,V>  (id=2541)	
{http://server.hw.demo/}arg3=[MessagePartInfo name={http://server.hw.demo/}arg3, ConcreteName=arg3
			[4]	LinkedHashMap$Entry<K,V>  (id=2542)	
{http://server.hw.demo/}arg4=[MessagePartInfo name={http://server.hw.demo/}arg4, ConcreteName=arg4
			mName	QName  (id=2533)	
		type	MessageInfo$Type  (id=2535)	
	intf	InterfaceInfo  (id=579)	
	opName	QName  (id=582)	{http://server.hw.demo/}sayHi2
	outName	"sayHi2Response" (id=583)	
	outputMessage	MessageInfo  (id=2529)	
		messageParts	LinkedHashMap<K,V>  (id=2599)	
			[0]	LinkedHashMap$Entry<K,V>  (id=2603)	
				key	QName  (id=2604)	
				value	MessagePartInfo  (id=2605)	
		mName	QName  (id=588)	{http://server.hw.demo/}return
		type	MessageInfo$Type  (id=590)	
[MessagePartInfo name={http://server.hw.demo/}return, ConcreteName=return
	wrappedOp	OperationInfo  (id=516)	
		inName	"sayHi2" (id=575)	
		inputMessage	MessageInfo  (id=578)	
			messageParts	LinkedHashMap<K,V>  (id=2548)	
				[0]	LinkedHashMap$Entry<K,V>  (id=2593)	
					key	QName  (id=2509)	{http://server.hw.demo/}parameters
					value	MessagePartInfo  (id=2498)
[MessagePartInfo name={http://server.hw.demo/}parameters, ConcreteName={http://server.hw.demo/}sayHi2				
			mName	QName  (id=2533)	{http://server.hw.demo/}sayHi2
			type	MessageInfo$Type  (id=2535)	INPUT
		intf	InterfaceInfo  (id=579)	
		opName	QName  (id=582)	{http://server.hw.demo/}sayHi2
		outName	"sayHi2Response" (id=583)	
		outputMessage	MessageInfo  (id=517)	
			messageParts	LinkedHashMap<K,V>  (id=520)	
				[0]	LinkedHashMap$Entry<K,V>  (id=601)	
					key	QName  (id=535)	{http://server.hw.demo/}parameters
					value	MessagePartInfo  (id=526)
[MessagePartInfo name={http://server.hw.demo/}parameters, ConcreteName={http://server.hw.demo/}sayHi2Response
			mName	QName  (id=588)	{http://server.hw.demo/}sayHi2Response
			type	MessageInfo$Type  (id=590)/ OUTPUT	
		parameterOrdering	null	
		propertyMap	AtomicReference<V>  (id=584)	
			value	ConcurrentHashMap<K,V>  (id=2674)	
				[0]	ConcurrentHashMap$MapEntry<K,V>  (id=2678)	
					key	"operation.method" (id=2741)	
					value	Method  (id=487)	
public abstract java.lang.String demo.hw.server.HelloWorld.sayHi2(java.lang.String,int,java.lang.String,java.lang.Integer,boolean)
				[1]	ConcurrentHashMap$MapEntry<K,V>  (id=2679)	
					key	"org.apache.cxf.wsdl11.WSDLServiceBuilder.OPERATION" (id=2747)	
					value	OperationImpl  (id=2748)	
Operation: name=sayHi2
style=REQUEST_RESPONSE,1
Input: name=sayHi2
Message: name={http://server.hw.demo/}sayHi2
Part: name=parameters
elementName={http://server.hw.demo/}sayHi2
Output: name=sayHi2Response
Message: name={http://server.hw.demo/}sayHi2Response
Part: name=parameters
elementName={http://server.hw.demo/}sayHi2Response
				[2]	ConcurrentHashMap$MapEntry<K,V>  (id=2680)	
					key	"java.lang.reflect.Method" (id=2751)	
					value	Method  (id=487)	
public abstract java.lang.String demo.hw.server.HelloWorld.sayHi2(java.lang.String,int,java.lang.String,java.lang.Integer,boolean)
			

        o.setProperty(METHOD_PARAM_ANNOTATIONS, method.getParameterAnnotations());
        o.setProperty(METHOD_ANNOTATIONS, method.getAnnotations());
wrappedOp	OperationInfo  (id=516)	
	propertyMap	AtomicReference<V>  (id=584)	
		value	ConcurrentHashMap<K,V>  (id=2674)	
			[0]	ConcurrentHashMap$MapEntry<K,V>  (id=2861)	
				key	"operation.method" (id=2741)	
				value	Method  (id=487)
public abstract java.lang.String demo.hw.server.HelloWorld.sayHi2(java.lang.String,int,java.lang.String,java.lang.Integer,boolean)				
			[1]	ConcurrentHashMap$MapEntry<K,V>  (id=2862)	
				key	"org.apache.cxf.wsdl11.WSDLServiceBuilder.OPERATION" (id=2747)	
				value	OperationImpl  (id=2748)
Operation: name=sayHi2
style=REQUEST_RESPONSE,1
Input: name=sayHi2
Message: name={http://server.hw.demo/}sayHi2
Part: name=parameters
elementName={http://server.hw.demo/}sayHi2
Output: name=sayHi2Response
Message: name={http://server.hw.demo/}sayHi2Response
Part: name=parameters
elementName={http://server.hw.demo/}sayHi2Response				
			[2]	ConcurrentHashMap$MapEntry<K,V>  (id=2863)	
				key	"method.return.annotations" (id=2836)	
				value	Annotation[4]  (id=2835)	
					[0]	$Proxy55  (id=2936)	
@javax.jws.WebMethod(action=, exclude=false, operationName=)
					[1]	$Proxy56  (id=707)	
@javax.xml.ws.RequestWrapper(localName=sayHi2, className=demo.hw.server.SayHi2, targetNamespace=http://server.hw.demo/, partName=)
					[2]	$Proxy57  (id=489)
@javax.xml.ws.ResponseWrapper(localName=sayHi2Response, className=demo.hw.server.SayHi2Response, targetNamespace=http://server.hw.demo/, partName=)					
					[3]	$Proxy58  (id=2938)	
@javax.jws.WebResult(name=return, header=false, targetNamespace=, partName=)
			[3]	ConcurrentHashMap$MapEntry<K,V>  (id=2864)	
				key	"java.lang.reflect.Method" (id=2751)	
				value	Method  (id=487)
public abstract java.lang.String demo.hw.server.HelloWorld.sayHi2(java.lang.String,int,java.lang.String,java.lang.Integer,boolean)				
			[4]	ConcurrentHashMap$MapEntry<K,V>  (id=2865)	
				key	"method.parameters.annotations" (id=2913)	
				value	Annotation[5][]  (id=2829)	
					[0]	Annotation[1]  (id=2915)	
[@javax.jws.WebParam(name=arg0, mode=IN, header=false, targetNamespace=, partName=)]
					[1]	Annotation[1]  (id=2916)
[@javax.jws.WebParam(name=arg1, mode=IN, header=false, targetNamespace=, partName=)]					
					[2]	Annotation[1]  (id=2917)
[@javax.jws.WebParam(name=arg2, mode=IN, header=false, targetNamespace=, partName=)]					
					[3]	Annotation[1]  (id=2919)
[@javax.jws.WebParam(name=arg3, mode=IN, header=false, targetNamespace=, partName=)]					
					[4]	Annotation[1]  (id=2920)
[@javax.jws.WebParam(name=arg4, mode=IN, header=false, targetNamespace=, partName=)]					

        for (int i = 0; i < paramTypes.length; i++) {	String, int, String, Integer
            Class<?> paramType = paramTypes[i];
            Type genericType = genericTypes[i];
            if (!initializeParameter(o, method, i, paramType, genericType)) {
/s,
JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).initializeParameter(OperationInfo, Method, int, Class<?>, Type) line: 823	
        if (isIn && !isOut) {
            QName name = getInPartName(o, method, i);
...
/s,
JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).getInParameterName(OperationInfo, Method, int) line: 2258	
        for (AbstractServiceConfiguration c : serviceConfigurations) {
            QName q = c.getInParameterName(op, method, paramNumber);
/s,
JaxWsServiceConfiguration.getInParameterName(OperationInfo, Method, int) line: 248	
        return getParameterName(op, method, paramNumber, op.getInput().size(), "arg", true);
/s,
JaxWsServiceConfiguration.getParameterName(OperationInfo, Method, int, int, String, boolean) line: 340	
        WebParam param = getWebParam(method, paramNumber);	/ paramNumber=0
@javax.jws.WebParam(name=arg0, mode=IN, header=false, targetNamespace=, partName=)
        if (param != null) {
            tns = param.targetNamespace(); / http://server.hw.demo/
            local = param.name();	/ arg0

            QName wrappername = null;
            if (input) {
                wrappername = getRequestWrapperName(op, method);
            if (wrappername != null) {
                tns = wrappername.getNamespaceURI();
http://server.hw.demo/
        return new QName(tns, local);
/t,
JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).initializeParameter(OperationInfo, Method, int, Class<?>, Type) line: 824	
        if (isIn && !isOut) {
            QName name = getInPartName(o, method, i);
/d,
{http://server.hw.demo/}arg0
            part = o.getInput().getMessagePart(name);
[MessagePartInfo name={http://server.hw.demo/}arg0, ConcreteName=arg0
/ TODO
            initializeParameter(part, paramType, genericType);
/ TODO,
        if (paraAnnos != null && part != null) {
            part.setProperty(PARAM_ANNOTATION, paraAnnos);

/c,
JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).initializeClassInfo(OperationInfo, Method, List<String>) line: 781	
        for (int i = 0; i < paramTypes.length; i++) {
            Class<?> paramType = paramTypes[i];
            Type genericType = genericTypes[i];
            if (!initializeParameter(o, method, i, paramType, genericType)) {
/d,
        if (o.hasOutput()
            && !initializeParameter(o, method, -1, method.getReturnType(), method.getGenericReturnType())) {
/s,
JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).initializeParameter(OperationInfo, Method, int, Class<?>, Type) line: 866	
        } else if (!isIn && isOut) {
            QName name = getOutPartName(o, method, i);
/s,
JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).getOutPartName(OperationInfo, Method, int) line: 2278	
        if (isWrapped(method)) {
            return getOutParameterName(op, method, paramNumber);
/s,
JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).getOutParameterName(OperationInfo, Method, int) line: 2268	
        for (AbstractServiceConfiguration c : serviceConfigurations) {
            QName q = c.getOutParameterName(op, method, paramNumber);
/s,
JaxWsServiceConfiguration.getOutParameterName(OperationInfo, Method, int) line: 481	
        WebResult webResult = getWebResult(method);
/ method=
	public abstract java.lang.String demo.hw.server.HelloWorld.sayHi2(java.lang.String,int,java.lang.String,java.lang.Integer,boolean)
/s,
JaxWsServiceConfiguration.getWebResult(Method) line: 528	
        return method.getAnnotation(WebResult.class);

/ Intermezzo

@WebService(targetNamespace = "http://server.hw.demo/", name = "HelloWorld")
@XmlSeeAlso({ObjectFactory.class})
public interface HelloWorld {

    @WebMethod
    @RequestWrapper(localName = "sayHi2", targetNamespace = "http://server.hw.demo/", className = "demo.hw.server.SayHi2")
    @ResponseWrapper(localName = "sayHi2Response", targetNamespace = "http://server.hw.demo/", className = "demo.hw.server.SayHi2Response")
    @WebResult(name = "return", targetNamespace = "")
    public java.lang.String sayHi2(
        @WebParam(name = "arg0", targetNamespace = "")
        java.lang.String arg0,
        @WebParam(name = "arg1", targetNamespace = "")
        int arg1,
        @WebParam(name = "arg2", targetNamespace = "")
        java.lang.String arg2,
        @WebParam(name = "arg3", targetNamespace = "")
        java.lang.Integer arg3,
        @WebParam(name = "arg4", targetNamespace = "")
        boolean arg4
    );
	
/ cxf probeert eerst de ns uit @WebResult te halen, maar is er niet, daarna probeert uit @ResponseWrapper:
	
/ Einde Intermezzo
	
/t,
JaxWsServiceConfiguration.getOutParameterName(OperationInfo, Method, int) line: 457	
        WebResult webResult = getWebResult(method);
/d,
        if (webResult != null) {
            tns = webResult.targetNamespace();	/ ""
            local = webResult.name();			/ "return"
        }
		 if (tns == null || tns.length() == 0) {
            QName wrappername = getResponseWrapperName(op, method);	
/s,
JaxWsServiceConfiguration.getResponseWrapperName(OperationInfo, Method) line: 596	
        Method m = getDeclaredMethod(method);
public abstract java.lang.String demo.hw.server.HelloWorld.sayHi2(java.lang.String,int,java.lang.String,java.lang.Integer,boolean)
        ResponseWrapper rw = m.getAnnotation(ResponseWrapper.class);
@javax.xml.ws.ResponseWrapper(localName=sayHi2Response, className=demo.hw.server.SayHi2Response, targetNamespace=http://server.hw.demo/, partName=)
        String nm = null;
        String lp = null;
        if (rw != null) {
            nm = rw.targetNamespace(); / http://server.hw.demo/
            lp = rw.localName(); / sayHi2Response
        }
        WebMethod meth = m.getAnnotation(WebMethod.class); / @javax.jws.WebMethod(action=, exclude=false, operationName=)
/= we zien hoe een lege @WebMethod eruit ziet,	

		if (meth != null && StringUtils.isEmpty(lp)) {
/n,
        if (StringUtils.isEmpty(nm)) {
/n,
            return new QName(nm, lp);
/t,
JaxWsServiceConfiguration.getOutParameterName(OperationInfo, Method, int) line: 463	
            QName wrappername = getResponseWrapperName(op, method);
/d,
{http://server.hw.demo/}sayHi2Response

            if (wrappername != null) {
                tns = wrappername.getNamespaceURI();
				
        return new QName(tns, local);
tns	"http://server.hw.demo/" (id=3474)	
local	"return" (id=3491)	

/t,
JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).getOutParameterName(OperationInfo, Method, int) line: 2270	
        for (AbstractServiceConfiguration c : serviceConfigurations) {
            QName q = c.getOutParameterName(op, method, paramNumber);
/d,
            if (q != null) {
                return q;
/t,
JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).getOutPartName(OperationInfo, Method, int) line: 2278	
        if (isWrapped(method)) {
            return getOutParameterName(op, method, paramNumber);
/t,
JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).initializeParameter(OperationInfo, Method, int, Class<?>, Type) line: 867	
        } else if (!isIn && isOut) {
            QName name = getOutPartName(o, method, i);
/d,
{http://server.hw.demo/}return
            part = o.getOutput().getMessagePart(name);
...
/s,
MessageInfo(AbstractMessageContainer).getMessagePart(QName) line: 157	
        MessagePartInfo mpi = messageParts.get(name);
messageParts=
{{http://server.hw.demo/}return=[MessagePartInfo name={http://server.hw.demo/}return, ConcreteName=return}
/ er is er maar 1,
        if (mpi != null) {
            return mpi;
/t,
JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).initializeParameter(OperationInfo, Method, int, Class<?>, Type) line: 874	
            QName name = getOutPartName(o, method, i);
            part = o.getOutput().getMessagePart(name);
/d,
            part.setProperty(ReflectionServiceFactoryBean.MODE_OUT, Boolean.TRUE);
            initializeParameter(part, paramType, genericType);
/s,
JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).initializeParameter(MessagePartInfo, Class<?>, Type) line: 1826	
        part.setProperty(GENERIC_TYPE, type);	/ java.lang.String
	    part.setTypeClass(rawClass);	/ java.lang.String
/t,
JaxWsServiceFactoryBean(ReflectionServiceFactoryBean).initializeParameter(OperationInfo, Method, int, Class<?>, Type) line: 876	
	        initializeParameter(part, paramType, genericType);
/d,
            part.setIndex(i + 1);
		

	
	
	
	
	
	
	
	


/ 13	. 

/ google,
wildfly jax-ws implementation
/ lees,
https://stackoverflow.com/questions/37158821/wildfly-how-to-use-jaxws-ri-instead-of-apache-cxf-webservice-client-only

/ 13	. 

/ wsdl2java

/ lees,
http://cxf.apache.org/docs/developing-a-service.html

/ we keren terug naar wsdl2java,

C:\Users\ervelden\temp>wsdl2java -b binding.xml -faultSerialVersionUID 0 -ant -impl -server CustomerService.wsdl

/ we zien extra,

build.xml

Directory of C:\Users\ervelden\temp\com\example\customerservice
19-10-2017  09:07             2.349 CustomerServicePortImpl.java
19-10-2017  09:07               916 CustomerService_CustomerServicePort_Server.java

/ 7	. 

/ we willen wsdl_first debug, 
/ we hebben tomcat external start, 
/ we maken een 'remote java application'  debug config, maar wsdl_first staat er niet bij als project, dus we kozen cxf-core,
/ TODO
/ we willen een b set in CXFServlet, 	maar hij dan de source niet vinden,
/ we extract in ~\java apache-cxf-3.2.0-src	, en maken 
/ we attach de sourc dir ~\java\apache-cxf-3.2.0-src\distribution\src\main\release\samples\wsdl_first\src\main\java
/ OK
/ Maar het is een workaround, 	
/ we zien geen build path op wsdl_first, 

/ we maken een nieuwe workspace-jbosstools-jee-oxygen-cxf-binary, en import existing maven project,
C:\Users\ervelden\java\apache-cxf-3.2.0\samples
/ we disable windows, preferences, validation , xml validator manual, build, 
/ lees,
https://stackoverflow.com/questions/7489510/disable-xml-validation-in-eclipse


org.eclipse.wst.common.project.facet.core.builder
org.eclipse.jdt.core.javabuilder


/ 13	 .

/ m2eclipse en maven-eclipse-plugin
/ use geen eclipse:eclipse in eclipse,
/ lees,
https://stackoverflow.com/questions/8393447/is-maven-eclipse-plugin-no-longer-needed-with-the-new-m2eclipse-in-indigo

/ 13	. 

/ Als eclipse target\classes niet toont, 
/////////////////
/ click V in project explorer, ''Filters and customization', uncheck 'Java output folders'	,

/ als we met editor in pom.xml junit:junit:4.12:test add, wordt hamcrest-core:1.3:test als transitive dep ook add
/ TODO 

/ 13	.

/ we zien in eclipse de source file structuur en het build path als we,
$ vi .project
	<natures>
		<nature>org.eclipse.jdt.core.javanature</nature>
		

/ 7	. 

/ project java_first_jaxws

/ we willen een client,

/ 13	. 

/ demo.hw.client.Client 

/ 13	. 

/ SOAP UI

/ we willen de wsdl hebben voor in SOAP UI, 
/ in project wsdl_first hadden we vanaf begin af aan al de wsdl, 

C:\Users\ervelden\java\apache-cxf-3.2.0\samples\java_first_jaxws\target>java2ws -wsdl -classpath classes demo.hw.server.HelloWorld
/ we zien in target\  HelloWorldService.wsdl, 

$ vi HelloWorldService.wsdl
  <wsdl:service name="HelloWorldService">
    <wsdl:port name="HelloWorldPort" binding="tns:HelloWorldServiceSoapBinding">
      <soap:address location="http://localhost:9090/HelloWorldPort"/>
    </wsdl:port>
  </wsdl:service>

/ we maken in SOAP UI
Project name: java_first_jaxws
Initial WSDL: C:\Users\ervelden\java\apache-cxf-3.2.0\samples\java_first_jaxws\target\HelloWorldService.wsdl

/ 7	 . 

/ project wsdl_first

$ vi CustomerService.wsdl

    <wsdl:service name="CustomerServiceService">  <!--  Dit is voor SOAP UI -->
        <wsdl:port name="CustomerServicePort" binding="tns:CustomerServiceServiceSoapBinding">
            <!-- embedded deployment -->
            <soap:address location="http://localhost:9090/CustomerServicePort"/>
            <!-- Tomcat deployment, embedded or standalone -->
            <!-- <soap:address location="http://localhost:8080/wsdl_first/services/CustomerServicePort"/> -->
        </wsdl:port>
    </wsdl:service>

/ dit is voor clients, zoals SOAP UI en WH CustomerServiceClient, 
/ je kunt gerust met <soap:address location="http://localhost:9090/CustomerServicePort"/> deploy in tomcat, 
/ als je dan geeft in chrome
http://localhost:8080/wsdl_first/services/CustomerServicePort?wsdl
/ dan zien we dezelfde wsdl, met 1 verschil: we zien <soap:address location="http://localhost:8080/wsdl_first/services/CustomerServicePort"/>
/ als je deze CustomerService.wsdl import in SOAP UI, dan fout, want er moet http://localhost:8080/wsdl_first/services/CustomerServicePort in staan,

/ 7	. 

/ see onder MAVEN hoe wsdl_first deploy in tomcat, en remote debug op 8000	, 
/ we vallen in 
Daemon Thread [http-nio-8080-exec-3] (Suspended (breakpoint at line 53 in CustomerServiceImpl))	
	CustomerServiceImpl.getCustomersByName(String) line: 53	
	NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]	
	NativeMethodAccessorImpl.invoke(Object, Object[]) line: 62	
	DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 43	
	Method.invoke(Object, Object...) line: 498	
	JAXWSMethodInvoker(AbstractInvoker).performInvocation(Exchange, Object, Method, Object[]) line: 179	
	JAXWSMethodInvoker.performInvocation(Exchange, Object, Method, Object[]) line: 66	
	JAXWSMethodInvoker(AbstractInvoker).invoke(Exchange, Object, Method, List<Object>) line: 96	
	JAXWSMethodInvoker(AbstractJAXWSMethodInvoker).invoke(Exchange, Object, Method, List<Object>) line: 232	
	JAXWSMethodInvoker.invoke(Exchange, Object, Method, List<Object>) line: 85	
	JAXWSMethodInvoker(AbstractInvoker).invoke(Exchange, Object) line: 74	
	ServiceInvokerInterceptor$1.run() line: 59	
	Executors$RunnableAdapter<T>.call() line: 511	
	ServiceInvokerInterceptor$2(FutureTask<V>).run() line: 266	
	ServiceInvokerInterceptor$2.run() line: 126	
	SynchronousExecutor.execute(Runnable) line: 37	
	ServiceInvokerInterceptor.handleMessage(Message) line: 131	
	PhaseInterceptorChain.doIntercept(Message) line: 308	
	ChainInitiationObserver.onMessage(Message) line: 121	
	ServletDestination(AbstractHTTPDestination).invoke(ServletConfig, ServletContext, HttpServletRequest, HttpServletResponse) line: 267	
	ServletController.invokeDestination(HttpServletRequest, HttpServletResponse, AbstractHTTPDestination) line: 234	
	ServletController.invoke(HttpServletRequest, HttpServletResponse, boolean) line: 208	
	ServletController.invoke(HttpServletRequest, HttpServletResponse) line: 160	
	CXFServlet(CXFNonSpringServlet).invoke(HttpServletRequest, HttpServletResponse) line: 191	
	CXFServlet(AbstractHTTPServlet).handleRequest(HttpServletRequest, HttpServletResponse) line: 301	
	CXFServlet(AbstractHTTPServlet).doPost(HttpServletRequest, HttpServletResponse) line: 220	
	CXFServlet(HttpServlet).service(HttpServletRequest, HttpServletResponse) line: 661	
	CXFServlet(AbstractHTTPServlet).service(ServletRequest, ServletResponse) line: 276	
	ApplicationFilterChain.internalDoFilter(ServletRequest, ServletResponse) line: 231	
	ApplicationFilterChain.doFilter(ServletRequest, ServletResponse) line: 166	
	WsFilter.doFilter(ServletRequest, ServletResponse, FilterChain) line: 52	
	ApplicationFilterChain.internalDoFilter(ServletRequest, ServletResponse) line: 193	
	ApplicationFilterChain.doFilter(ServletRequest, ServletResponse) line: 166	
	StandardWrapperValve.invoke(Request, Response) line: 198	
	StandardContextValve.invoke(Request, Response) line: 96	
	NonLoginAuthenticator(AuthenticatorBase).invoke(Request, Response) line: 478	
	StandardHostValve.invoke(Request, Response) line: 140	
	ErrorReportValve.invoke(Request, Response) line: 80	
	AccessLogValve(AbstractAccessLogValve).invoke(Request, Response) line: 650	
	StandardEngineValve.invoke(Request, Response) line: 87	
	CoyoteAdapter.service(Request, Response) line: 342	
	Http11Processor.service(SocketWrapperBase<?>) line: 799	
	Http11Processor(AbstractProcessorLight).process(SocketWrapperBase<?>, SocketEvent) line: 66	
	AbstractProtocol$ConnectionHandler<S>.process(SocketWrapperBase<S>, SocketEvent) line: 868	
	NioEndpoint$SocketProcessor.doRun() line: 1457	
	NioEndpoint$SocketProcessor(SocketProcessorBase<S>).run() line: 49	
	ThreadPoolExecutor(ThreadPoolExecutor).runWorker(ThreadPoolExecutor$Worker) line: 1149	
	ThreadPoolExecutor$Worker.run() line: 624	
	TaskThread$WrappingRunnable.run() line: 61	
	TaskThread(Thread).run() line: 748	

/ we hebben de sources van CustomerServiceImpl, van de CXFServlet, allemaal, 

/ 7	. 

/ cxf configuration

/ google
cxf-servlet.xml server-applicationContext.xml
/ lees, 
http://cxf.apache.org/docs/configuration.html

/ lees,
http://svn.apache.org/viewvc/cxf/trunk/systests/transports/src/test/java/org/apache/cxf/systest/servlet/cxf-servlet.xml?view=markup

/ 13	. 

/ we zien in WEB-INF\
cxf-server.xml
web.xml

/ we zien in WEB-INF\classes
binding.xml
client-applicationContext.xml
CustomerService.wsdl
cxf.xml
server-applicationContext.xml

/ we moeten de 2 xml files in WEB-INF laten staan, 
/ we kunnen de 4 xml en de wsdl files in WEB-INF\classes rm 


$ vi WEB-INF\cxf-servlet.xml

<beans 
	xmlns="http://www.springframework.org/schema/beans" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xmlns:jaxws="http://cxf.apache.org/jaxws" 
	xmlns:soap="http://cxf.apache.org/bindings/soap" 
	xsi:schemaLocation=" http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.2.xsd http://cxf.apache.org/bindings/soap http://cxf.apache.org/schemas/configuration/soap.xsd http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd">
	
    <jaxws:endpoint 
		xmlns:customer="http://customerservice.example.com/" 
		id="CustomerServiceHTTP" 
		address="/CustomerServicePort" 
		serviceName="customer:CustomerServiceService" 
		endpointName="customer:CustomerServicePort" 
		implementor="com.example.customerservice.server.CustomerServiceImpl">
        <!--jaxws:properties>
            <entry key="schema-validation-enabled" value="true" />
        </jaxws:properties-->
    </jaxws:endpoint>
</beans>

/ 7	. 

/ jaxws:

/ in wsdl_first, 

$ vi cxf-servlet.xml

<beans ...>
    <jaxws:endpoint 
		xmlns:customer="http://customerservice.example.com/" id="CustomerServiceHTTP" address="/CustomerServicePort" serviceName="customer:CustomerServiceService" endpointName="customer:CustomerServicePort" implementor="com.example.customerservice.server.CustomerServiceImpl">
		
/ in java_first_jaxws

$ vi cxf-servlet.xml

<beans ...>
    <jaxws:server id="jaxwsService" serviceClass="demo.hw.server.HelloWorld" address="/hello_world">

/ lees,
http://cxf.547215.n5.nabble.com/jaxws-endpoint-vs-jaxws-server-td561406.html
->
http://svn.apache.org/repos/asf/cxf/trunk/rt/frontend/jaxws/src/main/resources/schemas/jaxws.xsd

/ 7	.

/ namespace 

$ vi cxf-servlet.xml

<beans ...>
    <jaxws:endpoint xmlns:customer="http://customerservice.example.com/" 
	
$ vi CustomerService.wsdl

<wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http://customerservice.example.com/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" name="CustomerServiceService" targetNamespace="http://customerservice.example.com/">
    <wsdl:types>
        <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://customerservice.example.com/" attributeFormDefault="unqualified" elementFormDefault="unqualified" targetNamespace="http://customerservice.example.com/">

/ http://customerservice.example.com/ is WH een namespace, die we in cxf-servlet.xml en in de wsdl voorkomt en dus in de generated files CustomerService.java, ...	. 

/ als we customer attr rm in de jaxws:endpoint in cxf-servlet.xml, dan :
org.xml.sax.SAXParseException; lineNumber: 21; columnNumber: 237; UndeclaredPrefix: Cannot resolve 'customer:CustomerServiceService' as a QName: the prefix 'customer' is not declared.
/ TODO

/ 7	. 

/ wsdl_first, java_first_jaxws,

/ java_first_jaxws,
$ vi cxf-servlet.xml
    <jaxws:server 
		id="jaxwsService" 
		serviceClass="demo.hw.server.HelloWorld" 
		address="/hello_world">

/ java_first	, 
$ vi cxf-servlet.xml
    <jaxws:endpoint 
		xmlns:customer="http://customerservice.example.com/" 
		id="CustomerServiceHTTP" 
		address="/CustomerServicePort" 
		serviceName="customer:CustomerServiceService" 
		endpointName="customer:CustomerServicePort" 
		implementor="com.example.customerservice.server.CustomerServiceImpl">

/ allebei hebben ze address attr,

/ de urls zijn:
http://localhost:8080/java_first_jaxws/services/hello_world
http://localhost:8080/wsdl_first/services/CustomerServicePort

/ voor jetty,
http://localhost:9090/CustomerServicePort

/ 7	. 

/ java_first_jaxws

/ we doen 
mvn clean package
/ en install WAR in tomcat, 
/ geef in chrome,
http://localhost:8080/java_first_jaxws/services/hello_world?wsdl
/ OK

/ we moeten een wsdl hebben voor SOAP UI,

/ lees,
http://cxf.apache.org/docs/developing-a-service.html
http://cxf.apache.org/docs/java-to-ws.html

C:\Users\ervelden\java\apache-cxf-3.2.0\samples\java_first_jaxws> java2ws -wsdl -classpath target\classes -address http://localh
ost:8080/java_first_jaxws/services/hello_world -d src\main\resources demo.hw.server.HelloWorld

C:\Users\ervelden\java\apache-cxf-3.2.0\samples\java_first_jaxws>type src\main\resources\HelloWorldService.wsdl
...  
<wsdl:service name="HelloWorldService">
    <wsdl:port name="HelloWorldPort" binding="tns:HelloWorldServiceSoapBinding">
      <soap:address location="http://localhost:8080/java_first_jaxws/services/hello_world"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions>

/ we maken src\main\resources als source folder in eclipse,  in build path, Sources, add folder, check resources,


/ click in SOAP UI: SOAP button, 
/ project: java_first_jaxws
/ wsdl: C:\Users\ervelden\java\apache-cxf-3.2.0\samples\java_first_jaxws\src\main\resources\HelloWorldService.wsdl
/ OK

/ We zien 3 webservices, met Request1's 	, deze copy we,

/ 7	. 

/ verander methods, hoe wsdl en SOAP UI?

/ lees,

https://dzone.com/articles/soapui-tip-options-refreshing

/ 13	. 

/ add new method	,

/ we add ,
$ vi HelloWorld.java
@WebService
public interface HelloWorld {
    String sayHi2(String text, int age);
	
$ vi HelloWorldImpl.java
@WebService(endpointInterface = "demo.hw.server.HelloWorld",serviceName = "HelloWorld")
public class HelloWorldImpl implements HelloWorld {
	@Override
	public String sayHi2(String text, int age) {
		System.out.println("sayHi2 called");
		return "Hello "+text+", "+age;
	}

/ attr serviceName lijkt niets te doen; we zien hem niet terug in de wsdl,

/ in SOAP UI,

HelloWorldService
	HelloWorldServiceSoapBinding		/ right click	, Update definition,
	
Definition URL: 	file:/C:/Users/ervelden/java/apache-cxf-3.2.0/samples/java_first_jaxws/src/main/resources/HelloWorldService.wsdl
Create new requests: create default requests for new methods
/ er komt een nieuw request bij
sayHi2
	Request1
	
/ 13	. 

/ verander bestaande method,

$ vi HelloWorld.java
@WebService
public interface HelloWorld {
    String sayHi2(String text, int age,String street);
	
$ vi HelloWorldImpl.java
@WebService(endpointInterface = "demo.hw.server.HelloWorld",serviceName = "HelloWorld")
public class HelloWorldImpl implements HelloWorld {
	@Override
	public String sayHi2(String text, int age,String street) {
		System.out.println("sayHi2 called");
		return "Hello "+text+", "+age+", "+street;
	}

C:\Users\ervelden\java\apache-cxf-3.2.0\samples\java_first_jaxws> java2ws -wsdl -classpath target\classes -address http://localh
ost:8080/java_first_jaxws/services/hello_world -d src\main\resources demo.hw.server.HelloWorld

/ 1313	.

/ we kunnen in SOAP UI steeds met dezelfde wsdl verschillende opties kiezen hieronder,	 

/ kies, 
Create default requests for new methods
Recreate existing request with the new schema
/ de primitive args blijven staan, maar de optional String, Integer verdwijnen	, 

/ je ziet dit ook in de wsdl of een arg optional is of niet,	

@WebService
public interface HelloWorld {
	String sayHi2(String text, int age, String street, Integer number, boolean b);

  <xs:complexType name="sayHi2">
    <xs:sequence>
      <xs:element minOccurs="0" name="arg0" type="xs:string"/>
      <xs:element name="arg1" type="xs:int"/>
      <xs:element minOccurs="0" name="arg2" type="xs:string"/>
      <xs:element minOccurs="0" name="arg3" type="xs:int"/>
      <xs:element name="arg4" type="xs:boolean"/>
    </xs:sequence>
  </xs:complexType>
  
/ 7	. 

/ wsdl_first

/ see STUDY XSD

/ In de po.xml zien we 1 <purchaseOrder/>. Daarom moet er in de po.xsd een <element name="purchaseOrder" .../>	,

/ we zien in wsdl_first's CustomerService.xsd,
            <xs:element name="getCustomersByName" type="tns:getCustomersByName"/>
            <xs:element name="getCustomersByNameResponse" type="tns:getCustomersByNameResponse"/>
            <xs:element name="updateCustomer" type="tns:updateCustomer"/>

/ Wat er in SOAP messages staat, moet hier als <element/> staan, 
/ klopt, want updateCustomerResponse bestaat niet,

/ In SOAP UI hebben we, 

<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:cus="http://customerservice.example.com/">
   <soapenv:Header/>
   <soapenv:Body>
      <cus:getCustomersByName>
         <!--Optional:-->
         <name>Smith</name>
      </cus:getCustomersByName>
   </soapenv:Body>
</soapenv:Envelope>

<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns2:getCustomersByNameResponse xmlns:ns2="http://customerservice.example.com/">
         <return>
            <customerId>0</customerId>
            <name>Smith</name>
            <address>Pine Street 200</address>
            <numOrders>1</numOrders>
            <revenue>10000.0</revenue>
            <test>1.5</test>
            <birthDate>2009-02-01+01:00</birthDate>
            <type>BUSINESS</type>
         </return>
         <return>
            <customerId>0</customerId>
            <name>Smith</name>
            <address>Pine Street 200</address>
            <numOrders>1</numOrders>
            <revenue>10000.0</revenue>
            <test>1.5</test>
            <birthDate>2009-02-01+01:00</birthDate>
            <type>BUSINESS</type>
         </return>
      </ns2:getCustomersByNameResponse>
   </soap:Body>
</soap:Envelope>

<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:cus="http://customerservice.example.com/">
   <soapenv:Header/>
   <soapenv:Body>
      <cus:updateCustomer>
         <!--Optional:-->
         <customer>
            <customerId>0</customerId>
            <!--Optional:-->
            <name>Smith</name>
            <revenue>0</revenue>
         </customer>
      </cus:updateCustomer>
   </soapenv:Body>
</soapenv:Envelope>
  
/ HIER HIER HIER




/ Einde APACHE CXF

/ SERVERLESS

/ Lees,
https://www.manning.com/books/serverless-architectures-on-aws?a_aid=serverless-architectures-on-aws&a_bid=145280de
https://cloud.google.com/functions/docs/tutorials/
https://developers.redhat.com/blog/2017/06/07/red-hat-and-apache-openwhisk/

/ kijk,
https://www.youtube.com/watch?v=ErBfR-5rkTw


/ Einde SERVERLESS

/ HIBERNATE

/ google
hibernate test
/ lees,
https://vladmihalcea.com/2014/06/06/the-minimal-configuration-for-testing-hibernate/

C:\Users\ervelden\java>git clone https://github.com/hibernate/hibernate-orm.git

/ Einde HIBERNATE 

/ WILDFLY

/ Einde WILDFLY 


/ KLAD

conn=dataSource.getConnection()
stmt=conn.prepareStatement("...")
stmt.setLong(1,id)
res=stmt.executeQuery()
if(res.next())
	Spitter s=new Spitter();
	s.setId(res.getLong("id"))
	s.setUsername(res.getString("username"))
	
/ Einde KLAD

/ JAVA LAMBDAS

/ Lees,
https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html
https://docs.oracle.com/javase/tutorial/java/javaOO/examples/RosterTest.java
https://docs.oracle.com/javase/tutorial/java/javaOO/examples/Person.java
https://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html#static

/ workspace-jbosstools-jee-oxygen-cxf-binary
/ project aajava8

/ 13	. 

/ het betreft functional interfaces, interfaces met 1 functie, de lambda wordt deze functie,
/ dus als je hebt,
 
public class Calculator {
	interface IntegerMath {
        int operation(int a, int b);   
    }
    public int operateBinary(int a, int b, IntegerMath op) {
        return op.operation(a, b);
    }
    public static void main(String... args) {
        Calculator myApp = new Calculator();
        IntegerMath addition = (a, b) -> a + b;
        myApp.operateBinary(40, 2, addition));

/ dan zie je dat operation de lambda is,

/ we maken 	, 

$ vi src\main\java\lambdas\Calculator.java

package lambdas;

class Calculator {
	interface IntegerMath{
		int operation(int a,int b);
	}
	int operateBinary(int a,int b, IntegerMath i) {
		return i.operation(a, b);
	}
}

$ vi src\test\java\lambdas\CalculatorTest.java

package lambdas;

import static org.junit.Assert.*;
import org.junit.Test;

public class CalculatorTest {
	@Test
	public void test() {
		Calculator calculator=new Calculator();
		int r=calculator.operateBinary(7, 13, (a,b)->a+b);
		assertEquals(20, r);
	}
}




/ 13	. 

/ Lees, 
https://docs.oracle.com/javase/tutorial/java/javaOO/nested.html
http://tutorials.jenkov.com/java/nested-classes.html


/ 13	. 

/ Approach 5/6

/ Als de lambda expression het functional interface CheckPerson implements (een interface met maar 1 functie), moeten we 
	(Person p) ->
/ als de lambda expression het functional interface Predicate<Person> , dan is het al bekend dat het om een Person gaat, dus kunnen we,
	p ->
/ TODO
	
/ Approach 7	. 

/ we halen de .printPerson call uit de method, en stoppen hem in een lambda in de call ( op de method),

/ maar we gaan verder: nog meer functional interfaces in de method, en method calls in de lambda's,

/ Approach 9

/ Geen method meer, met interfaces, 


/ Einde JAVA LAMBDAS

/ JAVA METHOD REFERENCES

/ 7	. 

/ project aajava8 in workspace-jbosstools-jee-oxygen-cxf-binary

/ als Person een all args ctor heeft, dan heeft hij geen default ctor (als we deze niet def)	,
/ als we de all args ctor rm, heeft Person deze default ctor wel, 

/ 7	 

/ als we een static method, moet je static als eerste schrijven: 
class Person {
	static int compareByAge(Person p,Person q) {
/ en NIET, 
class Person {
	 int static compareByAge(Person p,Person q) {

/ 7	. 

/ test methods moeten public, en de class ook,

/ 7	. 

/ sort ArrayList: met Collections.sort, op Comparable Objects	,
https://stackoverflow.com/questions/16252269/how-to-sort-an-arraylist
->
https://docs.oracle.com/javase/tutorial/collections/interfaces/order.html

/ bij ons is LocalDate Comparable, en daar sort we op,
/ String is ook een Comparable, 

/ 7	. 

/ list -> array,
Person[]rosterAsArray=roster.toArray(new Person[roster.size()]);

/ array-> list
Integer[] spam = new Integer[] { 1, 2, 3 };
Arrays.asList(spam);

/ initialize array
Integer[] spam = new Integer[] { 1, 2, 3 };

/ initialize list
https://stackoverflow.com/questions/1005073/initialization-of-an-arraylist-in-one-line

/ jdk?
List<String> places = Arrays.asList("Buenos Aires", "Córdoba", "La Plata");	// immutable
ArrayList<String> places = new ArrayList<>(Arrays.asList("Buenos Aires", "Córdoba", "La Plata"));

/ jdk9
List<String> places = List.of("Buenos Aires", "Córdoba", "La Plata");					// immutable
List<String> places = new ArrayList<>(List.of("Buenos Aires", "Córdoba", "La Plata"));
$ vi Person.java

package methods;

import java.time.LocalDate;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;
import lombok.RequiredArgsConstructor;


@NoArgsConstructor
@AllArgsConstructor
@Data
class Person {

	enum Sex{
		Male,
		Female
	}
	
	String name;
	LocalDate birth;
	Sex gender;
	String email;
	
	static int compareByAgeStatic(Person p,Person q) {
		return p.getBirth().compareTo(q.getBirth());
	}
	int compareByAgeByInstance(Person p) {			// onbruikbaar	,
		return this.getBirth().compareTo(p.getBirth());
	}
}

$ vi PersonAgeComparator.java

package methods;

import java.util.Comparator;

class PersonAgeComparator implements Comparator<Person> {

	@Override
	public int compare(Person p, Person q) {
		return p.getBirth().compareTo(q.getBirth()); 
		//  LocalDate is een Comparable	, 
	}
	

}
class PersonNameComparator implements Comparator<Person> {

	@Override
	public int compare(Person p, Person q) {
		return p.getName().compareTo(q.getName()); 
		//  String is een Comparable	, 
	}
	

}


$ vi CompareTest.java

package methods;

import java.time.chrono.IsoChronology;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.List;

import org.junit.Before;
import org.junit.Test;
public class CompareTest {
	
	List<Person> roster;
	Person[]rosterAsArray;
	
	List<String>names;
	String[]namesAsArray;
	
	
	
	@Before
	public void init() {
		 roster = new ArrayList<>();
        roster.add(
            new Person(
            "Fred",
            IsoChronology.INSTANCE.date(1980, 6, 20),
            Person.Sex.Male,
            "fred@example.com"));
        roster.add(
            new Person(
            "Jane",
            IsoChronology.INSTANCE.date(1990, 7, 15),
            Person.Sex.Female, "jane@example.com"));
        roster.add(
            new Person(
            "George",
            IsoChronology.INSTANCE.date(1991, 8, 13),
            Person.Sex.Male, "george@example.com"));
        roster.add(
            new Person(
            "Bob",
            IsoChronology.INSTANCE.date(2000, 9, 12),
            Person.Sex.Male, "bob@example.com"));
        
        rosterAsArray=roster.toArray(new Person[roster.size()]);
        
        names=Arrays.asList("Barbara", "James", "Mary", "John","Patricia", "Robert", "Michael", "Linda" );
        namesAsArray=names.toArray(new String[names.size()]);
        
	}
	
	@Test
	public void testSortArray() {
		
		Arrays.sort(rosterAsArray,new PersonAgeComparator());
		for(int i=0;i<rosterAsArray.length;i++) {
			System.out.println(rosterAsArray[i]);
		}
		System.out.println();
		
	}

	@Test
	public void testAsCollection() {
		Collections.sort(roster,new PersonAgeComparator());
		for(int i=0;i<roster.size();i++) {
			System.out.println(roster.get(i));
		}
		System.out.println();
		for(Person p:roster) {
			System.out.println(p);
		}
		System.out.println();
	}
	@Test
	public void testSortArrayWithLambda() {
		
		Arrays.sort(rosterAsArray,(a,b)->a.getBirth().compareTo(b.getBirth()));
		for(int i=0;i<rosterAsArray.length;i++) {
			System.out.println(rosterAsArray[i]);
		}
		System.out.println();
		
	}
	@Test
	public void testAsCollectionWithLambda() {
		Collections.sort(roster,(a,b)->a.getBirth().compareTo(b.getBirth()));
		for(int i=0;i<roster.size();i++) {
			System.out.println(roster.get(i));
		}
		System.out.println();
		for(Person p:roster) {
			System.out.println(p);
		}
		System.out.println();
	}
	
	@Test
	public void testSortArrayWithMethodRef() {
		
		Arrays.sort(rosterAsArray,Person::compareByAgeStatic);
		for(int i=0;i<rosterAsArray.length;i++) {
			System.out.println(rosterAsArray[i]);
		}
		System.out.println();
		
	}
	@Test
	public void testAsCollectionWithMethodref() {
		Collections.sort(roster,Person::compareByAgeStatic);
		for(int i=0;i<roster.size();i++) {
			System.out.println(roster.get(i));
		}
		System.out.println();
		for(Person p:roster) {
			System.out.println(p);
		}
		System.out.println();
	}
	@Test
	public void testSortArrayWithMethodRef2() {
		
		Arrays.sort(rosterAsArray,new PersonAgeComparator()::compare);
		for(int i=0;i<rosterAsArray.length;i++) {
			System.out.println(rosterAsArray[i]);
		}
		System.out.println();
		
	}
	@Test
	public void testAsCollectionWithMethodref2() {
		Collections.sort(roster,new PersonAgeComparator()::compare);
		for(int i=0;i<roster.size();i++) {
			System.out.println(roster.get(i));
		}
		System.out.println();
		for(Person p:roster) {
			System.out.println(p);
		}
		System.out.println();
	}
	
	@Test
	public void testSortArrayWithMethodRef3() {
		
		Arrays.sort(rosterAsArray,new PersonNameComparator()::compare);
		for(int i=0;i<rosterAsArray.length;i++) {
			System.out.println(rosterAsArray[i]);
		}
		System.out.println();
		
	}
	@Test
	public void testAsCollectionWithMethodref4() {
		Collections.sort(roster,new PersonNameComparator()::compare);
		for(int i=0;i<roster.size();i++) {
			System.out.println(roster.get(i));
		}
		System.out.println();
		for(Person p:roster) {
			System.out.println(p);
		}
		System.out.println();
	}
	
	@Test
	public void testSortListOfStrings() {
		Collections.sort(names,String::compareToIgnoreCase);
		for(String n:names) {
			System.out.println(n);
		}
		System.out.println();
	}
	
	@Test
	public void testSortArrayOfStrings() {
		Arrays.sort(namesAsArray,String::compareToIgnoreCase);
		for(int i=0;i<namesAsArray.length;i++) {
			System.out.println(namesAsArray[i]);
		}
		System.out.println();
	}
}


/ Einde JAVA METHOD REFERENCES

/ JAVA STREAMS

/ lees,
http://www.baeldung.com/java-8-streams

/ lees,
https://docs.oracle.com/javase/tutorial/collections/streams/



/ Einde JAVA STREAMS 


/ JAVA ENCRYPTION

/ lees, over ec in jdk8	,
https://docs.oracle.com/javase/8/docs/technotes/guides/security/SunProviders.html#SunEC


/ google
JCA/JCE APIs
/ kijk,
https://www.youtube.com/watch?v=NKzOPWQWvBk		/ via https://www.youtube.com/watch?v=OOMle0wnLZ8
/ lees,
https://docs.oracle.com/javase/7/docs/technotes/guides/security/crypto/CryptoSpec.html
http://www.crypto-it.net/eng/tools/jca-and-jce.html

/ lees,
https://stackoverflow.com/questions/2954372/difference-between-spi-and-api

/ Einde JAVA ENCRYPTION

/ MAVEN 

/ eclipse jbosstools-jee-oxygen
/ workspace-jbosstools-jee-oxygen-cxf-binary

/ 7	. 


/ we hebben de samples van cxf imported, 
/ we zien allemaal niet OK maven projects volgens m2eclipse,  we zien bijvoorbeeld geen Build Path,
/ right click project, Maven, Update Project
/ en het is OK, 

/ we zien ook : right click , Maven, Download Sources, 

/ bijv bij java_first_jaxws, java_first_spring_support, wsdl_first

/ 7	. 

/ right click project aajava8	, Maven, add dependency, 
Index downloads are disabled, search results may be incomplete.
/ lees,
https://stackoverflow.com/questions/24252256/how-do-i-enable-index-downloads-in-eclipse-for-maven-dependency-search
Window, preferences, Maven,
"Download repository index updates on startup": check, 
/ Ook kun je, 
Download Artifact Sources	, 

/ Maar het duurt te lang, 
/ lees, 
https://stackoverflow.com/questions/5012567/why-does-eclipse-take-so-long-to-update-maven-dependencies
/ TODO


/ 7	. 

/ lees,
https://stackoverflow.com/questions/3539139/what-causes-imported-maven-project-in-eclipse-to-use-java-1-5-instead-of-java-1

/ als we een maven project maken, zien we versie 1.5	, 
$ vi .settings\org.eclipse.jdt.core.prefs
eclipse.preferences.version=1
org.eclipse.jdt.core.compiler.codegen.targetPlatform=1.5
org.eclipse.jdt.core.compiler.compliance=1.5
org.eclipse.jdt.core.compiler.problem.forbiddenReference=warning
org.eclipse.jdt.core.compiler.source=1.5

/ als we in de pom, 
$ vi pom.xml
  <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.7.0</version>
                <configuration>
                    <source>1.8</source>
                    <target>1.8</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
	
/ en als we nu right click project, 
Maven, Update Project...
/ dan wordt 
$ vi .settings\org.eclipse.jdt.core.prefs
eclipse.preferences.version=1
org.eclipse.jdt.core.compiler.codegen.targetPlatform=1.8
org.eclipse.jdt.core.compiler.compliance=1.8
org.eclipse.jdt.core.compiler.problem.forbiddenReference=warning
org.eclipse.jdt.core.compiler.source=1.8

/ ook in de build path zien we weer JavaSE-1.8	, 

/ 7	 .

/ project aajava8, 

/ als er geen maven-compiler-plugin met 1.8 in de pom staat, en je gaat naar build path , en je verandert naar JavaSE-1.8, dan hetzelfde effect: we zien in .settings\org.eclipse.jdt.core.prefs ook 1.8. Maar als we dan weer Maven, Update Project... doen, zien we in .settings\org.eclipse.jdt.core.prefs weer 1.5	, en in build path ook,

/ je moet dus altijd in pom.xml maven-compiler-plugin 1.8 set,

/ we zien in de effective pom van java_first_jaxws,	dat maven-compiler-plugin op 1.8 staat,
/ TODO verschil in <pluginManagement> en <plugins>
/ hij staat in de pom van zijn parent, cxf-samples, 
/ TODO maar niet in de effective pom,
$ vi pom.xml
/ TODO 

/ 7	. 

/ project wsdl_first

/ we doen $ mvn -Pserver
$ vi pom.xml
<plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>exec-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <phase>test</phase>
                                <goals>
                                    <goal>java</goal>
                                </goals>
                                <configuration>
                                    <mainClass>com.example.customerservice.server.CustomerServiceServer</mainClass>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
					
/ we set b in CustomerServiceServer, 
/ maar eclipse vindt de source niet,

/ lees,
https://stackoverflow.com/questions/6174550/eclipse-java-debugging-source-not-found

/ 13	. 

/ we probeerden	, 
$ vi pom.xml

        <profile>
            <id>server</id>
            <build>
                <defaultGoal>test</defaultGoal>
                <plugins>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>exec-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <phase>test</phase>
                                <goals>
                                    <goal>exec</goal>
                                </goals>
                                <configuration>
                                	<executable>java</executable>
                                    <!-- <mainClass>com.example.customerservice.server.CustomerServiceServer</mainClass> -->
                                    <arguments>
                                    	<argument>-Xdebug -Xrunjdwp:transport=dt_socket,address=8787,server=y,suspend=y</argument>
                                    	<argument>-classpath ${project.build.directory}\classes</argument>
                                    	<argument>com.example.customerservice.server.CustomerServiceServer</argument>
                                    </arguments>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
		
/ run config: wsdl_first-server, (run config, geen debug config),		
/ we zien:
Unrecognized option: -classpath C:\Users\ervelden\java\apache-cxf-3.2.0\samples\wsdl_first\target\classes
/ TODO

/ Moet -Xdebug	? 
/ TODO


/ maar als we op de command line,
C:\Users\ervelden\java\apache-cxf-3.2.0\samples\java_first_jaxws\target>java -classpath C:\Users\ervelden\java\apache-cxf-3.2.0\
samples\wsdl_first\target\classes com.example.customerservice.server.CustomerServiceServer
Starting Server
Exception in thread "main" java.lang.IllegalArgumentException: class com.example.customerservice.server.CustomerServiceImpl has
neither @WebService nor @WebServiceProvider annotation
        at com.sun.xml.internal.ws.server.EndpointFactory.verifyImplementorClass(EndpointFactory.java:424)
        at com.sun.xml.internal.ws.transport.http.server.EndpointImpl.getPrimaryWsdl(EndpointImpl.java:367)
        at com.sun.xml.internal.ws.transport.http.server.EndpointImpl.createEndpoint(EndpointImpl.java:315)
        at com.sun.xml.internal.ws.transport.http.server.EndpointImpl.publish(EndpointImpl.java:231)
        at com.sun.xml.internal.ws.spi.ProviderImpl.createAndPublishEndpoint(ProviderImpl.java:126)
        at javax.xml.ws.Endpoint.publish(Endpoint.java:240)
        at com.example.customerservice.server.CustomerServiceServer.<init>(CustomerServiceServer.java:35)
        at com.example.customerservice.server.CustomerServiceServer.main(CustomerServiceServer.java:44)


/ lees,
https://stackoverflow.com/questions/2935375/debugging-in-maven
http://www.mojohaus.org/exec-maven-plugin/usage.html
http://www.adam-bien.com/roller/abien/entry/what_are_the_options_of

/ 13	. 

/ we set de pom weer terug, 

$ vi pom.xml

        <profile>
            <id>server</id>
            <build>
                <defaultGoal>test</defaultGoal>
                <plugins>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>exec-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <phase>test</phase>
                                <goals>
                                    <goal>java</goal>
                                </goals>
                                <configuration>
                                    <mainClass>com.example.customerservice.server.CustomerServiceServer</mainClass>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>

/ debug config wsdl_first-server (geen run config), 
/ Edit source lookup path: C:\Users\ervelden\java\apache-cxf-3.2.0\samples\wsdl_first\src\main\java 
/ Helpt NIET
/ TODO

/ 13	. 

/ right click CustomerServiceServer, Run as, Java application,
/ ERR,
Caused by: java.io.IOException: Cannot find any registered HttpDestinationFactory from the Bus.
	at org.apache.cxf.transport.http.HTTPTransportFactory.getDestination(HTTPTransportFactory.java:275)
	at org.apache.cxf.binding.soap.SoapTransportFactory.getDestination(SoapTransportFactory.java:135)
	at org.apache.cxf.endpoint.ServerImpl.initDestination(ServerImpl.java:84)
	at org.apache.cxf.endpoint.ServerImpl.<init>(ServerImpl.java:63)
	at org.apache.cxf.frontend.ServerFactoryBean.create(ServerFactoryBean.java:182)
	... 8 more
/ TODO 

/ 13	. 

/ project wsdl_first

/ wat wel lukt is: 
$ mvn clean install
/ deploy WAR in tomcat 
/ maar debug config 'Remote Java application' 
name: wsdl_first-remote
project wsdl_first
localhost
8000
/ het is de debug config, dus hiermee debug we,
/ send SOAP UI message 'external tomcat'	,
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:cus="http://customerservice.example.com/">
   <soapenv:Header/>
   <soapenv:Body>
      <cus:getCustomersByName>
         <!--Optional:-->
         <name>Smith</name>
      </cus:getCustomersByName>
   </soapenv:Body>
</soapenv:Envelope>

/ we vallen in b 
CustomerServiceImpl.getCustomersByName(String) line: 53	



/ Einde MAVEN 

/ LOMBOK

/ lees over field injection, 
http://olivergierke.de/2013/11/why-field-injection-is-evil/
https://www.oracle.com/corporate/features/project-lombok.html

/ project aajava8 in workspace-jbosstools-jee-oxygen-cxf-binary
/ In Compare ziet eclipse auto-completion de @AllArgsConstructor niet van de class uit hetzelfde package, Person, maar eclipse ziet hem wel, je kunt hem geven in Compare, 
/ als Person alleen een @AllArgsConstructor heeft, heeft hij geen Person()	, en dat is in Compare ook zo.
/ dus Lombok werkt wel, alleen auto-completion ziet de @AllArgsConstructor niet, 
/ TODO

/ 7	 .

/ Als we @Data class Person, heeft Person de default ctor, maar dat is altijd zo als er geen ctors zijn def, 
/ als we ook @AllArgsConstructor, dan is de default ctor weg, dus moeten we ook @NoArgsConstructor	, 



/ Einde LOMBOK


/ CDK

/ lees,
https://developers.redhat.com/blog/2017/06/20/running-cdk-3-0-on-fedora-25/

/ kijk,
https://www.youtube.com/watch?v=AoDhQt8PtUQ&t=10s



/ Einde CDK

/ WIRESHARK 

/ lees,
https://www.wireshark.org/docs/wsug_html_chunked/ChBuildInstallWinInstall.html

/ we hebben ook WinPCap installed,

/ Einde WIRESHARK 


/ MAVEN

/ workspace-java-oxygen-cxf
/ project aaa

$ vi pom.xml

<project ...>
  <modelVersion>4.0.0</modelVersion>
  <groupId>my.own</groupId>
  <artifactId>aaa</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <dependencies>
  	<dependency>
  		<groupId>junit</groupId>
  		<artifactId>junit</artifactId>
  		<version>4.12</version>
  	</dependency>
  </dependencies>
</project>

$ mvn 

[ERROR] No goals have been specified for this build. You must specify a valid lifecycle phase or a goal in the format <plugin-prefix>:<goal> or <plugin-group-id>:<plugin-artifact-id>[:<plugin-version>]:<goal>. Available lifecycle phases are: validate, initialize, generate-sources, process-sources, generate-resources, process-resources, compile, process-classes, generate-test-sources, process-test-sources, generate-test-resources, process-test-resources, test-compile, process-test-classes, test, prepare-package, package, pre-integration-test, integration-test, post-integration-test, verify, install, deploy, pre-clean, clean, post-clean, pre-site, site, post-site, site-deploy. -> [Help 1]



$ vi pom.xml
<project ...>
  ...
  <dependencies>
  	...
  </dependencies>
  <build>
  	<defaultGoal>test</defaultGoal>
  </build>
</project>
/ Dit is alles wat nodig is,
$ mvn
...
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0

[INFO] BUILD SUCCESS

/ Maar we kunnen ook 	, see in samples/java_first_jaxws/pom.xml

	
$ vi pom.xml
...
 </dependencies>
 <build>
  	<defaultGoal>test</defaultGoal>
  	<plugins>
  		<plugin>
  			<groupId>org.codehaus.mojo</groupId>
  			<artifactId>exec-maven-plugin</artifactId>
  			<executions>
  				<execution>
  					<phase>test</phase>
  					<goals>
  						<goal>java</goal>
  					</goals>
  					<configuration>
  						<mainClass>my.Main</mainClass>
  					</configuration>
  				</execution>
  			</executions>
  		</plugin>
  	</plugins>
  </build>
</project>

$ vi src/main/java/my/Main.java
public class Main {

	public static void main(String[] args) {
		System.out.println("my.Main");

	}

}

/ Hij runs eerst de tests, zoals hierboven, en gaat daarna doen wat we configured door de test phase,

$ mvn

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running me.ATest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.048 sec

Results :

Tests run: 1, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] --- exec-maven-plugin:1.6.0:java (default) @ aaa ---
my.Main
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS

/ we kunnen NIET compile phase nemen ipv phase test,
<executions>
  				<execution>
  					<phase>compile</phase>
  					<goals>
  						<goal>java</goal>
  					</goals>
/ TODO

/ 7	. 

/ pom.xml in cxf's sample wsdl_first,

$ vi pom.xml

       <plugins>
            <plugin>
                <groupId>org.apache.cxf</groupId>
                <artifactId>cxf-codegen-plugin</artifactId>
                <version>${project.version}</version>
                <executions>
                    <execution>
                        <id>generate-sources</id>	
                        <phase>generate-sources</phase>		<- deze plugin wordt dus exec bij de generate-sources phase, en dat is helemaal voorin	, 
						
/ lees,
https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html
/ we zien Default lifecycle
validate
initialize
validate-sources




/ Einde MAVEN 

/ GRADLE

/ Lees,
https://gradle.org/install/

/ we maken \Program Files\Gradle en extract gradle-4.2.1 daarin,
/ we set de bin\ in path,


/ Einde GRADLE

/ HIBERNATE BUILD 

/ lees, 
https://stackoverflow.com/questions/10940981/git-how-to-create-a-new-branch-from-a-tag
$ git checkout -b new_branch v1.0
https://stackoverflow.com/questions/27962141/how-to-check-out-a-specific-tag-with-egit
/ TODO
/ Lukte niet, marketplace ook niet,

C:\Users\ervelden\java\hibernate-orm>git branch
* master

C:\Users\ervelden\java\hibernate-orm>git checkout -b branch_5.2.9 5.2.9
Switched to a new branch 'branch_5.2.9'

C:\Users\ervelden\java\hibernate-orm>git branch
* branch_5.2.9
  master
  
/ we hoeven voor build hibernate-orm geen gradle te install, want hibernate komt met een gradle, 
/ we zien alleen gradlew.bat, dus we doen,

C:\Users\ervelden\java\hibernate-orm>.\gradlew -v
Downloading https://services.gradle.org/distributions/gradle-3.2.1-bin.zip
..................................................................................................................................................................................................................................................................................................
Unzipping C:\Users\ervelden\.gradle\wrapper\dists\gradle-3.2.1-bin\erlz51pt56t1o6vc7t39cikug\gradle-3.2.1-bin.zip to C:\Users\ervelden\.gradle\wrapper\dists\gradle-3.2.1-bin\erlz51pt56t1o6vc7t39cikug

 ------------------------------------------------------------
Gradle 3.2.1
------------------------------------------------------------

Build time:   2016-11-22 15:19:54 UTC
Revision:     83b485b914fd4f335ad0e66af9d14aad458d2cc5

Groovy:       2.4.7
Ant:          Apache Ant(TM) version 1.9.6 compiled on June 29 2015
JVM:          1.8.0_144 (Oracle Corporation 25.144-b01)
OS:           Windows 7 6.1 amd64

/ google
hibernate-orm findbugstest hangs
/ lees,
https://discuss.gradle.org/t/gradle-1-7-findbugstest-hangs-forever/1100
/ doe,
C:\Users\ervelden\java\hibernate-orm>.\gradlew findbugsMain
/ OK
C:\Users\ervelden\java\hibernate-orm>.\gradlew --debug findbugsTest
09:16:58.688 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.
09:16:58.689 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.
09:16:58.689 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses regis
try.
/ je kunt ook --info

/ google
gradle Lock acquired Releasing lock on daemon addresses registry Waiting to acquire shared lock on daemon addresses registry


/ we hebben gradle project hibernate import in workspace-jbosstools-jee-oxygen-hibernate, en we hebben findbugs uit hibernate-core/gradle.build gehaald,

	apply plugin: 'findbugs'

	findbugs {
		sourceSets = [ subProject.sourceSets.main, subProject.sourceSets.test ]
		ignoreFailures = true
		toolVersion = '3.0.1'
		// for now we need to set this to low so that FindBugs will actually report the DM_CONVERT_CASE warning we care about
		reportLevel = 'low'
		// remove all low level bug warnings except DM_CONVERT_CASE
		excludeFilterConfig=resources.text.fromString(excludeAllLowLevelBugsExcept('DM_CONVERT_CASE'))
	}

	// exclude generated java sources and cfg package is a mess mainly from annotation stuff
	findbugsMain.doFirst {
		classes = classes.filter {
			!it.path.contains( 'org/hibernate/hql/internal/antlr' ) &&
					!it.path.contains( 'org/hibernate/boot/jaxb/cfg/spi' ) &&
					!it.path.contains( 'org/hibernate/sql/ordering/antlr/Generated' ) &&
					!it.path.contains( 'org/hibernate/sql/ordering/antlr/OrderByTemplateTokenTypes' ) &&
					!it.path.contains( 'org/hibernate/boot/jaxb/hbm/spi/Jaxb' ) &&
					!it.path.contains( 'org/hibernate/boot/jaxb/hbm/spi/Adapter' ) &&
					!it.path.contains( 'org/hibernate/boot/jaxb/hbm/spi/ObjectFactory' ) &&
					!it.path.contains( 'org/hibernate/cfg' ) &&
					!it.path.contains( '_\$logger' )
		}
	}

/ Deze hebben we rm, 
/ we doen op de command line,
C:\Users\ervelden\java\hibernate-orm>.\gradlew build

	
5590 tests completed, 8 failed, 242 skipped
:hibernate-core:test FAILED
:hibernate-core:buildDashboard

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':hibernate-core:test'.
> There were failing tests. See the report at: file:///C:/Users/ervelden/java/hibernate-orm/hibernate-core/target/reports/tests/
test/index.html

/ 13	. 

/ hoe doe je in buildship: .\gradlew findbugsMain
/ TODO 

/ wat doet build in buildship?
/ TODO 


/ 13	. 





/ Einde HIBERNATE BUILD

/ XMLSCHEMA 

/ 7	 .

/ lees, 
https://msdn.microsoft.com/en-us/library/ms256129(v=vs.110).aspx

/ maxOccurs="unbounded" betekent dat de entry er meerdere keren in mag staan: 
<items>
	<item/>
	<item/> 
	
	

/ Einde XMLSCHEMA 

/ MICROSOFT SQL BOEKEN

https://mva.microsoft.com/ebooks?lng=en-US
/ we hebben login create: ericjvandervelden@gmail, vlWalnoot27,

https://blogs.msdn.microsoft.com/mssmallbiz/2017/07/11/largest-free-microsoft-ebook-giveaway-im-giving-away-millions-of-free-microsoft-ebooks-again-including-windows-10-office-365-office-2016-power-bi-azure-windows-8-1-office-2013-sharepo/

/ we hebben 3 boeken set in 
C:\Users\ervelden\java\apache-cxf-3.2.0\samples\java_first_jaxws>dir "d:\Users\ervelden\Documents\My Documents\SQL"
...
25-10-2017  15:25         8.124.479 693883EBOOK.PDF
25-10-2017  15:09        16.876.840 Beginning T-SQL with Microsoft SQL Server 2005 and 2008.pdf
11-09-2017  11:14    <DIR>          Microsoft JDBC Driver 6.2 for SQL Server


/ Einde  MICROSOFT SQL BOEKEN

/ OPEN IN CHROME

@Singleton
http://docs.oracle.com/javaee/6/tutorial/doc/gipvi.html
https://stackoverflow.com/questions/36694311/wflyjpa0060-transaction-is-required-to-perform-this-operation-either-use-a-tra 
https://stackoverflow.com/questions/35808246/transaction-is-required-to-perform-this-operation-either-use-a-transaction-or-e
http://arquillian.org/guides/functional_testing_using_graphene/
https://docs.oracle.com/cd/E19798-01/821-1841/gipsz/index.html

https://github.com/bartoszmajsak/Beer-Advisor

http://arquillian.org/guides/testing_java_persistence/#assumptions
http://arquillian.org/guides/get_started_faster_with_forge/
https://stackoverflow.com/questions/32763989/arquillian-cant-inject-stateless-bean
http://docs.oracle.com/javaee/6/tutorial/doc/gjbbk.html							/ scopes
https://blogs.oracle.com/arungupta/totd-161:-java-ee-6-cdi-qualifiers-explained-default,-any,-new,-named / qualifiers
https://rmannibucau.wordpress.com/2015/03/10/cdi-and-startup/
https://github.com/tolis-e/arquillian-wildfly-example/blob/master/src/test/resources/arquillian.xml
https://github.com/arquillian/arquillian-examples/blob/master/arquillian-tutorial/pom.xml
http://www.jboss.org/schema/arquillian/arquillian_1_0.xsd
https://moelholm.com/2017/03/16/javaee-helloworld-kotlin/
https://stackoverflow.com/questions/16894032/how-to-use-poms-as-a-dependency-in-maven
https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html
http://arquillian.org/guides/getting_started/

https://tools.jboss.org/documentation/howto/forge.html
https://www.youtube.com/watch?v=HN3OcP2f6a8					/ microservices & wildfly swarm

https://github.com/javaee/tutorial-examples/blob/master/README.md

https://maven.apache.org/guides/introduction/introduction-to-the-pom.html
http://www.avajava.com/tutorials/lessons/how-do-i-display-the-value-of-a-property.html
https://stackoverflow.com/questions/586202/best-practices-for-copying-files-with-maven
https://stackoverflow.com/questions/11556170/how-to-invoke-maven-default-lifecycle			/ process-test-classes, test
https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference
http://www.mojohaus.org/exec-maven-plugin/examples/example-exec-for-java-programs.html
https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html
http://softwaremavens.blogspot.nl/2009/09/running-tests-from-maven-test-jar-in.html / process-test-classes
https://maven.apache.org/plugins/maven-compiler-plugin/examples/compile-using-different-jdk.html

https://superuser.com/questions/60173/how-to-search-inside-files-on-windows-7

https://docs.jboss.org/author/display/WFLY10/Application+deployment
https://stackoverflow.com/questions/32560358/arquillian-use-different-ports-for-the-managed-wildfly-container-than-a-norma / wildfly & ports
https://dzone.com/articles/cdi-di-p1
http://docs.jboss.org/weld/reference/latest/en-US/html/beanscdi.html#_session_beans	/ @Default, ...
https://abhirockzz.wordpress.com/2015/09/27/native-cdi-qualifiers-any-and-default/	/ @Default, ...
http://blog.dblevins.com/2012/11/cdi-when-to-break-out-ejbs.html
https://stackoverflow.com/questions/2351220/stateless-and-stateful-enterprise-java-beans?rq=1	/ @Stateful

https://stackoverflow.com/questions/7489510/disable-xml-validation-in-eclipse
https://www.eclipse.org/forums/index.php/t/204176/		/ tomcat & server crash	,

https://tomcat.apache.org/tomcat-7.0-doc/appdev/deployment.html#Web_Application_Deployment_Descriptor
https://tomcat.apache.org/tomcat-7.0-doc/config/context.html
http://tomcat.apache.org/tomcat-7.0-doc/config/host.html#Automatic_Application_Deployment
http://mrhaki.blogspot.com.es/2011/02/configure-log4j-on-tomcat.html

https://www.mkyong.com/maven/how-to-create-a-web-application-project-with-maven/

https://www.youtube.com/watch?v=AoDhQt8PtUQ	/ docker kubernetes openshift

http://gdpotter.com/2017/08/14/jaxb-gradle-config/
https://javaee.github.io/jaxb-v2/doc/user-guide/ch04.html		/ xjc

https://spring.io/guides/gs/producing-web-service/		/ Spring & soap
https://spring.io/guides/tutorials/bookmarks/	/ Spring & rest

http://docs.jboss.org/hibernate/orm/5.2/userguide/html_single/Hibernate_User_Guide.html#associations-many-to-one
https://docs.jboss.org/hibernate/orm/5.0/quickstart/html/#tutorial-native

https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html
http://www.oracle.com/technetwork/articles/java/ma14-java-se-8-streams-2177646.html
https://docs.oracle.com/javase/tutorial/displayCode.html?code=https://docs.oracle.com/javase/tutorial/java/javaOO/examples/Person.java
https://docs.oracle.com/javase/tutorial/java/javaOO/examples/MethodReferencesTest.java

https://www.youtube.com/watch?v=YJC6ldI3hWk / conda & anaconda
https://www.youtube.com/watch?v=3TT60EaeAHQ&list=PLG2vLZDgC_ZtmIBB5ERZE4EmMS__n_9GV&index=11	/ deeplearning ng,

https://docs.angularjs.org/guide/component
https://www.themarketingtechnologist.co/introduction-to-data-binding-in-angular-2-versus-angular-1/

https://www.youtube.com/watch?v=CPbvxxslDTU / OAuth2

https://docs.jboss.org/hibernate/orm/5.0/quickstart/html/#tutorial-native

https://www.linkedin.com/learning/building-a-full-stack-app-with-angular-2-plus-and-spring-boot/what-you-should-know-before-watching-this-course

/ Einde OPEN IN CHROME


/ SQUIRREL



/ Einde SQUIRREL


/ WILDFLY MAVEN PLUGIN

C:\Users\ervelden\wildfly-maven-plugin>git clone https://github.com/wildfly/wildfly-maven-plugin.git


/ Einde WILDFLY MAVEN PLUGIN

/ JDBC H2

C:\Users\ervelden\h2>java -classpath "\Program Files (x86)\H2\bin\h2-1.4.196.jar" org.h2.tools.Server -tcp
TCP server running at tcp://10.199.5.102:9092 (only local connections)

C:\Users\ervelden\h2>java -classpath "\Program Files (x86)\H2\bin\h2-1.4.196.jar" org.h2.tools.Shell
C:\Users\ervelden\h2>java -classpath "\Program Files (x86)\H2\bin\h2-1.4.196.jar" org.h2.tools.Shell -url jdbc:h2:./test -user sa -password ''
C:\Users\ervelden\h2>java -classpath "\Program Files (x86)\H2\bin\h2-1.4.196.jar" org.h2.tools.Shell -url jdbc:h2:tcp://localhost/~/h2/test -user sa -password ""

/ Met een tcp verbinding kun je multiple clients hebben , ook een met jdbc,

/ ~ is dus \Users\ervelden	,

Welcome to H2 Shell 1.4.196 (2017-06-10)
Exit with Ctrl+C
Commands are case insensitive; SQL statements end with ';'
help or ?      Display this help
list           Toggle result list / stack trace mode
maxwidth       Set maximum column width (default is 100)
autocommit     Enable or disable autocommit
history        Show the last 20 statements
quit or exit   Close the connection and exit

sql> commit false
Autocommit is now false

/ ws workspace-jbosstools-jee-oxygen
/ proj abcjdbch2
$ vi src/main/test/MyTest.java

package my;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;

import org.junit.After;
import org.junit.AfterClass;
import org.junit.Before;
import org.junit.BeforeClass;
import org.junit.Test;

import org.junit.Assert;

public class MyTest {
	
	private static Connection connection;
	
	@BeforeClass
	public static void classInit() throws Exception{
		Class.forName("org.h2.Driver");
		connection=DriverManager.getConnection("jdbc:h2:tcp://localhost/~/h2/test","sa","");
	}
	
	private Statement statement;
	
	@Before
	public void init() throws Exception{
		statement=connection.createStatement();
		statement.executeUpdate("create table if not exists first(s varchar(32))");
		statement.executeUpdate("insert into first values('foo')");
		statement.executeUpdate("insert into first values('bar')");

	}
	
	@Test
	public void test() throws Exception{
		ResultSet resultSet=statement.executeQuery("select count(*)from first");
		resultSet.next();
		int count=resultSet.getInt(1);
		Assert.assertEquals(2, count);
		
	}
	@Test
	public void test2()throws Exception	{
		
	}
	
	@After
	public void end()throws Exception{
		statement.executeUpdate("drop table first");
		statement.close();
		
		
	}
	@AfterClass
	public static void classEnd() throws Exception{
		connection.close();
	}
}

/ een PreparedStatement heeft setInt, ... methods,







/ Einde JDBC H2 




/ CDI EJB JSF MANAGED

/ Lees,
https://stackoverflow.com/questions/4684112/how-do-cdi-and-ejb-compare-interact
/ -> 
http://blog.dblevins.com/2012/11/cdi-when-to-break-out-ejbs.html

/ Lees,
https://stackoverflow.com/questions/2351220/stateless-and-stateful-enterprise-java-beans?rq=1

/ Lees,
https://abhirockzz.wordpress.com/2015/09/27/native-cdi-qualifiers-any-and-default/


/ Einde CDI EJB JSF MANAGED

/ SQL SERVER

/ Lees,
https://docs.microsoft.com/en-us/sql/linux/quickstart-install-connect-red-hat
https://docs.microsoft.com/en-us/sql/linux/sql-server-linux-overview

/ Lees,
https://docs.microsoft.com/en-us/sql/relational-databases/database-features
/ links zien we een menu, scroll naar beneden: Stored procedures	,






/ Einde SQL SERVER

/ MAVEN


/ SAMENVATTING SCOPE IN DEPENDENCIES


/ scopes in managed dependencies

/ workspace-jbosstools-jee-oxygen

/ eerst de 2 projecten,

/ 7	.

/ project abcmymgndeps

$ vi pom.xml

<project ...>
  <modelVersion>4.0.0</modelVersion>
  <groupId>my.own</groupId>
  <artifactId>abcmymgndeps</artifactId>
  <version>1.0</version>
</project>

$ vi A.java

package abcmymgndeps;

public class A {
	public String getResponse(String s) {
		return "Response for "+s+"!";
	}
}

/ we doen

$ mvn clean install

/ we zien,

C:\Users\ervelden\eclipse\jbosstools-jee-oxygen\eclipse>dir \Users\ervelden\.m2\repository\my\own\abcmymgndeps\1.0

13-09-2017  18:51             1.924 abcmymgndeps-1.0.jar
13-09-2017  18:50               350 abcmymgndeps-1.0.pom
13-09-2017  18:51               189 _remote.repositories

/ 7	. 

/ we maken 2 projects	, 
abcusemymgndepswithmain
abcusemymgndepswithtests

/ de packages blijven abcusemymgndeps heten	,

/  13	. 

/ want in abcusemymgndepswithtests\pom.xml

 <dependencies>
  	<dependency>
  		<groupId>my.own</groupId>
  		<artifactId>abcmymgndeps</artifactId>
  	</dependency>
  </dependencies>
  <dependencyManagement>
  	<dependencies>
		<dependency>
			<groupId>my.own</groupId>
			<artifactId>abcmymgndeps</artifactId>
			<version>1.0</version>
			<scope>test</scope>
		</dependency>
  	</dependencies>
  </dependencyManagement>

/ en daardoor kunnen we GEEN
$ Main.java

package abcmymgndeps;

import abcmymgndeps.A;

public class Main {
		private A a;

	public static void main(String[] args) {
		new Main();
	}

	public Main() {
		a=new A();
		String s=a.getResponse("Foo Bar");
		System.out.println(s);
		System.out.println(System.getProperty("java.class.path"));
	}
}

/ en dus kunnen we NIET	,
$ mvn clean test
/ want test komt langs compile, en gaat hij Main compile,

/ omdat <scope>test</scope> is van abcmymgndeps,
/ Bij compile:testCompile staat junit in het classpath, en bij run test, 
/ bij compile:compile staat junit NIET in het classpath, en daarom gaat het compile van Main.java mis,


 [INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ abcusemymgndepswithtests ---
[INFO] Deleting C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\abcusemymgndepswithtests\target
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ abcusemymgndepswithtests ---
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 0 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ abcusemymgndepswithtests ---
[INFO] Changes detected - recompiling the module!
[WARNING] File encoding has not been set, using platform encoding Cp1252, i.e. build is platform dependent!
[INFO] Compiling 1 source file to C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\abcusemymgndepswithtests\target\classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] /C:/Users/ervelden/eclipse/workspace-jbosstools-jee-oxygen/abcusemymgndepswithtests/src/main/java/abcusemymgndeps/Main.java:[3,20] package abcmymgndeps does not exist
[ERROR] /C:/Users/ervelden/eclipse/workspace-jbosstools-jee-oxygen/abcusemymgndepswithtests/src/main/java/abcusemymgndeps/Main.java:[6,25] cannot find symbol
  symbol:   class A
  location: class abcusemymgndeps.Main
[ERROR] /C:/Users/ervelden/eclipse/workspace-jbosstools-jee-oxygen/abcusemymgndepswithtests/src/main/java/abcusemymgndeps/Main.java:[13,23] cannot find symbol
  symbol:   class A
  location: class abcusemymgndeps.Main
[INFO] 3 errors 

/ 13	. 

/ Daarom RM we in abcusemymgndepswithtests Main.java, en hebben we alleen 

$ vi ATest.java

package abcusemymgndeps;

import java.lang.annotation.Annotation;

import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;

import abcmymgndeps.A;

public class ATest {
	
	private A a;
	
	@Before
	public void init() {
		a=new A();
		new Before() {
			
			public Class<? extends Annotation> annotationType() {
				// TODO Auto-generated method stub
				return null;
			}
		};
	}

	@Test
	public void test1() {
		Assert.assertEquals("Response for Foo Bar!", a.getResponse("Foo Bar"));
		System.out.println(System.getProperty("java.class.path"));
	}
	
	public static void main(String...args) {
		System.out.println("main");
	}
}

$ mvn clean test

[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ abcusemymgndepswithtests ---
[INFO] Deleting C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\abcusemymgndepswithtests\target
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ abcusemymgndepswithtests ---
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 0 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ abcusemymgndepswithtests ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ abcusemymgndepswithtests ---
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 0 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ abcusemymgndepswithtests ---
[INFO] Changes detected - recompiling the module!
[WARNING] File encoding has not been set, using platform encoding Cp1252, i.e. build is platform dependent!
[INFO] Compiling 1 source file to C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\abcusemymgndepswithtests\target\test-classes
[INFO] 
[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ abcusemymgndepswithtests ---
[INFO] Surefire report directory: C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\abcusemymgndepswithtests\target\surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running abcusemymgndeps.ATest
C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\abcusemymgndepswithtests\target\test-classes;C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\abcusemymgndepswithtests\target\classes;C:\Users\ervelden\.m2\repository\junit\junit\4.12\junit-4.12.jar;C:\Users\ervelden\.m2\repository\org\hamcrest\hamcrest-core\1.3\hamcrest-core-1.3.jar;C:\Users\ervelden\.m2\repository\my\own\abcmymgndeps\1.0\abcmymgndeps-1.0.jar;
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.057 sec

Results :

Tests run: 1, Failures: 0, Errors: 0, Skipped: 0

/ omdat <scope>test</scope> is van abcmymgndeps,
/ Bij compile:testCompile staat junit in het classpath, en bij run test, 
/ bij compile:compile staat junit NIET in het classpath, maar dat is hier niet erg , want er is niets te compile,

/ In abcmymgndepswithmain hebben we in pom.xml,

  <dependencyManagement>
  	<dependencies>
		<dependency>
			<groupId>my.own</groupId>
			<artifactId>abcmymgndeps</artifactId>
			<version>1.0</version>
			<scope>compile</scope>
		</dependency>
  	</dependencies>
	
/ en we hebben Main.java en ATest.java
/ we kunnen, 
$ mvn clean package
$ mvn exec:exec
/ en, 
$ mvn clean test
/ blijkbaar is abcmymgndeps.jar ook op het test classpath, als zijn scope compile is, en ook op het classpath bij run test, 

/ voor exec:exec hebben we 
$ vi abcmymgndepswithmain\pom.xml

  <build>
  	<plugins>
  		<plugin>
  			<groupId>org.codehaus.mojo</groupId>
  			<artifactId>exec-maven-plugin</artifactId>
  			<version>1.6.0</version>
  			<configuration>
  				<executable>java</executable>
  				<arguments>
  					<argument>-classpath</argument>
  					<!-- automatically creates the classpath using all project dependencies,
                 			also adding the project build directory -->
  					<classpath/>
  					<argument>abcusemymgndeps.Main</argument>
  				</arguments>
  			</configuration>
  		</plugin>

/ we zien bij exec:exec,
Response for Foo Bar!
C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\abcusemymgndepswithmain\target\classes;C:\Users\ervelden\.m2\repository\my\own\abcmymgndeps\1.0\abcmymgndeps-1.0.jar

/ Als we in abcusemymgndepswithmain's pom.xml in dependencyManagement scope test hebben bij abcmymgndeps, en we doen mvn clean package, dan ERR, want hij komt langs compile:compile en deze gaat Main.java compile, en om dat de scope van abcmymgndeps test is, staat abcmymgndeps.A NIET in compile's classpath, 
/ als we in <dependencies> de scope met compile overwrite die van <dependencyManagement> 	, dan is $ mvn clean package OK,
/ dus zo zien we dat de scope in <dependencyManagement wordt overgenomen in <dependencies> 	, tenzij hij wordt overwrite,

/ Einde SAMENVATTING SCOPE IN DEPENDENCIES

/ 7	. 

/ <dependencyManagement> -> <dependencies>


/ 13	. 

/ Maak run config abcusemymgndeps-clean-package-exec
clean package exec:exec

/ we moeten package ertussen (of verify)


/ 13	. 

/////////////////////////////////////////////////////////////////////////////////////////////////////////
/ als we in <dependencyManagement>'s <dependency> de scope set, geldt hij ook in <dependencies>	, en de version ook,

/ klopt,
/ lees,	
https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html
NOTE: In two of these dependency references, we had to specify the <type/> element. This is because the minimal set of information for matching a dependency reference against a dependencyManagement section is actually {groupId, artifactId, type, classifier}. In many cases, these dependencies will refer to jar artifacts with no classifier. This allows us to shorthand the identity set to {groupId, artifactId}, since the default for the type field is jar, and the default classifier is null.

/////////////////////////////////////////////////////////////////////////////////////////////////
/ als de type jar is hoeven we alleen : groupId, artifactId te geven in <dependencies>

/ we check of de scope in <dependencyManagement> gezien wordt in <dependencies> door verkeerde scope te nemen in <dependencyManagement> in bepaalde situaties, en zo te zien dat de fout inderdaad optreedt.


/ Lees,
https://moelholm.com/2017/03/16/javaee-helloworld-kotlin/


/ 7	. 

/ lees,
 https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference
 
 / lees,
 https://stackoverflow.com/questions/11556170/how-to-invoke-maven-default-lifecycle
 
 / default is een lifecycle, geen task,
 
/ 7	. 

/ Zoek uit profiles in eclipse's run config, en default in pom, 
/ TODO


/ Einde MAVEN

/ VAGRANT

/ lees,
https://www.vagrantup.com/docs/docker/basics.html
https://fedoramagazine.org/install-fedora-virtualbox-guest/   / fedora as a guest,


/ Einde VAGRANT

/ OPEN IN CHROME

/ 20170915

https://fedoramagazine.org/install-fedora-virtualbox-guest/
https://www.howtogeek.com/196158/how-to-create-and-run-virtual-machines-with-hyper-v/
https://www.vagrantup.com/intro/getting-started/providers.html
https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Arrays-and-matrices
https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html
https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html
https://jenkins.io/doc/pipeline/tour/getting-started/
http://www.mojohaus.org/exec-maven-plugin/examples/example-exec-for-java-programs.html
http://www.mojohaus.org/exec-maven-plugin/usage.html
https://howto.wildfly-swarm.io/use-a-bom/
https://www.youtube.com/watch?v=LDRbO9a6XPU&feature=push-u-sub&attr_tag=EAxBFEoFkru736zm-6 		/ machine learning !
https://stackoverflow.com/questions/11778276/difference-between-scope-import-and-pom-type-dependency
http://arquillian.org/guides/getting_started/
https://www.youtube.com/watch?v=AoDhQt8PtUQ			/ docker kubernetes openshift !
https://www.gitbook.com/book/jaceklaskowski/mastering-apache-spark/details
https://github.com/javaee/tutorial-examples/blob/master/README.md
https://www.youtube.com/watch?v=S1z50UbEdZw&t=38s				/ java ee microprofile & angular ! (ook docker )
http://www.mkyong.com/webservices/jax-ws/jax-ws-hello-world-example/
http://www.codejava.net/java-ee/web-services/java-web-services-binary-data-transfer-example-base64-encoding
http://www.codejava.net/java-ee/web-services/monitoring-soap-messages-using-tcpip-monitor-in-eclipse			/ TODO
https://www.mkyong.com/webservices/jax-ws/how-to-trace-soap-message-in-eclipse-ide/
https://www.soapui.org/getting-started/10-tips-for-the-soapui-beginner.html
https://github.com/wildfly/quickstart/tree/10.x/helloworld-ws
https://javaee.github.io/glassfish/doc/4.0/quick-start-guide.pdf
https://javaee.github.io/glassfish/doc/4.0/installation-guide.pdf
http://www.oracle.com/technetwork/java/javaee/documentation/javaee7sdk-install-1957708.html#install		/ glassfish download
https://docs.oracle.com/javaee/7/tutorial/jaxws001.htm#BNAYW		/ jax-ws tutorial uses wsimport to generate ...
http://axis.apache.org/axis2/java/core/docs/installationguide.html
http://gdpotter.com/2017/08/14/jaxb-gradle-config/
https://javaee.github.io/jaxb-v2/doc/user-guide/ch04.html
https://spring.io/guides/gs/producing-web-service/					/ spring-ws
http://docs.jboss.org/hibernate/orm/5.2/userguide/html_single/Hibernate_User_Guide.html#associations-many-to-one	/ hibernate docs
http://forge.jboss.org/documentation
https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html		/ TODO 
http://www.oracle.com/technetwork/articles/java/ma14-java-se-8-streams-2177646.html
https://spring.io/guides/tutorials/bookmarks/											/ rest in spring
https://tools.jboss.org/documentation/howto/forge.html / ga naar https://tools.jboss.org/documentation/howto/ : openshift, ...
https://www.youtube.com/watch?v=HN3OcP2f6a8 	/ microservices & wildfly-swarm,
https://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html
https://docs.oracle.com/javase/tutorial/displayCode.html?code=https://docs.oracle.com/javase/tutorial/java/javaOO/examples/RosterTest.java
https://docs.oracle.com/javase/tutorial/java/javaOO/examples/MethodReferencesTest.java
https://docs.oracle.com/javase/tutorial/displayCode.html?code=https://docs.oracle.com/javase/tutorial/java/javaOO/examples/Person.java
https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html
https://www.youtube.com/watch?v=YJC6ldI3hWk										/ install anaconda
https://www.youtube.com/watch?v=3TT60EaeAHQ&list=PLG2vLZDgC_ZtmIBB5ERZE4EmMS__n_9GV&index=11  		/ deep learning ng,
https://www.youtube.com/watch?v=CPbvxxslDTU				/ OAuth2 !
https://www.themarketingtechnologist.co/introduction-to-data-binding-in-angular-2-versus-angular-1/   / !
file:///C:/Users/ervelden/my-ng-apps/angular1/index.html			/ heros !
https://docs.jboss.org/hibernate/orm/5.0/quickstart/html/#tutorial-native
https://docs.angularjs.org/guide/component
https://medium.com/towards-data-science/back-propagation-414ec0043d7		/ back propagation
https://www.linkedin.com/learning/building-a-full-stack-app-with-angular-2-plus-and-spring-boot/working-with-the-exercise-files
https://www.youtube.com/watch?v=sbPSjI4tt10&t=1859s		/ josh long spring boot
https://spring.io/guides/gs/accessing-data-jpa/#initial



/ Einde OPEN IN CHROME

/ R PROGRAM

/ Lees,
https://cran.r-project.org/doc/manuals/r-release/R-intro.html

/ 13	. 

/ vector -> matrix

> v<-c(1,11,13,7)
> mean(v)
[1] 8
> dim(v)<-c(2,2)
> v
     [,1] [,2]
[1,]    1   13
[2,]   11    7

/ column first,	 
c(1,11,13,7) betekent dat 1,11 de 1ste column is,

> v[1,]
[1]  1 13
> v[,1]
[1]  1 11


/ 13	. 




/ Einde R PROGRAM


/ OPEN

LOG_angular.txt

\Users\ervelden\forge / src code forge,
C:\Users\ervelden\forge>findstr /s /c:"java-new-method" *.*

[workspace-jbosstools-jee-oxygen]$ forge

C:\Users\ervelden\bin\glassfish4\bin>

C:\Users\ervelden\jaxws\wsimport>

C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\wildfly-swarm-examples\datasource\datasource-auto-detect>dir src

C:\Users\ervelden\.m2\repository\org\wildfly>notepad++ swarm\jaxrs-jaxb\2017.8.1\jaxrs-jaxb-2017.8.1.pom

C:\Users\ervelden\bin\curl-7.55.0-win64-mingw\bin>

pgAdmin

/ deze hadden we open in SoapUI,
C:\Users\ervelden>dir jaxws
14-09-2017  21:13            10.040 Getting-Started-soapui-project.xml
...

sysinternals/downloads/process-explorer

RGui

https://docs.python.org/3.6/tutorial/index.html / python tutorial in installer , 
https://docs.python.org/3.6/index.html		/ docs,

/ open in notepad++	,
C:\Users\ervelden\forge\core\javaee\tests\src\test\java\org\jboss\forge\addon\javaee\jaxws\ui\JAXWSNewServiceCommandTest.java
C:\Program Files\Apache Software Foundation\Tomcat 8.5\conf\tomcat-users.xml
C:\Users\ervelden\eclipse\workspace-java-oxygen\joshlongvideoext\src\main\java\my\own\firstspringboot\FirstspringbootApplication.java
C:\Users\ervelden\.m2\repository\org\wildfly\swarm\bom-all\2017.8.1\bom-all-2017.8.1.pom
C:\Users\ervelden\bin\glassfish4\docs\javaee-tutorial\examples\jaxws\helloservice-war\src\main\java\javaeetutorial\helloservice\Hello.java
C:\Users\ervelden\jaxws\wsimport\org\bookstorews2\soap\HelloWorld_Service.java
C:\Users\ervelden\bin\glassfish4\glassfish\bin\appclient.bat
C:\Users\ervelden\forge\core\parser-java\tests\src\test\java\org\jboss\forge\addon\parser\java\ui\methods\JavaNewMethodCommandTest.java





/ Einde OPEN


/ PYTHON

/ we download van
https://www.python.org/downloads/windows/
Windows x86-64 executable installer
 
/ wat is 
Windows x86-64 web-based installer
/ TODO

\Users\ervelden\AppData\Local\Programs\Python\Python36
Install launcher for all users (recommended) 				/ TODO


/ Lees,
https://docs.python.org/3.6/tutorial/index.html

/ Einde PYTHON 

/ R

/ van,
https://cran.r-project.org/bin/windows/base/

/ we download,
Download R 3.4.1 for Windows (75 megabytes, 32/64 bit)

C:\Program Files\R\R-3.4.1

Start Menu Folder: R

Create desktop icon
Save version number in registry 		/ TODO
Associate R with .RData files				/ TODO










 

/ Einde R


/ ANDROID

g.co/InstantApps
cloud.google.com/vision
playground.tensorflow.org
cloud.google.com/ml-engine
cloud.google.com/tpu				/ tensorflow hardware




/ Einde ANDROID

/ POSTGRESQL

/ we hebben download,
Managing rights in PostgreSQL


/ ga naar,
https://www.postgresql.org/download
/ click Windows,
https://www.postgresql.org/download/windows/

/ we zien 2 installers, van EDB en van BigSQL
/ we nemen die van EDB,

C:\Program Files\PostgreSQL\9.6
C:\Program Files\PostgreSQL\9.6\data
/ password superuser: vi_lang17				/ gegeven in installer !
/ port 5432
/ locale English, United States

/ Daarna Stack Builder, 
/ TODO

/ we zien op, over Hadoop en BigSQL,
https://www.postgresql.org/download
/ TODO

C:\Program Files\PostgreSQL\9.6>dir bin
...
29-08-2017  06:26            95.232 pg_ctl.exe
29-08-2017  06:26           439.296 pg_dump.exe
...
29-08-2017  06:24         6.492.672 postgres.exe
29-08-2017  06:26           471.040 psql.exe

C:\Program Files\PostgreSQL\9.6>dir bin
 Volume in drive C is System
 Volume Serial Number is 90D0-8A5A

 Directory of C:\Program Files\PostgreSQL\9.6\bin

29-08-2017  06:26           439.296 pg_dump.exe
29-08-2017  06:26           124.416 pg_dumpall.exe
29-08-2017  06:26           195.584 pg_restore.exe
29-08-2017  06:24         6.492.672 postgres.exe
29-08-2017  06:26           471.040 psql.exe

C:\Program Files\PostgreSQL\9.6> dir data

04-09-2017  15:49             4.110 pg_hba.conf
04-09-2017  15:49            22.986 postgresql.conf

C:\Program Files\PostgreSQL\9.6>dir "pgAdmin 4\bin

29-08-2017  06:30           242.176 pgAdmin4.exe

/ 7	. 

C:\Program Files\PostgreSQL\9.6>bin\psql.exe
Password:
psql: FATAL:  password authentication failed for user "ERVELDEN"

/ we start pgAdmin4,
C:\Program Files\PostgreSQL\9.6>"pgAdmin 4\bin\pgAdmin4.exe"

/ we moeten password geven voor user "postgres", de superuser, dat is vi_lang17



///////////////////////////////////////////////////////

/ lees,
https://www.postgresql.org/docs/9.5/static/sql-createuser.html

/ onderscheid privileges van roles zoals createdb of login, en privileges op databases zoals insert, delete, ...
/ Maakt het uit wie de database maakt, postgres of eric, als eric alle privileges heeft op die database?
/ TODO

postgres=# create role eric login createdb password 'vi_lang17';
/ en 


postgres=# begin;
BEGIN
postgres=# create role eric login createdb password 'vi_lang17';
CREATE ROLE
postgres=# commit;
COMMIT

postgres=# create user eric password 'vi_lang17';
CREATE ROLEpostgres=# \du
                                   List of roles
 Role name |                         Attributes                         | Member of
-----------+------------------------------------------------------------+-----------
 eric      | create DB                                                  | {}
 postgres  | Superuser, Create role, Create DB, Replication, Bypass RLS | {}

postgres=# drop user if exists eric;

postgres=# create user ervelden password 'vi_lang17';
postgres=# \q

C:\Program Files\PostgreSQL\9.6>bin\psql -Uervelden postgres				/ dit kan dus!
/ OK
C:\Program Files\PostgreSQL\9.6>bin\psql -UERVELDEN postgres
Password for user ERVELDEN:
psql: FATAL:  password authentication failed for user "ERVELDEN"
/ TODO

/ Dus het heeft geen zin om user ervelden te maken in postgres, omdat we wilden doen
$ psql
/ Hij probeert in te loggen als ERVELDEN, maar in postgres is er ervelden,
/ TODO toch,

$ psql -Uervelden
/ is WEL OK,

/ 13	. 

/ case in postgres	,

/ 1313	. 

/ lees,
https://stackoverflow.com/questions/20878932/are-postgresql-column-names-case-sensitive

All identifiers (including column names) that are not double-quoted are folded to lower case in PostgreSQL. Column names that were created with double-quotes and thereby retained upper-case letters (and/or other syntax violations) have to be double-quoted for the rest of their life. So, yes, PostgreSQL column names are case-sensitive:

SELECT * FROM persons WHERE "first_Name" = 'xyz';
Also fix the incorrect double-quotes around 'xyz'. Values (string literals) are enclosed in single quotes.

/ lees https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS

My standing advice is to use legal, lower-case names exclusively so double-quoting is not needed

/ 1313	. 

/ Lees,
https://www.postgresql.org/message-id/20100419202037.GL6733%40alvh.no-ip.org


> When creating a user (via CREATE USER/ROLE), the username you choose is not
> case sensitive (e.g. nEWuSer is saved as newuser). However, the command
> line arguments for psql ARE case sensitive. This means that if I create a
> user like newUser, then try to log into postgres via psql as newUser,
> I'll be told the the role doesn't exist. Then, when I log into postgres as
> an existing user and try to re-create the role newUser, postgres will tell
> me that the role already exists -- a frustrating cycle.

Right.  This is because of a mixture of trying to adhere to the SQL
standard (which mandates that unquoted identifiers are case-folded) and				/ case-folded is naar lower case set
convenience of usafe of the shell command line.  The strict solution would
be to case-fold unquoted identifiers passed as arguments to psql, so
you'd be required to type something like
psql \"nEWuSer\"
to be able to log in as such a user -- otherwise the quotes would be
stripped by the shell.  However, this is so inconvenient that it has
been dumped in favor of not doing case-folding of idenfiers in shell
command line arguments, regardless of quoting.

In short, not a bug ...

grant all privileges on database db_name to someuser;
/ TODO

/ 13	.

/ in ~/.psqlrc
\set AUTOCOMMIT off 
/ TODO

/ je kunt ook altijd
begin;
...
commit;postgres=# begin

postgres-# ;
BEGIN
postgres=# drop user ervelden;
DROP ROLE
postgres=# \du
                                   List of roles
 Role name |                         Attributes                         | Member of
-----------+------------------------------------------------------------+-----------
 postgres  | Superuser, Create role, Create DB, Replication, Bypass RLS | {}


postgres=# rollback;
ROLLBACK
postgres=# \du
                                   List of roles
 Role name |                         Attributes                         | Member of
-----------+------------------------------------------------------------+-----------
 ervelden  |                                                            | {}
 postgres  | Superuser, Create role, Create DB, Replication, Bypass RLS | {}

/ 1313. 

https://www.postgresql.org/docs/9.6/static/catalogs.html
/ system tables,

C:\Program Files\PostgreSQL\9.6>bin\psql -Upostgres

postgres=# \du
                                   List of roles
 Role name |                         Attributes                         | Member of
-----------+------------------------------------------------------------+-----------
 ervelden  |                                                            | {}
 postgres  | Superuser, Create role, Create DB, Replication, Bypass RLS | {}
 
postgres=# \x
Expanded display is on.

postgres=# select*from pg_user;
-[ RECORD 1 ]+---------
usename      | postgres
usesysid     | 10
usecreatedb  | t
usesuper     | t
userepl      | t
usebypassrls | t
passwd       | ********
valuntil     |
useconfig    |
-[ RECORD 2 ]+---------
usename      | ervelden
usesysid     | 16395
usecreatedb  | f
usesuper     | f
userepl      | f
usebypassrls | f
passwd       | ********
valuntil     |
useconfig    |

/ 13	. 

/ Lees 
https://github.com/cockroachdb/cockroach/issues/8862

/ 13	. 

C:\Program Files\PostgreSQL\9.6>bin\psql -Uervelden postgres
postgres=> \dt
No relations found.
/ TODO Afmaken. WH kan ervelden wel tables in db postgres maken,

/ 13	. 

C:\Program Files\PostgreSQL\9.6>bin\psql -Upostgres
postgres=# create database test;
CREATE DATABASE
postgres=# begin;
BEGIN
postgres=# create database foo;
ERROR:  CREATE DATABASE cannot run inside a transaction block
postgres=# rollback;
ROLLBACK
postgres=#

/ 7	. 

\l
\dp  
\ddp

/ 13	. 

https://www.postgresql.org/docs/9.6/static/sql-grant.html
/ betekenis van alle permissions,
postgres=CTc/postgres: aan postgres (links) is gegeven CTc permissions door postgres (rechts) 
=CTc/postgres : public krijgt de CTc permissions van postgres,

/ 13	. 

postgres=# create database test;
postgres=# revoke all privileges on database test from public;
postgres=# \l
                                                 List of databases
   Name    |  Owner   | Encoding |          Collate           |           Ctype            |   Access privileges
-----------+----------+----------+----------------------------+----------------------------+-----------------------
 postgres  | postgres | UTF8     | English_United States.1252 | English_United States.1252 |
 template0 | postgres | UTF8     | English_United States.1252 | English_United States.1252 | =c/postgres          +
           |          |          |                            |                            | postgres=CTc/postgres
 template1 | postgres | UTF8     | English_United States.1252 | English_United States.1252 | =c/postgres          +
           |          |          |                            |                            | postgres=CTc/postgres
 test      | postgres | UTF8     | English_United States.1252 | English_United States.1252 | postgres=CTc/postgres
 
(4 rows)postgres=# \c test eric
Password for user eric:
FATAL:  permission denied for database "test"
DETAIL:  User does not have CONNECT privilege.
Previous connection kept

postgres=# grant all privileges on database test to public;
GRANT
postgres=# \l
                                                 List of databases
   Name    |  Owner   | Encoding |          Collate           |           Ctype            |   Access privileges
-----------+----------+----------+----------------------------+----------------------------+-----------------------
 postgres  | postgres | UTF8     | English_United States.1252 | English_United States.1252 |
 template0 | postgres | UTF8     | English_United States.1252 | English_United States.1252 | =c/postgres          +
           |          |          |                            |                            | postgres=CTc/postgres
 template1 | postgres | UTF8     | English_United States.1252 | English_United States.1252 | =c/postgres          +
           |          |          |                            |                            | postgres=CTc/postgres
 test      | postgres | UTF8     | English_United States.1252 | English_United States.1252 | postgres=CTc/postgres+
           |          |          |                            |                            | =CTc/postgres
(4 rows)

 the default privileges granted to PUBLIC are as follows: CONNECT and CREATE TEMP TABLE for databases;
 
postgres=# grant connect,temporary on database test to public;
GRANT
postgres=# \l
                                                 List of databases
   Name    |  Owner   | Encoding |          Collate           |           Ctype            |   Access privileges
-----------+----------+----------+----------------------------+----------------------------+-----------------------
 postgres  | postgres | UTF8     | English_United States.1252 | English_United States.1252 |
 template0 | postgres | UTF8     | English_United States.1252 | English_United States.1252 | =c/postgres          +
           |          |          |                            |                            | postgres=CTc/postgres
 template1 | postgres | UTF8     | English_United States.1252 | English_United States.1252 | =c/postgres          +
           |          |          |                            |                            | postgres=CTc/postgres
 test      | postgres | UTF8     | English_United States.1252 | English_United States.1252 | postgres=CTc/postgres+
           |          |          |                            |                            | =Tc/postgres
(4 rows)

postgres=# revoke all privileges on database test from public;
postgres=# grant connect on database test to public;
postgres=# \c test eric
Password for user eric:
test=>  create temporary table you(i int);
ERROR:  permission denied to create temporary tables in database "test"

postgres=# grant temporary on database test to public;
GRANT
postgres=# \c test eric
Password for user eric:
test=>  create temporary table you(i int);
CREATE TABLE

postgres=# \c - postgres
test=# create schema sch1;
CREATE SCHEMA
test=# create schema sch2 authorization postgres;     / TODO authorization
CREATE SCHEMA
test=# \c - eric
test=> create table sch1.foo(i int);
ERROR:  permission denied for schema sch1



/ 13	. 

/ we zijn default in public schema, dus als we
# creat table foo(...) 
/ dan doen we 
# create table public.foo(...)

test=> \c - postgres
test=>  \dn+
                          List of schemas
  Name  |  Owner   |  Access privileges   |      Description
--------+----------+----------------------+------------------------
 public | postgres | postgres=UC/postgres+| standard public schema
        |          | =UC/postgres         |

/ Hier staat dat public mag create in schema public 	, logisch	,

test=> \c - postgres
test=# revoke create on schema public from public;
test=# \dn+
                          List of schemas
  Name  |  Owner   |  Access privileges   |      Description
--------+----------+----------------------+------------------------
 public | postgres | postgres=UC/postgres+| standard public schema
        |          | =U/postgres          |                                  -- C is weg,
		
test=# \c - eric
test=> create table y(i int);
ERROR:  permission denied for schema public

/ 13	. 

/ schema's , ook public , gaan per database:

test=> \c - postgres
test=# create database foo;                     -- nieuwe database
test=# \c foo
foo=# \dn+
                          List of schemas
  Name  |  Owner   |  Access privileges   |      Description
--------+----------+----------------------+------------------------
 public | postgres | postgres=UC/postgres+| standard public schema
        |          | =UC/postgres         |                             -- C is er, dus public kan een table create in schema public in database foo
(1 row)

/ 1313	. 

/ we kunnen <database>.<schema>.<table> geven, maar tussen databases kan het niet dus <database>. is overbodig, heeft toch geen zin,

foo=> create table foo.public.my(i int);
CREATE TABLE
foo=> create table test.public.my(i int);
ERROR:  cross-database references are not implemented: "test.public.my"
LINE 1: create table test.public.my(i int);

/ 13	.

/ de default privileges for a database are cT

test=# revoke all privileges on schema sch1 from public;
REVOKE
test=# grant create on schema sch1 to public;
GRANT
test=# \dn+
                          List of schemas
  Name  |  Owner   |  Access privileges   |      Description
--------+----------+----------------------+------------------------
 public | postgres | postgres=UC/postgres+| standard public schema
        |          | =U/postgres          |
 sch1   | postgres | postgres=UC/postgres+|
        |          | =C/postgres          |

		
/ 13	. 

/ CTc op database,

/ T is create temporary table, en zo'n table zit WH niet in een schema, dus staat deze privilege bij database ipv schema,

/ C op database : create schema in database,

You are now connected to database "test" as user "postgres".
test=# revoke create on database test from public;
REVOKE
test=# \c - eric
test=> create schema sch ;
ERROR:  permission denied for database test

/ c is connect to database, public kan connect to test database,

/ 13	. 

You are now connected to database "test" as user "postgres".

/ de tables zien we met \dt, de privileges op de tables met \dp	,

test=# \dp+
                             Access privileges
 Schema | Name  | Type  | Access privileges | Column privileges | Policies
--------+-------+-------+-------------------+-------------------+----------
 public | first | table |                   |                   |
(1 row)


test=# revoke all privileges on table first from public;
REVOKE
test=# grant all privileges on table first to public;
GRANT
test=# \dp
                             Access privileges
 Schema | Name  | Type  | Access privileges | Column privileges | Policies
--------+-------+-------+-------------------+-------------------+----------
 public | first | table | eric=arwdDxt/eric+|                   |
        |       |       | =arwdDxt/eric     |                   |
(1 row)

test=# revoke all privileges on table first from public;
REVOKE
test=# grant select on table first to public;
GRANT

test=# \dp
                             Access privileges
 Schema | Name  | Type  | Access privileges | Column privileges | Policies
--------+-------+-------+-------------------+-------------------+----------
 public | first | table | eric=arwdDxt/eric+|                   |
        |       |       | =r/eric           |                   |
		
/ eric is de owner van table first, vandaar dat we eric zien met al zijn privileges,

/ Heeft public default privileges op table first, of niet?
/ TODO


test=# grant create on schema public  to public;       -- je wilt dat public een table kan maken in schema test.public 
GRANT
test=# \dn+
                          List of schemas
  Name  |  Owner   |  Access privileges   |      Description
--------+----------+----------------------+------------------------
 public | postgres | postgres=UC/postgres+| standard public schema
        |          | =UC/postgres         |
		
/ wat we gaan doen is postgres een table laten maken, en de public privileges restrict op deze,	

test=# \c - postgres
test=# create table second(i int);

test=# revoke all privileges on table second from public;
REVOKE
test=# grant select on table second to public;
GRANT
test=# grant insert on table second to eric;
GRANT
test=# \dp
                                 Access privileges
 Schema |  Name  | Type  |     Access privileges     | Column privileges | Policies
--------+--------+-------+---------------------------+-------------------+----------
 public | first  | table | eric=arwdDxt/eric        +|                   |
        |        |       | =r/eric                   |                   |
 public | second | table | postgres=arwdDxt/postgres+|                   |
        |        |       | =r/postgres              +|                   |
        |        |       | eric=a/postgres           |                   |
		
test=# \c - eric
test=> select*from second;           -- eric kan dit , want public kan dit,
 i
---
(0 rows)
test=> insert into second values(7);  -- eric kan dit 
INSERT 0 1
test=> delete from second;            -- eric en public kunnen dit niet,
ERROR:  permission denied for relation second

/ 13	. 

PostgreSQL grants default privileges on some types of objects to PUBLIC. No privileges are granted to PUBLIC by default on tables, columns, schemas or tablespaces. For other types, the default privileges granted to PUBLIC are as follows: CONNECT and CREATE TEMP TABLE for databases; 
/ TODO

/ lees,
https://stackoverflow.com/questions/11012441/postgresql-user-privilege-for-a-particular-database
https://dba.stackexchange.com/questions/117109/how-to-manage-default-privileges-for-users-on-a-database-vs-schema


/ 7	. 

postgres=# \c - eric
Password for user eric:

/ 13	. 

/ lees,
https://stackoverflow.com/questions/8146849/how-to-make-prepare-transaction-work -- over prepare transaction

/ 13	. 

test=> prepare myins(int)as insert into first values($1);
PREPARE
test=> execute myins(7);
INSERT 0 1
test=> select*from first
test-> ;
 i
---
 7


/ Einde POSTGRESQL



/ C++

https://stackoverflow.com/questions/35859942/the-difference-between-raii-and-smart-pointers-in-c

/ Einde C++


/ MAVEN

/ Lees,
https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html

/ Einde MAVEN

/ TENSORFLOW

/ kijk,
https://www.youtube.com/watch?v=mWl45NkFBOc&t=4s

TensorFlow Serving,
/ ze use bazel, see,
https://bazel.build/
$ bazel build //tensorflow_serving/example...

/ kijk deep learning course with tensorflow,
https://www.youtube.com/watch?v=MotG3XI2qSs


Tensorboard:
Embedding Visualizer

/ 13	. 

/ kijk tensorflow,
https://www.youtube.com/watch?v=2zWSr-3gkWY&feature=push-u-sub&attr_tag=ftTplRhOkaUYNpGX-6

/ rond 8:30: back propagation=matrix calculation

/ Einde TENSORFLOW

/ CHROME

/ Kijk over module in js,
https://www.youtube.com/watch?v=2vJm1Gfn0ng






/ Einde CHROME

/ TOMCAT 

/ we hebben tomcat installed as a service in windows, 
/ control panel, admininstrative tools, services
/ we zien Tomcat started, 
/ straks gaan we hem hier stop, want we willen Tomcat in eclipse start,

/ we gaan eerst tomcat-users.xml edit,	
$ ls \Program Files\Apache...\Tomcat 7.0\conf
Catalina\
catalina.policy
catalina.properties
context.xml
logging.properties
server.xml
tomcat-users.xml
web.xml

/ we moeten de tomcat config files in notepad++ edit,
$ vi tomcat-users.xml
<user username="tomcat" password="s3cret" roles="manager-gui" />

/ we hoeven GEEN,
<role rolename="manager-gui"/>







/ ws workspace-jbosstools-jee-oxygen, 
/ Maven project abctomcatappl, packaging: war
///////////////////////////////////////////////////////////////
/ Belangrijk: packaging war, want dan zien we in eclipse JAX-WS Web services, Java Resources, ... , maar ook kun je dan:
/ right click project, Run as, Run on Server, 


/ we zien dat tomcat7 servlet 3.0 impl	,
http://tomcat.apache.org/whichversion.html


/ Lees,
https://www.mkyong.com/maven/how-to-create-a-web-application-project-with-maven/

/ we maken een source folder, 
src/main/webapp
/ en daarin een folder WEB-INF/,

/ we maken,
$ vi src/main/webapp/index.jsp

<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
	<h1>Foo Bar</h1>
</body>
</html>

$ vi src/main/webapp/WEB-INF/web.xml

<web-app xmlns="http://java.sun.com/xml/ns/javaee"
	      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	      xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
	      http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
	      version="3.0">
</web-app>

/ voor plugins hoeven we geen versie te geven: deze plugins zitten al in maven TODO (maven-compiler-plugin is zo, maar andere ook ?)
/ Maar het mag wel, en deze wordt dan genomen	, bijv bij maven-compiler-plugin,

/ in pom: <packaging>war</packaging>
/ doe $ mvn package; we zien war file,
/ copy naar Tomcat,

http://localhost:8080/abctomcatappl-0.0.1-SNAPSHOT/
Foo Bar

/ dit was tomcat as a service,

/ 13	. 

/ we willen Tomcat start in eclipse, 

/ we maken een server config,
/ we zien in procexp,
/ shift+ctrl en click End	,
"C:\Program Files\Java\jdk1.8.0_144\bin\javaw.exe" -agentlib:jdwp=transport=dt_socket,suspend=y,address=localhost:55448 "-Dcatalina.base=C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\.metadata\.plugins\org.eclipse.wst.server.core\tmp0" "-Dcatalina.home=C:\Program Files\Apache Software Foundation\Tomcat 7.0" "-Dwtp.deploy=C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps" "-Djava.endorsed.dirs=C:\Program Files\Apache Software Foundation\Tomcat 7.0\endorsed" -Dfile.encoding=Cp1252 -classpath "C:\Program Files\Apache Software Foundation\Tomcat 7.0\bin\bootstrap.jar;C:\Program Files\Apache Software Foundation\Tomcat 7.0\bin\tomcat-juli.jar;C:\Program Files\Java\jdk1.8.0_144\lib\tools.jar" org.apache.catalina.startup.Bootstrap start

/ we zien in 
C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\.metadata\.plugins\org.eclipse.wst.server.core\tmp0
conf
logs
temp
webapps
work
wtpwebapps



/ Maar Tomcat7.exe in de tomcat's bin\ werkt OK,
/ ook abctomcatappl-0.0.1-SNAPSHOT/	, dat komt omdat we deze hebben deployed, in webapps/
/ ook kunnen we in /manager/html
/ Geef ctlr+C om te stoppen,

/ 7	. 

/ we zien nu ook een ERR in index.jsp, we doen,

$ vi pom.xml 

  <dependencies>
  	<dependency>
	    <groupId>javax.servlet</groupId>
	    <artifactId>javax.servlet-api</artifactId>
	    <version>4.0.0</version>
	</dependency>
  </dependencies>
  
  
 / we doen 	, 
 right click abctomcatappl, Run as , run on server,
 / kies onze Tomcat Server config (choose an existing server)	, we zien Configured: abctomcatappl, Finish, 
 / we zien in eclipse, in Window, Web Browser: Internal Web browser, 
 / klopt: Als we Finish geven, verschijnt er in eclipse de internal web browser, maar we kunnen ook in chrome, 
 http://localhost:8080/abctomcatappl/
 
 / 13	. 
 
  /we maken een 2de webapp, Maven project abctomcatappl2	, en we set meteen <packaging>war,
  /we zien dat pom om web.xml vraagt	, omdat we war hebben, 
  / we maken src folder, src/main/webapp, en daarin WEB-INF/web.xml en de fout uit de pom verdwijnt,	
  
/ 13	. 

/ als je in de Server view right click de Tomcatv7.0 server at localhost , dan zien we 
Add and Remove
/ Hiermee kun je applicaties deploy, of undeploy, 
/ we hebben deployed, 
abctomcatappl
abctomcatappl2

/ we kunnen geven, 
http://localhost:8080/abctomcatappl/
http://localhost:8080/abctomcatappl2/
/ maar NIET	,
http://localhost:8080

/ de catalina.base = C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\.metadata\.plugins\org.eclipse.wst.server.core\tmp0
/ dit is de server,

C:\Program Files\Apache Software Foundation\Tomcat 7.0>dir C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\.metadata\
plugins\org.eclipse.wst.server.core\tmp0

19-09-2017  16:09    <DIR>          conf
19-09-2017  16:09    <DIR>          logs
19-09-2017  21:01    <DIR>          temp
19-09-2017  16:09    <DIR>          webapps
19-09-2017  16:09    <DIR>          work
19-09-2017  21:01    <DIR>          wtpwebapps

/ Kijk in eclipse in de server config naar 'Open launch configuration', en daar zie je bij arguments de preciese context's base,
-Dcatalina.base="C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\.metadata\.plugins\org.eclipse.wst.server.core\tmp0"

$ vi .../tmp0/conf/server.xml

	<Context docBase="C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\ROOT" path="" reloadable="false"/>
	<Context docBase="C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\abctomcatappl" path="/abctomcatappl" reloadable="true" source="org.eclipse.jst.jee.server:abctomcatappl"/>
	<Context docBase="C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\abctomcatappl2" path="/abctomcatappl2" reloadable="true" source="org.eclipse.jst.jee.server:abctomcatappl2"/>
   </Host>
  </Engine>
 </Service>
</Server>

/ 7	. 

/ we oefenen met context.xml, 
/ we maken Maven war appl abctomcatappl3, en doen normale" deployment, niet via eclipse, 

/ we doen $ mvn clean package
/ we zien target/ in eclipse abctomcatappl3-1.0/ en die kunnen we bekijken , met META-INF/	, 
/ we copy abctomcatappl3-1.0.war naar tomcat's webapp/
/ geef 
http://localhost:8080/abctomcatappl3-1.0/
My You

/ 13	. 

/ we edit Tomcat's server.xml,
/ we set er een <Context> in,

$ vi c:\Program Files\Apache Software Foundation\Tomcat 7.0\conf\server.xml

     <Host name="localhost"  appBase="webapps"
            unpackWARs="true" autoDeploy="true">

		...
			   
		<Context docBase="C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\abctomcatappl3\target\abctomcatappl3-1.0" path="/abctomcatappl3alt"/>

      </Host>
    </Engine>
  </Service>
</Server>

/ restart Tomcat 		// MOET	,

/ Geef	,
http://localhost:8080/abctomcatappl3alt/
/ OK

/ 13	. 

/ Als we in Tomcat's server.xml,

<Host appBase="webapps" ...>
	<Context docBase="abctomcatappl3\target\abctomcatappl3-1.0" path="/abctomcatappl3alt2"/>
	
/ dan ERR	, want 	,
java.lang.IllegalArgumentException: Document base C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\abctomcatappl3\
target\abctomcatappl3-1.0 does not exist or is not a readable directory

/ klopt, het is in mijn eclipse's ws	, 
C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\abctomcatappl3\target\abctomcatappl3-1.0" path="/abctomcatappl3alt


/ 13	. 

/ als mvn clean niet lukt, als hij in target\ abctomcatappl3-1.0\ niet kan rm, hebben we misschien een command line open op target\abctomcatappl3-1.0 	,

/ 13	. 

$ vi src/main/resources/META-INF/context.xml
<Context 
	docBase="C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\abctomcatappl3\target\abctomcatappl3-1.0" 
	path="/abctomcatappl3alt"/>
	
/ deze wordt:  target\abctomcatappl3-1.0\WEB-INF\classes\META-INF\context.xml

///////////////////////
/ dus src/main/resources komt naast src/main/java in WEB-INF\classes	,

/ Geef
http://localhost:8080/abctomcatappl3alt
/ NEE	, 

/ HIER HIER HIER 

/ 13	. 

$ vi src/main/webapp/META-INF/context.xml
<Context 
	docBase="C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\abctomcatappl3\target\abctomcatappl3-1.0" 
	path="/abctomcatappl3alt"/>
	
/ alles in src/main/webapp komt in de root, dus in target\abctomcatappl3-1.0\ 	, 
/ dus deze META-INF komt naast WEB-INF	,

/ Geef
http://localhost:8080/abctomcatappl3alt
/ NEE	,

/ 13	. 

/ we hebben deze context.xml in Tomcat's conf\Catalina\localhost,

/ Geef
http://localhost:8080/abctomcatappl3alt
/ NEE	,





	
	




/ 13	. 

/ In tomcat's base's conf/server.xml zien we in <Host> GEEN <Context>s	, 
/ Via eclipse, in de base in  conf/server.xml zien we <Context>s in <Host>

      <Context docBase="C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\ROOT" path="" reloadable="false"/><Context docBase="C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\abctomcatappl" path="/abctomcatappl" reloadable="true" source="org.eclipse.jst.jee.server:abctomcatappl"/><Context docBase="C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\abctomcatappl2" path="/abctomcatappl2" reloadable="true" source="org.eclipse.jst.jee.server:abctomcatappl2"/></Host>









  
 / 7	. 
 

 / lees, over tomcat en stop machine,	
https://www.eclipse.org/forums/index.php/t/204176/
 
 
  

/ 7	. 

/ LOGGING IN TOMCAT/ 

/ Lees,
https://tomcat.apache.org/tomcat-7.0-doc/logging.html
https://tomcat.apache.org/tomcat-7.0-doc/appdev/deployment.html
http://mrhaki.blogspot.nl/2011/02/configure-log4j-on-tomcat.html


/ 7	. 

/als we catalina.bat in \Program Files\ tomcat 8	,
"C:\Program Files\Java\jdk1.8.0_144\bin\java.exe"  -Djava.util.logging.config.file="C:\Program Files\Apache Software Foundation\Tomcat 8.5\conf\logging.properties" -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager  "-Djdk.tls.ephemeralDHKeySize=2048" -Djava.protocol.handler.pkgs=org.apache.catalina.webresources   -classpath "C:\Program Files\Apache Software Foundation\Tomcat 8.5\bin\bootstrap.jar;C:\Program Files\Apache Software Foundation\Tomcat 8.5\bin\tomcat-juli.jar" -Dcatalina.base="C:\Program Files\Apache Software Foundation\Tomcat 8.5" -Dcatalina.home="C:\Program Files\Apache Software Foundation\Tomcat 8.5" -Djava.io.tmpdir="C:\Program Files\Apache Software Foundation\Tomcat 8.5\temp" org.apache.catalina.startup.Bootstrap  start

/ 7	. 

/ we install tomcat 7 in \Users\ervelden\bin,




/ Einde LOGGING IN TOMCAT

/ MAVEN

/ wat we altijd zagen als de goals war:war, compile:testCompile zijn plugin execs:
$ mvn clean package
[DEBUG] Goal:          org.apache.maven.plugins:maven-clean-plugin:2.5:clean (default-clean)
[DEBUG] Goal:          org.apache.maven.plugins:maven-resources-plugin:2.6:resources (default-resources)
[DEBUG] Goal:          org.apache.maven.plugins:maven-compiler-plugin:3.1:compile (default-compile)
[DEBUG] Goal:          org.apache.maven.plugins:maven-resources-plugin:2.6:testResources (default-testResources)
[DEBUG] Goal:          org.apache.maven.plugins:maven-compiler-plugin:3.1:testCompile (default-testCompile)
[DEBUG] Goal:          org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test (default-test)
[DEBUG] Goal:          org.apache.maven.plugins:maven-war-plugin:2.2:war (default-war)

/ 13	. 

/ Hoe de war te copy naar tomcat's webapp/?

/ in eclipse, Window, Preferences, Run/Debug, console
Limit console output: uncheck

/ lees,
https://stackoverflow.com/questions/586202/best-practices-for-copying-files-with-maven
<project>
  [...]
  <build>
    <plugins>
      [...]
      <plugin>
        <artifactId>maven-antrun-plugin</artifactId>
        <executions>
          <execution>
            <phase>deploy</phase>
            <configuration>
              <tasks>

                <!--
                  Place any Ant task here. You can add anything
                  you can add between <target> and </target> in a
                  build.xml.
                -->

              </tasks>
            </configuration>
            <goals>
              <goal>run</goal>	<!-- de goal dus antrun:run -->
            </goals>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
  [...]
</project>

/ Lees, 
http://www.avajava.com/tutorials/lessons/how-do-i-display-the-value-of-a-property.html

/ ws workspace-jbosstools-jee-oxygen
/ project abctomcatappl3

$ vi pom.xml
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>my.own</groupId>
  <artifactId>abctomcatappl3</artifactId>
  <version>1.0</version>
  <packaging>war</packaging>
  <dependencies>
  	<dependency>
	    <groupId>javax.servlet</groupId>
	    <artifactId>javax.servlet-api</artifactId>
	    <version>4.0.0</version>
	</dependency>
  </dependencies>
  <build>
  	<plugins>
  		<plugin>
  			<groupId>org.apache.maven.plugins</groupId>
  			<artifactId>maven-compiler-plugin</artifactId>
  			<version>3.7.0</version>
  			<configuration>
  				<source>1.8</source>
  				<target>1.8</target>
  			</configuration>
  		</plugin>
  		<plugin>
  			<groupId>org.apache.maven.plugins</groupId>
  			<artifactId>maven-antrun-plugin</artifactId>
  			<version>1.8</version>
  			<executions>
  				<execution>
  					<phase>validate</phase>
  					<goals>
  						<goal>run</goal>
  					</goals>
  					<configuration>
  						<tasks>
  							<echo>[testproperty] ${testproperty}</echo>
  							<echo>[basedir] ${basedir}</echo>
  							<echo>[project.build.directory] ${project.build.directory}</echo>
  							<echo>[project.build.testOutputDirectory] ${project.build.testOutputDirectory}</echo>
  							<echo>[project] ${project}</echo>
  							<echo>[localRepository] ${localRepository}</echo>
  							<echo>[project.resources] ${project.resources}</echo>
  							<echo>[project.build.sourceEncoding]${project.build.sourceEncoding}</echo>
							<echo>[project.server.config] ${project.server.config}</echo>
  						</tasks>
  					</configuration>
  				</execution>
  			</executions>
  		</plugin>
  	</plugins>
  </build>
  <properties>
  	<testproperty>This is a test property</testproperty>
  </properties>
</project>



/ we doen in eclipse, 
$ mvn clean package

[DEBUG] Lifecycle default -> [validate, initialize, generate-sources, process-sources, generate-resources, process-resources, compile, process-classes, generate-test-sources, process-test-sources, generate-test-resources, process-test-resources, test-compile, process-test-classes, test, prepare-package, package, pre-integration-test, integration-test, post-integration-test, verify, install, deploy]
[DEBUG] Lifecycle clean -> [pre-clean, clean, post-clean]
[DEBUG] Lifecycle site -> [pre-site, site, post-site, site-deploy]

[DEBUG] Goal:          org.apache.maven.plugins:maven-clean-plugin:2.5:clean (default-clean)
[DEBUG] Goal:          org.apache.maven.plugins:maven-antrun-plugin:1.8:run (default)
<configuration>
  <exportAntProperties default-value="false"/>
  <failOnError default-value="true"/>
  <localRepository>${localRepository}</localRepository>
  <pluginArtifacts>${plugin.artifacts}</pluginArtifacts>
  <project default-value="${project}"/>
  <skip default-value="false">${maven.antrun.skip}</skip>
  <sourceRoot>${sourceRoot}</sourceRoot>
  <tasks>
    <echo>[testproperty] This is a test property</echo>
    <echo>[basedir] C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\abctomcatappl3</echo>
    <echo>[project.build.directory] C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\abctomcatappl3\target</echo>
    <echo>[project.build.testOutputDirectory] C:\Users\ervelden\eclipse\workspace-jbosstools-jee-oxygen\abctomcatappl3\target\test-classes</echo>
    <echo>[project] ${project}</echo>
    <echo>[localRepository] ${localRepository}</echo>
    <echo>[project.resources] ${project.resources}</echo>
    <echo>[project.build.sourceEncoding]${project.build.sourceEncoding}</echo>
	<echo>[project.server.config] ${project.server.config}</echo>
  </tasks>
  <testSourceRoot>${testSourceRoot}</testSourceRoot>
  <versionsPropertyName default-value="maven.project.dependencies.versions"/>
</configuration>
[DEBUG] Goal:          org.apache.maven.plugins:maven-resources-plugin:2.6:resources (default-resources)
...
/ we zien dat ${project} niet expands	, 
/ TODO 

/ 7	. 

/ Lees,
https://maven.apache.org/plugins/maven-resources-plugin/examples/copy-resources.html

https://stackoverflow.com/questions/586202/best-practices-for-copying-files-with-maven
/ we zien,
<copy file="src/main/resources/config.properties" tofile="${project.server.config}/config.properties"/>

/ maar hierboven expands project.server.config niet, 
/ TODO







/ Einde MAVEN 


/ Einde TOMCAT 

/ CUDA

https://www.youtube.com/watch?v=1cHx1baKqq0
https://www.youtube.com/watch?v=IzU4AVcMFys
https://www.youtube.com/watch?v=dv2TvTXQ4FQ&t=160s	/ svg
https://www.youtube.com/watch?v=QfNvhPx5Px8
https://www.youtube.com/watch?v=cAICT4Al5Ow&t=62s

http://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html


/ Einde CUDA
